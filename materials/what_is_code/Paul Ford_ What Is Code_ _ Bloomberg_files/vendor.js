!function o(s,a,u){function c(e,t){if(!a[e]){if(!s[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(l)return l(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=a[e]={exports:{}};s[e][0].call(i.exports,function(t){return c(s[e][1][t]||t)},i,i.exports,o,s,a,u)}return a[e].exports}for(var l="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e,r){e.exports=function(t){return t&&t.__esModule?t:{default:t}}},{}],2:[function(t,d,f){(function(t){"use strict";Object.defineProperty(f,"__esModule",{value:!0});var e=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t};function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){for(var n=!0;n;){var i=t,o=e,s=r;n=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,r=s,n=!0,a=c=void 0}}var r,o="undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null,m=(r=o)&&r.__esModule?r:{default:r},s=m.default.getComponent("Component"),a=m.default.getComponent("ControlBar"),u=m.default.getComponent("Button"),c=!1,l=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,u),e(h,[{key:"initializeApi",value:function(){var t,e,r,n=window.navigator&&window.navigator.userAgent||"";if((m.default.browser.IS_CHROME||/CriOS/i.test(n))&&!m.default.browser.IS_EDGE&&"undefined"!=typeof chrome)return chrome.cast&&chrome.cast.isAvailable?(m.default.log("Cast APIs are available"),e=this.options_.appId||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,r=new chrome.cast.SessionRequest(e),t=new chrome.cast.ApiConfig(r,this.sessionJoinedListener.bind(this),this.receiverListener.bind(this)),chrome.cast.initialize(t,this.onInitSuccess.bind(this),this.castError.bind(this))):(m.default.log("Cast APIs not available"),this.tryingReconnect<10&&(this.setTimeout(this.initializeApi,1e3),++this.tryingReconnect),void m.default.log("Cast APIs not available. Max reconnect attempt"))}},{key:"castError",value:function(t){var e={code:t.code,message:t.description};switch(t.code){case chrome.cast.ErrorCode.API_NOT_INITIALIZED:case chrome.cast.ErrorCode.EXTENSION_MISSING:case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:case chrome.cast.ErrorCode.INVALID_PARAMETER:case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:case chrome.cast.ErrorCode.SESSION_ERROR:case chrome.cast.ErrorCode.CHANNEL_ERROR:case chrome.cast.ErrorCode.TIMEOUT:this.addClass("error");break;case chrome.cast.ErrorCode.CANCEL:break;default:this.player_.error(e)}return m.default.log("Cast Error: "+JSON.stringify(t))}},{key:"onInitSuccess",value:function(){return c?this.show():this.hide(),this.apiInitialized=!0}},{key:"sessionJoinedListener",value:function(t){return t.media.length&&(this.apiSession=t,this.onMediaDiscovered(t.media[0])),console.log("Session joined")}},{key:"receiverListener",value:function(t){return"available"===t?(c=!0,this.show()):(c=!1,this.hide())}},{key:"doLaunch",value:function(){return m.default.log("Cast video: "+this.player_.cache_.src),this.apiInitialized?chrome.cast.requestSession(this.onSessionSuccess.bind(this),this.castError.bind(this)):m.default.log("Session not initialized")}},{key:"onSessionSuccess",value:function(t){var e=void 0,r=void 0,n=void 0,i=void 0,o=void 0,s=void 0;this.apiSession=t;var a=this.player_.cache_.src,u=this.player_.currentType();if(m.default.log("Session initialized: "+t.sessionId+" source : "+a+" type : "+u),(i=new chrome.cast.media.MediaInfo(a,u)).metadata=new chrome.cast.media.GenericMediaMetadata,this.options_.playerOptions.chromecast.metadata)for(r in o=this.options_.playerOptions.chromecast.metadata)s=o[r],i.metadata[r]=s;var c=this.player().poster();c&&(e=new chrome.cast.Image(c),i.metadata.images=[e]);var l=this.player().textTracks(),h=this.player().remoteTextTrackEls(),d=[],f=0,p=void 0,g=void 0,v=0,y=void 0;if(l){for(f=0;f<l.length;f++)g=l.tracks_[f],p=h&&h.trackElements_&&h.trackElements_[f],v++,(y=new chrome.cast.media.Track(v,chrome.cast.media.TrackType.TEXT)).trackContentId=p?p.src:"caption_"+g.language,y.subtype=chrome.cast.media.TextTrackType.CAPTIONS,y.name=g.label,y.language=g.language,y.customData=null,d.push(y);i.textTrackStyle=new chrome.cast.media.TextTrackStyle,i.textTrackStyle.foregroundColor="#FFFFFF",i.textTrackStyle.backgroundColor="#00000060",i.textTrackStyle.edgeType=chrome.cast.media.TextTrackEdgeType.DROP_SHADOW,i.textTrackStyle.windowType=chrome.cast.media.TextTrackWindowType.ROUNDED_CORNERS}try{if(l=this.player().audioTracks())for(f=0;f<l.length;f++)g=l.tracks_[f],v++,(y=new chrome.cast.media.Track(v,chrome.cast.media.TrackType.AUDIO)).subtype=null,y.name=g.label,y.language=g.language,y.customData=null,d.push(y)}catch(t){m.default.log("get player audioTracks fail"+t)}d.length&&(i.tracks=d),(n=new chrome.cast.media.LoadRequest(i)).autoplay=!0,n.currentTime=this.player_.currentTime(),this.apiSession.loadMedia(n,this.onMediaDiscovered.bind(this),this.castError.bind(this)),this.apiSession.addUpdateListener(this.onSessionUpdate.bind(this))}},{key:"onMediaDiscovered",value:function(t){this.player_.loadTech_("Chromecast",{type:"cast",apiMedia:t,apiSession:this.apiSession}),this.casting=!0,this.inactivityTimeout=this.player_.options_.inactivityTimeout,this.player_.options_.inactivityTimeout=0,this.player_.userActive(!0),this.addClass("connected"),this.removeClass("error")}},{key:"onSessionUpdate",value:function(t){if(this.player_.apiMedia)return t?void 0:this.onStopAppSuccess()}},{key:"stopCasting",value:function(){return this.apiSession.stop(this.onStopAppSuccess.bind(this),this.castError.bind(this))}},{key:"onStopAppSuccess",value:function(){this.casting=!1;var t=this.player_.currentTime();return this.removeClass("connected"),this.player_.src(this.player_.options_.sources),this.player_.paused()||this.player_.one("seeked",function(){return this.player_.play()}),this.player_.currentTime(t),this.player_.options_.inactivityTimeout=this.inactivityTimeout,this.apiSession=null}},{key:"buildCSSClass",value:function(){return"vjs-chromecast-button "+i(Object.getPrototypeOf(h.prototype),"buildCSSClass",this).call(this)}},{key:"handleClick",value:function(){return i(Object.getPrototypeOf(h.prototype),"handleClick",this).call(this),this.casting?this.stopCasting():this.doLaunch()}}]),h);function h(t,e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),i(Object.getPrototypeOf(h.prototype),"constructor",this).call(this,t,e),this.hide(),this.initializeApi(),e.appId=t.options_.chromecast.appId,(t.chromecast=this).on(t,"loadstart",function(){r.casting&&r.apiInitialized&&r.onSessionSuccess(r.apiSession)}),this.on(t,"dispose",function(){r.casting&&r.apiSession&&r.apiSession.stop(null,null)})}l.prototype.tryingReconnect=0,l.prototype.inactivityTimeout=2e3,l.prototype.controlText_="Chromecast",a.prototype.options_.children.splice(a.prototype.options_.children.length-1,0,"chromeCastButton"),s.registerComponent("ChromeCastButton",l),f.default=l,d.exports=f.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(i,o,s){(function(t){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(s,"__esModule",{value:!0});function r(t){this.addChild("Chromecast",t)}var n=e("undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null);e(i("./videojs-chromecast"));(n.default.registerPlugin||n.default.plugin)("chromecast",r),s.default=r,o.exports=s.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./videojs-chromecast":5}],4:[function(t,a,u){(function(t){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var e=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t};function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){for(var n=!0;n;){var i=t,o=e,s=r;n=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,r=s,n=!0,a=c=void 0}}var r,i="undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null,l=(r=i)&&r.__esModule?r:{default:r},o=(l.default.getComponent("Component"),l.default.getComponent("Tech")),s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,o),e(h,[{key:"createEl",value:function(){return l.default.createEl("div",{id:this.options_.techId,className:"vjs-tech vjs-tech-chromecast"})}},{key:"update",value:function(){this.el_.innerHTML='<div class="casting-image" style="background-image: url(\''+this.options_.poster+'\')"></div><div class="casting-overlay"><div class="casting-information"><div class="casting-icon"></div><div class="casting-description"><small>'+this.localize("CASTING TO")+"</small><br>"+this.receiver+"</div></div></div>"}},{key:"onSessionUpdate",value:function(t){if(this.apiMedia)return t?void 0:this.onStopAppSuccess()}},{key:"onStopAppSuccess",value:function(){this.stopTrackingCurrentTime(),this.apiMedia=null}},{key:"onMediaStatusUpdate",value:function(){if(this.apiMedia)switch(this.apiMedia.playerState){case chrome.cast.media.PlayerState.BUFFERING:this.trigger("waiting");break;case chrome.cast.media.PlayerState.IDLE:this.trigger("timeupdate"),this.trigger("ended");break;case chrome.cast.media.PlayerState.PAUSED:this.trigger("pause"),this.paused_=!0;break;case chrome.cast.media.PlayerState.PLAYING:this.trigger("playing"),this.trigger("play"),this.paused_=!1}}},{key:"src",value:function(t){}},{key:"currentSrc",value:function(){if(this.apiMedia)return this.apiMedia.media.contentId}},{key:"handleAudioTracksChange",value:function(){var t=[],e=this.textTracks(),r=this.audioTracks();if(r){for(var n=0;n<r.length;n++)r[n].enabled&&t.push(n+1+e.length);return this.apiMedia&&t.length?(this.tracksInfoRequest=new chrome.cast.media.EditTracksInfoRequest(t),this.apiMedia.editTracksInfo(this.tracksInfoRequest,this.onTrackSuccess.bind(this),this.onTrackError.bind(this))):void 0}}},{key:"handleVideoTracksChange",value:function(){}},{key:"handleTextTracksChange",value:function(){var t=[],e=this.textTracks();if(e){for(var r=0;r<e.length;r++)"showing"===e[r].mode&&t.push(r+1);return this.apiMedia&&t.length?(this.tracksInfoRequest=new chrome.cast.media.EditTracksInfoRequest(t),this.apiMedia.editTracksInfo(this.tracksInfoRequest,this.onTrackSuccess.bind(this),this.onTrackError.bind(this))):void 0}}},{key:"onTrackSuccess",value:function(){return l.default.log("track added")}},{key:"onTrackError",value:function(t){return l.default.log("Cast track Error: "+JSON.stringify(t))}},{key:"castError",value:function(t){return l.default.log("Cast Error: "+JSON.stringify(t))}},{key:"play",value:function(){if(this.apiMedia)return this.paused_&&this.apiMedia.play(null,this.mediaCommandSuccessCallback.bind(this,"Playing: "+this.apiMedia.sessionId),this.castError.bind(this)),this.paused_=!1}},{key:"pause",value:function(){if(this.apiMedia)return this.paused_?void 0:(this.apiMedia.pause(null,this.mediaCommandSuccessCallback.bind(this,"Paused: "+this.apiMedia.sessionId),this.castError.bind(this)),this.paused_=!0)}},{key:"paused",value:function(){return this.paused_}},{key:"ended",value:function(){return"FINISHED"===chrome.cast.media.IdleReason}},{key:"currentTime",value:function(){return this.apiMedia?this.apiMedia.getEstimatedTime():0}},{key:"setCurrentTime",value:function(t){if(!this.apiMedia)return 0;var e=void 0;return(e=new chrome.cast.media.SeekRequest).currentTime=t,this.apiMedia.seek(e,this.onSeekSuccess.bind(this,t),this.castError.bind(this))}},{key:"onSeekSuccess",value:function(t){l.default.log("seek success"+t)}},{key:"volume",value:function(){return this.volume_}},{key:"duration",value:function(){return this.apiMedia?this.apiMedia.media.duration||1/0:0}},{key:"controls",value:function(){return!1}},{key:"setVolume",value:function(t,e){var r=!(arguments.length<=1||void 0===e)&&e,n=void 0,i=void 0;if(this.apiMedia)return(i=new chrome.cast.Volume).level=t,i.muted=r,this.volume_=i.level,this.muted_=r,(n=new chrome.cast.media.VolumeRequest).volume=i,this.apiMedia.setVolume(n,this.mediaCommandSuccessCallback.bind(this,"Volume changed"),this.castError.bind(this)),this.trigger("volumechange")}},{key:"mediaCommandSuccessCallback",value:function(t){l.default.log(t)}},{key:"muted",value:function(){return this.muted_}},{key:"setMuted",value:function(t){return this.setVolume(this.volume_,t)}},{key:"supportsFullScreen",value:function(){return!1}},{key:"resetSrc_",value:function(t){t()}},{key:"dispose",value:function(){this.resetSrc_(Function.prototype),c(Object.getPrototypeOf(h.prototype),"dispose",this).call(this,this)}},{key:"seeking",value:function(){return!1}},{key:"seekable",value:function(){return!1}},{key:"playbackRate",value:function(){return 1}}]),h);function h(t,e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),c(Object.getPrototypeOf(h.prototype),"constructor",this).call(this,t,e),this.apiMedia=this.options_.source.apiMedia,this.apiSession=this.options_.source.apiSession,this.receiver=this.apiSession.receiver.friendlyName;var n=this.onMediaStatusUpdate.bind(this),i=this.onSessionUpdate.bind(this);this.apiMedia.addUpdateListener(n),this.apiSession.addUpdateListener(i),this.on("dispose",function(){r.apiMedia.removeUpdateListener(n),r.apiSession.removeUpdateListener(i),r.onMediaStatusUpdate(),r.onSessionUpdate(!1)});var o,s,a,u=this.textTracks();u&&(o=r.handleTextTracksChange.bind(r),u.addEventListener("change",o),r.on("dispose",function(){u.removeEventListener("change",o)}),r.handleTextTracksChange());try{(u=this.audioTracks())&&(s=r.handleAudioTracksChange.bind(r),u.addEventListener("change",s),r.on("dispose",function(){u.removeEventListener("change",s)}))}catch(t){l.default.log("get player audioTracks fail"+t)}try{(u=this.videoTracks())&&(a=r.handleVideoTracksChange.bind(r),u.addEventListener("change",a),r.on("dispose",function(){u.removeEventListener("change",a)}))}catch(t){l.default.log("get player videoTracks fail"+t)}this.update(),this.triggerReady()}s.prototype.paused_=!1,s.prototype.options_={},s.prototype.timerStep=1e3,s.isSupported=function(){return!0},o.withSourceHandlers(s),s.nativeSourceHandler={},s.nativeSourceHandler.canPlayType=function(t){return/^application\/(?:dash\+xml|(x-|vnd\.apple\.)mpegurl)/i.test(t)?"probably":/^video\/(mpd|mp4|webm|m3u8)/i.test(t)?"maybe":""},s.nativeSourceHandler.canHandleSource=function(t){return t.type?s.nativeSourceHandler.canPlayType(t.type):t.src?s.nativeSourceHandler.canPlayType(t.src):""},s.nativeSourceHandler.handleSource=function(t,e){e.src(t.src)},s.nativeSourceHandler.dispose=function(){},s.registerSourceHandler(s.nativeSourceHandler),s.prototype.featuresVolumeControl=!0,s.prototype.featuresPlaybackRate=!1,s.prototype.movingMediaElementInDOM=!1,s.prototype.featuresFullscreenResize=!1,s.prototype.featuresTimeupdateEvents=!1,s.prototype.featuresProgressEvents=!1,s.prototype.featuresNativeTextTracks=!0,s.prototype.featuresNativeAudioTracks=!0,s.prototype.featuresNativeVideoTracks=!1,l.default.options.chromecast={},o.registerTech("Chromecast",s),u.default=s,a.exports=u.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(s,a,u){(function(t){"use strict";Object.defineProperty(u,"__esModule",{value:!0});function e(t){return t&&t.__esModule?t:{default:t}}var r=e("undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null),n=(e(s("./component/control-bar/chromecast-button")),e(s("./tech/chromecast")),r.default.getComponent("Component")),i=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,n),o);function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),function(t,e,r){for(var n=!0;n;){var i=t,o=e,s=r;n=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,r=s,n=!0,a=c=void 0}}(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,t,e)}i.prototype.options_={},r.default.options.children.push("chromecast"),r.default.addLanguage("en",{"CASTING TO":"WIEDERGABE AUF"}),r.default.addLanguage("de",{"CASTING TO":"WIEDERGABE AUF"}),r.default.addLanguage("it",{"CASTING TO":"PLAYBACK SU"}),r.default.addLanguage("fr",{"CASTING TO":"CAST EN COURS SUR"}),n.registerComponent("Chromecast",i),u.default=i,a.exports=u.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./component/control-bar/chromecast-button":2,"./tech/chromecast":4}],6:[function(t,e,r){var n,i;n=window,i=function(){return n={},i.m=r=[function(t,e,r){var l=r(2),h=r(18).f,d=r(13),f=r(14),p=r(116),g=r(159),v=r(73);t.exports=function(t,e){var r,n,i,o,s,a=t.target,u=t.global,c=t.stat;if(r=u?l:c?l[a]||p(a,{}):(l[a]||{}).prototype)for(n in e){if(o=e[n],i=t.noTargetGet?(s=h(r,n))&&s.value:r[n],!v(u?n:a+(c?".":"#")+n,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;g(o,i)}(t.sham||i&&i.sham)&&d(o,"sham",!0),f(r,n,o,t)}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(r,t,e){(function(t){function e(t){return t&&t.Math==Math&&t}r.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof t&&t)||Function("return this")()}).call(this,e(114))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){var n=r(3);t.exports=function(t){if(!n(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,r){"use strict";function n(t){return a(t)&&u(I,c(t))}var i,o=r(6),s=r(2),a=r(3),u=r(11),c=r(56),l=r(13),h=r(14),d=r(9).f,f=r(32),p=r(57),g=r(7),v=r(69),y=s.DataView,m=y&&y.prototype,_=s.Int8Array,b=_&&_.prototype,T=s.Uint8ClampedArray,E=T&&T.prototype,S=_&&f(_),w=b&&f(b),A=Object.prototype,k=A.isPrototypeOf,C=g("toStringTag"),x=v("TYPED_ARRAY_TAG"),R=!(!s.ArrayBuffer||!y),P=R&&!!p&&"Opera"!==c(s.opera),L=!1,I={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(i in I)s[i]||(P=!1);if((!P||"function"!=typeof S||S===Function.prototype)&&(S=function(){throw TypeError("Incorrect invocation")},P))for(i in I)s[i]&&p(s[i],S);if((!P||!w||w===A)&&(w=S.prototype,P))for(i in I)s[i]&&p(s[i].prototype,w);if(P&&f(E)!==w&&p(E,w),o&&!u(w,C))for(i in L=!0,d(w,C,{get:function(){return a(this)?this[x]:void 0}}),I)s[i]&&l(s[i],x,i);R&&p&&f(m)!==A&&p(m,A),t.exports={NATIVE_ARRAY_BUFFER:R,NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_TAG:L&&x,aTypedArray:function(t){if(n(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(p){if(k.call(S,t))return t}else for(var e in I)if(u(I,i)){var r=s[e];if(r&&(t===r||k.call(r,t)))return t}throw TypeError("Target is not a typed array constructor")},exportProto:function(t,e,r){if(o){if(r)for(var n in I){var i=s[n];i&&u(i.prototype,t)&&delete i.prototype[t]}w[t]&&!r||h(w,t,r?e:P&&b[t]||e)}},exportStatic:function(t,e,r){var n,i;if(o){if(p){if(r)for(n in I)(i=s[n])&&u(i,t)&&delete i[t];if(S[t]&&!r)return;try{return h(S,t,r?e:P&&_[t]||e)}catch(t){}}for(n in I)!(i=s[n])||i[t]&&!r||h(i,t,e)}},isView:function(t){var e=c(t);return"DataView"===e||u(I,e)},isTypedArray:n,TypedArray:S,TypedArrayPrototype:w}},function(t,e,r){var n=r(1);t.exports=!n(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,r){var n=r(2),i=r(54),o=r(69),s=r(161),a=n.Symbol,u=i("wks");t.exports=function(t){return u[t]||(u[t]=s&&a[t]||(s?a:o)("Symbol."+t))}},function(t,e,r){var n=r(25),i=Math.min;t.exports=function(t){return 0<t?i(n(t),9007199254740991):0}},function(t,e,r){var n=r(6),i=r(156),o=r(4),s=r(27),a=Object.defineProperty;e.f=n?a:function(t,e,r){if(o(t),e=s(e,!0),o(r),i)try{return a(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(16);t.exports=function(t){return Object(n(t))}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){function n(f){var p=1==f,g=2==f,v=3==f,y=4==f,m=6==f,_=5==f||m;return function(t,e,r,n){for(var i,o,s=E(t),a=T(s),u=b(e,r,3),c=S(a.length),l=0,h=n||w,d=p?h(t,c):g?h(t,0):void 0;l<c;l++)if((_||l in a)&&(o=u(i=a[l],l,s),f))if(p)d[l]=o;else if(o)switch(f){case 3:return!0;case 5:return i;case 6:return l;case 2:A.call(d,i)}else if(y)return!1;return m?-1:v||y?y:d}}var b=r(42),T=r(68),E=r(10),S=r(8),w=r(75),A=[].push;t.exports={forEach:n(0),map:n(1),filter:n(2),some:n(3),every:n(4),find:n(5),findIndex:n(6)}},function(t,e,r){var n=r(6),i=r(9),o=r(40);t.exports=n?function(t,e,r){return i.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var a=r(2),n=r(54),u=r(13),c=r(11),l=r(116),i=r(157),o=r(22),s=o.get,h=o.enforce,d=String(i).split("toString");n("inspectSource",function(t){return i.call(t)}),(t.exports=function(t,e,r,n){var i=!!n&&!!n.unsafe,o=!!n&&!!n.enumerable,s=!!n&&!!n.noTargetGet;"function"==typeof r&&("string"!=typeof e||c(r,"name")||u(r,"name",e),h(r).source=d.join("string"==typeof e?e:"")),t!==a?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=r:u(t,e,r)):o?t[e]=r:l(e,r)})(Function.prototype,"toString",function(){return"function"==typeof this&&s(this).source||i.call(this)})},function(r,t,e){(function(t){function e(t){return t&&t.Math==Math&&t}r.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof t&&t)||Function("return this")()}).call(this,e(114))},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,r){var n=r(15),i=r(107),o=r(202),s=r(464),a=n.Symbol,u=i("wks");t.exports=function(t){return u[t]||(u[t]=s&&a[t]||(s?a:o)("Symbol."+t))}},function(t,e,r){var n=r(6),i=r(87),o=r(40),s=r(21),a=r(27),u=r(11),c=r(156),l=Object.getOwnPropertyDescriptor;e.f=n?l:function(t,e){if(t=s(t),e=a(e,!0),c)try{return l(t,e)}catch(t){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e,r){var n=r(71),i=r(11),o=r(164),s=r(9).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});i(e,t)||s(e,t,{value:o.f(t)})}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,r){var n=r(68),i=r(16);t.exports=function(t){return n(i(t))}},function(t,e,r){var n,i,o,s=r(158),a=r(2),u=r(3),c=r(13),l=r(11),h=r(88),d=r(70),f=a.WeakMap;if(s){var p=new f,g=p.get,v=p.has,y=p.set;n=function(t,e){return y.call(p,t,e),e},i=function(t){return g.call(p,t)||{}},o=function(t){return v.call(p,t)}}else{var m=h("state");d[m]=!0,n=function(t,e){return c(t,m,e),e},i=function(t){return l(t,m)?t[m]:{}},o=function(t){return l(t,m)}}t.exports={set:n,get:i,has:o,enforce:function(t){return o(t)?i(t):n(t,{})},getterFor:function(r){return function(t){var e;if(!u(t)||(e=i(t)).type!==r)throw TypeError("Incompatible receiver, "+r+" required");return e}}}},function(t,e,r){var s=r(16),a=/"/g;t.exports=function(t,e,r,n){var i=String(s(t)),o="<"+e;return""!==r&&(o+=" "+r+'="'+String(n).replace(a,"&quot;")+'"'),o+">"+i+"</"+e+">"}},function(t,e,r){var n=r(1);t.exports=function(e){return n(function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length})}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?n:r)(t)}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){var i=r(3);t.exports=function(t,e){if(!i(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!i(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){function n(t){return"function"==typeof t?t:void 0}var i=r(71),o=r(2);t.exports=function(t,e){return arguments.length<2?n(i[t])||n(o[t]):i[t]&&i[t][e]||o[t]&&o[t][e]}},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e,r){var n=r(222)("wks"),i=r(223),o=r(29).Symbol,s="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=n},function(t,e,r){var n=r(9).f,i=r(11),o=r(7)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,r){var n=r(11),i=r(10),o=r(88),s=r(122),a=o("IE_PROTO"),u=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=i(t),n(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=!1},function(t,e,r){function n(){}var i=r(4),o=r(120),s=r(118),a=r(70),u=r(162),c=r(115),l=r(88)("IE_PROTO"),h=function(){var t,e=c("iframe"),r=s.length;for(e.style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),h=t.F;r--;)delete h.prototype[s[r]];return h()};t.exports=Object.create||function(t,e){var r;return null!==t?(n.prototype=i(t),r=new n,n.prototype=null,r[l]=t):r=h(),void 0===e?r:o(r,e)},a[l]=!0},function(t,e,r){"use strict";var n=r(1);t.exports=function(t,e){var r=[][t];return!r||!n(function(){r.call(null,e||function(){throw 1},1)})}},function(t,e,r){var i=r(4),o=r(20),s=r(7)("species");t.exports=function(t,e){var r,n=i(t).constructor;return void 0===n||null==(r=i(n)[s])?e:o(r)}},function(t,e,r){"use strict";function p(t,e){for(var r=0,n=e.length,i=new(z(t))(n);r<n;)i[r]=e[r++];return i}function n(t,e){F(t,e,{get:function(){return N(this)[e]}})}function g(t){var e;return t instanceof V||"ArrayBuffer"==(e=S(t))||"SharedArrayBuffer"==e}function i(t,e){return Y(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)}function o(t,e){return i(t,e=f(e,!0))?d(2,t[e]):B(t,e)}function s(t,e,r){return!(i(t,e=f(e,!0))&&w(r)&&E(r,"value"))||E(r,"get")||E(r,"set")||r.configurable||E(r,"writable")&&!r.writable||E(r,"enumerable")&&!r.enumerable?F(t,e,r):(t[e]=r.value,t)}var u=r(0),c=r(2),a=r(6),v=r(135),l=r(5),h=r(104),y=r(44),d=r(40),m=r(13),_=r(8),b=r(191),T=r(192),f=r(27),E=r(11),S=r(56),w=r(3),A=r(35),k=r(57),C=r(47).f,x=r(193),R=r(12).forEach,P=r(58),L=r(9),I=r(18),O=r(22),D=r(101),N=O.get,M=O.set,F=L.f,B=I.f,j=Math.round,U=c.RangeError,V=h.ArrayBuffer,G=h.DataView,H=l.NATIVE_ARRAY_BUFFER_VIEWS,W=l.TYPED_ARRAY_TAG,q=l.TypedArray,K=l.TypedArrayPrototype,z=l.aTypedArrayConstructor,Y=l.isTypedArray;a?(H||(I.f=o,L.f=s,n(K,"buffer"),n(K,"byteOffset"),n(K,"byteLength"),n(K,"length")),u({target:"Object",stat:!0,forced:!H},{getOwnPropertyDescriptor:o,defineProperty:s}),t.exports=function(t,l,e,o){function h(t,i){F(t,i,{get:function(){return t=i,(e=N(this)).view[r](t*l+e.byteOffset,!0);var t,e},set:function(t){return e=i,r=t,n=N(this),o&&(r=(r=j(r))<0?0:255<r?255:255&r),void n.view[s](e*l+n.byteOffset,r,!0);var e,r,n},enumerable:!0})}var d=t+(o?"Clamped":"")+"Array",r="get"+t,s="set"+t,i=c[d],f=i,n=f&&f.prototype,a={};H?v&&(f=e(function(t,e,r,n){return y(t,f,d),D(w(e)?g(e)?void 0!==n?new i(e,T(r,l),n):void 0!==r?new i(e,T(r,l)):new i(e):Y(e)?p(f,e):x.call(f,e):new i(b(e)),t,f)}),k&&k(f,q),R(C(i),function(t){t in f||m(f,t,i[t])}),f.prototype=n):(f=e(function(t,e,r,n){y(t,f,d);var i,o,s,a=0,u=0;if(w(e)){if(!g(e))return Y(e)?p(f,e):x.call(f,e);i=e,u=T(r,l);var c=e.byteLength;if(void 0===n){if(c%l)throw U("Wrong length");if((o=c-u)<0)throw U("Wrong length")}else if((o=_(n)*l)+u>c)throw U("Wrong length");s=o/l}else s=b(e),i=new V(o=s*l);for(M(t,{buffer:i,byteOffset:u,byteLength:o,length:s,view:new G(i)});a<s;)h(t,a++)}),k&&k(f,q),n=f.prototype=A(K)),n.constructor!==f&&m(n,"constructor",f),W&&m(n,W,d),a[d]=f,u({global:!0,forced:f!=i,sham:!H},a),"BYTES_PER_ELEMENT"in f||m(f,"BYTES_PER_ELEMENT",l),"BYTES_PER_ELEMENT"in n||m(n,"BYTES_PER_ELEMENT",l),P(d)}):t.exports=function(){}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(25),i=Math.max,o=Math.min;t.exports=function(t,e){var r=n(t);return r<0?i(r+e,0):o(r,e)}},function(t,e,r){var o=r(20);t.exports=function(n,i,t){if(o(n),void 0===i)return n;switch(t){case 0:return function(){return n.call(i)};case 1:return function(t){return n.call(i,t)};case 2:return function(t,e){return n.call(i,t,e)};case 3:return function(t,e,r){return n.call(i,t,e,r)}}return function(){return n.apply(i,arguments)}}},function(t,e,r){var n=r(7),i=r(35),o=r(13),s=n("unscopables"),a=Array.prototype;null==a[s]&&o(a,s,i(null)),t.exports=function(t){a[s][t]=!0}},function(t,e){t.exports=function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return t}},function(t,e,r){var n=r(61),i=r(82),o=r(105);t.exports=n?function(t,e,r){return i.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(39);t.exports=function(t){if(!n(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,r){var n=r(160),i=r(118).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},function(t,e,r){var n=r(26);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){function n(t){a(t,l,{value:{objectID:"O"+ ++h,weakData:{}}})}var i=r(70),o=r(3),s=r(11),a=r(9).f,u=r(69),c=r(76),l=u("meta"),h=0,d=Object.isExtensible||function(){return!0},f=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,l)){if(!d(t))return"F";if(!e)return"E";n(t)}return t[l].objectID},getWeakData:function(t,e){if(!s(t,l)){if(!d(t))return!0;if(!e)return!1;n(t)}return t[l].weakData},onFreeze:function(t){return c&&f.REQUIRED&&d(t)&&!s(t,l)&&n(t),t}};i[l]=!0},function(t,e,r){"use strict";var i=r(27),o=r(9),s=r(40);t.exports=function(t,e,r){var n=i(e);n in t?o.f(t,n,s(0,r)):t[n]=r}},function(t,e,r){"use strict";function y(n){function t(t,e,r){if(this instanceof n){switch(arguments.length){case 0:return new n;case 1:return new n(t);case 2:return new n(t,e)}return new n(t,e,r)}return n.apply(this,arguments)}return t.prototype=n.prototype,t}var m=r(15),_=r(197).f,b=r(199),T=r(63),E=r(139),S=r(45),w=r(52);t.exports=function(t,e){var r,n,i,o,s,a,u,c,l=t.target,h=t.global,d=t.stat,f=t.proto,p=h?m:d?m[l]:(m[l]||{}).prototype,g=h?T:T[l]||(T[l]={}),v=g.prototype;for(i in e)r=!b(h?i:l+(d?".":"#")+i,t.forced)&&p&&w(p,i),s=g[i],r&&(a=t.noTargetGet?(c=_(p,i))&&c.value:p[i]),o=r&&a?a:e[i],r&&typeof s==typeof o||(u=t.bind&&r?E(o,m):t.wrap&&r?y(o):f&&"function"==typeof o?E(Function.call,o):o,(t.sham||o&&o.sham||s&&s.sham)&&S(u,"sham",!0),g[i]=u,f&&(w(T,n=l+"Prototype")||S(T,n,{}),T[n][i]=o,t.real&&v&&!v[i]&&S(v,i,o)))}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(84);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,r){var n=r(34),i=r(233);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.4.1",mode:n?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,r){function f(t,e){this.stopped=t,this.result=e}var p=r(4),g=r(121),v=r(8),y=r(42),m=r(78),_=r(167);(t.exports=function(t,e,r,n,i){var o,s,a,u,c,l,h,d=y(e,r,n?2:1);if(i)o=t;else{if("function"!=typeof(s=m(t)))throw TypeError("Target is not iterable");if(g(s)){for(a=0,u=v(t.length);a<u;a++)if((c=n?d(p(h=t[a])[0],h[1]):d(t[a]))&&c instanceof f)return c;return new f(!1)}o=s.call(t)}for(l=o.next;!(h=l.call(o)).done;)if("object"==typeof(c=_(o,d,h.value,n))&&c&&c instanceof f)return c;return new f(!1)}).stop=function(t){return new f(!0,t)}},function(t,e,r){var i=r(26),o=r(7)("toStringTag"),s="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?r:s?i(e):"Object"==(n=i(e))&&"function"==typeof e.callee?"Arguments":n}},function(t,e,r){var i=r(4),o=r(169);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r,n=!1,t={};try{(r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),n=t instanceof Array}catch(r){}return function(t,e){return i(t),o(e),n?r.call(t,e):t.__proto__=e,t}}():void 0)},function(t,e,r){"use strict";var n=r(28),i=r(9),o=r(7),s=r(6),a=o("species");t.exports=function(t){var e=n(t),r=i.f;s&&e&&!e[a]&&r(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,r){function n(r){return function(t){var e=String(i(t));return 1&r&&(e=e.replace(s,"")),2&r&&(e=e.replace(a,"")),e}}var i=r(16),o="["+r(100)+"]",s=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$");t.exports={start:n(1),end:n(2),trim:n(3)}},function(t,e,r){var i=r(14);t.exports=function(t,e,r){for(var n in e)i(t,n,e[n],r);return t}},function(t,e,r){var n=r(33);t.exports=!n(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){t.exports={}},function(t,e,r){function n(t){return"function"==typeof t?t:void 0}var i=r(63),o=r(15);t.exports=function(t,e){return arguments.length<2?n(i[t])||n(o[t]):i[t]&&i[t][e]||o[t]&&o[t][e]}},function(t,e){t.exports={}},function(t,e){var r=t.exports={version:"2.6.10"};"number"==typeof __e&&(__e=r)},function(t,e,r){var n=r(111),i=r(220);t.exports=r(85)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(1),i=r(26),o="".split;t.exports=n(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++r+n).toString(36)}},function(t,e){t.exports={}},function(t,e,r){t.exports=r(2)},function(t,e,r){function n(a){return function(t,e,r){var n,i=u(t),o=c(i.length),s=l(r,o);if(a&&e!=e){for(;s<o;)if((n=i[s++])!=n)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}}var u=r(21),c=r(8),l=r(41);t.exports={includes:n(!0),indexOf:n(!1)}},function(t,e,r){function n(t,e){var r=a[s(t)];return r==c||r!=u&&("function"==typeof e?i(e):!!e)}var i=r(1),o=/#|\.prototype\./,s=n.normalize=function(t){return String(t).replace(o,".").toLowerCase()},a=n.data={},u=n.NATIVE="N",c=n.POLYFILL="P";t.exports=n},function(t,e,r){var n=r(160),i=r(118);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e,r){var n=r(3),i=r(48),o=r(7)("species");t.exports=function(t,e){var r;return i(t)&&("function"!=typeof(r=t.constructor)||r!==Array&&!i(r.prototype)?n(r)&&null===(r=r[o])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)}},function(t,e,r){var n=r(1);t.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(t,e){t.exports={}},function(t,e,r){var n=r(56),i=r(77),o=r(7)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[n(t)]}},function(t,e,r){var n=r(1),i=r(7),o=r(123),s=i("species");t.exports=function(e){return 51<=o||!n(function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},function(t,e,r){"use strict";var n=r(4);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,r){var n=r(61),i=r(198),o=r(46),s=r(137),a=Object.defineProperty;e.f=n?a:function(t,e,r){if(o(t),e=s(e,!0),o(r),i)try{return a(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},function(t,e){t.exports=!0},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){t.exports=!r(219)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports={}},function(t,e,r){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!n.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},function(t,e,r){var n=r(54),i=r(69),o=n("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e,r){"use strict";var n=r(34),i=r(2),o=r(1);t.exports=n||!o(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete i[t]})},function(t,e,r){var i=r(7)("iterator"),o=!1;try{var n=0,s={next:function(){return{done:!!n++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var r=!1;try{var n={};n[i]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r}},function(t,e,r){var n=r(28);t.exports=n("navigator","userAgent")||""},function(t,e,r){function n(c){return function(t,e,r,n){l(e);var i=h(t),o=d(i),s=f(i.length),a=c?s-1:0,u=c?-1:1;if(r<2)for(;;){if(a in o){n=o[a],a+=u;break}if(a+=u,c?a<0:s<=a)throw TypeError("Reduce of empty array with no initial value")}for(;c?0<=a:a<s;a+=u)a in o&&(n=e(n,o[a],a,i));return n}}var l=r(20),h=r(10),d=r(68),f=r(8);t.exports={left:n(!1),right:n(!0)}},function(t,e,r){"use strict";var n=r(21),i=r(43),o=r(77),s=r(22),a=r(125),u=s.set,c=s.getterFor("Array Iterator");t.exports=a(Array,"Array",function(t,e){u(this,{type:"Array Iterator",target:n(t),index:0,kind:e})},function(){var t=c(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?{value:t.target=void 0,done:!0}:"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,r){function n(a){return function(t,e){var r,n,i=String(c(t)),o=u(e),s=i.length;return o<0||s<=o?a?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===s||(n=i.charCodeAt(o+1))<56320||57343<n?a?i.charAt(o):r:a?i.slice(o,o+2):n-56320+(r-55296<<10)+65536}}var u=r(25),c=r(16);t.exports={codeAt:n(!1),charAt:n(!0)}},function(t,e,r){var n=r(3),i=r(26),o=r(7)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,r){"use strict";var h=r(13),d=r(14),f=r(1),p=r(7),g=r(97),v=p("species"),y=!f(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),m=!f(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]});t.exports=function(r,t,e,n){var i=p(r),o=!f(function(){var t={};return t[i]=function(){return 7},7!=""[r](t)}),s=o&&!f(function(){var t=!1,e=/a/;return"split"===r&&((e={}).constructor={},e.constructor[v]=function(){return e},e.flags="",e[i]=/./[i]),e.exec=function(){return t=!0,null},e[i](""),!t});if(!o||!s||"replace"===r&&!y||"split"===r&&!m){var a=/./[i],u=e(i,""[r],function(t,e,r,n,i){return e.exec===g?o&&!i?{done:!0,value:a.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),c=u[0],l=u[1];d(String.prototype,r,c),d(RegExp.prototype,i,2==t?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)}),n&&h(RegExp.prototype[i],"sham",!0)}}},function(t,e,r){"use strict";var n,i,s=r(80),a=RegExp.prototype.exec,u=String.prototype.replace,o=a,c=(n=/a/,i=/b*/g,a.call(n,"a"),a.call(i,"a"),0!==n.lastIndex||0!==i.lastIndex),l=void 0!==/()??/.exec("")[1];(c||l)&&(o=function(t){var e,r,n,i,o=this;return l&&(r=new RegExp("^"+o.source+"$(?!\\s)",s.call(o))),c&&(e=o.lastIndex),n=a.call(o,t),c&&n&&(o.lastIndex=o.global?n.index+n[0].length:e),l&&n&&1<n.length&&u.call(n[0],r,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)}),n}),t.exports=o},function(t,e,r){"use strict";var n=r(94).charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},function(t,e,r){var i=r(26),o=r(97);t.exports=function(t,e){var r=t.exec;if("function"==typeof r){var n=r.call(t,e);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==i(t))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(t,e,r){var o=r(3),s=r(57);t.exports=function(t,e,r){var n,i;return s&&"function"==typeof(n=e.constructor)&&n!==r&&o(i=n.prototype)&&i!==r.prototype&&s(t,i),t}},function(t,e){var r=Math.expm1,n=Math.exp;t.exports=!r||22025.465794806718<r(10)||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:-1e-6<t&&t<1e-6?t+t*t/2:n(t)-1}:r},function(t,e,r){"use strict";var v=r(0),y=r(2),m=r(73),_=r(14),b=r(49),T=r(55),E=r(44),S=r(3),w=r(1),A=r(90),k=r(31),C=r(101);t.exports=function(n,t,e,i,o){function r(t){var r=a[t];_(a,t,"add"==t?function(t){return r.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!S(t))&&r.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!S(t)?void 0:r.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!S(t))&&r.call(this,0===t?0:t)}:function(t,e){return r.call(this,0===t?0:t,e),this})}var s=y[n],a=s&&s.prototype,u=s,c=i?"set":"add",l={};if(m(n,"function"!=typeof s||!(o||a.forEach&&!w(function(){(new s).entries().next()}))))u=e.getConstructor(t,n,i,c),b.REQUIRED=!0;else if(m(n,!0)){var h=new u,d=h[c](o?{}:-0,1)!=h,f=w(function(){h.has(1)}),p=A(function(t){new s(t)}),g=!o&&w(function(){for(var t=new s,e=5;e--;)t[c](e,e);return!t.has(-0)});p||(((u=t(function(t,e){E(t,u,n);var r=C(new s,t,u);return null!=e&&T(e,r[c],r,i),r})).prototype=a).constructor=u),(f||g)&&(r("delete"),r("has"),i&&r("get")),(g||d)&&r(c),o&&a.clear&&delete a.clear}return l[n]=u,v({global:!0,forced:u!=s},l),k(u,n),o||e.setStrong(u,n,i),u}},function(t,e,r){"use strict";function n(t,e,r){var n,i,o,s=new Array(r),a=8*r-e-1,u=(1<<a)-1,c=u>>1,l=23===e?F(2,-24)-F(2,-77):0,h=t<0||0===t&&1/t<0?1:0,d=0;for((t=M(t))!=t||t===1/0?(i=t!=t?1:0,n=u):(n=B(j(t)/U),t*(o=F(2,-n))<1&&(n--,o*=2),2<=(t+=1<=n+c?l/o:l*F(2,1-c))*o&&(n++,o/=2),u<=n+c?(i=0,n=u):1<=n+c?(i=(t*o-1)*F(2,e),n+=c):(i=t*F(2,c-1)*F(2,e),n=0));8<=e;s[d++]=255&i,i/=256,e-=8);for(n=n<<e|i,a+=e;0<a;s[d++]=255&n,n/=256,a-=8);return s[--d]|=128*h,s}function i(t,e){var r,n=t.length,i=8*n-e-1,o=(1<<i)-1,s=o>>1,a=i-7,u=n-1,c=t[u--],l=127&c;for(c>>=7;0<a;l=256*l+t[u],u--,a-=8);for(r=l&(1<<-a)-1,l>>=-a,a+=e;0<a;r=256*r+t[u],u--,a-=8);if(0===l)l=1-s;else{if(l===o)return r?NaN:c?-1/0:1/0;r+=F(2,e),l-=s}return(c?-1:1)*r*F(2,l-e)}function o(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function s(t){return[255&t]}function a(t){return[255&t,t>>8&255]}function u(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function c(t){return n(t,23,4)}function l(t){return n(t,52,8)}function h(t,e){A(t.prototype,e,{get:function(){return R(this)[e]}})}function d(t,e,r,n){var i=S(+r),o=R(t);if(i+e>o.byteLength)throw N("Wrong index");var s=R(o.buffer).bytes,a=i+o.byteOffset,u=s.slice(a,a+e);return n?u:u.reverse()}function f(t,e,r,n,i,o){var s=S(+r),a=R(t);if(s+e>a.byteLength)throw N("Wrong index");for(var u=R(a.buffer).bytes,c=s+a.byteOffset,l=n(+i),h=0;h<e;h++)u[c+h]=l[o?h:e-h-1]}var p=r(2),g=r(6),v=r(5).NATIVE_ARRAY_BUFFER,y=r(13),m=r(60),_=r(1),b=r(44),T=r(25),E=r(8),S=r(191),w=r(47).f,A=r(9).f,k=r(124),C=r(31),x=r(22),R=x.get,P=x.set,L=p.ArrayBuffer,I=L,O=p.DataView,D=p.Math,N=p.RangeError,M=D.abs,F=D.pow,B=D.floor,j=D.log,U=D.LN2;if(v){if(!_(function(){L(1)})||!_(function(){new L(-1)})||_(function(){return new L,new L(1.5),new L(NaN),"ArrayBuffer"!=L.name})){for(var V,G=(I=function(t){return b(this,I),new L(S(t))}).prototype=L.prototype,H=w(L),W=0;H.length>W;)(V=H[W++])in I||y(I,V,L[V]);G.constructor=I}var q=new O(new I(2)),K=O.prototype.setInt8;q.setInt8(0,2147483648),q.setInt8(1,2147483649),!q.getInt8(0)&&q.getInt8(1)||m(O.prototype,{setInt8:function(t,e){K.call(this,t,e<<24>>24)},setUint8:function(t,e){K.call(this,t,e<<24>>24)}},{unsafe:!0})}else I=function(t){b(this,I,"ArrayBuffer");var e=S(t);P(this,{bytes:k.call(new Array(e),0),byteLength:e}),g||(this.byteLength=e)},O=function(t,e,r){b(this,O,"DataView"),b(t,I,"DataView");var n=R(t).byteLength,i=T(e);if(i<0||n<i)throw N("Wrong offset");if(i+(r=void 0===r?n-i:E(r))>n)throw N("Wrong length");P(this,{buffer:t,byteLength:r,byteOffset:i}),g||(this.buffer=t,this.byteLength=r,this.byteOffset=i)},g&&(h(I,"byteLength"),h(O,"buffer"),h(O,"byteLength"),h(O,"byteOffset")),m(O.prototype,{getInt8:function(t){return d(this,1,t)[0]<<24>>24},getUint8:function(t){return d(this,1,t)[0]},getInt16:function(t){var e=d(this,2,t,1<arguments.length?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=d(this,2,t,1<arguments.length?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return o(d(this,4,t,1<arguments.length?arguments[1]:void 0))},getUint32:function(t){return o(d(this,4,t,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(t){return i(d(this,4,t,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(t){return i(d(this,8,t,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(t,e){f(this,1,t,s,e)},setUint8:function(t,e){f(this,1,t,s,e)},setInt16:function(t,e){f(this,2,t,a,e,2<arguments.length?arguments[2]:void 0)},setUint16:function(t,e){f(this,2,t,a,e,2<arguments.length?arguments[2]:void 0)},setInt32:function(t,e){f(this,4,t,u,e,2<arguments.length?arguments[2]:void 0)},setUint32:function(t,e){f(this,4,t,u,e,2<arguments.length?arguments[2]:void 0)},setFloat32:function(t,e){f(this,4,t,c,e,2<arguments.length?arguments[2]:void 0)},setFloat64:function(t,e){f(this,8,t,l,e,2<arguments.length?arguments[2]:void 0)}});C(I,"ArrayBuffer"),C(O,"DataView"),t.exports={ArrayBuffer:I,DataView:O}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(459),i=r(136);t.exports=function(t){return n(i(t))}},function(t,e,r){var n=r(83),i=r(462);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.4.1",mode:n?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,r){var i=r(45);t.exports=function(t,e,r,n){n&&n.enumerable?t[e]=r:i(t,e,r)}},function(t,e,r){var o=r(110);t.exports=function(n,i,t){if(o(n),void 0===i)return n;switch(t){case 1:return function(t){return n.call(i,t)};case 2:return function(t,e){return n.call(i,t,e)};case 3:return function(t,e,r){return n.call(i,t,e,r)}}return function(){return n.apply(i,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){var n=r(53),i=r(511),o=r(512),s=Object.defineProperty;e.f=r(85)?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var n=r(2),i=r(3),o=n.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},function(t,e,r){var n=r(2),i=r(13);t.exports=function(e,r){try{i(n,e,r)}catch(t){n[e]=r}return r}},function(t,e,r){var n=r(28),i=r(47),o=r(119),s=r(4);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(s(t)),r=o.f;return r?e.concat(r(t)):e}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(6),s=r(9),a=r(4),u=r(74);t.exports=n?Object.defineProperties:function(t,e){a(t);for(var r,n=u(e),i=n.length,o=0;o<i;)s.f(t,r=n[o++],e[r]);return t}},function(t,e,r){var n=r(7),i=r(77),o=n("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[o]===t)}},function(t,e,r){var n=r(1);t.exports=!n(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},function(t,e,r){var n,i,o=r(2),s=r(91),a=o.process,u=a&&a.versions,c=u&&u.v8;c?i=(n=c.split("."))[0]+n[1]:s&&(!(n=s.match(/Edge\/(\d+)/))||74<=n[1])&&(n=s.match(/Chrome\/(\d+)/))&&(i=n[1]),t.exports=i&&+i},function(t,e,r){"use strict";var a=r(10),u=r(41),c=r(8);t.exports=function(t){for(var e=a(this),r=c(e.length),n=arguments.length,i=u(1<n?arguments[1]:void 0,r),o=2<n?arguments[2]:void 0,s=void 0===o?r:u(o,r);i<s;)e[i++]=t;return e}},function(t,e,r){"use strict";function y(){return this}var m=r(0),_=r(126),b=r(32),T=r(57),E=r(31),S=r(13),w=r(14),n=r(7),A=r(34),k=r(77),i=r(176),C=i.IteratorPrototype,x=i.BUGGY_SAFARI_ITERATORS,R=n("iterator");t.exports=function(t,e,r,n,i,o,s){_(r,e,n);function a(t){if(t===i&&g)return g;if(!x&&t in f)return f[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}}var u,c,l,h=e+" Iterator",d=!1,f=t.prototype,p=f[R]||f["@@iterator"]||i&&f[i],g=!x&&p||a(i),v="Array"==e&&f.entries||p;if(v&&(u=b(v.call(new t)),C!==Object.prototype&&u.next&&(A||b(u)===C||(T?T(u,C):"function"!=typeof u[R]&&S(u,R,y)),E(u,h,!0,!0),A&&(k[h]=y))),"values"==i&&p&&"values"!==p.name&&(d=!0,g=function(){return p.call(this)}),A&&!s||f[R]===g||S(f,R,g),k[e]=g,i)if(c={values:a("values"),keys:o?g:a("keys"),entries:a("entries")},s)for(l in c)!x&&!d&&l in f||w(f,l,c[l]);else m({target:e,proto:!0,forced:x||d},c);return c}},function(t,e,r){"use strict";function i(){return this}var o=r(176).IteratorPrototype,s=r(35),a=r(40),u=r(31),c=r(77);t.exports=function(t,e,r){var n=e+" Iterator";return t.prototype=s(o,{next:a(1,r)}),u(t,n,!1,!0),c[n]=i,t}},function(t,e,r){var n=r(95);t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,e,r){var n=r(7)("match");t.exports=function(e){var r=/./;try{"/./"[e](r)}catch(t){try{return r[n]=!1,"/./"[e](r)}catch(e){}}return!1}},function(t,e,r){function n(c){return function(t,e,r){var n,i,o=String(d(t)),s=o.length,a=void 0===r?" ":String(r),u=l(e);return u<=s||""==a?o:(n=u-s,(i=h.call(a,f(n/a.length))).length>n&&(i=i.slice(0,n)),c?o+i:i+o)}}var l=r(8),h=r(130),d=r(16),f=Math.ceil;t.exports={start:n(!1),end:n(!0)}},function(t,e,r){"use strict";var i=r(25),o=r(16);t.exports="".repeat||function(t){var e=String(o(this)),r="",n=i(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;0<n;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r}},function(t,e,r){var n=r(1),i=r(100);t.exports=function(t){return n(function(){return!!i[t]()||"​᠎"!="​᠎"[t]()||i[t].name!==t})}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,r){function n(t){if(w.hasOwnProperty(t)){var e=w[t];delete w[t],e()}}function i(t){return function(){n(t)}}function o(t){n(t.data)}function s(t){l.postMessage(t+"",y.protocol+"//"+y.host)}var a,u,c,l=r(2),h=r(1),d=r(26),f=r(42),p=r(162),g=r(115),v=r(185),y=l.location,m=l.setImmediate,_=l.clearImmediate,b=l.process,T=l.MessageChannel,E=l.Dispatch,S=0,w={};m&&_||(m=function(t){for(var e=[],r=1;r<arguments.length;)e.push(arguments[r++]);return w[++S]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},a(S),S},_=function(t){delete w[t]},"process"==d(b)?a=function(t){b.nextTick(i(t))}:E&&E.now?a=function(t){E.now(i(t))}:T&&!v?(c=(u=new T).port2,u.port1.onmessage=o,a=f(c.postMessage,c,1)):!l.addEventListener||"function"!=typeof postMessage||l.importScripts||h(s)?a="onreadystatechange"in g("script")?function(t){p.appendChild(g("script")).onreadystatechange=function(){p.removeChild(this),n(t)}}:function(t){setTimeout(i(t),0)}:(a=s,l.addEventListener("message",o,!1))),t.exports={set:m,clear:_}},function(t,e,r){"use strict";function n(t){var r,n;this.promise=new t(function(t,e){if(void 0!==r||void 0!==n)throw TypeError("Bad Promise constructor");r=t,n=e}),this.resolve=i(r),this.reject=i(n)}var i=r(20);t.exports.f=function(t){return new n(t)}},function(t,e,r){var n=r(2),i=r(1),o=r(90),s=r(5).NATIVE_ARRAY_BUFFER_VIEWS,a=n.ArrayBuffer,u=n.Int8Array;t.exports=!s||!i(function(){u(1)})||!i(function(){new u(-1)})||!o(function(t){new u,new u(null),new u(1.5),new u(t)},!0)||i(function(){return 1!==new u(new a(2),1,void 0).length})},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,r){var i=r(39);t.exports=function(t,e){if(!i(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!i(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var n=r(15),i=r(39),o=n.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},function(t,e,r){var o=r(81);t.exports=function(n,i,t){if(o(n),void 0===i)return n;switch(t){case 0:return function(){return n.call(i)};case 1:return function(t){return n.call(i,t)};case 2:return function(t,e){return n.call(i,t,e)};case 3:return function(t,e,r){return n.call(i,t,e,r)}}return function(){return n.apply(i,arguments)}}},function(t,e,r){var n=r(141),i=Math.min;t.exports=function(t){return 0<t?i(n(t),9007199254740991):0}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?n:r)(t)}},function(t,e,r){var n,i,o=r(15),s=r(143),a=o.process,u=a&&a.versions,c=u&&u.v8;c?i=(n=c.split("."))[0]+n[1]:s&&(!(n=s.match(/Edge\/(\d+)/))||74<=n[1])&&(n=s.match(/Chrome\/(\d+)/))&&(i=n[1]),t.exports=i&&+i},function(t,e,r){var n=r(64);t.exports=n("navigator","userAgent")||""},function(t,e,r){var n,i,o,s=r(476),a=r(15),u=r(39),c=r(45),l=r(52),h=r(145),d=r(146),f=a.WeakMap;if(s){var p=new f,g=p.get,v=p.has,y=p.set;n=function(t,e){return y.call(p,t,e),e},i=function(t){return g.call(p,t)||{}},o=function(t){return v.call(p,t)}}else{var m=h("state");d[m]=!0,n=function(t,e){return c(t,m,e),e},i=function(t){return l(t,m)?t[m]:{}},o=function(t){return l(t,m)}}t.exports={set:n,get:i,has:o,enforce:function(t){return o(t)?i(t):n(t,{})},getterFor:function(r){return function(t){var e;if(!u(t)||(e=i(t)).type!==r)throw TypeError("Incompatible receiver, "+r+" required");return e}}}},function(t,e,r){var n=r(107),i=r(202),o=n("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e){t.exports={}},function(t,e,r){var o=r(82).f,s=r(45),a=r(52),u=r(486),c=r(17)("toStringTag"),l=u!=={}.toString;t.exports=function(t,e,r,n){if(t){var i=r?t:t.prototype;a(i,c)||o(i,c,{configurable:!0,value:e}),n&&l&&s(i,"toString",u)}}},function(t,e,r){"use strict";function n(t){var r,n;this.promise=new t(function(t,e){if(void 0!==r||void 0!==n)throw TypeError("Bad Promise constructor");r=t,n=e}),this.resolve=i(r),this.reject=i(n)}var i=r(81);t.exports.f=function(t){return new n(t)}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?n:r)(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=!0},function(t,e,r){var n=r(84),i=r(29).document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,r){var n=r(519),i=r(150);t.exports=function(t){return n(i(t))}},function(t,e,r){var n=r(222)("keys"),i=r(223);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e,r){var n=r(111).f,i=r(112),o=r(30)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,r){var n=r(6),i=r(1),o=r(115);t.exports=!n&&!i(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){var n=r(54);t.exports=n("native-function-to-string",Function.toString)},function(t,e,r){var n=r(2),i=r(157),o=n.WeakMap;t.exports="function"==typeof o&&/native code/.test(i.call(o))},function(t,e,r){var a=r(11),u=r(117),c=r(18),l=r(9);t.exports=function(t,e){for(var r=u(e),n=l.f,i=c.f,o=0;o<r.length;o++){var s=r[o];a(t,s)||n(t,s,i(e,s))}}},function(t,e,r){var s=r(11),a=r(21),u=r(72).indexOf,c=r(70);t.exports=function(t,e){var r,n=a(t),i=0,o=[];for(r in n)!s(c,r)&&s(n,r)&&o.push(r);for(;e.length>i;)s(n,r=e[i++])&&(~u(o,r)||o.push(r));return o}},function(t,e,r){var n=r(1);t.exports=!!Object.getOwnPropertySymbols&&!n(function(){return!String(Symbol())})},function(t,e,r){var n=r(28);t.exports=n("document","documentElement")},function(t,e,r){var n=r(21),i=r(47).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return s.slice()}}(t):i(n(t))}},function(t,e,r){e.f=r(7)},function(t,e,r){"use strict";var d=r(6),n=r(1),f=r(74),p=r(119),g=r(87),v=r(10),y=r(68),i=Object.assign;t.exports=!i||n(function(){var t={},e={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!=i({},t)[r]||"abcdefghijklmnopqrst"!=f(i({},e)).join("")})?function(t,e){for(var r=v(t),n=arguments.length,i=1,o=p.f,s=g.f;i<n;)for(var a,u=y(arguments[i++]),c=o?f(u).concat(o(u)):f(u),l=c.length,h=0;h<l;)a=c[h++],d&&!s.call(u,a)||(r[a]=u[a]);return r}:i},function(t,e,r){function n(a){return function(t){for(var e,r=l(t),n=c(r),i=n.length,o=0,s=[];o<i;)e=n[o++],u&&!h.call(r,e)||s.push(a?[e,r[e]]:r[e]);return s}}var u=r(6),c=r(74),l=r(21),h=r(87).f;t.exports={entries:n(!0),values:n(!1)}},function(t,e,r){var o=r(4);t.exports=function(t,e,r,n){try{return n?e(o(r)[0],r[1]):e(r)}catch(e){var i=t.return;throw void 0!==i&&o(i.call(t)),e}}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,r){var n=r(3);t.exports=function(t){if(!n(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,r){"use strict";var o=r(20),s=r(3),a=[].slice,u={};t.exports=Function.bind||function(e){var r=o(this),n=a.call(arguments,1),i=function(){var t=n.concat(a.call(arguments));return this instanceof i?function(t,e,r){if(!(e in u)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";u[e]=Function("C,a","return new C("+n.join(",")+")")}return u[e](t,r)}(r,t.length,t):r.apply(e,t)};return s(r.prototype)&&(i.prototype=r.prototype),i}},function(t,e,r){"use strict";var f=r(42),p=r(10),g=r(167),v=r(121),y=r(8),m=r(50),_=r(78);t.exports=function(t){var e,r,n,i,o,s=p(t),a="function"==typeof this?this:Array,u=arguments.length,c=1<u?arguments[1]:void 0,l=void 0!==c,h=0,d=_(s);if(l&&(c=f(c,2<u?arguments[2]:void 0,2)),null==d||a==Array&&v(d))for(r=new a(e=y(s.length));h<e;h++)m(r,h,l?c(s[h],h):s[h]);else for(o=(i=d.call(s)).next,r=new a;!(n=o.call(i)).done;h++)m(r,h,l?g(i,c,[n.value,h],!0):n.value);return r.length=h,r}},function(t,e,r){"use strict";var c=r(10),l=r(41),h=r(8),d=Math.min;t.exports=[].copyWithin||function(t,e){var r=c(this),n=h(r.length),i=l(t,n),o=l(e,n),s=2<arguments.length?arguments[2]:void 0,a=d((void 0===s?n:l(s,n))-o,n-i),u=1;for(o<i&&i<o+a&&(u=-1,o+=a-1,i+=a-1);0<a--;)o in r?r[i]=r[o]:delete r[i],i+=u,o+=u;return r}},function(t,e,r){"use strict";var d=r(48),f=r(8),p=r(42),g=function(t,e,r,n,i,o,s,a){for(var u,c=i,l=0,h=!!s&&p(s,a,3);l<n;){if(l in r){if(u=h?h(r[l],l,e):r[l],0<o&&d(u))c=g(t,e,u,f(u.length),c,o-1)-1;else{if(9007199254740991<=c)throw TypeError("Exceed the acceptable array length");t[c]=u}c++}l++}return c};t.exports=g},function(t,e,r){"use strict";var n=r(12).forEach,i=r(36);t.exports=i("forEach")?function(t){return n(this,t,1<arguments.length?arguments[1]:void 0)}:[].forEach},function(t,e,r){"use strict";var i=r(21),o=r(25),s=r(8),n=r(36),a=Math.min,u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0,l=n("lastIndexOf");t.exports=c||l?function(t){if(c)return u.apply(this,arguments)||0;var e=i(this),r=s(e.length),n=r-1;for(1<arguments.length&&(n=a(n,o(arguments[1]))),n<0&&(n=r+n);0<=n;n--)if(n in e&&e[n]===t)return n||0;return-1}:u},function(t,e,r){"use strict";var n,i,o,s=r(32),a=r(13),u=r(11),c=r(7),l=r(34),h=c("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(i=s(s(o)))!==Object.prototype&&(n=i):d=!0),null==n&&(n={}),l||u(n,h)||a(n,h,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},function(t,e,r){var n=r(91);t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},function(t,e,r){"use strict";var i=r(94).charAt,n=r(22),o=r(125),s=n.set,a=n.getterFor("String Iterator");o(String,"String",function(t){s(this,{type:"String Iterator",string:String(t),index:0})},function(){var t,e=a(this),r=e.string,n=e.index;return n>=r.length?{value:void 0,done:!0}:(t=i(r,n),e.index+=t.length,{value:t,done:!1})})},function(t,e,r){var n=r(2),i=r(59).trim,o=r(100),s=n.parseInt,a=/^[+-]?0[Xx]/,u=8!==s(o+"08")||22!==s(o+"0x16");t.exports=u?function(t,e){var r=i(String(t));return s(r,e>>>0||(a.test(r)?16:10))}:s},function(t,e,r){var n=r(2),i=r(59).trim,o=r(100),s=n.parseFloat,a=1/s(o+"-0")!=-1/0;t.exports=a?function(t){var e=i(String(t)),r=s(e);return 0===r&&"-"==e.charAt(0)?-0:r}:s},function(t,e,r){var n=r(3),i=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&i(t)===t}},function(t,e,r){var n=r(26);t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},function(t,e){var r=Math.log;t.exports=Math.log1p||function(t){return-1e-8<(t=+t)&&t<1e-8?t-t*t/2:r(1+t)}},function(t,e,r){var n=r(2);t.exports=n.Promise},function(t,e,r){var n=r(91);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(n)},function(t,e,r){var n,i,o,s,a,u,c,l,h=r(2),d=r(18).f,f=r(26),p=r(133).set,g=r(185),v=h.MutationObserver||h.WebKitMutationObserver,y=h.process,m=h.Promise,_="process"==f(y),b=d(h,"queueMicrotask"),T=b&&b.value;T||(n=function(){var t,e;for(_&&(t=y.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?s():o=void 0,t}}o=void 0,t&&t.enter()},s=_?function(){y.nextTick(n)}:v&&!g?(a=!0,u=document.createTextNode(""),new v(n).observe(u,{characterData:!0}),function(){u.data=a=!a}):m&&m.resolve?(c=m.resolve(void 0),l=c.then,function(){l.call(c,n)}):function(){p.call(h,n)}),t.exports=T||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,s()),o=e}},function(t,e,r){var n=r(4),i=r(3),o=r(134);t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,r){"use strict";var c=r(9).f,l=r(35),h=r(60),d=r(42),f=r(44),p=r(55),s=r(125),a=r(58),g=r(6),v=r(49).fastKey,n=r(22),y=n.set,m=n.getterFor;t.exports={getConstructor:function(t,r,n,i){function o(t,e,r){var n,i,o=a(t),s=u(t,e);return s?s.value=r:(o.last=s={index:i=v(e,!0),key:e,value:r,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=s),n&&(n.next=s),g?o.size++:t.size++,"F"!==i&&(o.index[i]=s)),t}var s=t(function(t,e){f(t,s,r),y(t,{type:r,index:l(null),first:void 0,last:void 0,size:0}),g||(t.size=0),null!=e&&p(e,t[i],t,n)}),a=m(r),u=function(t,e){var r,n=a(t),i=v(e);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==e)return r};return h(s.prototype,{clear:function(){for(var t=a(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,g?t.size=0:this.size=0},delete:function(t){var e=a(this),r=u(this,t);if(r){var n=r.next,i=r.previous;delete e.index[r.index],r.removed=!0,i&&(i.next=n),n&&(n.previous=i),e.first==r&&(e.first=n),e.last==r&&(e.last=i),g?e.size--:this.size--}return!!r},forEach:function(t){for(var e,r=a(this),n=d(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!u(this,t)}}),h(s.prototype,n?{get:function(t){var e=u(this,t);return e&&e.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),g&&c(s.prototype,"size",{get:function(){return a(this).size}}),s},setStrong:function(t,e,r){var n=e+" Iterator",i=m(e),o=m(n);s(t,e,function(t,e){y(this,{type:n,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:{value:t.target=void 0,done:!0}},r?"entries":"values",!r,!0),a(e)}}},function(t,e,r){"use strict";function u(t){return t.frozen||(t.frozen=new _)}function n(t,e){return s(t.entries,function(t){return t[0]===e})}var c=r(60),l=r(49).getWeakData,h=r(4),d=r(3),f=r(44),p=r(55),i=r(12),g=r(11),o=r(22),v=o.set,y=o.getterFor,s=i.find,a=i.findIndex,m=0,_=function(){this.entries=[]};_.prototype={get:function(t){var e=n(this,t);if(e)return e[1]},has:function(t){return!!n(this,t)},set:function(t,e){var r=n(this,t);r?r[1]=e:this.entries.push([t,e])},delete:function(e){var t=a(this.entries,function(t){return t[0]===e});return~t&&this.entries.splice(t,1),!!~t}},t.exports={getConstructor:function(t,r,n,i){function o(t,e,r){var n=a(t),i=l(h(e),!0);return!0===i?u(n).set(e,r):i[n.id]=r,t}var s=t(function(t,e){f(t,s,r),v(t,{type:r,id:m++,frozen:void 0}),null!=e&&p(e,t[i],t,n)}),a=y(r);return c(s.prototype,{delete:function(t){var e=a(this);if(!d(t))return!1;var r=l(t);return!0===r?u(e).delete(t):r&&g(r,e.id)&&delete r[e.id]},has:function(t){var e=a(this);if(!d(t))return!1;var r=l(t);return!0===r?u(e).has(t):r&&g(r,e.id)}}),c(s.prototype,n?{get:function(t){var e=a(this);if(d(t)){var r=l(t);return!0===r?u(e).get(t):r?r[e.id]:void 0}},set:function(t,e){return o(this,t,e)}}:{add:function(t){return o(this,t,!0)}}),s}}},function(t,e,r){var n=r(25),i=r(8);t.exports=function(t){if(void 0===t)return 0;var e=n(t),r=i(e);if(e!==r)throw RangeError("Wrong length or index");return r}},function(t,e,r){var n=r(395);t.exports=function(t,e){var r=n(t);if(r%e)throw RangeError("Wrong offset");return r}},function(t,e,r){var d=r(10),f=r(8),p=r(78),g=r(121),v=r(42),y=r(5).aTypedArrayConstructor;t.exports=function(t){var e,r,n,i,o,s,a=d(t),u=arguments.length,c=1<u?arguments[1]:void 0,l=void 0!==c,h=p(a);if(null!=h&&!g(h))for(s=(o=h.call(a)).next,a=[];!(i=s.call(o)).done;)a.push(i.value);for(l&&2<u&&(c=v(c,arguments[2],2)),r=f(a.length),n=new(y(this))(r),e=0;e<r;e++)n[e]=l?c(a[e],e):a[e];return n}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,r){var n=r(1),i=r(7),o=r(34),s=i("iterator");t.exports=!n(function(){var t=new URL("b?a=1&b=2&c=3","http://a"),r=t.searchParams,n="";return t.pathname="c%20d",r.forEach(function(t,e){r.delete("b"),n+=e+t}),o&&!t.toJSON||!r.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==r.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!r[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})},function(t,e,r){"use strict";r(93);function i(e){try{return decodeURIComponent(e)}catch(t){return e}}function s(t){var e,r=t.replace(N," "),n=4;try{return decodeURIComponent(r)}catch(t){for(;n;)r=r.replace((e=n--,M[e-1]||(M[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))),i);return r}}function n(t){return B[t]}function o(t){return encodeURIComponent(t).replace(F,n)}function h(t,e){if(e)for(var r,n,i=e.split("&"),o=0;o<i.length;)(r=i[o++]).length&&(n=r.split("="),t.push({key:s(n.shift()),value:s(n.join("="))}))}function d(t){this.entries.length=0,h(this.entries,t)}function c(t,e){if(t<e)throw TypeError("Not enough arguments")}var a=r(0),u=r(28),l=r(195),f=r(14),p=r(60),g=r(31),v=r(126),y=r(22),m=r(44),_=r(11),b=r(42),T=r(56),E=r(4),S=r(3),w=r(35),A=r(40),k=r(450),C=r(78),x=r(7),R=u("fetch"),P=u("Headers"),L=x("iterator"),I=y.set,O=y.getterFor("URLSearchParams"),D=y.getterFor("URLSearchParamsIterator"),N=/\+/g,M=Array(4),F=/[!'()~]|%20/g,B={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},j=v(function(t,e){I(this,{type:"URLSearchParamsIterator",iterator:k(O(t).entries),kind:e})},"Iterator",function(){var t=D(this),e=t.kind,r=t.iterator.next(),n=r.value;return r.done||(r.value="keys"===e?n.key:"values"===e?n.value:[n.key,n.value]),r}),U=function(){m(this,U,"URLSearchParams");var t,e,r,n,i,o,s,a,u,c=0<arguments.length?arguments[0]:void 0,l=[];if(I(this,{type:"URLSearchParams",entries:l,updateURL:function(){},updateSearchParams:d}),void 0!==c)if(S(c))if("function"==typeof(t=C(c)))for(r=(e=t.call(c)).next;!(n=r.call(e)).done;){if((s=(o=(i=k(E(n.value))).next).call(i)).done||(a=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");l.push({key:s.value+"",value:a.value+""})}else for(u in c)_(c,u)&&l.push({key:u,value:c[u]+""});else h(l,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},V=U.prototype;p(V,{append:function(t,e){c(arguments.length,2);var r=O(this);r.entries.push({key:t+"",value:e+""}),r.updateURL()},delete:function(t){c(arguments.length,1);for(var e=O(this),r=e.entries,n=t+"",i=0;i<r.length;)r[i].key===n?r.splice(i,1):i++;e.updateURL()},get:function(t){c(arguments.length,1);for(var e=O(this).entries,r=t+"",n=0;n<e.length;n++)if(e[n].key===r)return e[n].value;return null},getAll:function(t){c(arguments.length,1);for(var e=O(this).entries,r=t+"",n=[],i=0;i<e.length;i++)e[i].key===r&&n.push(e[i].value);return n},has:function(t){c(arguments.length,1);for(var e=O(this).entries,r=t+"",n=0;n<e.length;)if(e[n++].key===r)return!0;return!1},set:function(t,e){c(arguments.length,1);for(var r,n=O(this),i=n.entries,o=!1,s=t+"",a=e+"",u=0;u<i.length;u++)(r=i[u]).key===s&&(o?i.splice(u--,1):(o=!0,r.value=a));o||i.push({key:s,value:a}),n.updateURL()},sort:function(){var t,e,r,n=O(this),i=n.entries,o=i.slice();for(r=i.length=0;r<o.length;r++){for(t=o[r],e=0;e<r;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===r&&i.push(t)}n.updateURL()},forEach:function(t){for(var e,r=O(this).entries,n=b(t,1<arguments.length?arguments[1]:void 0,3),i=0;i<r.length;)n((e=r[i++]).value,e.key,this)},keys:function(){return new j(this,"keys")},values:function(){return new j(this,"values")},entries:function(){return new j(this,"entries")}},{enumerable:!0}),f(V,L,V.entries),f(V,"toString",function(){for(var t,e=O(this).entries,r=[],n=0;n<e.length;)t=e[n++],r.push(o(t.key)+"="+o(t.value));return r.join("&")},{enumerable:!0}),g(U,"URLSearchParams"),a({global:!0,forced:!l},{URLSearchParams:U}),l||"function"!=typeof R||"function"!=typeof P||a({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,r,n,i=[t];return 1<arguments.length&&(S(e=arguments[1])&&(r=e.body,"URLSearchParams"===T(r)&&((n=e.headers?new P(e.headers):new P).has("content-type")||n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=w(e,{body:A(0,String(r)),headers:A(0,n)}))),i.push(e)),R.apply(this,i)}}),t.exports={URLSearchParams:U,getState:O}},function(t,e,r){var n=r(61),i=r(458),o=r(105),s=r(106),a=r(137),u=r(52),c=r(198),l=Object.getOwnPropertyDescriptor;e.f=n?l:function(t,e){if(t=s(t),e=a(e,!0),c)try{return l(t,e)}catch(t){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e,r){var n=r(61),i=r(33),o=r(138);t.exports=!n&&!i(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){function n(t,e){var r=a[s(t)];return r==c||r!=u&&("function"==typeof e?i(e):!!e)}var i=r(33),o=/#|\.prototype\./,s=n.normalize=function(t){return String(t).replace(o,".").toLowerCase()},a=n.data={},u=n.NATIVE="N",c=n.POLYFILL="P";t.exports=n},function(t,e,r){var n=r(62);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){var n=r(136);t.exports=function(t){return Object(n(t))}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++r+n).toString(36)}},function(t,e,r){t.exports=r(471)},function(t,e,r){"use strict";function y(){return this}var m=r(51),_=r(478),b=r(206),T=r(487),E=r(147),S=r(45),w=r(108),n=r(17),A=r(83),k=r(65),i=r(205),C=i.IteratorPrototype,x=i.BUGGY_SAFARI_ITERATORS,R=n("iterator");t.exports=function(t,e,r,n,i,o,s){_(r,e,n);function a(t){if(t===i&&g)return g;if(!x&&t in f)return f[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}}var u,c,l,h=e+" Iterator",d=!1,f=t.prototype,p=f[R]||f["@@iterator"]||i&&f[i],g=!x&&p||a(i),v="Array"==e&&f.entries||p;if(v&&(u=b(v.call(new t)),C!==Object.prototype&&u.next&&(A||b(u)===C||(T?T(u,C):"function"!=typeof u[R]&&S(u,R,y)),E(u,h,!0,!0),A&&(k[h]=y))),"values"==i&&p&&"values"!==p.name&&(d=!0,g=function(){return p.call(this)}),A&&!s||f[R]===g||S(f,R,g),k[e]=g,i)if(c={values:a("values"),keys:o?g:a("keys"),entries:a("entries")},s)for(l in c)!x&&!d&&l in f||w(f,l,c[l]);else m({target:e,proto:!0,forced:x||d},c);return c}},function(t,e,r){"use strict";var n,i,o,s=r(206),a=r(45),u=r(52),c=r(17),l=r(83),h=c("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(i=s(s(o)))!==Object.prototype&&(n=i):d=!0),null==n&&(n={}),l||u(n,h)||a(n,h,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},function(t,e,r){var n=r(52),i=r(201),o=r(145),s=r(479),a=o("IE_PROTO"),u=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=i(t),n(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,r){var n=r(64);t.exports=n("document","documentElement")},function(t,e,r){var i=r(62),o=r(17)("toStringTag"),s="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?r:s?i(e):"Object"==(n=i(e))&&"function"==typeof e.callee?"Arguments":n}},function(t,e,r){var n=r(15);t.exports=n.Promise},function(t,e,r){function f(t,e){this.stopped=t,this.result=e}var p=r(46),g=r(497),v=r(140),y=r(139),m=r(498),_=r(499);(t.exports=function(t,e,r,n,i){var o,s,a,u,c,l,h,d=y(e,r,n?2:1);if(i)o=t;else{if("function"!=typeof(s=m(t)))throw TypeError("Target is not iterable");if(g(s)){for(a=0,u=v(t.length);a<u;a++)if((c=n?d(p(h=t[a])[0],h[1]):d(t[a]))&&c instanceof f)return c;return new f(!1)}o=s.call(t)}for(l=o.next;!(h=l.call(o)).done;)if("object"==typeof(c=_(o,d,h.value,n))&&c&&c instanceof f)return c;return new f(!1)}).stop=function(t){return new f(!0,t)}},function(t,e,r){var i=r(46),o=r(81),s=r(17)("species");t.exports=function(t,e){var r,n=i(t).constructor;return void 0===n||null==(r=i(n)[s])?e:o(r)}},function(t,e,r){function n(t){if(w.hasOwnProperty(t)){var e=w[t];delete w[t],e()}}function i(t){return function(){n(t)}}function o(t){n(t.data)}function s(t){l.postMessage(t+"",y.protocol+"//"+y.host)}var a,u,c,l=r(15),h=r(33),d=r(62),f=r(139),p=r(208),g=r(138),v=r(214),y=l.location,m=l.setImmediate,_=l.clearImmediate,b=l.process,T=l.MessageChannel,E=l.Dispatch,S=0,w={};m&&_||(m=function(t){for(var e=[],r=1;r<arguments.length;)e.push(arguments[r++]);return w[++S]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},a(S),S},_=function(t){delete w[t]},"process"==d(b)?a=function(t){b.nextTick(i(t))}:E&&E.now?a=function(t){E.now(i(t))}:T&&!v?(c=(u=new T).port2,u.port1.onmessage=o,a=f(c.postMessage,c,1)):!l.addEventListener||"function"!=typeof postMessage||l.importScripts||h(s)?a="onreadystatechange"in g("script")?function(t){p.appendChild(g("script")).onreadystatechange=function(){p.removeChild(this),n(t)}}:function(t){setTimeout(i(t),0)}:(a=s,l.addEventListener("message",o,!1))),t.exports={set:m,clear:_}},function(t,e,r){var n=r(143);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(n)},function(t,e,r){var n=r(46),i=r(39),o=r(148);t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,r){"use strict";function _(){return this}var b=r(151),T=r(218),E=r(513),S=r(67),w=r(86),A=r(514),k=r(155),C=r(522),x=r(30)("iterator"),R=!([].keys&&"next"in[].keys());t.exports=function(t,e,r,n,i,o,s){A(r,e,n);function a(t){if(!R&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}}var u,c,l,h=e+" Iterator",d="values"==i,f=!1,p=t.prototype,g=p[x]||p["@@iterator"]||i&&p[i],v=g||a(i),y=i?d?a("entries"):v:void 0,m="Array"==e&&p.entries||g;if(m&&(l=C(m.call(new t)))!==Object.prototype&&l.next&&(k(l,h,!0),b||"function"==typeof l[x]||S(l,x,_)),d&&g&&"values"!==g.name&&(f=!0,v=function(){return g.call(this)}),b&&!s||!R&&!f&&p[x]||S(p,x,v),w[e]=v,w[h]=_,i)if(u={values:d?v:a("values"),keys:o?v:a("keys"),entries:y},s)for(c in u)c in p||E(p,c,u[c]);else T(T.P+T.F*(R||f),e,u);return u}},function(t,e,r){var g=r(29),v=r(66),y=r(109),m=r(67),_=r(112),b=function(t,e,r){var n,i,o,s=t&b.F,a=t&b.G,u=t&b.S,c=t&b.P,l=t&b.B,h=t&b.W,d=a?v:v[e]||(v[e]={}),f=d.prototype,p=a?g:u?g[e]:(g[e]||{}).prototype;for(n in a&&(r=e),r)(i=!s&&p&&void 0!==p[n])&&_(d,n)||(o=i?p[n]:r[n],d[n]=a&&"function"!=typeof p[n]?r[n]:l&&i?y(o,g):h&&p[n]==o?function(n){function t(t,e,r){if(this instanceof n){switch(arguments.length){case 0:return new n;case 1:return new n(t);case 2:return new n(t,e)}return new n(t,e,r)}return n.apply(this,arguments)}return t.prototype=n.prototype,t}(o):c&&"function"==typeof o?y(Function.call,o):o,c&&((d.virtual||(d.virtual={}))[n]=o,t&b.R&&f&&!f[n]&&m(f,n,o)))};b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128,t.exports=b},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(149),i=Math.min;t.exports=function(t){return 0<t?i(n(t),9007199254740991):0}},function(t,e,r){var n=r(66),i=r(29),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:r(151)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){var n=r(29).document;t.exports=n&&n.documentElement},function(t,e,r){var i=r(113),o=r(30)("toStringTag"),s="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?r:s?i(e):"Object"==(n=i(e))&&"function"==typeof e.callee?"Arguments":n}},function(t,e,r){function n(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}}function i(t){n.call(t.data)}var o,s,a,u=r(109),c=r(535),l=r(225),h=r(152),d=r(29),f=d.process,p=d.setImmediate,g=d.clearImmediate,v=d.MessageChannel,y=d.Dispatch,m=0,_={};p&&g||(p=function(t){for(var e=[],r=1;r<arguments.length;)e.push(arguments[r++]);return _[++m]=function(){c("function"==typeof t?t:Function(t),e)},o(m),m},g=function(t){delete _[t]},"process"==r(113)(f)?o=function(t){f.nextTick(u(n,t,1))}:y&&y.now?o=function(t){y.now(u(n,t,1))}:v?(a=(s=new v).port2,s.port1.onmessage=i,o=u(a.postMessage,a,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(o=function(t){d.postMessage(t+"","*")},d.addEventListener("message",i,!1)):o="onreadystatechange"in h("script")?function(t){l.appendChild(h("script")).onreadystatechange=function(){l.removeChild(this),n.call(t)}}:function(t){setTimeout(u(n,t,1),0)}),t.exports={set:p,clear:g}},function(t,e,r){"use strict";var i=r(110);function n(t){var r,n;this.promise=new t(function(t,e){if(void 0!==r||void 0!==n)throw TypeError("Bad Promise constructor");r=t,n=e}),this.resolve=i(r),this.reject=i(n)}t.exports.f=function(t){return new n(t)}},function(t,e,r){r(230),t.exports=r(452)},function(t,e,r){r(231),r(442),t.exports=r(71)},function(t,e,r){r(232),r(234),r(235),r(236),r(237),r(238),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(267),r(268),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(277),r(278),r(279),r(280),r(281),r(282),r(283),r(284),r(285),r(286),r(287),r(288),r(289),r(290),r(291),r(292),r(293),r(294),r(295),r(296),r(297),r(298),r(299),r(300),r(301),r(302),r(303),r(304),r(305),r(93),r(306),r(307),r(308),r(309),r(310),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(318),r(319),r(320),r(321),r(322),r(178),r(323),r(324),r(325),r(326),r(327),r(328),r(329),r(330),r(331),r(332),r(333),r(334),r(335),r(336),r(337),r(338),r(339),r(340),r(341),r(342),r(343),r(344),r(346),r(347),r(348),r(349),r(350),r(351),r(352),r(353),r(354),r(355),r(356),r(357),r(358),r(359),r(360),r(361),r(362),r(364),r(365),r(366),r(367),r(368),r(369),r(370),r(371),r(372),r(373),r(374),r(375),r(376),r(378),r(379),r(381),r(382),r(384),r(385),r(386),r(387),r(388),r(389),r(390),r(391),r(392),r(393),r(394),r(396),r(397),r(398),r(399),r(400),r(401),r(402),r(403),r(404),r(405),r(406),r(407),r(408),r(409),r(410),r(411),r(412),r(413),r(414),r(415),r(416),r(417),r(418),r(419),r(420),r(421),r(422),r(423),r(424),r(425),r(426),r(427),r(428),r(429),r(430),r(431),r(432),r(433),r(434),r(435),r(436),r(437),r(438),r(439),r(440),r(441),t.exports=r(71)},function(t,e,r){"use strict";function n(t,e){var r=Z[t]=E(z.prototype);return W(r,{type:"Symbol",tag:t,description:e}),h||(r.description=e),r}function i(e,t){y(e);var r=_(t),n=S(r).concat(lt(r));return V(n,function(t){h&&!ct.call(r,t)||ut(e,t,r[t])}),e}function o(t,e){var r=_(t),n=b(e,!0);if(r!==K||!p(Z,n)||p(tt,n)){var i=X(r,n);return!i||!p(Z,n)||p(r,G)&&r[G][n]||(i.enumerable=!0),i}}function s(t){var e=Q(_(t)),r=[];return V(e,function(t){p(Z,t)||p(D,t)||r.push(t)}),r}var a=r(0),u=r(2),c=r(28),l=r(34),h=r(6),d=r(161),f=r(1),p=r(11),g=r(48),v=r(3),y=r(4),m=r(10),_=r(21),b=r(27),T=r(40),E=r(35),S=r(74),w=r(47),A=r(163),k=r(119),C=r(18),x=r(9),R=r(87),P=r(13),L=r(14),I=r(54),O=r(88),D=r(70),N=r(69),M=r(7),F=r(164),B=r(19),j=r(31),U=r(22),V=r(12).forEach,G=O("hidden"),H=M("toPrimitive"),W=U.set,q=U.getterFor("Symbol"),K=Object.prototype,z=u.Symbol,Y=c("JSON","stringify"),X=C.f,J=x.f,Q=A.f,$=R.f,Z=I("symbols"),tt=I("op-symbols"),et=I("string-to-symbol-registry"),rt=I("symbol-to-string-registry"),nt=I("wks"),it=u.QObject,ot=!it||!it.prototype||!it.prototype.findChild,st=h&&f(function(){return 7!=E(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=X(K,e);n&&delete K[e],J(t,e,r),n&&t!==K&&J(K,e,n)}:J,at=d&&"symbol"==typeof z.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof z},ut=function(t,e,r){t===K&&ut(tt,e,r),y(t);var n=b(e,!0);return y(r),p(Z,n)?(r.enumerable?(p(t,G)&&t[G][n]&&(t[G][n]=!1),r=E(r,{enumerable:T(0,!1)})):(p(t,G)||J(t,G,T(1,{})),t[G][n]=!0),st(t,n,r)):J(t,n,r)},ct=function(t){var e=b(t,!0),r=$.call(this,e);return!(this===K&&p(Z,e)&&!p(tt,e))&&(!(r||!p(this,e)||!p(Z,e)||p(this,G)&&this[G][e])||r)},lt=function(t){var e=t===K,r=Q(e?tt:_(t)),n=[];return V(r,function(t){!p(Z,t)||e&&!p(K,t)||n.push(Z[t])}),n};d||(L((z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=N(t),r=function(t){this===K&&r.call(tt,t),p(this,G)&&p(this[G],e)&&(this[G][e]=!1),st(this,e,T(1,t))};return h&&ot&&st(K,e,{configurable:!0,set:r}),n(e,t)}).prototype,"toString",function(){return q(this).tag}),R.f=ct,x.f=ut,C.f=o,w.f=A.f=s,k.f=lt,h&&(J(z.prototype,"description",{configurable:!0,get:function(){return q(this).description}}),l||L(K,"propertyIsEnumerable",ct,{unsafe:!0})),F.f=function(t){return n(M(t),t)}),a({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:z}),V(S(nt),function(t){B(t)}),a({target:"Symbol",stat:!0,forced:!d},{for:function(t){var e=String(t);if(p(et,e))return et[e];var r=z(e);return et[e]=r,rt[r]=e,r},keyFor:function(t){if(!at(t))throw TypeError(t+" is not a symbol");if(p(rt,t))return rt[t]},useSetter:function(){ot=!0},useSimple:function(){ot=!1}}),a({target:"Object",stat:!0,forced:!d,sham:!h},{create:function(t,e){return void 0===e?E(t):i(E(t),e)},defineProperty:ut,defineProperties:i,getOwnPropertyDescriptor:o}),a({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:s,getOwnPropertySymbols:lt}),a({target:"Object",stat:!0,forced:f(function(){k.f(1)})},{getOwnPropertySymbols:function(t){return k.f(m(t))}}),Y&&a({target:"JSON",stat:!0,forced:!d||f(function(){var t=z();return"[null]"!=Y([t])||"{}"!=Y({a:t})||"{}"!=Y(Object(t))})},{stringify:function(t,e,r){for(var n,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((v(n=e)||void 0!==t)&&!at(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!at(e))return e}),i[1]=e,Y.apply(null,i)}}),z.prototype[H]||P(z.prototype,H,z.prototype.valueOf),j(z,"Symbol"),D[G]=!0},function(t,e,r){var n=r(2),i=r(116),o=n["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=o},function(t,e,r){r(19)("asyncIterator")},function(t,e,r){"use strict";var n=r(0),i=r(6),o=r(2),s=r(11),a=r(3),u=r(9).f,c=r(159),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new l(t):void 0===t?l():l(t);return""===t&&(h[e]=!0),e};c(d,l);var f=d.prototype=l.prototype;f.constructor=d;var p=f.toString,g="Symbol(test)"==String(l("test")),v=/^Symbol\((.*)\)[^)]+$/;u(f,"description",{configurable:!0,get:function(){var t=a(this)?this.valueOf():this,e=p.call(t);if(s(h,t))return"";var r=g?e.slice(7,-1):e.replace(v,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:d})}},function(t,e,r){r(19)("hasInstance")},function(t,e,r){r(19)("isConcatSpreadable")},function(t,e,r){r(19)("iterator")},function(t,e,r){r(19)("match")},function(t,e,r){r(19)("matchAll")},function(t,e,r){r(19)("replace")},function(t,e,r){r(19)("search")},function(t,e,r){r(19)("species")},function(t,e,r){r(19)("split")},function(t,e,r){r(19)("toPrimitive")},function(t,e,r){r(19)("toStringTag")},function(t,e,r){r(19)("unscopables")},function(t,e,r){var n=r(0),i=r(165);n({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(t,e,r){r(0)({target:"Object",stat:!0,sham:!r(6)},{create:r(35)})},function(t,e,r){var n=r(0),i=r(6);n({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:r(9).f})},function(t,e,r){var n=r(0),i=r(6);n({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:r(120)})},function(t,e,r){var n=r(0),i=r(166).entries;n({target:"Object",stat:!0},{entries:function(t){return i(t)}})},function(t,e,r){var n=r(0),i=r(76),o=r(1),s=r(3),a=r(49).onFreeze,u=Object.freeze;n({target:"Object",stat:!0,forced:o(function(){u(1)}),sham:!i},{freeze:function(t){return u&&s(t)?u(a(t)):t}})},function(t,e,r){var n=r(0),i=r(55),o=r(50);n({target:"Object",stat:!0},{fromEntries:function(t){var r={};return i(t,function(t,e){o(r,t,e)},void 0,!0),r}})},function(t,e,r){var n=r(0),i=r(1),o=r(21),s=r(18).f,a=r(6),u=i(function(){s(1)});n({target:"Object",stat:!0,forced:!a||u,sham:!a},{getOwnPropertyDescriptor:function(t,e){return s(o(t),e)}})},function(t,e,r){var n=r(0),i=r(6),u=r(117),c=r(21),l=r(18),h=r(50);n({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){for(var e,r,n=c(t),i=l.f,o=u(n),s={},a=0;o.length>a;)void 0!==(r=i(n,e=o[a++]))&&h(s,e,r);return s}})},function(t,e,r){var n=r(0),i=r(1),o=r(163).f;n({target:"Object",stat:!0,forced:i(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:o})},function(t,e,r){var n=r(0),i=r(1),o=r(10),s=r(32),a=r(122);n({target:"Object",stat:!0,forced:i(function(){s(1)}),sham:!a},{getPrototypeOf:function(t){return s(o(t))}})},function(t,e,r){r(0)({target:"Object",stat:!0},{is:r(168)})},function(t,e,r){var n=r(0),i=r(1),o=r(3),s=Object.isExtensible;n({target:"Object",stat:!0,forced:i(function(){s(1)})},{isExtensible:function(t){return!!o(t)&&(!s||s(t))}})},function(t,e,r){var n=r(0),i=r(1),o=r(3),s=Object.isFrozen;n({target:"Object",stat:!0,forced:i(function(){s(1)})},{isFrozen:function(t){return!o(t)||!!s&&s(t)}})},function(t,e,r){var n=r(0),i=r(1),o=r(3),s=Object.isSealed;n({target:"Object",stat:!0,forced:i(function(){s(1)})},{isSealed:function(t){return!o(t)||!!s&&s(t)}})},function(t,e,r){var n=r(0),i=r(10),o=r(74);n({target:"Object",stat:!0,forced:r(1)(function(){o(1)})},{keys:function(t){return o(i(t))}})},function(t,e,r){var n=r(0),i=r(3),o=r(49).onFreeze,s=r(76),a=r(1),u=Object.preventExtensions;n({target:"Object",stat:!0,forced:a(function(){u(1)}),sham:!s},{preventExtensions:function(t){return u&&i(t)?u(o(t)):t}})},function(t,e,r){var n=r(0),i=r(3),o=r(49).onFreeze,s=r(76),a=r(1),u=Object.seal;n({target:"Object",stat:!0,forced:a(function(){u(1)}),sham:!s},{seal:function(t){return u&&i(t)?u(o(t)):t}})},function(t,e,r){r(0)({target:"Object",stat:!0},{setPrototypeOf:r(57)})},function(t,e,r){var n=r(0),i=r(166).values;n({target:"Object",stat:!0},{values:function(t){return i(t)}})},function(t,e,r){var n=r(14),i=r(269),o=Object.prototype;i!==o.toString&&n(o,"toString",i,{unsafe:!0})},function(t,e,r){"use strict";var n=r(56),i={};i[r(7)("toStringTag")]="z",t.exports="[object z]"!==String(i)?function(){return"[object "+n(this)+"]"}:i.toString},function(t,e,r){"use strict";var n=r(0),i=r(6),o=r(89),s=r(10),a=r(20),u=r(9);i&&n({target:"Object",proto:!0,forced:o},{__defineGetter__:function(t,e){u.f(s(this),t,{get:a(e),enumerable:!0,configurable:!0})}})},function(t,e,r){"use strict";var n=r(0),i=r(6),o=r(89),s=r(10),a=r(20),u=r(9);i&&n({target:"Object",proto:!0,forced:o},{__defineSetter__:function(t,e){u.f(s(this),t,{set:a(e),enumerable:!0,configurable:!0})}})},function(t,e,r){"use strict";var n=r(0),i=r(6),o=r(89),s=r(10),a=r(27),u=r(32),c=r(18).f;i&&n({target:"Object",proto:!0,forced:o},{__lookupGetter__:function(t){var e,r=s(this),n=a(t,!0);do{if(e=c(r,n))return e.get}while(r=u(r))}})},function(t,e,r){"use strict";var n=r(0),i=r(6),o=r(89),s=r(10),a=r(27),u=r(32),c=r(18).f;i&&n({target:"Object",proto:!0,forced:o},{__lookupSetter__:function(t){var e,r=s(this),n=a(t,!0);do{if(e=c(r,n))return e.set}while(r=u(r))}})},function(t,e,r){r(0)({target:"Function",proto:!0},{bind:r(170)})},function(t,e,r){var n=r(6),i=r(9).f,o=Function.prototype,s=o.toString,a=/^\s*function ([^ (]*)/;!n||"name"in o||i(o,"name",{configurable:!0,get:function(){try{return s.call(this).match(a)[1]}catch(t){return""}}})},function(t,e,r){"use strict";var n=r(3),i=r(9),o=r(32),s=r(7)("hasInstance"),a=Function.prototype;s in a||i.f(a,s,{value:function(t){if("function"!=typeof this||!n(t))return!1;if(!n(this.prototype))return t instanceof this;for(;t=o(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,r){r(0)({global:!0},{globalThis:r(2)})},function(t,e,r){var n=r(0),i=r(171);n({target:"Array",stat:!0,forced:!r(90)(function(t){Array.from(t)})},{from:i})},function(t,e,r){r(0)({target:"Array",stat:!0},{isArray:r(48)})},function(t,e,r){"use strict";var n=r(0),i=r(1),o=r(50);n({target:"Array",stat:!0,forced:i(function(){function t(){}return!(Array.of.call(t)instanceof t)})},{of:function(){for(var t=0,e=arguments.length,r=new("function"==typeof this?this:Array)(e);t<e;)o(r,t,arguments[t++]);return r.length=e,r}})},function(t,e,r){"use strict";function c(t){if(!s(t))return!1;var e=t[g];return void 0!==e?!!e:o(t)}var n=r(0),i=r(1),o=r(48),s=r(3),l=r(10),h=r(8),d=r(50),f=r(75),a=r(79),u=r(7),p=r(123),g=u("isConcatSpreadable"),v=51<=p||!i(function(){var t=[];return t[g]=!1,t.concat()[0]!==t}),y=a("concat");n({target:"Array",proto:!0,forced:!v||!y},{concat:function(t){var e,r,n,i,o,s=l(this),a=f(s,0),u=0;for(e=-1,n=arguments.length;e<n;e++)if(c(o=-1===e?s:arguments[e])){if(9007199254740991<u+(i=h(o.length)))throw TypeError("Maximum allowed index exceeded");for(r=0;r<i;r++,u++)r in o&&d(a,u,o[r])}else{if(9007199254740991<=u)throw TypeError("Maximum allowed index exceeded");d(a,u++,o)}return a.length=u,a}})},function(t,e,r){var n=r(0),i=r(172),o=r(43);n({target:"Array",proto:!0},{copyWithin:i}),o("copyWithin")},function(t,e,r){"use strict";var n=r(0),i=r(12).every;n({target:"Array",proto:!0,forced:r(36)("every")},{every:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}})},function(t,e,r){var n=r(0),i=r(124),o=r(43);n({target:"Array",proto:!0},{fill:i}),o("fill")},function(t,e,r){"use strict";var n=r(0),i=r(12).filter;n({target:"Array",proto:!0,forced:!r(79)("filter")},{filter:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}})},function(t,e,r){"use strict";var n=r(0),i=r(12).find,o=r(43),s=!0;"find"in[]&&Array(1).find(function(){s=!1}),n({target:"Array",proto:!0,forced:s},{find:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),o("find")},function(t,e,r){"use strict";var n=r(0),i=r(12).findIndex,o=r(43),s=!0;"findIndex"in[]&&Array(1).findIndex(function(){s=!1}),n({target:"Array",proto:!0,forced:s},{findIndex:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),o("findIndex")},function(t,e,r){"use strict";var n=r(0),i=r(173),o=r(10),s=r(8),a=r(25),u=r(75);n({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=o(this),r=s(e.length),n=u(e,0);return n.length=i(n,e,e,r,0,void 0===t?1:a(t)),n}})},function(t,e,r){"use strict";var n=r(0),i=r(173),o=r(10),s=r(8),a=r(20),u=r(75);n({target:"Array",proto:!0},{flatMap:function(t){var e,r=o(this),n=s(r.length);return a(t),(e=u(r,0)).length=i(e,r,r,n,0,1,t,1<arguments.length?arguments[1]:void 0),e}})},function(t,e,r){"use strict";var n=r(0),i=r(174);n({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(t,e,r){"use strict";var n=r(0),i=r(72).includes,o=r(43);n({target:"Array",proto:!0},{includes:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),o("includes")},function(t,e,r){"use strict";var n=r(0),i=r(72).indexOf,o=r(36),s=[].indexOf,a=!!s&&1/[1].indexOf(1,-0)<0,u=o("indexOf");n({target:"Array",proto:!0,forced:a||u},{indexOf:function(t){return a?s.apply(this,arguments)||0:i(this,t,1<arguments.length?arguments[1]:void 0)}})},function(t,e,r){"use strict";var n=r(0),i=r(68),o=r(21),s=r(36),a=[].join,u=i!=Object,c=s("join",",");n({target:"Array",proto:!0,forced:u||c},{join:function(t){return a.call(o(this),void 0===t?",":t)}})},function(t,e,r){var n=r(0),i=r(175);n({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},function(t,e,r){"use strict";var n=r(0),i=r(12).map;n({target:"Array",proto:!0,forced:!r(79)("map")},{map:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}})},function(t,e,r){"use strict";var n=r(0),i=r(92).left;n({target:"Array",proto:!0,forced:r(36)("reduce")},{reduce:function(t){return i(this,t,arguments.length,1<arguments.length?arguments[1]:void 0)}})},function(t,e,r){"use strict";var n=r(0),i=r(92).right;n({target:"Array",proto:!0,forced:r(36)("reduceRight")},{reduceRight:function(t){return i(this,t,arguments.length,1<arguments.length?arguments[1]:void 0)}})},function(t,e,r){"use strict";var n=r(0),i=r(48),o=[].reverse,s=[1,2];n({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),o.call(this)}})},function(t,e,r){"use strict";var n=r(0),c=r(3),l=r(48),h=r(41),d=r(8),f=r(21),p=r(50),i=r(79),g=r(7)("species"),v=[].slice,y=Math.max;n({target:"Array",proto:!0,forced:!i("slice")},{slice:function(t,e){var r,n,i,o=f(this),s=d(o.length),a=h(t,s),u=h(void 0===e?s:e,s);if(l(o)&&("function"!=typeof(r=o.constructor)||r!==Array&&!l(r.prototype)?c(r)&&null===(r=r[g])&&(r=void 0):r=void 0,r===Array||void 0===r))return v.call(o,a,u);for(n=new(void 0===r?Array:r)(y(u-a,0)),i=0;a<u;a++,i++)a in o&&p(n,i,o[a]);return n.length=i,n}})},function(t,e,r){"use strict";var n=r(0),i=r(12).some;n({target:"Array",proto:!0,forced:r(36)("some")},{some:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}})},function(t,e,r){"use strict";var n=r(0),i=r(20),o=r(10),s=r(1),a=r(36),u=[],c=u.sort,l=s(function(){u.sort(void 0)}),h=s(function(){u.sort(null)}),d=a("sort");n({target:"Array",proto:!0,forced:l||!h||d},{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,e,r){"use strict";var n=r(0),d=r(41),f=r(25),p=r(8),g=r(10),v=r(75),y=r(50),i=r(79),m=Math.max,_=Math.min;n({target:"Array",proto:!0,forced:!i("splice")},{splice:function(t,e){var r,n,i,o,s,a,u=g(this),c=p(u.length),l=d(t,c),h=arguments.length;if(0===h?r=n=0:n=1===h?(r=0,c-l):(r=h-2,_(m(f(e),0),c-l)),9007199254740991<c+r-n)throw TypeError("Maximum allowed length exceeded");for(i=v(u,n),o=0;o<n;o++)(s=l+o)in u&&y(i,o,u[s]);if(r<(i.length=n)){for(o=l;o<c-n;o++)a=o+r,(s=o+n)in u?u[a]=u[s]:delete u[a];for(o=c;c-n+r<o;o--)delete u[o-1]}else if(n<r)for(o=c-n;l<o;o--)a=o+r-1,(s=o+n-1)in u?u[a]=u[s]:delete u[a];for(o=0;o<r;o++)u[o+l]=arguments[o+2];return u.length=c-n+r,i}})},function(t,e,r){r(58)("Array")},function(t,e,r){r(43)("flat")},function(t,e,r){r(43)("flatMap")},function(t,e,r){var n=r(0),o=r(41),s=String.fromCharCode,i=String.fromCodePoint;n({target:"String",stat:!0,forced:!!i&&1!=i.length},{fromCodePoint:function(t){for(var e,r=[],n=arguments.length,i=0;i<n;){if(e=+arguments[i++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");r.push(e<65536?s(e):s(55296+((e-=65536)>>10),e%1024+56320))}return r.join("")}})},function(t,e,r){var n=r(0),s=r(21),a=r(8);n({target:"String",stat:!0},{raw:function(t){for(var e=s(t.raw),r=a(e.length),n=arguments.length,i=[],o=0;o<r;)i.push(String(e[o++])),o<n&&i.push(String(arguments[o]));return i.join("")}})},function(t,e,r){"use strict";var n=r(0),i=r(94).codeAt;n({target:"String",proto:!0},{codePointAt:function(t){return i(this,t)}})},function(t,e,r){"use strict";var n=r(0),s=r(8),a=r(127),u=r(16),i=r(128),c="".endsWith,l=Math.min;n({target:"String",proto:!0,forced:!i("endsWith")},{endsWith:function(t){var e=String(u(this));a(t);var r=1<arguments.length?arguments[1]:void 0,n=s(e.length),i=void 0===r?n:l(s(r),n),o=String(t);return c?c.call(e,o,i):e.slice(i-o.length,i)===o}})},function(t,e,r){"use strict";var n=r(0),i=r(127),o=r(16);n({target:"String",proto:!0,forced:!r(128)("includes")},{includes:function(t){return!!~String(o(this)).indexOf(i(t),1<arguments.length?arguments[1]:void 0)}})},function(t,e,r){"use strict";var n=r(96),h=r(4),d=r(8),i=r(16),f=r(98),p=r(99);n("match",1,function(n,c,l){return[function(t){var e=i(this),r=null==t?void 0:t[n];return void 0!==r?r.call(t,e):new RegExp(t)[n](String(e))},function(t){var e=l(c,t,this);if(e.done)return e.value;var r=h(t),n=String(this);if(!r.global)return p(r,n);for(var i,o=r.unicode,s=[],a=r.lastIndex=0;null!==(i=p(r,n));){var u=String(i[0]);""===(s[a]=u)&&(r.lastIndex=f(n,d(r.lastIndex),o)),a++}return 0===a?null:s}]})},function(t,e,r){"use strict";function o(t){var e,r,n,i,o,s,a=l(this),u=String(t);return e=v(a,RegExp),void 0===(r=a.flags)&&a instanceof RegExp&&!("flags"in S)&&(r=d.call(a)),n=void 0===r?"":String(r),i=new e(e===RegExp?a.source:a,n),o=!!~n.indexOf("g"),s=!!~n.indexOf("u"),i.lastIndex=c(a.lastIndex),new C(i,u,o,s)}var n=r(0),i=r(126),s=r(16),c=r(8),a=r(20),l=r(4),u=r(56),h=r(95),d=r(80),f=r(13),p=r(1),g=r(7),v=r(37),y=r(98),m=r(22),_=r(34),b=g("matchAll"),T=m.set,E=m.getterFor("RegExp String Iterator"),S=RegExp.prototype,w=S.exec,A="".matchAll,k=!!A&&!p(function(){"a".matchAll(/./)}),C=i(function(t,e,r,n){T(this,{type:"RegExp String Iterator",regexp:t,string:e,global:r,unicode:n,done:!1})},"RegExp String",function(){var t=E(this);if(t.done)return{value:void 0,done:!0};var e=t.regexp,r=t.string,n=function(t,e){var r,n=t.exec;if("function"!=typeof n)return w.call(t,e);if("object"!=typeof(r=n.call(t,e)))throw TypeError("Incorrect exec result");return r}(e,r);return null===n?{value:void 0,done:t.done=!0}:(t.global?""==String(n[0])&&(e.lastIndex=y(r,c(e.lastIndex),t.unicode)):t.done=!0,{value:n,done:!1})});n({target:"String",proto:!0,forced:k},{matchAll:function(t){var e,r,n,i=s(this);if(null!=t){if(h(t)&&!~String(s("flags"in S?t.flags:d.call(t))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(k)return A.apply(i,arguments);if(void 0===(r=t[b])&&_&&"RegExp"==u(t)&&(r=o),null!=r)return a(r).call(t,i)}else if(k)return A.apply(i,arguments);return e=String(i),n=new RegExp(t,"g"),_?o.call(n,e):n[b](e)}}),_||b in S||f(S,b,o)},function(t,e,r){"use strict";var n=r(0),i=r(129).end;n({target:"String",proto:!0,forced:r(177)},{padEnd:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}})},function(t,e,r){"use strict";var n=r(0),i=r(129).start;n({target:"String",proto:!0,forced:r(177)},{padStart:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}})},function(t,e,r){r(0)({target:"String",proto:!0},{repeat:r(130)})},function(t,e,r){"use strict";var n=r(96),w=r(4),d=r(10),A=r(8),k=r(25),o=r(16),C=r(98),x=r(99),R=Math.max,P=Math.min,f=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;n("replace",2,function(i,T,E){return[function(t,e){var r=o(this),n=null==t?void 0:t[i];return void 0!==n?n.call(t,r,e):T.call(String(r),t,e)},function(t,e){var r=E(T,t,this,e);if(r.done)return r.value;var n=w(t),i=String(this),o="function"==typeof e;o||(e=String(e));var s=n.global;if(s){var a=n.unicode;n.lastIndex=0}for(var u=[];;){var c=x(n,i);if(null===c)break;if(u.push(c),!s)break;""===String(c[0])&&(n.lastIndex=C(i,A(n.lastIndex),a))}for(var l,h="",d=0,f=0;f<u.length;f++){c=u[f];for(var p=String(c[0]),g=R(P(k(c.index),i.length),0),v=[],y=1;y<c.length;y++)v.push(void 0===(l=c[y])?l:String(l));var m=c.groups;if(o){var _=[p].concat(v,g,i);void 0!==m&&_.push(m);var b=String(e.apply(void 0,_))}else b=S(p,i,g,v,m,e);d<=g&&(h+=i.slice(d,g)+b,d=g+p.length)}return h+i.slice(d)}];function S(o,s,a,u,c,t){var l=a+o.length,h=u.length,e=g;return void 0!==c&&(c=d(c),e=p),T.call(t,e,function(t,e){var r;switch(e.charAt(0)){case"$":return"$";case"&":return o;case"`":return s.slice(0,a);case"'":return s.slice(l);case"<":r=c[e.slice(1,-1)];break;default:var n=+e;if(0==n)return t;if(h<n){var i=f(n/10);return 0===i?t:i<=h?void 0===u[i-1]?e.charAt(1):u[i-1]+e.charAt(1):t}r=u[n-1]}return void 0===r?"":r})}})},function(t,e,r){"use strict";var n=r(96),u=r(4),i=r(16),c=r(168),l=r(99);n("search",1,function(n,s,a){return[function(t){var e=i(this),r=null==t?void 0:t[n];return void 0!==r?r.call(t,e):new RegExp(t)[n](String(e))},function(t){var e=a(s,t,this);if(e.done)return e.value;var r=u(t),n=String(this),i=r.lastIndex;c(i,0)||(r.lastIndex=0);var o=l(r,n);return c(r.lastIndex,i)||(r.lastIndex=i),null===o?-1:o.index}]})},function(t,e,r){"use strict";var n=r(96),h=r(95),_=r(4),d=r(16),b=r(37),T=r(98),E=r(8),S=r(99),f=r(97),i=r(1),p=[].push,w=Math.min,A=!i(function(){return!RegExp(4294967295,"y")});n("split",2,function(i,v,y){var m;return m="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(t,e){var r=String(d(this)),n=void 0===e?4294967295:e>>>0;if(0==n)return[];if(void 0===t)return[r];if(!h(t))return v.call(r,t,n);for(var i,o,s,a=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,l=new RegExp(t.source,u+"g");(i=f.call(l,r))&&!((o=l.lastIndex)>c&&(a.push(r.slice(c,i.index)),1<i.length&&i.index<r.length&&p.apply(a,i.slice(1)),s=i[0].length,c=o,a.length>=n));)l.lastIndex===i.index&&l.lastIndex++;return c===r.length?!s&&l.test("")||a.push(""):a.push(r.slice(c)),a.length>n?a.slice(0,n):a}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:v.call(this,t,e)}:v,[function(t,e){var r=d(this),n=null==t?void 0:t[i];return void 0!==n?n.call(t,r,e):m.call(String(r),t,e)},function(t,e){var r=y(m,t,this,e,m!==v);if(r.done)return r.value;var n=_(t),i=String(this),o=b(n,RegExp),s=n.unicode,a=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(A?"y":"g"),u=new o(A?n:"^(?:"+n.source+")",a),c=void 0===e?4294967295:e>>>0;if(0==c)return[];if(0===i.length)return null===S(u,i)?[i]:[];for(var l=0,h=0,d=[];h<i.length;){u.lastIndex=A?h:0;var f,p=S(u,A?i:i.slice(h));if(null===p||(f=w(E(u.lastIndex+(A?0:h)),i.length))===l)h=T(i,h,s);else{if(d.push(i.slice(l,h)),d.length===c)return d;for(var g=1;g<=p.length-1;g++)if(d.push(p[g]),d.length===c)return d;h=l=f}}return d.push(i.slice(l)),d}]},!A)},function(t,e,r){"use strict";var n=r(0),i=r(8),o=r(127),s=r(16),a=r(128),u="".startsWith,c=Math.min;n({target:"String",proto:!0,forced:!a("startsWith")},{startsWith:function(t){var e=String(s(this));o(t);var r=i(c(1<arguments.length?arguments[1]:void 0,e.length)),n=String(t);return u?u.call(e,n,r):e.slice(r,r+n.length)===n}})},function(t,e,r){"use strict";var n=r(0),i=r(59).trim;n({target:"String",proto:!0,forced:r(131)("trim")},{trim:function(){return i(this)}})},function(t,e,r){"use strict";var n=r(0),i=r(59).start,o=r(131)("trimStart"),s=o?function(){return i(this)}:"".trimStart;n({target:"String",proto:!0,forced:o},{trimStart:s,trimLeft:s})},function(t,e,r){"use strict";var n=r(0),i=r(59).end,o=r(131)("trimEnd"),s=o?function(){return i(this)}:"".trimEnd;n({target:"String",proto:!0,forced:o},{trimEnd:s,trimRight:s})},function(t,e,r){"use strict";var n=r(0),i=r(23);n({target:"String",proto:!0,forced:r(24)("anchor")},{anchor:function(t){return i(this,"a","name",t)}})},function(t,e,r){"use strict";var n=r(0),i=r(23);n({target:"String",proto:!0,forced:r(24)("big")},{big:function(){return i(this,"big","","")}})},function(t,e,r){"use strict";var n=r(0),i=r(23);n({target:"String",proto:!0,forced:r(24)("blink")},{blink:function(){return i(this,"blink","","")}})},function(t,e,r){"use strict";var n=r(0),i=r(23);n({target:"String",proto:!0,forced:r(24)("bold")},{bold:function(){return i(this,"b","","")}})},function(t,e,r){"use strict";var n=r(0),i=r(23);n({target:"String",proto:!0,forced:r(24)("fixed")},{fixed:function(){return i(this,"tt","","")}})},function(t,e,r){"use strict";var n=r(0),i=r(23);n({target:"String",proto:!0,forced:r(24)("fontcolor")},{fontcolor:function(t){return i(this,"font","color",t)}})},function(t,e,r){"use strict";var n=r(0),i=r(23);n({target:"String",proto:!0,forced:r(24)("fontsize")},{fontsize:function(t){return i(this,"font","size",t)}})},function(t,e,r){"use strict";var n=r(0),i=r(23);n({target:"String",proto:!0,forced:r(24)("italics")},{italics:function(){return i(this,"i","","")}})},function(t,e,r){"use strict";var n=r(0),i=r(23);n({target:"String",proto:!0,forced:r(24)("link")},{link:function(t){return i(this,"a","href",t)}})},function(t,e,r){"use strict";var n=r(0),i=r(23);n({target:"String",proto:!0,forced:r(24)("small")},{small:function(){return i(this,"small","","")}})},function(t,e,r){"use strict";var n=r(0),i=r(23);n({target:"String",proto:!0,forced:r(24)("strike")},{strike:function(){return i(this,"strike","","")}})},function(t,e,r){"use strict";var n=r(0),i=r(23);n({target:"String",proto:!0,forced:r(24)("sub")},{sub:function(){return i(this,"sub","","")}})},function(t,e,r){"use strict";var n=r(0),i=r(23);n({target:"String",proto:!0,forced:r(24)("sup")},{sup:function(){return i(this,"sup","","")}})},function(t,e,r){var n=r(6),i=r(2),o=r(73),s=r(101),a=r(9).f,u=r(47).f,c=r(95),l=r(80),h=r(14),d=r(1),f=r(58),p=r(7)("match"),g=i.RegExp,v=g.prototype,y=/a/g,m=/a/g,_=new g(y)!==y;if(n&&o("RegExp",!_||d(function(){return m[p]=!1,g(y)!=y||g(m)==m||"/a/i"!=g(y,"i")}))){function b(e){e in T||a(T,e,{configurable:!0,get:function(){return g[e]},set:function(t){g[e]=t}})}for(var T=function(t,e){var r=this instanceof T,n=c(t),i=void 0===e;return!r&&n&&t.constructor===T&&i?t:s(_?new g(n&&!i?t.source:t,e):g((n=t instanceof T)?t.source:t,n&&i?l.call(t):e),r?this:v,T)},E=u(g),S=0;E.length>S;)b(E[S++]);(v.constructor=T).prototype=v,h(i,"RegExp",T)}f("RegExp")},function(t,e,r){"use strict";var n=r(0),i=r(97);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(t,e,r){var n=r(6),i=r(9),o=r(80);n&&"g"!=/./g.flags&&i.f(RegExp.prototype,"flags",{configurable:!0,get:o})},function(t,e,r){"use strict";var n=r(14),i=r(4),o=r(1),s=r(80),a=RegExp.prototype,u=a.toString,c=o(function(){return"/a/b"!=u.call({source:"a",flags:"b"})}),l="toString"!=u.name;(c||l)&&n(RegExp.prototype,"toString",function(){var t=i(this),e=String(t.source),r=t.flags;return"/"+e+"/"+String(void 0===r&&t instanceof RegExp&&!("flags"in a)?s.call(t):r)},{unsafe:!0})},function(t,e,r){var n=r(0),i=r(179);n({global:!0,forced:parseInt!=i},{parseInt:i})},function(t,e,r){var n=r(0),i=r(180);n({global:!0,forced:parseFloat!=i},{parseFloat:i})},function(t,e,r){"use strict";function n(t){var e,r,n,i,o,s,a,u,c=h(t,!1);if("string"==typeof c&&2<c.length)if(43===(e=(c=y(c)).charCodeAt(0))||45===e){if(88===(r=c.charCodeAt(2))||120===r)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+c}for(s=(o=c.slice(2)).length,a=0;a<s;a++)if((u=o.charCodeAt(a))<48||i<u)return NaN;return parseInt(o,n)}return+c}var i=r(6),o=r(2),s=r(73),a=r(14),u=r(11),c=r(26),l=r(101),h=r(27),d=r(1),f=r(35),p=r(47).f,g=r(18).f,v=r(9).f,y=r(59).trim,m=o.Number,_=m.prototype,b="Number"==c(f(_));if(s("Number",!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var T,E=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof E&&(b?d(function(){_.valueOf.call(r)}):"Number"!=c(r))?l(new m(n(e)),r,E):n(e)},S=i?p(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;S.length>w;w++)u(m,T=S[w])&&!u(E,T)&&v(E,T,g(m,T));a(o,"Number",(E.prototype=_).constructor=E)}},function(t,e,r){r(0)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(t,e,r){r(0)({target:"Number",stat:!0},{isFinite:r(345)})},function(t,e,r){var n=r(2).isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&n(t)}},function(t,e,r){r(0)({target:"Number",stat:!0},{isInteger:r(181)})},function(t,e,r){r(0)({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},function(t,e,r){var n=r(0),i=r(181),o=Math.abs;n({target:"Number",stat:!0},{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,r){r(0)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,r){r(0)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,r){var n=r(0),i=r(180);n({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},function(t,e,r){var n=r(0),i=r(179);n({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},function(t,e,r){"use strict";var n=r(0),f=r(25),p=r(182),g=r(130),i=r(1),o=1..toFixed,v=Math.floor,y=function(t,e,r){return 0===e?r:e%2==1?y(t,e-1,r*t):y(t*t,e/2,r)};n({target:"Number",proto:!0,forced:o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i(function(){o.call({})})},{toFixed:function(t){function e(t,e){for(var r=-1,n=e;++r<6;)n+=t*l[r],l[r]=n%1e7,n=v(n/1e7)}function r(t){for(var e=6,r=0;0<=--e;)r+=l[e],l[e]=v(r/t),r=r%t*1e7}function n(){for(var t=6,e="";0<=--t;)if(""!==e||0===t||0!==l[t]){var r=String(l[t]);e=""===e?r:e+g.call("0",7-r.length)+r}return e}var i,o,s,a,u=p(this),c=f(t),l=[0,0,0,0,0,0],h="",d="0";if(c<0||20<c)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||1e21<=u)return String(u);if(u<0&&(h="-",u=-u),1e-21<u)if(o=(i=function(){for(var t=0,e=u*y(2,69,1);4096<=e;)t+=12,e/=4096;for(;2<=e;)t+=1,e/=2;return t}()-69)<0?u*y(2,-i,1):u/y(2,i,1),o*=4503599627370496,0<(i=52-i)){for(e(0,o),s=c;7<=s;)e(1e7,0),s-=7;for(e(y(10,s,1),0),s=i-1;23<=s;)r(1<<23),s-=23;r(1<<s),e(1,1),r(2),d=n()}else e(0,o),e(1<<-i,0),d=n()+g.call("0",c);return 0<c?h+((a=d.length)<=c?"0."+g.call("0",c-a)+d:d.slice(0,a-c)+"."+d.slice(a-c)):h+d}})},function(t,e,r){"use strict";var n=r(0),i=r(1),o=r(182),s=1..toPrecision;n({target:"Number",proto:!0,forced:i(function(){return"1"!==s.call(1,void 0)})||!i(function(){s.call({})})},{toPrecision:function(t){return void 0===t?s.call(o(this)):s.call(o(this),t)}})},function(t,e,r){var n=r(0),i=r(183),o=Math.acosh,s=Math.log,a=Math.sqrt,u=Math.LN2;n({target:"Math",stat:!0,forced:!o||710!=Math.floor(o(Number.MAX_VALUE))||o(1/0)!=1/0},{acosh:function(t){return(t=+t)<1?NaN:94906265.62425156<t?s(t)+u:i(t-1+a(t-1)*a(t+1))}})},function(t,e,r){var n=r(0),i=Math.asinh,o=Math.log,s=Math.sqrt;n({target:"Math",stat:!0,forced:!(i&&0<1/i(0))},{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):o(e+s(e*e+1)):e}})},function(t,e,r){var n=r(0),i=Math.atanh,o=Math.log;n({target:"Math",stat:!0,forced:!(i&&1/i(-0)<0)},{atanh:function(t){return 0==(t=+t)?t:o((1+t)/(1-t))/2}})},function(t,e,r){var n=r(0),i=r(132),o=Math.abs,s=Math.pow;n({target:"Math",stat:!0},{cbrt:function(t){return i(t=+t)*s(o(t),1/3)}})},function(t,e,r){var n=r(0),i=Math.floor,o=Math.log,s=Math.LOG2E;n({target:"Math",stat:!0},{clz32:function(t){return(t>>>=0)?31-i(o(t+.5)*s):32}})},function(t,e,r){var n=r(0),i=r(102),o=Math.cosh,s=Math.abs,a=Math.E;n({target:"Math",stat:!0,forced:!o||o(710)===1/0},{cosh:function(t){var e=i(s(t)-1)+1;return(e+1/(e*a*a))*(a/2)}})},function(t,e,r){var n=r(0),i=r(102);n({target:"Math",stat:!0,forced:i!=Math.expm1},{expm1:i})},function(t,e,r){r(0)({target:"Math",stat:!0},{fround:r(363)})},function(t,e,r){var o=r(132),s=Math.abs,n=Math.pow,a=n(2,-52),u=n(2,-23),c=n(2,127)*(2-u),l=n(2,-126);t.exports=Math.fround||function(t){var e,r,n=s(t),i=o(t);return n<l?i*(n/l/u+1/a-1/a)*l*u:(r=(e=(1+u/a)*n)-(e-n))>c||r!=r?i*(1/0):i*r}},function(t,e,r){var n=r(0),i=Math.hypot,u=Math.abs,c=Math.sqrt;n({target:"Math",stat:!0,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(t,e){for(var r,n,i=0,o=0,s=arguments.length,a=0;o<s;)a<(r=u(arguments[o++]))?(i=i*(n=a/r)*n+1,a=r):i+=0<r?(n=r/a)*n:r;return a===1/0?1/0:a*c(i)}})},function(t,e,r){var n=r(0),i=r(1),o=Math.imul;n({target:"Math",stat:!0,forced:i(function(){return-5!=o(4294967295,5)||2!=o.length})},{imul:function(t,e){var r=+t,n=+e,i=65535&r,o=65535&n;return 0|i*o+((65535&r>>>16)*o+i*(65535&n>>>16)<<16>>>0)}})},function(t,e,r){var n=r(0),i=Math.log,o=Math.LOG10E;n({target:"Math",stat:!0},{log10:function(t){return i(t)*o}})},function(t,e,r){r(0)({target:"Math",stat:!0},{log1p:r(183)})},function(t,e,r){var n=r(0),i=Math.log,o=Math.LN2;n({target:"Math",stat:!0},{log2:function(t){return i(t)/o}})},function(t,e,r){r(0)({target:"Math",stat:!0},{sign:r(132)})},function(t,e,r){var n=r(0),i=r(1),o=r(102),s=Math.abs,a=Math.exp,u=Math.E;n({target:"Math",stat:!0,forced:i(function(){return-2e-17!=Math.sinh(-2e-17)})},{sinh:function(t){return s(t=+t)<1?(o(t)-o(-t))/2:(a(t-1)-a(-t-1))*(u/2)}})},function(t,e,r){var n=r(0),i=r(102),o=Math.exp;n({target:"Math",stat:!0},{tanh:function(t){var e=i(t=+t),r=i(-t);return e==1/0?1:r==1/0?-1:(e-r)/(o(t)+o(-t))}})},function(t,e,r){r(31)(Math,"Math",!0)},function(t,e,r){var n=r(0),i=Math.ceil,o=Math.floor;n({target:"Math",stat:!0},{trunc:function(t){return(0<t?o:i)(t)}})},function(t,e,r){r(0)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},function(t,e,r){"use strict";var n=r(0),i=r(1),o=r(10),s=r(27);n({target:"Date",proto:!0,forced:i(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})},{toJSON:function(t){var e=o(this),r=s(e);return"number"!=typeof r||isFinite(r)?e.toISOString():null}})},function(t,e,r){var n=r(0),i=r(377);n({target:"Date",proto:!0,forced:Date.prototype.toISOString!==i},{toISOString:i})},function(t,e,r){"use strict";var n=r(1),i=r(129).start,o=Math.abs,s=Date.prototype,a=s.getTime,u=s.toISOString;t.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=u.call(new Date(-5e13-1))})||!n(function(){u.call(new Date(NaN))})?function(){if(!isFinite(a.call(this)))throw RangeError("Invalid time value");var t=this.getUTCFullYear(),e=this.getUTCMilliseconds(),r=t<0?"-":9999<t?"+":"";return r+i(o(t),r?6:4,0)+"-"+i(this.getUTCMonth()+1,2,0)+"-"+i(this.getUTCDate(),2,0)+"T"+i(this.getUTCHours(),2,0)+":"+i(this.getUTCMinutes(),2,0)+":"+i(this.getUTCSeconds(),2,0)+"."+i(e,3,0)+"Z"}:u},function(t,e,r){var n=r(14),i=Date.prototype,o=i.toString,s=i.getTime;new Date(NaN)+""!="Invalid Date"&&n(i,"toString",function(){var t=s.call(this);return t==t?o.call(this):"Invalid Date"})},function(t,e,r){var n=r(13),i=r(380),o=r(7)("toPrimitive"),s=Date.prototype;o in s||n(s,o,i)},function(t,e,r){"use strict";var n=r(4),i=r(27);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(n(this),"number"!==t)}},function(t,e,r){var n=r(2);r(31)(n.JSON,"JSON",!0)},function(t,e,r){"use strict";function g(t){var e;return!(!E(t)||"function"!=typeof(e=t.then))&&e}function o(h,d,f){if(!d.notified){d.notified=!0;var p=d.reactions;P(function(){for(var t=d.value,e=1==d.state,r=0;p.length>r;){var n,i,o,s=p[r++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,l=s.domain;try{a?(e||(2===d.rejection&&it(h,d),d.rejection=1),!0===a?n=t:(l&&l.enter(),n=a(t),l&&(l.exit(),o=!0)),n===s.promise?c(q("Promise-chain cycle")):(i=g(n))?i.call(n,u,c):u(n)):c(t)}catch(t){l&&!o&&l.exit(),c(t)}}d.reactions=[],d.notified=!1,f&&!d.rejection&&rt(h,d)})}}function i(t,e,r){var n,i;Z?((n=K.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),f.dispatchEvent(n)):n={promise:e,reason:r},(i=f["on"+t])?i(n):"unhandledrejection"===t&&I("Unhandled promise rejection",r)}function s(e,r,n,i){return function(t){e(r,n,t,i)}}function a(t,e,r,n){e.done||(e.done=!0,n&&(e=n),e.value=r,e.state=2,o(t,e,!0))}var n,u,c,l,h=r(0),d=r(34),f=r(2),p=r(28),v=r(184),y=r(14),m=r(60),_=r(54),b=r(31),T=r(58),E=r(3),S=r(20),w=r(44),A=r(26),k=r(55),C=r(90),x=r(37),R=r(133).set,P=r(186),L=r(187),I=r(383),O=r(134),D=r(188),N=r(22),M=r(73),F=r(7),B=r(123),j=F("species"),U="Promise",V=N.get,G=N.set,H=N.getterFor(U),W=v,q=f.TypeError,K=f.document,z=f.process,Y=_("inspectSource"),X=p("fetch"),J=O.f,Q=J,$="process"==A(z),Z=!!(K&&K.createEvent&&f.dispatchEvent),tt=M(U,function(){var t=Y(W)!==String(W);if(66===B)return!0;if(!t&&!$&&"function"!=typeof PromiseRejectionEvent)return!0;if(d&&!W.prototype.finally)return!0;if(51<=B&&/native code/.test(W))return!1;function e(t){t(function(){},function(){})}var r=W.resolve(1);return(r.constructor={})[j]=e,!(r.then(function(){})instanceof e)}),et=tt||!C(function(t){W.all(t).catch(function(){})}),rt=function(r,n){R.call(f,function(){var t,e=n.value;if(nt(n)&&(t=D(function(){$?z.emit("unhandledRejection",e,r):i("unhandledrejection",r,e)}),n.rejection=$||nt(n)?2:1,t.error))throw t.value})},nt=function(t){return 1!==t.rejection&&!t.parent},it=function(t,e){R.call(f,function(){$?z.emit("rejectionHandled",t):i("rejectionhandled",t,e.value)})},ot=function(r,n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(r===t)throw q("Promise can't be resolved itself");var i=g(t);i?P(function(){var e={done:!1};try{i.call(t,s(ot,r,e,n),s(a,r,e,n))}catch(t){a(r,e,t,n)}}):(n.value=t,n.state=1,o(r,n,!1))}catch(t){a(r,{done:!1},t,n)}}};tt&&(W=function(t){w(this,W,U),S(t),n.call(this);var e=V(this);try{t(s(ot,this,e),s(a,this,e))}catch(t){a(this,e,t)}},(n=function(t){G(this,{type:U,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=m(W.prototype,{then:function(t,e){var r=H(this),n=J(x(this,W));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=$?z.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&o(this,r,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),u=function(){var t=new n,e=V(t);this.promise=t,this.resolve=s(ot,t,e),this.reject=s(a,t,e)},O.f=J=function(t){return t===W||t===c?new u(t):Q(t)},d||"function"!=typeof v||(l=v.prototype.then,y(v.prototype,"then",function(t,e){var r=this;return new W(function(t,e){l.call(r,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof X&&h({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return L(W,X.apply(f,arguments))}}))),h({global:!0,wrap:!0,forced:tt},{Promise:W}),b(W,U,!1,!0),T(U),c=p(U),h({target:U,stat:!0,forced:tt},{reject:function(t){var e=J(this);return e.reject.call(void 0,t),e.promise}}),h({target:U,stat:!0,forced:d||tt},{resolve:function(t){return L(d&&this===c?W:this,t)}}),h({target:U,stat:!0,forced:et},{all:function(t){var a=this,e=J(a),u=e.resolve,c=e.reject,r=D(function(){var n=S(a.resolve),i=[],o=0,s=1;k(t,function(t){var e=o++,r=!1;i.push(void 0),s++,n.call(a,t).then(function(t){r||(r=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return r.error&&c(r.value),e.promise},race:function(t){var r=this,n=J(r),i=n.reject,e=D(function(){var e=S(r.resolve);k(t,function(t){e.call(r,t).then(n.resolve,i)})});return e.error&&i(e.value),n.promise}})},function(t,e,r){var n=r(2);t.exports=function(t,e){var r=n.console;r&&r.error&&(1===arguments.length?r.error(t):r.error(t,e))}},function(t,e,r){"use strict";var n=r(0),c=r(20),i=r(134),o=r(188),l=r(55);n({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=i.f(a),u=e.resolve,r=e.reject,n=o(function(){var n=c(a.resolve),i=[],o=0,s=1;l(t,function(t){var e=o++,r=!1;i.push(void 0),s++,n.call(a,t).then(function(t){r||(r=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){r||(r=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return n.error&&r(n.value),e.promise}})},function(t,e,r){"use strict";var n=r(0),i=r(34),o=r(184),s=r(28),a=r(37),u=r(187),c=r(14);n({target:"Promise",proto:!0,real:!0},{finally:function(e){var r=a(this,s("Promise")),t="function"==typeof e;return this.then(t?function(t){return u(r,e()).then(function(){return t})}:e,t?function(t){return u(r,e()).then(function(){throw t})}:e)}}),i||"function"!=typeof o||o.prototype.finally||c(o.prototype,"finally",s("Promise").prototype.finally)},function(t,e,r){"use strict";var n=r(103),i=r(189);t.exports=n("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},i,!0)},function(t,e,r){"use strict";var n=r(103),i=r(189);t.exports=n("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},i)},function(t,e,r){"use strict";function n(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}var i,o=r(2),s=r(60),a=r(49),u=r(103),c=r(190),l=r(3),h=r(22).enforce,d=r(158),f=!o.ActiveXObject&&"ActiveXObject"in o,p=Object.isExtensible,g=t.exports=u("WeakMap",n,c,!0,!0);if(d&&f){i=c.getConstructor(n,"WeakMap",!0),a.REQUIRED=!0;var v=g.prototype,y=v.delete,m=v.has,_=v.get,b=v.set;s(v,{delete:function(t){if(!l(t)||p(t))return y.call(this,t);var e=h(this);return e.frozen||(e.frozen=new i),y.call(this,t)||e.frozen.delete(t)},has:function(t){if(!l(t)||p(t))return m.call(this,t);var e=h(this);return e.frozen||(e.frozen=new i),m.call(this,t)||e.frozen.has(t)},get:function(t){if(!l(t)||p(t))return _.call(this,t);var e=h(this);return e.frozen||(e.frozen=new i),m.call(this,t)?_.call(this,t):e.frozen.get(t)},set:function(t,e){if(l(t)&&!p(t)){var r=h(this);r.frozen||(r.frozen=new i),m.call(this,t)?b.call(this,t,e):r.frozen.set(t,e)}else b.call(this,t,e);return this}})}},function(t,e,r){"use strict";r(103)("WeakSet",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},r(190),!1,!0)},function(t,e,r){"use strict";var n=r(0),i=r(2),o=r(104),s=r(58),a=o.ArrayBuffer;n({global:!0,forced:i.ArrayBuffer!==a},{ArrayBuffer:a}),s("ArrayBuffer")},function(t,e,r){var n=r(0),i=r(5);n({target:"ArrayBuffer",stat:!0,forced:!i.NATIVE_ARRAY_BUFFER_VIEWS},{isView:i.isView})},function(t,e,r){"use strict";var n=r(0),i=r(1),o=r(104),c=r(4),l=r(41),h=r(8),d=r(37),f=o.ArrayBuffer,p=o.DataView,g=f.prototype.slice;n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i(function(){return!new f(2).slice(1,void 0).byteLength})},{slice:function(t,e){if(void 0!==g&&void 0===e)return g.call(c(this),t);for(var r=c(this).byteLength,n=l(t,r),i=l(void 0===e?r:e,r),o=new(d(this,f))(h(i-n)),s=new p(this),a=new p(o),u=0;n<i;)a.setUint8(u++,s.getUint8(n++));return o}})},function(t,e,r){var n=r(0),i=r(104);n({global:!0,forced:!r(5).NATIVE_ARRAY_BUFFER},{DataView:i.DataView})},function(t,e,r){r(38)("Int8",1,function(n){return function(t,e,r){return n(this,t,e,r)}})},function(t,e,r){var n=r(25);t.exports=function(t){var e=n(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},function(t,e,r){r(38)("Uint8",1,function(n){return function(t,e,r){return n(this,t,e,r)}})},function(t,e,r){r(38)("Uint8",1,function(n){return function(t,e,r){return n(this,t,e,r)}},!0)},function(t,e,r){r(38)("Int16",2,function(n){return function(t,e,r){return n(this,t,e,r)}})},function(t,e,r){r(38)("Uint16",2,function(n){return function(t,e,r){return n(this,t,e,r)}})},function(t,e,r){r(38)("Int32",4,function(n){return function(t,e,r){return n(this,t,e,r)}})},function(t,e,r){r(38)("Uint32",4,function(n){return function(t,e,r){return n(this,t,e,r)}})},function(t,e,r){r(38)("Float32",4,function(n){return function(t,e,r){return n(this,t,e,r)}})},function(t,e,r){r(38)("Float64",8,function(n){return function(t,e,r){return n(this,t,e,r)}})},function(t,e,r){"use strict";var n=r(135),i=r(5),o=r(193);i.exportStatic("from",o,n)},function(t,e,r){"use strict";var n=r(5),i=r(135),o=n.aTypedArrayConstructor;n.exportStatic("of",function(){for(var t=0,e=arguments.length,r=new(o(this))(e);t<e;)r[t]=arguments[t++];return r},i)},function(t,e,r){"use strict";var n=r(5),i=r(172),o=n.aTypedArray;n.exportProto("copyWithin",function(t,e){return i.call(o(this),t,e,2<arguments.length?arguments[2]:void 0)})},function(t,e,r){"use strict";var n=r(5),i=r(12).every,o=n.aTypedArray;n.exportProto("every",function(t){return i(o(this),t,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(5),i=r(124),o=n.aTypedArray;n.exportProto("fill",function(t){return i.apply(o(this),arguments)})},function(t,e,r){"use strict";var n=r(5),s=r(12).filter,a=r(37),u=n.aTypedArray,c=n.aTypedArrayConstructor;n.exportProto("filter",function(t){for(var e=s(u(this),t,1<arguments.length?arguments[1]:void 0),r=a(this,this.constructor),n=0,i=e.length,o=new(c(r))(i);n<i;)o[n]=e[n++];return o})},function(t,e,r){"use strict";var n=r(5),i=r(12).find,o=n.aTypedArray;n.exportProto("find",function(t){return i(o(this),t,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(5),i=r(12).findIndex,o=n.aTypedArray;n.exportProto("findIndex",function(t){return i(o(this),t,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(5),i=r(12).forEach,o=n.aTypedArray;n.exportProto("forEach",function(t){i(o(this),t,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(5),i=r(72).includes,o=n.aTypedArray;n.exportProto("includes",function(t){return i(o(this),t,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(5),i=r(72).indexOf,o=n.aTypedArray;n.exportProto("indexOf",function(t){return i(o(this),t,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";function n(){return c.call(d(this))}var i=r(2),o=r(5),s=r(93),a=r(7)("iterator"),u=i.Uint8Array,c=s.values,l=s.keys,h=s.entries,d=o.aTypedArray,f=o.exportProto,p=u&&u.prototype[a],g=!!p&&("values"==p.name||null==p.name);f("entries",function(){return h.call(d(this))}),f("keys",function(){return l.call(d(this))}),f("values",n,!g),f(a,n,!g)},function(t,e,r){"use strict";var n=r(5),i=n.aTypedArray,o=[].join;n.exportProto("join",function(t){return o.apply(i(this),arguments)})},function(t,e,r){"use strict";var n=r(5),i=r(175),o=n.aTypedArray;n.exportProto("lastIndexOf",function(t){return i.apply(o(this),arguments)})},function(t,e,r){"use strict";var n=r(5),i=r(12).map,o=r(37),s=n.aTypedArray,a=n.aTypedArrayConstructor;n.exportProto("map",function(t){return i(s(this),t,1<arguments.length?arguments[1]:void 0,function(t,e){return new(a(o(t,t.constructor)))(e)})})},function(t,e,r){"use strict";var n=r(5),i=r(92).left,o=n.aTypedArray;n.exportProto("reduce",function(t){return i(o(this),t,arguments.length,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(5),i=r(92).right,o=n.aTypedArray;n.exportProto("reduceRight",function(t){return i(o(this),t,arguments.length,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(5),i=n.aTypedArray,o=Math.floor;n.exportProto("reverse",function(){for(var t,e=i(this).length,r=o(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this})},function(t,e,r){"use strict";var n=r(5),s=r(8),a=r(192),u=r(10),i=r(1),c=n.aTypedArray,o=i(function(){new Int8Array(1).set({})});n.exportProto("set",function(t){c(this);var e=a(1<arguments.length?arguments[1]:void 0,1),r=this.length,n=u(t),i=s(n.length),o=0;if(r<i+e)throw RangeError("Wrong length");for(;o<i;)this[e+o]=n[o++]},o)},function(t,e,r){"use strict";var n=r(5),a=r(37),i=r(1),u=n.aTypedArray,c=n.aTypedArrayConstructor,l=[].slice,o=i(function(){new Int8Array(1).slice()});n.exportProto("slice",function(t,e){for(var r=l.call(u(this),t,e),n=a(this,this.constructor),i=0,o=r.length,s=new(c(n))(o);i<o;)s[i]=r[i++];return s},o)},function(t,e,r){"use strict";var n=r(5),i=r(12).some,o=n.aTypedArray;n.exportProto("some",function(t){return i(o(this),t,1<arguments.length?arguments[1]:void 0)})},function(t,e,r){"use strict";var n=r(5),i=n.aTypedArray,o=[].sort;n.exportProto("sort",function(t){return o.call(i(this),t)})},function(t,e,r){"use strict";var n=r(5),o=r(8),s=r(41),a=r(37),u=n.aTypedArray;n.exportProto("subarray",function(t,e){var r=u(this),n=r.length,i=s(t,n);return new(a(r,r.constructor))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,o((void 0===e?n:s(e,n))-i))})},function(t,e,r){"use strict";var n=r(2),i=r(5),o=r(1),s=n.Int8Array,a=i.aTypedArray,u=[].toLocaleString,c=[].slice,l=!!s&&o(function(){u.call(new s(1))}),h=o(function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()})||!o(function(){s.prototype.toLocaleString.call([1,2])});i.exportProto("toLocaleString",function(){return u.apply(l?c.call(a(this)):a(this),arguments)},h)},function(t,e,r){"use strict";var n=r(2),i=r(5),o=r(1),s=n.Uint8Array,a=s&&s.prototype,u=[].toString,c=[].join;o(function(){u.call({})})&&(u=function(){return c.call(this)}),i.exportProto("toString",u,(a||{}).toString!=u)},function(t,e,r){var n=r(0),i=r(28),o=r(20),s=r(4),a=r(1),u=i("Reflect","apply"),c=Function.apply;n({target:"Reflect",stat:!0,forced:!a(function(){u(function(){})})},{apply:function(t,e,r){return o(t),s(r),u?u(t,e,r):c.call(t,e,r)}})},function(t,e,r){var n=r(0),i=r(28),a=r(20),u=r(4),c=r(3),l=r(35),h=r(170),o=r(1),d=i("Reflect","construct"),f=o(function(){function t(){}return!(d(function(){},[],t)instanceof t)}),p=!o(function(){d(function(){})}),s=f||p;n({target:"Reflect",stat:!0,forced:s,sham:s},{construct:function(t,e){a(t),u(e);var r=arguments.length<3?t:a(arguments[2]);if(p&&!f)return d(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(h.apply(t,n))}var i=r.prototype,o=l(c(i)?i:Object.prototype),s=Function.apply.call(t,o,e);return c(s)?s:o}})},function(t,e,r){var n=r(0),i=r(6),o=r(4),s=r(27),a=r(9);n({target:"Reflect",stat:!0,forced:r(1)(function(){Reflect.defineProperty(a.f({},1,{value:1}),1,{value:2})}),sham:!i},{defineProperty:function(t,e,r){o(t);var n=s(e,!0);o(r);try{return a.f(t,n,r),!0}catch(t){return!1}}})},function(t,e,r){var n=r(0),i=r(4),o=r(18).f;n({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var r=o(i(t),e);return!(r&&!r.configurable)&&delete t[e]}})},function(t,e,r){var n=r(0),a=r(3),u=r(4),c=r(11),l=r(18),h=r(32);n({target:"Reflect",stat:!0},{get:function t(e,r,n){var i,o,s=arguments.length<3?e:n;return u(e)===s?e[r]:(i=l.f(e,r))?c(i,"value")?i.value:void 0===i.get?void 0:i.get.call(s):a(o=h(e))?t(o,r,s):void 0}})},function(t,e,r){var n=r(0),i=r(6),o=r(4),s=r(18);n({target:"Reflect",stat:!0,sham:!i},{getOwnPropertyDescriptor:function(t,e){return s.f(o(t),e)}})},function(t,e,r){var n=r(0),i=r(4),o=r(32);n({target:"Reflect",stat:!0,sham:!r(122)},{getPrototypeOf:function(t){return o(i(t))}})},function(t,e,r){r(0)({target:"Reflect",stat:!0},{has:function(t,e){return e in t}})},function(t,e,r){var n=r(0),i=r(4),o=Object.isExtensible;n({target:"Reflect",stat:!0},{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,r){r(0)({target:"Reflect",stat:!0},{ownKeys:r(117)})},function(t,e,r){var n=r(0),i=r(28),o=r(4);n({target:"Reflect",stat:!0,sham:!r(76)},{preventExtensions:function(t){o(t);try{var e=i("Object","preventExtensions");return e&&e(t),!0}catch(t){return!1}}})},function(t,e,r){var n=r(0),c=r(4),l=r(3),h=r(11),d=r(9),f=r(18),p=r(32),g=r(40);n({target:"Reflect",stat:!0},{set:function t(e,r,n,i){var o,s,a=arguments.length<4?e:i,u=f.f(c(e),r);if(!u){if(l(s=p(e)))return t(s,r,n,a);u=g(0)}if(h(u,"value")){if(!1===u.writable||!l(a))return!1;if(o=f.f(a,r)){if(o.get||o.set||!1===o.writable)return!1;o.value=n,d.f(a,r,o)}else d.f(a,r,g(0,n));return!0}return void 0!==u.set&&(u.set.call(a,n),!0)}})},function(t,e,r){var n=r(0),i=r(4),o=r(169),s=r(57);s&&n({target:"Reflect",stat:!0},{setPrototypeOf:function(t,e){i(t),o(e);try{return s(t,e),!0}catch(t){return!1}}})},function(t,e,r){r(443),r(444),r(445),r(446),r(447),r(448),r(451),r(196),t.exports=r(71)},function(t,e,r){var n=r(2),i=r(194),o=r(174),s=r(13);for(var a in i){var u=n[a],c=u&&u.prototype;if(c&&c.forEach!==o)try{s(c,"forEach",o)}catch(t){c.forEach=o}}},function(t,e,r){var n=r(2),i=r(194),o=r(93),s=r(13),a=r(7),u=a("iterator"),c=a("toStringTag"),l=o.values;for(var h in i){var d=n[h],f=d&&d.prototype;if(f){if(f[u]!==l)try{s(f,u,l)}catch(t){f[u]=l}if(f[c]||s(f,c,h),i[h])for(var p in o)if(f[p]!==o[p])try{s(f,p,o[p])}catch(t){f[p]=o[p]}}}},function(t,e,r){var n=r(2),i=r(133),o=!n.setImmediate||!n.clearImmediate;r(0)({global:!0,bind:!0,enumerable:!0,forced:o},{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,r){var n=r(0),i=r(2),o=r(186),s=r(26),a=i.process,u="process"==s(a);n({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(t){var e=u&&a.domain;o(e?e.bind(t):t)}})},function(t,e,r){function n(i){return function(t,e){var r=2<arguments.length,n=r?a.call(arguments,2):void 0;return i(r?function(){("function"==typeof t?t:Function(t)).apply(this,n)}:t,e)}}var i=r(0),o=r(2),s=r(91),a=[].slice;i({global:!0,bind:!0,forced:/MSIE .\./.test(s)},{setTimeout:n(o.setTimeout),setInterval:n(o.setInterval)})},function(t,e,r){"use strict";r(178);function b(t,e){var r,n,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return"Invalid host";if(!(r=z(e.slice(1,-1))))return"Invalid host";t.host=r}else if(tt(t)){if(e=v(e),G.test(e))return"Invalid host";if(null===(r=K(e)))return"Invalid host";t.host=r}else{if(H.test(e))return"Invalid host";for(r="",n=C(e),i=0;i<n.length;i++)r+=$(n[i],Y);t.host=r}}function l(t){var e,r,n,i;if("number"==typeof t){for(e=[],r=0;r<4;r++)e.unshift(t%256),t=O(t/256);return e.join(".")}if("object"!=typeof t)return t;for(e="",n=function(t){for(var e=null,r=1,n=null,i=0,o=0;o<8;o++)0!==t[o]?(r<i&&(e=n,r=i),n=null,i=0):(null===n&&(n=o),++i);return r<i&&(e=n,r=i),e}(t),r=0;r<8;r++)i&&0===t[r]||(i=i&&!1,n===r?(e+=r?":":"::",i=!0):(e+=t[r].toString(16),r<7&&(e+=":")));return"["+e+"]"}function T(t){return""!=t.username||""!=t.password}function i(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme}function E(t,e){var r;return 2==t.length&&N.test(t.charAt(0))&&(":"==(r=t.charAt(1))||!e&&"|"==r)}function S(t){var e;return 1<t.length&&E(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)}function w(t){var e=t.path,r=e.length;!r||"file"==t.scheme&&1==r&&E(e[0],!0)||e.pop()}function c(t,e,r,n){var i,o,s,a,u,c,l=r||et,h=0,d="",f=!1,p=!1,g=!1;for(r||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(W,"")),e=e.replace(q,""),i=C(e);h<=i.length;){switch(o=i[h],l){case et:if(!o||!N.test(o)){if(r)return"Invalid scheme";l=nt;continue}d+=o.toLowerCase(),l=rt;break;case rt:if(o&&(M.test(o)||"+"==o||"-"==o||"."==o))d+=o.toLowerCase();else{if(":"!=o){if(r)return"Invalid scheme";d="",l=nt,h=0;continue}if(r&&(tt(t)!=k(Z,d)||"file"==d&&(T(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=d,r)return void(tt(t)&&Z[t.scheme]==t.port&&(t.port=null));d="","file"==t.scheme?l=pt:tt(t)&&n&&n.scheme==t.scheme?l=it:tt(t)?l=ut:"/"==i[h+1]?(l=ot,h++):(t.cannotBeABaseURL=!0,t.path.push(""),l=_t)}break;case nt:if(!n||n.cannotBeABaseURL&&"#"!=o)return"Invalid scheme";if(n.cannotBeABaseURL&&"#"==o){t.scheme=n.scheme,t.path=n.path.slice(),t.query=n.query,t.fragment="",t.cannotBeABaseURL=!0,l=Tt;break}l="file"==n.scheme?pt:st;continue;case it:if("/"!=o||"/"!=i[h+1]){l=st;continue}l=ct,h++;break;case ot:if("/"==o){l=lt;break}l=mt;continue;case st:if(t.scheme=n.scheme,o==A)t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.query=n.query;else if("/"==o||"\\"==o&&tt(t))l=at;else if("?"==o)t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.query="",l=bt;else{if("#"!=o){t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.path.pop(),l=mt;continue}t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.query=n.query,t.fragment="",l=Tt}break;case at:if(!tt(t)||"/"!=o&&"\\"!=o){if("/"!=o){t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,l=mt;continue}l=lt}else l=ct;break;case ut:if(l=ct,"/"!=o||"/"!=d.charAt(h+1))continue;h++;break;case ct:if("/"==o||"\\"==o)break;l=lt;continue;case lt:if("@"==o){f&&(d="%40"+d),f=!0,s=C(d);for(var v=0;v<s.length;v++){var y=s[v];if(":"!=y||g){var m=$(y,Q);g?t.password+=m:t.username+=m}else g=!0}d=""}else if(o==A||"/"==o||"?"==o||"#"==o||"\\"==o&&tt(t)){if(f&&""==d)return"Invalid authority";h-=C(d).length+1,d="",l=ht}else d+=o;break;case ht:case dt:if(r&&"file"==t.scheme){l=vt;continue}if(":"!=o||p){if(o==A||"/"==o||"?"==o||"#"==o||"\\"==o&&tt(t)){if(tt(t)&&""==d)return"Invalid host";if(r&&""==d&&(T(t)||null!==t.port))return;if(a=b(t,d))return a;if(d="",l=yt,r)return;continue}"["==o?p=!0:"]"==o&&(p=!1),d+=o}else{if(""==d)return"Invalid host";if(a=b(t,d))return a;if(d="",l=ft,r==dt)return}break;case ft:if(!F.test(o)){if(o==A||"/"==o||"?"==o||"#"==o||"\\"==o&&tt(t)||r){if(""!=d){var _=parseInt(d,10);if(65535<_)return"Invalid port";t.port=tt(t)&&_===Z[t.scheme]?null:_,d=""}if(r)return;l=yt;continue}return"Invalid port"}d+=o;break;case pt:if(t.scheme="file","/"==o||"\\"==o)l=gt;else{if(!n||"file"!=n.scheme){l=mt;continue}if(o==A)t.host=n.host,t.path=n.path.slice(),t.query=n.query;else if("?"==o)t.host=n.host,t.path=n.path.slice(),t.query="",l=bt;else{if("#"!=o){S(i.slice(h).join(""))||(t.host=n.host,t.path=n.path.slice(),w(t)),l=mt;continue}t.host=n.host,t.path=n.path.slice(),t.query=n.query,t.fragment="",l=Tt}}break;case gt:if("/"==o||"\\"==o){l=vt;break}n&&"file"==n.scheme&&!S(i.slice(h).join(""))&&(E(n.path[0],!0)?t.path.push(n.path[0]):t.host=n.host),l=mt;continue;case vt:if(o==A||"/"==o||"\\"==o||"?"==o||"#"==o){if(!r&&E(d))l=mt;else if(""==d){if(t.host="",r)return;l=yt}else{if(a=b(t,d))return a;if("localhost"==t.host&&(t.host=""),r)return;d="",l=yt}continue}d+=o;break;case yt:if(tt(t)){if(l=mt,"/"!=o&&"\\"!=o)continue}else if(r||"?"!=o)if(r||"#"!=o){if(o!=A&&(l=mt,"/"!=o))continue}else t.fragment="",l=Tt;else t.query="",l=bt;break;case mt:if(o==A||"/"==o||"\\"==o&&tt(t)||!r&&("?"==o||"#"==o)){if(".."===(u=(u=d).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?(w(t),"/"==o||"\\"==o&&tt(t)||t.path.push("")):"."===(c=d)||"%2e"===c.toLowerCase()?"/"==o||"\\"==o&&tt(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&E(d)&&(t.host&&(t.host=""),d=d.charAt(0)+":"),t.path.push(d)),d="","file"==t.scheme&&(o==A||"?"==o||"#"==o))for(;1<t.path.length&&""===t.path[0];)t.path.shift();"?"==o?(t.query="",l=bt):"#"==o&&(t.fragment="",l=Tt)}else d+=$(o,J);break;case _t:"?"==o?(t.query="",l=bt):"#"==o?(t.fragment="",l=Tt):o!=A&&(t.path[0]+=$(o,Y));break;case bt:r||"#"!=o?o!=A&&("'"==o&&tt(t)?t.query+="%27":t.query+="#"==o?"%23":$(o,Y)):(t.fragment="",l=Tt);break;case Tt:o!=A&&(t.fragment+=$(o,X))}h++}}function n(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}}var A,o=r(0),h=r(6),s=r(195),a=r(2),u=r(120),d=r(14),f=r(44),k=r(11),p=r(165),C=r(171),g=r(94).codeAt,v=r(449),y=r(31),m=r(196),_=r(22),x=a.URL,R=m.URLSearchParams,P=m.getState,L=_.set,I=_.getterFor("URL"),O=Math.floor,D=Math.pow,N=/[A-Za-z]/,M=/[\d+\-.A-Za-z]/,F=/\d/,B=/^(0x|0X)/,j=/^[0-7]+$/,U=/^\d+$/,V=/^[\dA-Fa-f]+$/,G=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,H=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,W=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,q=/[\u0009\u000A\u000D]/g,K=function(t){var e,r,n,i,o,s,a,u=t.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),4<(e=u.length))return t;for(r=[],n=0;n<e;n++){if(""==(i=u[n]))return t;if(o=10,1<i.length&&"0"==i.charAt(0)&&(o=B.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)s=0;else{if(!(10==o?U:8==o?j:V).test(i))return t;s=parseInt(i,o)}r.push(s)}for(n=0;n<e;n++)if(s=r[n],n==e-1){if(s>=D(256,5-e))return null}else if(255<s)return null;for(a=r.pop(),n=0;n<r.length;n++)a+=r[n]*D(256,3-n);return a},z=function(t){function e(){return t.charAt(d)}var r,n,i,o,s,a,u,c=[0,0,0,0,0,0,0,0],l=0,h=null,d=0;if(":"==e()){if(":"!=t.charAt(1))return;d+=2,h=++l}for(;e();){if(8==l)return;if(":"!=e()){for(r=n=0;n<4&&V.test(e());)r=16*r+parseInt(e(),16),d++,n++;if("."==e()){if(0==n)return;if(d-=n,6<l)return;for(i=0;e();){if(o=null,0<i){if(!("."==e()&&i<4))return;d++}if(!F.test(e()))return;for(;F.test(e());){if(s=parseInt(e(),10),null===o)o=s;else{if(0==o)return;o=10*o+s}if(255<o)return;d++}c[l]=256*c[l]+o,2!=++i&&4!=i||l++}if(4!=i)return;break}if(":"==e()){if(d++,!e())return}else if(e())return;c[l++]=r}else{if(null!==h)return;d++,h=++l}}if(null!==h)for(a=l-h,l=7;0!=l&&0<a;)u=c[l],c[l--]=c[h+a-1],c[h+--a]=u;else if(8!=l)return;return c},Y={},X=p({},Y,{" ":1,'"':1,"<":1,">":1,"`":1}),J=p({},X,{"#":1,"?":1,"{":1,"}":1}),Q=p({},J,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),$=function(t,e){var r=g(t,0);return 32<r&&r<127&&!k(e,t)?t:encodeURIComponent(t)},Z={ftp:21,file:null,http:80,https:443,ws:80,wss:443},tt=function(t){return k(Z,t.scheme)},et={},rt={},nt={},it={},ot={},st={},at={},ut={},ct={},lt={},ht={},dt={},ft={},pt={},gt={},vt={},yt={},mt={},_t={},bt={},Tt={},Et=function(t){var e,r,n=f(this,Et,"URL"),i=1<arguments.length?arguments[1]:void 0,o=String(t),s=L(n,{type:"URL"});if(void 0!==i)if(i instanceof Et)e=I(i);else if(r=c(e={},String(i)))throw TypeError(r);if(r=c(s,o,null,e))throw TypeError(r);var a=s.searchParams=new R,u=P(a);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(a)||null},h||(n.href=wt.call(n),n.origin=At.call(n),n.protocol=kt.call(n),n.username=Ct.call(n),n.password=xt.call(n),n.host=Rt.call(n),n.hostname=Pt.call(n),n.port=Lt.call(n),n.pathname=It.call(n),n.search=Ot.call(n),n.searchParams=Dt.call(n),n.hash=Nt.call(n))},St=Et.prototype,wt=function(){var t=I(this),e=t.scheme,r=t.username,n=t.password,i=t.host,o=t.port,s=t.path,a=t.query,u=t.fragment,c=e+":";return null!==i?(c+="//",T(t)&&(c+=r+(n?":"+n:"")+"@"),c+=l(i),null!==o&&(c+=":"+o)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(c+="?"+a),null!==u&&(c+="#"+u),c},At=function(){var t=I(this),e=t.scheme,r=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&tt(t)?e+"://"+l(t.host)+(null!==r?":"+r:""):"null"},kt=function(){return I(this).scheme+":"},Ct=function(){return I(this).username},xt=function(){return I(this).password},Rt=function(){var t=I(this),e=t.host,r=t.port;return null===e?"":null===r?l(e):l(e)+":"+r},Pt=function(){var t=I(this).host;return null===t?"":l(t)},Lt=function(){var t=I(this).port;return null===t?"":String(t)},It=function(){var t=I(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Ot=function(){var t=I(this).query;return t?"?"+t:""},Dt=function(){return I(this).searchParams},Nt=function(){var t=I(this).fragment;return t?"#"+t:""};if(h&&u(St,{href:n(wt,function(t){var e=I(this),r=String(t),n=c(e,r);if(n)throw TypeError(n);P(e.searchParams).updateSearchParams(e.query)}),origin:n(At),protocol:n(kt,function(t){var e=I(this);c(e,String(t)+":",et)}),username:n(Ct,function(t){var e=I(this),r=C(String(t));if(!i(e)){e.username="";for(var n=0;n<r.length;n++)e.username+=$(r[n],Q)}}),password:n(xt,function(t){var e=I(this),r=C(String(t));if(!i(e)){e.password="";for(var n=0;n<r.length;n++)e.password+=$(r[n],Q)}}),host:n(Rt,function(t){var e=I(this);e.cannotBeABaseURL||c(e,String(t),ht)}),hostname:n(Pt,function(t){var e=I(this);e.cannotBeABaseURL||c(e,String(t),dt)}),port:n(Lt,function(t){var e=I(this);i(e)||(""==(t=String(t))?e.port=null:c(e,t,ft))}),pathname:n(It,function(t){var e=I(this);e.cannotBeABaseURL||(e.path=[],c(e,t+"",yt))}),search:n(Ot,function(t){var e=I(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",c(e,t,bt)),P(e.searchParams).updateSearchParams(e.query)}),searchParams:n(Dt),hash:n(Nt,function(t){var e=I(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",c(e,t,Tt)):e.fragment=null})}),d(St,"toJSON",function(){return wt.call(this)},{enumerable:!0}),d(St,"toString",function(){return wt.call(this)},{enumerable:!0}),x){var Mt=x.createObjectURL,Ft=x.revokeObjectURL;Mt&&d(Et,"createObjectURL",function(t){return Mt.apply(x,arguments)}),Ft&&d(Et,"revokeObjectURL",function(t){return Ft.apply(x,arguments)})}y(Et,"URL"),o({global:!0,forced:!s,sham:!h},{URL:Et})},function(t,e,r){"use strict";function y(t){return t+22+75*(t<26)}function m(t,e,r){var n=0;for(t=r?b(t/700):t>>1,t+=b(t/e);455<t;n+=36)t=b(t/35);return b(n+36*t/(t+38))}function o(t){var e,r,n=[],i=(t=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=t.charCodeAt(r++);if(55296<=i&&i<=56319&&r<n){var o=t.charCodeAt(r++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),r--)}else e.push(i)}return e}(t)).length,o=128,s=0,a=72;for(e=0;e<t.length;e++)(r=t[e])<128&&n.push(T(r));var u=n.length,c=u;for(u&&n.push("-");c<i;){var l=2147483647;for(e=0;e<t.length;e++)(r=t[e])>=o&&r<l&&(l=r);var h=c+1;if(l-o>b((2147483647-s)/h))throw RangeError(_);for(s+=(l-o)*h,o=l,e=0;e<t.length;e++){if((r=t[e])<o&&2147483647<++s)throw RangeError(_);if(r==o){for(var d=s,f=36;;f+=36){var p=f<=a?1:a+26<=f?26:f-a;if(d<p)break;var g=d-p,v=36-p;n.push(T(y(p+g%v))),d=b(g/v)}n.push(T(y(d))),a=m(s,h,c==u),s=0,++c}}++s,++o}return n.join("")}var s=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,_="Overflow: input needs wider integers to process",b=Math.floor,T=String.fromCharCode;t.exports=function(t){var e,r,n=[],i=t.toLowerCase().replace(a,".").split(".");for(e=0;e<i.length;e++)r=i[e],n.push(s.test(r)?"xn--"+o(r):r);return n.join(".")}},function(t,e,r){var n=r(4),i=r(78);t.exports=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return n(e.call(t))}},function(t,e,r){"use strict";r(0)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},function(t,e,r){var o=r(453),i=r(467),s=r(203),n=r(505),a=r(547),u=r(550),c=r(551);t.exports=function(){this.geoIpClient=new n,this.setItem=function(r,n){return new s(function(t,e){try{window.localStorage.setItem(r,i(n)),t()}catch(t){e(t)}})},this.getItem=function(t){return new s(function(e){try{e(JSON.parse(window.localStorage.getItem(t)))}catch(t){e(null)}})},this.geoIp=function(){return this.geoIpClient.getGeoInfo().then(function(t){return t.country})},this.getContentTags=function(){var t=[];try{t=JSON.parse(document.getElementsByClassName("article-info-json")[0].innerText).contentTags}catch(t){}return s.resolve(t)},this.getReferrer=function(){var t="";try{t=document.referrer}catch(t){}return s.resolve(t)},this.getCurrentResource=function(){return s.resolve(u())},this.needsPersonalizationRefresh=function(){var t,e=u(),r=e.id,n=e.contentType,i=o(t="".concat(n,"|")).call(t,r);return window._mostRecentResourceId===i?s.resolve(!1):(window._mostRecentResourceId=i,s.resolve(!0))},this.getPersonalizationAllowed=function(){return s.resolve(a.padAllowed())},this.getSessionInfo=function(){return c()},this.injectIFrame=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";if(t&&0<t.getElementsByTagName("iframe").length||""===r)return t=null,!1;var n=document.createElement("iframe");return n.setAttribute("src",r),n.setAttribute("style","width: 100%; height: "+e.height),t.appendChild(n),!(n=t=null)}}},function(t,e,r){t.exports=r(454)},function(t,e,r){t.exports=r(455)},function(t,e,r){var n=r(456),i=Array.prototype;t.exports=function(t){var e=t.concat;return t===i||t instanceof Array&&e===i.concat?n:e}},function(t,e,r){r(457);var n=r(466);t.exports=n("Array").concat},function(t,e,r){"use strict";function c(t){if(!s(t))return!1;var e=t[g];return void 0!==e?!!e:o(t)}var n=r(51),i=r(33),o=r(200),s=r(39),l=r(201),h=r(140),d=r(460),f=r(461),a=r(465),u=r(17),p=r(142),g=u("isConcatSpreadable"),v=51<=p||!i(function(){var t=[];return t[g]=!1,t.concat()[0]!==t}),y=a("concat");n({target:"Array",proto:!0,forced:!v||!y},{concat:function(t){var e,r,n,i,o,s=l(this),a=f(s,0),u=0;for(e=-1,n=arguments.length;e<n;e++)if(c(o=-1===e?s:arguments[e])){if(9007199254740991<u+(i=h(o.length)))throw TypeError("Maximum allowed index exceeded");for(r=0;r<i;r++,u++)r in o&&d(a,u,o[r])}else{if(9007199254740991<=u)throw TypeError("Maximum allowed index exceeded");d(a,u++,o)}return a.length=u,a}})},function(t,e,r){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!n.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},function(t,e,r){var n=r(33),i=r(62),o="".split;t.exports=n(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e,r){"use strict";var i=r(137),o=r(82),s=r(105);t.exports=function(t,e,r){var n=i(e);n in t?o.f(t,n,s(0,r)):t[n]=r}},function(t,e,r){var n=r(39),i=r(200),o=r(17)("species");t.exports=function(t,e){var r;return i(t)&&("function"!=typeof(r=t.constructor)||r!==Array&&!i(r.prototype)?n(r)&&null===(r=r[o])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)}},function(t,e,r){var n=r(15),i=r(463),o=n["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=o},function(t,e,r){var n=r(15),i=r(45);t.exports=function(e,r){try{i(n,e,r)}catch(t){n[e]=r}return r}},function(t,e,r){var n=r(33);t.exports=!!Object.getOwnPropertySymbols&&!n(function(){return!String(Symbol())})},function(t,e,r){var n=r(33),i=r(17),o=r(142),s=i("species");t.exports=function(e){return 51<=o||!n(function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},function(t,e,r){var n=r(63);t.exports=function(t){return n[t+"Prototype"]}},function(t,e,r){t.exports=r(468)},function(t,e,r){t.exports=r(469)},function(t,e,r){r(470);var n=r(63);n.JSON||(n.JSON={stringify:JSON.stringify}),t.exports=function(t,e,r){return n.JSON.stringify.apply(null,arguments)}},function(t,e,r){function i(t,e,r){var n=r.charAt(e-1),i=r.charAt(e+1);return c.test(t)&&!l.test(i)||l.test(t)&&!c.test(n)?"\\u"+t.charCodeAt(0).toString(16):t}var n=r(51),o=r(64),s=r(33),a=o("JSON","stringify"),u=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,l=/^[\uDC00-\uDFFF]$/,h=s(function(){return'"\\udf06\\ud834"'!==a("\udf06\ud834")||'"\\udead"'!==a("\udead")});a&&n({target:"JSON",stat:!0,forced:h},{stringify:function(t,e,r){var n=a.apply(null,arguments);return"string"==typeof n?n.replace(u,i):n}})},function(t,e,r){t.exports=r(472)},function(t,e,r){r(473),r(474),r(489),r(493),r(503),r(504);var n=r(63);t.exports=n.Promise},function(t,e){},function(t,e,r){"use strict";var i=r(475).charAt,n=r(144),o=r(204),s=n.set,a=n.getterFor("String Iterator");o(String,"String",function(t){s(this,{type:"String Iterator",string:String(t),index:0})},function(){var t,e=a(this),r=e.string,n=e.index;return n>=r.length?{value:void 0,done:!0}:(t=i(r,n),e.index+=t.length,{value:t,done:!1})})},function(t,e,r){function n(a){return function(t,e){var r,n,i=String(c(t)),o=u(e),s=i.length;return o<0||s<=o?a?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===s||(n=i.charCodeAt(o+1))<56320||57343<n?a?i.charAt(o):r:a?i.slice(o,o+2):n-56320+(r-55296<<10)+65536}}var u=r(141),c=r(136);t.exports={codeAt:n(!1),charAt:n(!0)}},function(t,e,r){var n=r(15),i=r(477),o=n.WeakMap;t.exports="function"==typeof o&&/native code/.test(i.call(o))},function(t,e,r){var n=r(107);t.exports=n("native-function-to-string",Function.toString)},function(t,e,r){"use strict";function i(){return this}var o=r(205).IteratorPrototype,s=r(480),a=r(105),u=r(147),c=r(65);t.exports=function(t,e,r){var n=e+" Iterator";return t.prototype=s(o,{next:a(1,r)}),u(t,n,!1,!0),c[n]=i,t}},function(t,e,r){var n=r(33);t.exports=!n(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},function(t,e,r){function n(){}var i=r(46),o=r(481),s=r(207),a=r(146),u=r(208),c=r(138),l=r(145)("IE_PROTO"),h=function(){var t,e=c("iframe"),r=s.length;for(e.style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),h=t.F;r--;)delete h.prototype[s[r]];return h()};t.exports=Object.create||function(t,e){var r;return null!==t?(n.prototype=i(t),r=new n,n.prototype=null,r[l]=t):r=h(),void 0===e?r:o(r,e)},a[l]=!0},function(t,e,r){var n=r(61),s=r(82),a=r(46),u=r(482);t.exports=n?Object.defineProperties:function(t,e){a(t);for(var r,n=u(e),i=n.length,o=0;o<i;)s.f(t,r=n[o++],e[r]);return t}},function(t,e,r){var n=r(483),i=r(207);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e,r){var s=r(52),a=r(106),u=r(484).indexOf,c=r(146);t.exports=function(t,e){var r,n=a(t),i=0,o=[];for(r in n)!s(c,r)&&s(n,r)&&o.push(r);for(;e.length>i;)s(n,r=e[i++])&&(~u(o,r)||o.push(r));return o}},function(t,e,r){function n(a){return function(t,e,r){var n,i=u(t),o=c(i.length),s=l(r,o);if(a&&e!=e){for(;s<o;)if((n=i[s++])!=n)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}}var u=r(106),c=r(140),l=r(485);t.exports={includes:n(!0),indexOf:n(!1)}},function(t,e,r){var n=r(141),i=Math.max,o=Math.min;t.exports=function(t,e){var r=n(t);return r<0?i(r+e,0):o(r,e)}},function(t,e,r){"use strict";var n=r(209),i={};i[r(17)("toStringTag")]="z",t.exports="[object z]"!==String(i)?function(){return"[object "+n(this)+"]"}:i.toString},function(t,e,r){var i=r(46),o=r(488);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r,n=!1,t={};try{(r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),n=t instanceof Array}catch(r){}return function(t,e){return i(t),o(e),n?r.call(t,e):t.__proto__=e,t}}():void 0)},function(t,e,r){var n=r(39);t.exports=function(t){if(!n(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,r){r(490);var n=r(492),i=r(15),o=r(45),s=r(65),a=r(17)("toStringTag");for(var u in n){var c=i[u],l=c&&c.prototype;l&&!l[a]&&o(l,a,u),s[u]=s.Array}},function(t,e,r){"use strict";var n=r(106),i=r(491),o=r(65),s=r(144),a=r(204),u=s.set,c=s.getterFor("Array Iterator");t.exports=a(Array,"Array",function(t,e){u(this,{type:"Array Iterator",target:n(t),index:0,kind:e})},function(){var t=c(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?{value:t.target=void 0,done:!0}:"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,r){"use strict";function g(t){var e;return!(!E(t)||"function"!=typeof(e=t.then))&&e}function o(h,d,f){if(!d.notified){d.notified=!0;var p=d.reactions;P(function(){for(var t=d.value,e=1==d.state,r=0;p.length>r;){var n,i,o,s=p[r++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,l=s.domain;try{a?(e||(2===d.rejection&&it(h,d),d.rejection=1),!0===a?n=t:(l&&l.enter(),n=a(t),l&&(l.exit(),o=!0)),n===s.promise?c(q("Promise-chain cycle")):(i=g(n))?i.call(n,u,c):u(n)):c(t)}catch(t){l&&!o&&l.exit(),c(t)}}d.reactions=[],d.notified=!1,f&&!d.rejection&&rt(h,d)})}}function i(t,e,r){var n,i;Z?((n=K.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),f.dispatchEvent(n)):n={promise:e,reason:r},(i=f["on"+t])?i(n):"unhandledrejection"===t&&I("Unhandled promise rejection",r)}function s(e,r,n,i){return function(t){e(r,n,t,i)}}function a(t,e,r,n){e.done||(e.done=!0,n&&(e=n),e.value=r,e.state=2,o(t,e,!0))}var n,u,c,l,h=r(51),d=r(83),f=r(15),p=r(64),v=r(210),y=r(108),m=r(494),_=r(107),b=r(147),T=r(495),E=r(39),S=r(81),w=r(496),A=r(62),k=r(211),C=r(500),x=r(212),R=r(213).set,P=r(501),L=r(215),I=r(502),O=r(148),D=r(216),N=r(144),M=r(199),F=r(17),B=r(142),j=F("species"),U="Promise",V=N.get,G=N.set,H=N.getterFor(U),W=v,q=f.TypeError,K=f.document,z=f.process,Y=_("inspectSource"),X=p("fetch"),J=O.f,Q=J,$="process"==A(z),Z=!!(K&&K.createEvent&&f.dispatchEvent),tt=M(U,function(){var t=Y(W)!==String(W);if(66===B)return!0;if(!t&&!$&&"function"!=typeof PromiseRejectionEvent)return!0;if(d&&!W.prototype.finally)return!0;if(51<=B&&/native code/.test(W))return!1;function e(t){t(function(){},function(){})}var r=W.resolve(1);return(r.constructor={})[j]=e,!(r.then(function(){})instanceof e)}),et=tt||!C(function(t){W.all(t).catch(function(){})}),rt=function(r,n){R.call(f,function(){var t,e=n.value;if(nt(n)&&(t=D(function(){$?z.emit("unhandledRejection",e,r):i("unhandledrejection",r,e)}),n.rejection=$||nt(n)?2:1,t.error))throw t.value})},nt=function(t){return 1!==t.rejection&&!t.parent},it=function(t,e){R.call(f,function(){$?z.emit("rejectionHandled",t):i("rejectionhandled",t,e.value)})},ot=function(r,n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(r===t)throw q("Promise can't be resolved itself");var i=g(t);i?P(function(){var e={done:!1};try{i.call(t,s(ot,r,e,n),s(a,r,e,n))}catch(t){a(r,e,t,n)}}):(n.value=t,n.state=1,o(r,n,!1))}catch(t){a(r,{done:!1},t,n)}}};tt&&(W=function(t){w(this,W,U),S(t),n.call(this);var e=V(this);try{t(s(ot,this,e),s(a,this,e))}catch(t){a(this,e,t)}},(n=function(t){G(this,{type:U,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=m(W.prototype,{then:function(t,e){var r=H(this),n=J(x(this,W));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=$?z.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&o(this,r,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),u=function(){var t=new n,e=V(t);this.promise=t,this.resolve=s(ot,t,e),this.reject=s(a,t,e)},O.f=J=function(t){return t===W||t===c?new u(t):Q(t)},d||"function"!=typeof v||(l=v.prototype.then,y(v.prototype,"then",function(t,e){var r=this;return new W(function(t,e){l.call(r,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof X&&h({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return L(W,X.apply(f,arguments))}}))),h({global:!0,wrap:!0,forced:tt},{Promise:W}),b(W,U,!1,!0),T(U),c=p(U),h({target:U,stat:!0,forced:tt},{reject:function(t){var e=J(this);return e.reject.call(void 0,t),e.promise}}),h({target:U,stat:!0,forced:d||tt},{resolve:function(t){return L(d&&this===c?W:this,t)}}),h({target:U,stat:!0,forced:et},{all:function(t){var a=this,e=J(a),u=e.resolve,c=e.reject,r=D(function(){var n=S(a.resolve),i=[],o=0,s=1;k(t,function(t){var e=o++,r=!1;i.push(void 0),s++,n.call(a,t).then(function(t){r||(r=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return r.error&&c(r.value),e.promise},race:function(t){var r=this,n=J(r),i=n.reject,e=D(function(){var e=S(r.resolve);k(t,function(t){e.call(r,t).then(n.resolve,i)})});return e.error&&i(e.value),n.promise}})},function(t,e,r){var i=r(108);t.exports=function(t,e,r){for(var n in e)r&&r.unsafe&&t[n]?t[n]=e[n]:i(t,n,e[n],r);return t}},function(t,e,r){"use strict";var n=r(64),i=r(82),o=r(17),s=r(61),a=o("species");t.exports=function(t){var e=n(t),r=i.f;s&&e&&!e[a]&&r(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return t}},function(t,e,r){var n=r(17),i=r(65),o=n("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[o]===t)}},function(t,e,r){var n=r(209),i=r(65),o=r(17)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[n(t)]}},function(t,e,r){var o=r(46);t.exports=function(t,e,r,n){try{return n?e(o(r)[0],r[1]):e(r)}catch(e){var i=t.return;throw void 0!==i&&o(i.call(t)),e}}},function(t,e,r){var i=r(17)("iterator"),o=!1;try{var n=0,s={next:function(){return{done:!!n++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var r=!1;try{var n={};n[i]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r}},function(t,e,r){var n,i,o,s,a,u,c,l,h=r(15),d=r(197).f,f=r(62),p=r(213).set,g=r(214),v=h.MutationObserver||h.WebKitMutationObserver,y=h.process,m=h.Promise,_="process"==f(y),b=d(h,"queueMicrotask"),T=b&&b.value;T||(n=function(){var t,e;for(_&&(t=y.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?s():o=void 0,t}}o=void 0,t&&t.enter()},s=_?function(){y.nextTick(n)}:v&&!g?(a=!0,u=document.createTextNode(""),new v(n).observe(u,{characterData:!0}),function(){u.data=a=!a}):m&&m.resolve?(c=m.resolve(void 0),l=c.then,function(){l.call(c,n)}):function(){p.call(h,n)}),t.exports=T||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,s()),o=e}},function(t,e,r){var n=r(15);t.exports=function(t,e){var r=n.console;r&&r.error&&(1===arguments.length?r.error(t):r.error(t,e))}},function(t,e,r){"use strict";var n=r(51),c=r(81),i=r(148),o=r(216),l=r(211);n({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=i.f(a),u=e.resolve,r=e.reject,n=o(function(){var n=c(a.resolve),i=[],o=0,s=1;l(t,function(t){var e=o++,r=!1;i.push(void 0),s++,n.call(a,t).then(function(t){r||(r=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){r||(r=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return n.error&&r(n.value),e.promise}})},function(t,e,r){"use strict";var n=r(51),i=r(83),o=r(210),s=r(64),a=r(212),u=r(215),c=r(108);n({target:"Promise",proto:!0,real:!0},{finally:function(e){var r=a(this,s("Promise")),t="function"==typeof e;return this.then(t?function(t){return u(r,e()).then(function(){return t})}:e,t?function(t){return u(r,e()).then(function(){throw t})}:e)}}),i||"function"!=typeof o||o.prototype.finally||c(o.prototype,"finally",s("Promise").prototype.finally)},function(t,e,r){"use strict";r(506),r(543);var n=r(545),i={country:"US",region:"US"},o="https://location.bloomberg.com",s="query",a=2e3;function u(t){var e=(t=void 0!==t?t:{}).url||o;this.url=e+"/"+s,this.timeout=t.timeout||a,function(){try{new window.CustomEvent("test")}catch(t){var e=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r};e.prototype=window.Event.prototype,window.CustomEvent=e}}()}function c(){window._geoIpInfo?console.log("Geo IP client is already intialized."):(new u).getGeoInfo()}u.prototype={getGeoInfo:function(){if(window._geoIpInfo)return Promise.resolve(window._geoIpInfo);if(window._geoIPRequest)return window._geoIPRequest;var t=n.getGeoInfo(),e=this;return t?(t.expired&&setTimeout(function(){e._queryGeoIpService().then(function(t){n.setGeoInfo(t)}).catch(function(){console.log("GeoIP cache refresh failed.")})},3e3),e._dispatchGeoIpReadyEvent(t.geoInfo),Promise.resolve(t.geoInfo)):(window._geoIPRequest=e._queryGeoIpService().then(function(t){return n.setGeoInfo(t),e._dispatchGeoIpReadyEvent(t),t}).catch(function(){return e._dispatchGeoIpReadyEvent(i),i}),window._geoIPRequest)},_queryGeoIpService:function(){var t=this;return new Promise(function(e,r){fetch(t.url).then(function(t){if(t.ok)return t.json();r(new Error("Error while fetching geo-IP URL"))}).then(function(t){t?e({country:t.country,region:t.trackingRegion}):r(new Error("Empty data from service."))}).catch(function(){r(new Error("Error response from service."))}),setTimeout(function(){r(new Error("Timeout"))},t.timeout)})},_dispatchGeoIpReadyEvent:function(t){var e=new window.CustomEvent("geo-ip-ready",{detail:t});window._geoIpInfo=t,window.dispatchEvent(e)}},"interactive"===document.readyState||"complete"===document.readyState?c():document.addEventListener("DOMContentLoaded",c),t.exports=u},function(t,e,r){"use strict";if("undefined"!=typeof window){var n=r(507);window.Promise=window.Promise?window.Promise:n}},function(t,e,r){r(508),r(509),r(524),r(528),t.exports=r(66).Promise},function(t,e){},function(t,e,r){"use strict";var n=r(510)(!0);r(217)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},function(t,e,r){var u=r(149),c=r(150);t.exports=function(a){return function(t,e){var r,n,i=String(c(t)),o=u(e),s=i.length;return o<0||s<=o?a?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===s||(n=i.charCodeAt(o+1))<56320||57343<n?a?i.charAt(o):r:a?i.slice(o,o+2):n-56320+(r-55296<<10)+65536}}},function(t,e,r){t.exports=!r(85)&&!r(219)(function(){return 7!=Object.defineProperty(r(152)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){var i=r(84);t.exports=function(t,e){if(!i(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!i(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){t.exports=r(67)},function(t,e,r){"use strict";var n=r(515),i=r(220),o=r(155),s={};r(67)(s,r(30)("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=n(s,{next:i(1,r)}),o(t,e+" Iterator")}},function(t,e,n){function i(){}var o=n(53),s=n(516),a=n(224),u=n(154)("IE_PROTO"),c=function(){var t,e=n(152)("iframe"),r=a.length;for(e.style.display="none",n(225).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;r--;)delete c.prototype[a[r]];return c()};t.exports=Object.create||function(t,e){var r;return null!==t?(i.prototype=o(t),r=new i,i.prototype=null,r[u]=t):r=c(),void 0===e?r:s(r,e)}},function(t,e,r){var s=r(111),a=r(53),u=r(517);t.exports=r(85)?Object.defineProperties:function(t,e){a(t);for(var r,n=u(e),i=n.length,o=0;o<i;)s.f(t,r=n[o++],e[r]);return t}},function(t,e,r){var n=r(518),i=r(224);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e,r){var s=r(112),a=r(153),u=r(520)(!1),c=r(154)("IE_PROTO");t.exports=function(t,e){var r,n=a(t),i=0,o=[];for(r in n)r!=c&&s(n,r)&&o.push(r);for(;e.length>i;)s(n,r=e[i++])&&(~u(o,r)||o.push(r));return o}},function(t,e,r){var n=r(113);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,r){var u=r(153),c=r(221),l=r(521);t.exports=function(a){return function(t,e,r){var n,i=u(t),o=c(i.length),s=l(r,o);if(a&&e!=e){for(;s<o;)if((n=i[s++])!=n)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}}},function(t,e,r){var n=r(149),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?i(t+e,0):o(t,e)}},function(t,e,r){var n=r(112),i=r(523),o=r(154)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,r){var n=r(150);t.exports=function(t){return Object(n(t))}},function(t,e,r){r(525);for(var n=r(29),i=r(67),o=r(86),s=r(30)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var c=a[u],l=n[c],h=l&&l.prototype;h&&!h[s]&&i(h,s,c),o[c]=o.Array}},function(t,e,r){"use strict";var n=r(526),i=r(527),o=r(86),s=r(153);t.exports=r(217)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){"use strict";function n(){}function h(t){var e;return!(!v(t)||"function"!=typeof(e=t.then))&&e}function i(l,r){if(!l._n){l._n=!0;var n=l._c;E(function(){for(var u=l._v,c=1==l._s,t=0,e=function(t){var e,r,n,i=c?t.ok:t.fail,o=t.resolve,s=t.reject,a=t.domain;try{i?(c||(2==l._h&&F(l),l._h=1),!0===i?e=u:(a&&a.enter(),e=i(u),a&&(a.exit(),n=!0)),e===t.promise?s(C("Promise-chain cycle")):(r=h(e))?r.call(e,o,s):o(e)):s(u)}catch(t){a&&!n&&a.exit(),s(t)}};n.length>t;)e(n[t++]);l._c=[],l._n=!1,r&&!l._h&&N(l)})}}function o(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),i(e,!0))}var s,a,u,c,l=r(151),d=r(29),f=r(109),p=r(226),g=r(218),v=r(84),y=r(110),m=r(529),_=r(530),b=r(534),T=r(227).set,E=r(536)(),S=r(228),w=r(537),A=r(538),k=r(539),C=d.TypeError,x=d.process,R=x&&x.versions,P=R&&R.v8||"",L=d.Promise,I="process"==p(x),O=a=S.f,D=!!function(){try{var t=L.resolve(1),e=(t.constructor={})[r(30)("species")]=function(t){t(n,n)};return(I||"function"==typeof PromiseRejectionEvent)&&t.then(n)instanceof e&&0!==P.indexOf("6.6")&&-1===A.indexOf("Chrome/66")}catch(t){}}(),N=function(o){T.call(d,function(){var t,e,r,n=o._v,i=M(o);if(i&&(t=w(function(){I?x.emit("unhandledRejection",n,o):(e=d.onunhandledrejection)?e({promise:o,reason:n}):(r=d.console)&&r.error&&r.error("Unhandled promise rejection",n)}),o._h=I||M(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},M=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(e){T.call(d,function(){var t;I?x.emit("rejectionHandled",e):(t=d.onrejectionhandled)&&t({promise:e,reason:e._v})})},B=function(t){var r,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw C("Promise can't be resolved itself");(r=h(t))?E(function(){var e={_w:n,_d:!1};try{r.call(t,f(B,e,1),f(o,e,1))}catch(t){o.call(e,t)}}):(n._v=t,n._s=1,i(n,!1))}catch(t){o.call({_w:n,_d:!1},t)}}};D||(L=function(t){m(this,L,"Promise","_h"),y(t),s.call(this);try{t(f(B,this,1),f(o,this,1))}catch(t){o.call(this,t)}},(s=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(540)(L.prototype,{then:function(t,e){var r=O(b(this,L));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=I?x.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&i(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),u=function(){var t=new s;this.promise=t,this.resolve=f(B,t,1),this.reject=f(o,t,1)},S.f=O=function(t){return t===L||t===c?new u(t):a(t)}),g(g.G+g.W+g.F*!D,{Promise:L}),r(155)(L,"Promise"),r(541)("Promise"),c=r(66).Promise,g(g.S+g.F*!D,"Promise",{reject:function(t){var e=O(this);return(0,e.reject)(t),e.promise}}),g(g.S+g.F*(l||!D),"Promise",{resolve:function(t){return k(l&&this===c?L:this,t)}}),g(g.S+g.F*!(D&&r(542)(function(t){L.all(t).catch(n)})),"Promise",{all:function(t){var s=this,e=O(s),a=e.resolve,u=e.reject,r=w(function(){var n=[],i=0,o=1;_(t,!1,function(t){var e=i++,r=!1;n.push(void 0),o++,s.resolve(t).then(function(t){r||(r=!0,n[e]=t,--o||a(n))},u)}),--o||a(n)});return r.e&&u(r.v),e.promise},race:function(t){var e=this,r=O(e),n=r.reject,i=w(function(){_(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}})},function(t,e){t.exports=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,e,r){var d=r(109),f=r(531),p=r(532),g=r(53),v=r(221),y=r(533),m={},_={};(e=t.exports=function(t,e,r,n,i){var o,s,a,u,c=i?function(){return t}:y(t),l=d(r,n,e?2:1),h=0;if("function"!=typeof c)throw TypeError(t+" is not iterable!");if(p(c)){for(o=v(t.length);h<o;h++)if((u=e?l(g(s=t[h])[0],s[1]):l(t[h]))===m||u===_)return u}else for(a=c.call(t);!(s=a.next()).done;)if((u=f(a,l,s.value,e))===m||u===_)return u}).BREAK=m,e.RETURN=_},function(t,e,r){var o=r(53);t.exports=function(t,e,r,n){try{return n?e(o(r)[0],r[1]):e(r)}catch(e){var i=t.return;throw void 0!==i&&o(i.call(t)),e}}},function(t,e,r){var n=r(86),i=r(30)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[i]===t)}},function(t,e,r){var n=r(226),i=r(30)("iterator"),o=r(86);t.exports=r(66).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[n(t)]}},function(t,e,r){var i=r(53),o=r(110),s=r(30)("species");t.exports=function(t,e){var r,n=i(t).constructor;return void 0===n||null==(r=i(n)[s])?e:o(r)}},function(t,e){t.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){var a=r(29),u=r(227).set,c=a.MutationObserver||a.WebKitMutationObserver,l=a.process,h=a.Promise,d="process"==r(113)(l);t.exports=function(){function t(){var t,e;for(d&&(t=l.domain)&&t.exit();r;){e=r.fn,r=r.next;try{e()}catch(t){throw r?i():n=void 0,t}}n=void 0,t&&t.enter()}var r,n,i;if(d)i=function(){l.nextTick(t)};else if(!c||a.navigator&&a.navigator.standalone)if(h&&h.resolve){var e=h.resolve(void 0);i=function(){e.then(t)}}else i=function(){u.call(a,t)};else{var o=!0,s=document.createTextNode("");new c(t).observe(s,{characterData:!0}),i=function(){s.data=o=!o}}return function(t){var e={fn:t,next:void 0};n&&(n.next=e),r||(r=e,i()),n=e}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,r){var n=r(29).navigator;t.exports=n&&n.userAgent||""},function(t,e,r){var n=r(53),i=r(84),o=r(228);t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},function(t,e,r){var i=r(67);t.exports=function(t,e,r){for(var n in e)r&&t[n]?t[n]=e[n]:i(t,n,e[n]);return t}},function(t,e,r){"use strict";var n=r(29),i=r(66),o=r(111),s=r(85),a=r(30)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:n[t];s&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,r){var o=r(30)("iterator"),s=!1;try{var n=[7][o]();n.return=function(){s=!0},Array.from(n,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!s)return!1;var r=!1;try{var n=[7],i=n[o]();i.next=function(){return{done:r=!0}},n[o]=function(){return i},t(n)}catch(t){}return r}},function(t,e,r){"use strict";"undefined"!=typeof window&&r(544)},function(t,e){!function(t){"use strict";if(!t.fetch){var e="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,s="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),n="FormData"in t,i="ArrayBuffer"in t;if(i)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))};p.prototype.append=function(t,e){t=h(t),e=d(e);var r=this.map[t];this.map[t]=r?r+","+e:e},p.prototype.delete=function(t){delete this.map[h(t)]},p.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},p.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},p.prototype.set=function(t,e){this.map[h(t)]=d(e)},p.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},p.prototype.keys=function(){var r=[];return this.forEach(function(t,e){r.push(e)}),f(r)},p.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),f(e)},p.prototype.entries=function(){var r=[];return this.forEach(function(t,e){r.push([e,t])}),f(r)},r&&(p.prototype[Symbol.iterator]=p.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},_.call(b.prototype),_.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var l=[301,302,303,307,308];E.redirect=function(t,e){if(-1===l.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},t.Headers=p,t.Request=b,t.Response=E,t.fetch=function(r,i){return new Promise(function(n,t){var e=new b(r,i),o=new XMLHttpRequest;o.onload=function(){var t,i,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",i=new p,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),r=e.shift().trim();if(r){var n=e.join(":").trim();i.append(r,n)}}),i)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var r="response"in o?o.response:o.responseText;n(new E(r,e))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&s&&(o.responseType="blob"),e.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0}function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function d(t){return"string"!=typeof t&&(t=String(t)),t}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function g(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function v(r){return new Promise(function(t,e){r.onload=function(){t(r.result)},r.onerror=function(){e(r.error)}})}function y(t){var e=new FileReader,r=v(e);return e.readAsArrayBuffer(t),r}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(s&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(n&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&s&&a(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=g(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var t,e,r,n=g(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,r=v(e=new FileReader),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}function b(t,e){var r,n,i=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new p(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new p(e.headers)),this.method=(n=(r=e.method||this.method||"GET").toUpperCase(),-1<c.indexOf(n)?n:r),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function T(t){var i=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),r=e.shift().replace(/\+/g," "),n=e.join("=").replace(/\+/g," ");i.append(decodeURIComponent(r),decodeURIComponent(n))}}),i}function E(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new p(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)},function(t,e,r){"use strict";var s=r(546),a="bb_geo_info";function u(t,e){return new Date(t.getTime()+864e5*e)}var n={setGeoInfo:function(t){var e=new Date,r=u(e,7).getTime(),n=JSON.stringify(t)+"|"+r,i=window.location.hostname,o=u(e,365);s.set(a,n,o,"/",i)},getGeoInfo:function(){var t=s.get(a);if(t){var e=t.split("|"),r=parseInt(e[1],10);return{expired:(new Date).getTime()>r,geoInfo:JSON.parse(e[0])}}return null}};t.exports=n},function(t,e,r){"use strict";var n={get:function(t){var e=document.cookie.match("(^|;) ?"+t+"=([^;$]*)");return e?e[2]:null},set:function(t,e,r,n,i){var o=r?"; expires="+r.toGMTString():"",s=n?"; path="+n:"; path=/",a=i?"; domain="+i:"";document.cookie=t+"="+e+o+s+a}};t.exports=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="notice_behavior",n="cmapi_cookie_privacy",o="euconsent",s="trustarc-loaded",l={inEU:"1---",ccpaOptedIn:"1YNY",ccpaOptedOut:"1YYY"},a="undefined"!=typeof Promise?Promise:r(548).Promise;function u(){if(!p(i))return{req:!1,fun:!1,pad:!1,usPrivacyString:l.inEU};var t=g(n);return!v(t,"permit")&&f()?{req:!1,fun:!1,pad:!1,usPrivacyString:l.inEU}:d(t)}function c(){var n=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).timeout;return new a(function(t,e){if(n){var r=e.bind(null,"Timeout reached while waiting for consent info");setTimeout(r,n)}if(p(i))return h(t);window.addEventListener(s,function(){h(t)},{once:!0})})}function h(t){if(!f()&&!p(n))return t({req:!0,fun:!0,pad:!0,usPrivacyString:l.ccpaOptedIn});p(n)&&t(d(g(n)))}function d(t){var e,r,n,i,o,s,a=!(v(e=t,"permit")&&!v(e,"1")),u=!(v(n=t,"permit")&&!v(n,"2")),c=!(v(r=t,"permit")&&!v(r,"3"));return{req:a,fun:u,pad:c,usPrivacyString:(i=a,o=u,s=c,f()?l.inEU:i&&o&&s?l.ccpaOptedIn:l.ccpaOptedOut)}}function f(){if(!p(i))return!0;var t=g(i);return v(t,"expressed")&&v(t,"eu")}function p(t){return Boolean(g(t))}function g(t){var e=document.cookie.match("(^|;) ?"+t+"=([^;$]*)");return e?e[2]:""}function v(t,e){return-1!==t.indexOf(e)}e.default={getConsentInfo:u,getConsentInfoAsync:c,iabConsentString:function(){return g(o)},iabConsentStringAsync:function(){var n=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).timeout;return new a(function(r,t){if(n){var e=t.bind(null,"Timeout reached while waiting for IAB Consent String");setTimeout(e,n)}p(o)&&r(g(o)),window.addEventListener(s,function(){window.__cmp("getConsentData",null,function(t,e){e&&r(t.consentData)})},{once:!0})})},gdprApplies:function(){return f()},gdprAppliesAsync:function(){var n=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).timeout;return new a(function(t,e){if(n){var r=e.bind(null,"Timeout reached while waiting for GDPR status");setTimeout(r,n)}if(p(i))return t(f());window.addEventListener(s,function(){return t(f())},{once:!0})})},reqAllowed:function(){return u().req},reqAllowedAsync:function(t){return c(t).then(function(t){return t.req})},funAllowed:function(){return u().fun},funAllowedAsync:function(t){return c(t).then(function(t){return t.fun})},padAllowed:function(){return u().pad},padAllowedAsync:function(t){return c(t).then(function(t){return t.pad})},getUSPrivacyString:function(){return u().usPrivacyString},getUSPrivacyStringAsync:function(t){return c(t).then(function(t){return t.usPrivacyString})},US_PRIVACY_STRINGS:l},t.exports=e.default},function(e,t,r){(function(U,V){var t;t=function(){"use strict";function u(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,e=void 0,i=void 0,a=function(t,e){d[n]=t,d[n+1]=e,2===(n+=2)&&(i?i(f):m())},t="undefined"!=typeof window?window:void 0,o=t||{},s=o.MutationObserver||o.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==U&&"[object process]"==={}.toString.call(U),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(f,1)}}var d=new Array(1e3);function f(){for(var t=0;t<n;t+=2)(0,d[t])(d[t+1]),d[t]=void 0,d[t+1]=void 0;n=0}var p,g,v,y,m=void 0;function _(t,e){var r=this,n=new this.constructor(E);void 0===n[T]&&N(n);var i=r._state;if(i){var o=arguments[i-1];a(function(){return O(i,n,o,r._result)})}else L(r,n,t,e);return n}function b(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(E);return C(e,t),e}m=c?function(){return U.nextTick(f)}:s?(g=0,v=new s(f),y=document.createTextNode(""),v.observe(y,{characterData:!0}),function(){y.data=g=++g%2}):l?((p=new MessageChannel).port1.onmessage=f,function(){return p.port2.postMessage(0)}):void 0===t?function(){try{var t=Function("return this")().require("vertx");return void 0!==(e=t.runOnLoop||t.runOnContext)?function(){e(f)}:h()}catch(t){return h()}}():h();var T=Math.random().toString(36).substring(2);function E(){}var S=void 0,w=1,A=2;function k(t,e,r){var i,o,n,s;e.constructor===t.constructor&&r===_&&e.constructor.resolve===b?(n=t,(s=e)._state===w?R(n,s._result):s._state===A?P(n,s._result):L(s,void 0,function(t){return C(n,t)},function(t){return P(n,t)})):void 0===r?R(t,e):u(r)?(i=e,o=r,a(function(r){var n=!1,t=function(t,e){try{t.call(e,function(t){n||(n=!0,i!==t?C(r,t):R(r,t))},function(t){n||(n=!0,P(r,t))})}catch(t){return t}}(o,i,r._label);!n&&t&&(n=!0,P(r,t))},t)):R(t,e)}function C(t,e){if(t===e)P(t,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(n=e),null===n||"object"!=i&&"function"!=i)R(t,e);else{var r=void 0;try{r=e.then}catch(e){return void P(t,e)}k(t,e,r)}var n,i}function x(t){t._onerror&&t._onerror(t._result),I(t)}function R(t,e){t._state===S&&(t._result=e,t._state=w,0!==t._subscribers.length&&a(I,t))}function P(t,e){t._state===S&&(t._state=A,t._result=e,a(x,t))}function L(t,e,r,n){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+w]=r,i[o+A]=n,0===o&&t._state&&a(I,t)}function I(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,i=void 0,o=t._result,s=0;s<e.length;s+=3)n=e[s],i=e[s+r],n?O(r,n,i,o):i(o);t._subscribers.length=0}}function O(t,e,r,n){var i=u(r),o=void 0,s=void 0,a=!0;if(i){try{o=r(n)}catch(t){a=!1,s=t}if(e===o)return void P(e,new TypeError("A promises callback cannot return that same promise."))}else o=n;e._state!==S||(i&&a?C(e,o):!1===a?P(e,s):t===w?R(e,o):t===A&&P(e,o))}var D=0;function N(t){t[T]=D++,t._state=void 0,t._result=void 0,t._subscribers=[]}var M=(j.prototype._enumerate=function(t){for(var e=0;this._state===S&&e<t.length;e++)this._eachEntry(t[e],e)},j.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===b){var i=void 0,o=void 0,s=!1;try{i=e.then}catch(e){s=!0,o=e}if(i===_&&e._state!==S)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===F){var a=new r(E);s?P(a,o):k(a,e,i),this._willSettleAt(a,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},j.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===S&&(this._remaining--,t===A?P(n,r):this._result[e]=r),0===this._remaining&&R(n,this._result)},j.prototype._willSettleAt=function(t,e){var r=this;L(t,void 0,function(t){return r._settledAt(w,e,t)},function(t){return r._settledAt(A,e,t)})},j),F=(B.prototype.catch=function(t){return this.then(null,t)},B.prototype.finally=function(e){var r=this.constructor;return u(e)?this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):this.then(e,e)},B);function B(t){this[T]=D++,this._result=this._state=void 0,this._subscribers=[],E!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof B?function(e,t){try{t(function(t){C(e,t)},function(t){P(e,t)})}catch(t){P(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function j(t,e){this._instanceConstructor=t,this.promise=new t(E),this.promise[T]||N(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&R(this.promise,this._result))):P(this.promise,new Error("Array Methods must be provided an Array"))}return F.prototype.then=_,F.all=function(t){return new M(this,t).promise},F.race=function(i){var o=this;return r(i)?new o(function(t,e){for(var r=i.length,n=0;n<r;n++)o.resolve(i[n]).then(t,e)}):new o(function(t,e){return e(new TypeError("You must pass an array to race."))})},F.resolve=b,F.reject=function(t){var e=new this(E);return P(e,t),e},F._setScheduler=function(t){i=t},F._setAsap=function(t){a=t},F._asap=a,F.polyfill=function(){var t=void 0;if(void 0!==V)t=V;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=F},F.Promise=F},e.exports=t()}).call(this,r(549),r(114))},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u,c=[],l=!1,h=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&f())}function f(){if(!l){var t=a(d);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new p(t,e)),1!==c.length||l||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){"use strict";t.exports=function(){var t=document.getElementsByClassName("article-info-json");if(void 0!==t&&1<=t.length){var e=t.item(t.length-1),r=JSON.parse(e.textContent),n=r.id,i=r.contentType;if(void 0!==n&&void 0!==i)return{id:n,contentType:i}}return{}}},function(t,e,r){var o=r(552),n=r(203),s=r(555),a="reg-user-info-ready";function u(t){var e=0<arguments.length&&void 0!==t&&t,r=s.get(document,"session_id"),n=s.get(document,"session_key"),i=s.get(document,"agent_id"),o=s.get(document,"_breg-uid");return r&&n&&i&&o||e?{sessionId:r,sessionKey:n,agentId:i,userId:o}:null}function c(t){var e=t.sessionId,r=t.sessionKey,n=t.agentId,i=t.userId,o={};return e&&(o.session_id=e),r&&(o.session_key=r),n&&(o.agent_id=n),i&&(o.breg=i),o}t.exports=function(){var i=window._regUserInfo||u();return i?n.resolve(c(i)):new n(function(r){function n(t){var e=t.detail;window.removeEventListener(a,n),r(c(i=e))}window.addEventListener(a,n),o(function(){window.removeEventListener(a,n),i=u(!0),r(c(i))},2e3)})}},function(t,e,r){t.exports=r(553)},function(t,e,r){r(554),t.exports=r(63).setTimeout},function(t,e,r){function n(i){return function(t,e){var r=2<arguments.length,n=r?a.call(arguments,2):void 0;return i(r?function(){("function"==typeof t?t:Function(t)).apply(this,n)}:t,e)}}var i=r(51),o=r(15),s=r(143),a=[].slice;i({global:!0,bind:!0,forced:/MSIE .\./.test(s)},{setTimeout:n(o.setTimeout),setInterval:n(o.setInterval)})},function(t,e){t.exports={get:function(t,e){if(t&&t.cookie){var r=t.cookie.match("(^|;) ?"+e+"=([^;$]*)");if(r)return r[2]}return null}}}],i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=229);function i(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var r,n},"object"==typeof r&&"object"==typeof e?e.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof r?r.bridgeWebModule=i():n.bridgeWebModule=i()},{}],7:[function(t,e,r){},{}],8:[function(t,e,r){!function(n){"use strict";function t(){}var u=n.setTimeout,c=n.clearTimeout;function i(t,e,r,n,i){this._internal=new o(t,e,r,n,i)}function o(t,e,r,n,i){this.onStartCallback=e,this.onProgressCallback=r,this.onFinishCallback=n,this.thisArg=i,this.xhr=t,this.state=0,this.charOffset=0,this.offset=0,this.url="",this.withCredentials=!1,this.timeout=0}function e(){this._data={}}function r(){this._listeners=new e}function s(t){u(function(){throw t},0)}function a(t){this.type=t,this.target=void 0}function l(t,e){a.call(this,t),this.data=e.data,this.lastEventId=e.lastEventId}i.prototype.open=function(t,e){this._internal.open(t,e)},i.prototype.cancel=function(){this._internal.cancel()},o.prototype.onStart=function(){if(1===this.state){this.state=2;var e=0,r="",n=void 0;if("contentType"in this.xhr)e=200,r="OK",n=this.xhr.contentType;else try{e=this.xhr.status,r=this.xhr.statusText,n=this.xhr.getResponseHeader("Content-Type")}catch(t){r="",n=void(e=0)}null==n&&(n=""),this.onStartCallback.call(this.thisArg,e,r,n)}},o.prototype.onProgress=function(){if(this.onStart(),2===this.state||3===this.state){this.state=3;var t="";try{t=this.xhr.responseText}catch(t){}for(var e=this.charOffset,r=t.length,n=this.offset;n<r;n+=1){var i=t.charCodeAt(n);i!=="\n".charCodeAt(0)&&i!=="\r".charCodeAt(0)||(this.charOffset=n+1)}this.offset=r;var o=t.slice(e,this.charOffset);this.onProgressCallback.call(this.thisArg,o)}},o.prototype.onFinish=function(){this.onProgress(),3===this.state&&(this.state=4,0!==this.timeout&&(c(this.timeout),this.timeout=0),this.onFinishCallback.call(this.thisArg))},o.prototype.onReadyStateChange=function(){null!=this.xhr&&(4===this.xhr.readyState?(this.xhr.status,this.onFinish()):3===this.xhr.readyState?this.onProgress():this.xhr.readyState)},o.prototype.onTimeout2=function(){this.timeout=0;var t=/^data\:([^,]*?)(base64)?,([\S]*)$/.exec(this.url),e=t[1],r="base64"===t[2]?n.atob(t[3]):decodeURIComponent(t[3]);1===this.state&&(this.state=2,this.onStartCallback.call(this.thisArg,200,"OK",e)),2!==this.state&&3!==this.state||(this.state=3,this.onProgressCallback.call(this.thisArg,r)),3===this.state&&(this.state=4,this.onFinishCallback.call(this.thisArg))},o.prototype.onTimeout1=function(){this.timeout=0,this.open(this.url,this.withCredentials)},o.prototype.onTimeout0=function(){var t=this;this.timeout=u(function(){t.onTimeout0()},500),3===this.xhr.readyState&&this.onProgress()},o.prototype.handleEvent=function(t){"load"===t.type?this.onFinish():"error"===t.type?this.onFinish():"abort"===t.type?this.onFinish():"progress"===t.type?this.onProgress():"readystatechange"===t.type&&this.onReadyStateChange()},o.prototype.open=function(t,e){this.cancel(),this.url=t,this.withCredentials=e,this.state=1,this.charOffset=0,this.offset=0;var r=this;if(null==/^data\:([^,]*?)(?:;base64)?,[\S]*$/.exec(t))if((!("ontimeout"in this.xhr)||"sendAsBinary"in this.xhr||"mozAnon"in this.xhr)&&null!=n.document&&null!=n.document.readyState&&"complete"!==n.document.readyState)this.timeout=u(function(){r.onTimeout1()},4);else{this.xhr.onload=function(t){r.handleEvent({type:"load"})},this.xhr.onerror=function(){r.handleEvent({type:"error"})},this.xhr.onabort=function(){r.handleEvent({type:"abort"})},this.xhr.onprogress=function(){r.handleEvent({type:"progress"})},this.xhr.onreadystatechange=function(){r.handleEvent({type:"readystatechange"})},this.xhr.open("GET",t,!0),this.xhr.withCredentials=e,this.xhr.responseType="text","setRequestHeader"in this.xhr&&this.xhr.setRequestHeader("Accept","text/event-stream");try{this.xhr.send(void 0)}catch(t){throw t}"readyState"in this.xhr&&null!=n.opera&&(this.timeout=u(function(){r.onTimeout0()},0))}else this.timeout=u(function(){r.onTimeout2()},0)},o.prototype.cancel=function(){0!==this.state&&4!==this.state&&(this.state=4,this.xhr.onload=t,this.xhr.onerror=t,this.xhr.onabort=t,this.xhr.onprogress=t,this.xhr.onreadystatechange=t,this.xhr.abort(),0!==this.timeout&&(c(this.timeout),this.timeout=0),this.onFinishCallback.call(this.thisArg)),this.state=0},e.prototype.get=function(t){return this._data[t+"~"]},e.prototype.set=function(t,e){this._data[t+"~"]=e},e.prototype.delete=function(t){delete this._data[t+"~"]},r.prototype.dispatchEvent=function(t){t.target=this;var e=t.type.toString(),r=this._listeners.get(e);if(null!=r)for(var n=r.length,i=void 0,o=0;o<n;o+=1){i=r[o];try{"function"==typeof i.handleEvent?i.handleEvent(t):i.call(this,t)}catch(t){s(t)}}},r.prototype.addEventListener=function(t,e){t=t.toString();var r=this._listeners,n=r.get(t);null==n&&(n=[],r.set(t,n));for(var i=n.length;0<=i;i-=1)if(n[i]===e)return;n.push(e)},r.prototype.removeEventListener=function(t,e){t=t.toString();var r=this._listeners,n=r.get(t);if(null!=n){for(var i=n.length,o=[],s=0;s<i;s+=1)n[s]!==e&&o.push(n[s]);0===o.length?r.delete(t):r.set(t,o)}},l.prototype=a.prototype;function h(t,e,r){try{"function"==typeof e&&e.call(t,r)}catch(t){s(t)}}var d=n.XMLHttpRequest,f=n.XDomainRequest,p=null!=d&&null!=(new d).withCredentials,g=p||null!=d&&null==f?d:f,v=-1,y=0,m=4,_=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i,b=function(t,e){var r=t;return r!=r&&(r=e),r<1e3?1e3:18e6<r?18e6:r};function T(t,e){r.call(this),this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url="",this.readyState=y,this.withCredentials=!1,this._internal=new E(this,t,e)}function E(t,e,r){this.url=e.toString(),this.readyState=y,this.withCredentials=p&&null!=r&&Boolean(r.withCredentials),this.es=t,this.initialRetry=b(1e3,0),this.heartbeatTimeout=b(45e3,0),this.lastEventId="",this.retry=this.initialRetry,this.wasActivity=!1;var n=new(null!=r&&null!=r.Transport?r.Transport:g);this.transport=new i(n,this.onStart,this.onProgress,this.onFinish,this),this.timeout=0,this.currentState=v,this.dataBuffer=[],this.lastEventIdBuffer="",this.eventTypeBuffer="",this.state=m,this.fieldStart=0,this.valueStart=0,this.es.url=this.url,this.es.readyState=this.readyState,this.es.withCredentials=this.withCredentials,this.onTimeout()}function S(){this.CONNECTING=y,this.OPEN=1,this.CLOSED=2}E.prototype.onStart=function(t,e,r){if(this.currentState===y)if(null==r&&(r=""),200===t&&_.test(r)){this.currentState=1,this.wasActivity=!0,this.retry=this.initialRetry,this.readyState=1,this.es.readyState=1;var n=new a("open");this.es.dispatchEvent(n),h(this.es,this.es.onopen,n)}else if(0!==t){var i="";i=200!==t?"EventSource's response has a status "+t+" "+e.replace(/\s+/g," ")+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+r.replace(/\s+/g," ")+". Aborting the connection.",s(new Error(i)),this.close();n=new a("error");this.es.dispatchEvent(n),h(this.es,this.es.onerror,n)}},E.prototype.onProgress=function(t){if(1===this.currentState){var e=t.length;0!==e&&(this.wasActivity=!0);for(var r=0;r<e;r+=1){var n=t.charCodeAt(r);if(3===this.state&&n==="\n".charCodeAt(0))this.state=m;else if(3===this.state&&(this.state=m),n==="\r".charCodeAt(0)||n==="\n".charCodeAt(0)){if(this.state!==m){5===this.state&&(this.valueStart=r+1);var i=t.slice(this.fieldStart,this.valueStart-1),o=t.slice(this.valueStart+(this.valueStart<r&&t.charCodeAt(this.valueStart)===" ".charCodeAt(0)?1:0),r);if("data"===i)this.dataBuffer.push(o);else if("id"===i)this.lastEventIdBuffer=o;else if("event"===i)this.eventTypeBuffer=o;else if("retry"===i)this.initialRetry=b(Number(o),this.initialRetry),this.retry=this.initialRetry;else if("heartbeatTimeout"===i&&(this.heartbeatTimeout=b(Number(o),this.heartbeatTimeout),0!==this.timeout)){c(this.timeout);var s=this;this.timeout=u(function(){s.onTimeout()},this.heartbeatTimeout)}}if(this.state===m){if(0!==this.dataBuffer.length){this.lastEventId=this.lastEventIdBuffer,""===this.eventTypeBuffer&&(this.eventTypeBuffer="message");var a=new l(this.eventTypeBuffer,{data:this.dataBuffer.join("\n"),lastEventId:this.lastEventIdBuffer});if(this.es.dispatchEvent(a),"message"===this.eventTypeBuffer&&h(this.es,this.es.onmessage,a),2===this.currentState)return}this.dataBuffer.length=0,this.eventTypeBuffer=""}this.state=n==="\r".charCodeAt(0)?3:m}else this.state===m&&(this.fieldStart=r,this.state=5),5===this.state?n===":".charCodeAt(0)&&(this.valueStart=r+1,this.state=6):6===this.state&&(this.state=7)}}},E.prototype.onFinish=function(){if(1===this.currentState||this.currentState===y){this.currentState=v,0!==this.timeout&&(c(this.timeout),this.timeout=0),this.retry>16*this.initialRetry&&(this.retry=16*this.initialRetry),18e6<this.retry&&(this.retry=18e6);var t=this;this.timeout=u(function(){t.onTimeout()},this.retry),this.retry=2*this.retry+1,this.readyState=y,this.es.readyState=y;var e=new a("error");this.es.dispatchEvent(e),h(this.es,this.es.onerror,e)}},E.prototype.onTimeout=function(){if(this.timeout=0,this.currentState===v){this.wasActivity=!1;e=this;this.timeout=u(function(){e.onTimeout()},this.heartbeatTimeout),this.currentState=y,this.dataBuffer.length=0,this.eventTypeBuffer="",this.lastEventIdBuffer=this.lastEventId,this.fieldStart=0,this.valueStart=0,this.state=m;var t=this.url.slice(0,5);t="data:"!==t&&"blob:"!==t?this.url+(-1===this.url.indexOf("?",0)?"?":"&")+"lastEventId="+encodeURIComponent(this.lastEventId)+"&r="+(Math.random()+1).toString().slice(2):this.url;try{this.transport.open(t,this.withCredentials)}catch(t){throw this.close(),t}}else if(this.wasActivity){this.wasActivity=!1;var e=this;this.timeout=u(function(){e.onTimeout()},this.heartbeatTimeout)}else s(new Error("No activity within "+this.heartbeatTimeout+" milliseconds. Reconnecting.")),this.transport.cancel()},E.prototype.close=function(){this.currentState=2,this.transport.cancel(),0!==this.timeout&&(c(this.timeout),this.timeout=0),this.readyState=2,this.es.readyState=2},S.prototype=r.prototype,(T.prototype=new S).close=function(){this._internal.close()},S.call(T),p&&(T.prototype.withCredentials=void 0);null==g||null!=n.EventSource&&(!p||null!=n.EventSource&&"withCredentials"in n.EventSource.prototype)||(n.NativeEventSource=n.EventSource,n.EventSource=T)}("undefined"!=typeof window?window:this)},{}],9:[function(t,e,r){"use strict";var i=t("is-callable"),o=Object.prototype.toString,s=Object.prototype.hasOwnProperty;e.exports=function(t,e,r){if(!i(e))throw new TypeError("iterator must be a function");var n;3<=arguments.length&&(n=r),"[object Array]"===o.call(t)?function(t,e,r){for(var n=0,i=t.length;n<i;n++)s.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))}(t,e,n):"string"==typeof t?function(t,e,r){for(var n=0,i=t.length;n<i;n++)null==r?e(t.charAt(n),n,t):e.call(r,t.charAt(n),n,t)}(t,e,n):function(t,e,r){for(var n in t)s.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))}(t,e,n)}},{"is-callable":13}],10:[function(i,o,t){(function(t){var e,r=void 0!==t?t:"undefined"!=typeof window?window:{},n=i("min-document");e="undefined"!=typeof document?document:(e=r["__GLOBAL_DOCUMENT_CACHE@4"])||(r["__GLOBAL_DOCUMENT_CACHE@4"]=n),o.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":7}],11:[function(t,r,e){(function(t){var e;e="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},r.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(t,e,r){var n,i;n=this,i=function(){return(i={},n.m=r=[function(t,e,r){"use strict";r.d(e,"a",function(){return u}),r.d(e,"b",function(){return c});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function o(){}var i={trace:o,debug:o,log:o,warn:o,info:o,error:o},s=i;function a(n){var i=self.console[n];return i?function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];e[0]&&(e[0]=function(t,e){return e="["+t+"] > "+e}(n,e[0])),i.apply(self.console,e)}:o}var u=function(t){if(!0===t||"object"===(void 0===t?"undefined":n(t))){!function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach(function(t){s[t]=e[t]?e[t].bind(e):a(t)})}(t,"debug","log","info","warn","error");try{s.log()}catch(t){s=i}}else s=i},c=i},function(t,e,r){"use strict";e.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(t,e,r){"use strict";r.d(e,"b",function(){return n}),r.d(e,"a",function(){return i});var n={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},i={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(t,e,r){"use strict";r.d(e,"b",function(){return i});var n=(a.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},a.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},a.getID3Data=function(t,e){for(var r=e,n=0;a.isHeader(t,e);)n+=10,n+=a._readSize(t,e+6),a.isFooter(t,e+10)&&(n+=10),e+=n;if(0<n)return t.subarray(r,r+n)},a._readSize=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,r|=(127&t[e+2])<<7,r|=127&t[e+3]},a.getTimeStamp=function(t){for(var e=a.getID3Frames(t),r=0;r<e.length;r++){var n=e[r];if(a.isTimeStampFrame(n))return a._readTimeStamp(n)}},a.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},a._getFrameData=function(t){var e=String.fromCharCode(t[0],t[1],t[2],t[3]),r=a._readSize(t,4);return{type:e,size:r,data:t.subarray(10,10+r)}},a.getID3Frames=function(t){for(var e=0,r=[];a.isHeader(t,e);){for(var n=a._readSize(t,e+6),i=(e+=10)+n;e+8<i;){var o=a._getFrameData(t.subarray(e)),s=a._decodeFrame(o);s&&r.push(s),e+=o.size+10}a.isFooter(t,e)&&(e+=10)}return r},a._decodeFrame=function(t){return"PRIV"===t.type?a._decodePrivFrame(t):"T"===t.type[0]?a._decodeTextFrame(t):"W"===t.type[0]?a._decodeURLFrame(t):void 0},a._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=1&e[3],n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},a._decodePrivFrame=function(t){if(!(t.size<2)){var e=a._utf8ArrayToStr(t.data,!0),r=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:r.buffer}}},a._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var e=1,r=a._utf8ArrayToStr(t.data.subarray(e));e+=r.length+1;var n=a._utf8ArrayToStr(t.data.subarray(e));return{key:t.type,info:r,data:n}}var i=a._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:i}}},a._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var e=1,r=a._utf8ArrayToStr(t.data.subarray(e));e+=r.length+1;var n=a._utf8ArrayToStr(t.data.subarray(e));return{key:t.type,info:r,data:n}}var i=a._utf8ArrayToStr(t.data);return{key:t.type,data:i}},a._utf8ArrayToStr=function(t,e){for(var r=1<arguments.length&&void 0!==e&&e,n=t.length,i=void 0,o=void 0,s=void 0,a="",u=0;u<n;){if(0===(i=t[u++])&&r)return a;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(i);break;case 12:case 13:o=t[u++],a+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=t[u++],s=t[u++],a+=String.fromCharCode((15&i)<<12|(63&o)<<6|(63&s)<<0)}}return a},a);function a(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a)}var i=n._utf8ArrayToStr;e.a=n},function(t,e,r){"use strict";function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.subtle=t,this.aesIV=e}var a=(n.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},n);function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.subtle=t,this.key=e}var u=(i.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},i);function o(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var c=(o.prototype.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),n=0;n<4;n++)r[n]=e.getUint32(4*n);return r},o.prototype.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,n=r[0],i=r[1],o=r[2],s=r[3],a=this.invSubMix,u=a[0],c=a[1],l=a[2],h=a[3],d=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)d[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var v=p^p<<1^p<<2^p<<3^p<<4;v=v>>>8^255&v^99;var y=d[e[t[f]=v]=f],m=d[y],_=d[m],b=257*d[v]^16843008*v;n[f]=b<<24|b>>>8,i[f]=b<<16|b>>>16,o[f]=b<<8|b>>>24,s[f]=b,b=16843009*_^65537*m^257*y^16843008*f,u[v]=b<<24|b>>>8,c[v]=b<<16|b>>>16,l[v]=b<<8|b>>>24,h[v]=b,f?(f=y^d[d[d[_^y]]],p^=d[d[p]]):f=p=1}},o.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,n=0;n<e.length&&r;)r=e[n]===this.key[n],n++;if(!r){this.key=e;var i=this.keySize=e.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o=this.ksRows=4*(i+6+1),s=void 0,a=void 0,u=this.keySchedule=new Uint32Array(o),c=this.invKeySchedule=new Uint32Array(o),l=this.sBox,h=this.rcon,d=this.invSubMix,f=d[0],p=d[1],g=d[2],v=d[3],y=void 0,m=void 0;for(s=0;s<o;s++)s<i?y=u[s]=e[s]:(m=y,s%i==0?(m=l[(m=m<<8|m>>>24)>>>24]<<24|l[m>>>16&255]<<16|l[m>>>8&255]<<8|l[255&m],m^=h[s/i|0]<<24):6<i&&s%i==4&&(m=l[m>>>24]<<24|l[m>>>16&255]<<16|l[m>>>8&255]<<8|l[255&m]),u[s]=y=(u[s-i]^m)>>>0);for(a=0;a<o;a++)s=o-a,m=3&a?u[s]:u[s-4],c[a]=a<4||s<=4?m:f[l[m>>>24]]^p[l[m>>>16&255]]^g[l[m>>>8&255]]^v[l[255&m]],c[a]=c[a]>>>0}},o.prototype.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},o.prototype.decrypt=function(t,e,r){for(var n,i,o=this.keySize+6,s=this.invKeySchedule,a=this.invSBox,u=this.invSubMix,c=u[0],l=u[1],h=u[2],d=u[3],f=this.uint8ArrayToUint32Array_(r),p=f[0],g=f[1],v=f[2],y=f[3],m=new Int32Array(t),_=new Int32Array(m.length),b=void 0,T=void 0,E=void 0,S=void 0,w=void 0,A=void 0,k=void 0,C=void 0,x=void 0,R=void 0,P=void 0,L=void 0,I=this.networkToHostOrderSwap;e<m.length;){for(x=I(m[e]),R=I(m[e+1]),P=I(m[e+2]),L=I(m[e+3]),w=x^s[0],A=L^s[1],k=P^s[2],C=R^s[3],n=4,i=1;i<o;i++)b=c[w>>>24]^l[A>>16&255]^h[k>>8&255]^d[255&C]^s[n],T=c[A>>>24]^l[k>>16&255]^h[C>>8&255]^d[255&w]^s[n+1],E=c[k>>>24]^l[C>>16&255]^h[w>>8&255]^d[255&A]^s[n+2],S=c[C>>>24]^l[w>>16&255]^h[A>>8&255]^d[255&k]^s[n+3],w=b,A=T,k=E,C=S,n+=4;b=a[w>>>24]<<24^a[A>>16&255]<<16^a[k>>8&255]<<8^a[255&C]^s[n],T=a[A>>>24]<<24^a[k>>16&255]<<16^a[C>>8&255]<<8^a[255&w]^s[n+1],E=a[k>>>24]<<24^a[C>>16&255]<<16^a[w>>8&255]<<8^a[255&A]^s[n+2],S=a[C>>>24]<<24^a[w>>16&255]<<16^a[A>>8&255]<<8^a[255&k]^s[n+3],n+=3,_[e]=I(b^p),_[e+1]=I(S^g),_[e+2]=I(E^v),_[e+3]=I(T^y),p=x,g=R,v=P,y=L,e+=4}return _.buffer},o.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},o),s=r(2),l=r(0);var h=(d.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},d.prototype.decrypt=function(e,r,n,i){var o=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(l.b.log("JS AES decrypt"),this.logEnabled=!1);var t=this.decryptor;t||(this.decryptor=t=new c),t.expandKey(r),i(t.decrypt(e,0,n))}else{this.logEnabled&&(l.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var s=this.subtle;this.key!==r&&(this.key=r,this.fastAesKey=new u(s,r)),this.fastAesKey.expandKey().then(function(t){new a(s,n).decrypt(e,t).catch(function(t){o.onWebCryptoError(t,e,r,n,i)}).then(function(t){i(t)})}).catch(function(t){o.onWebCryptoError(t,e,r,n,i)})}},d.prototype.onWebCryptoError=function(t,e,r,n,i){this.config.enableSoftwareAES?(l.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,r,n,i)):(l.b.error("decrypting error : "+t.message),this.observer.trigger(Event.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},d.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},d);function d(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),this.observer=t,this.config=e,this.logEnabled=!0;try{var r=crypto||self.crypto;this.subtle=r.subtle||r.webkitSubtle}catch(t){}this.disableWebCrypto=!this.subtle}e.a=h},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function u(t){return"function"==typeof t}function c(t){return"object"==typeof t&&null!==t}function l(t){return void 0===t}((t.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,i,o,s;if(this._events||(this._events={}),"error"===t&&(!this._events.error||c(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var a=new Error('Uncaught, unspecified "error" event. ('+e+")");throw a.context=e,a}if(l(r=this._events[t]))return!1;if(u(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(c(r))for(i=Array.prototype.slice.call(arguments,1),n=(s=r.slice()).length,o=0;o<n;o++)s[o].apply(this,i);return!0},n.prototype.on=n.prototype.addListener=function(t,e){var r;if(!u(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,u(e.listener)?e.listener:e),this._events[t]?c(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,c(this._events[t])&&!this._events[t].warned&&(r=l(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&0<r&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.once=function(t,e){if(!u(e))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var r,n,i,o;if(!u(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=(r=this._events[t]).length,n=-1,r===e||u(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(c(r)){for(o=i;0<o--;)if(r[o]===e||r[o].listener&&r[o].listener===e){n=o;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(u(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?u(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(u(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){var n,l,i,o,h;n=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,l=/^([^\/;?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,h={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var n=this.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");return n.path=h.normalizePath(n.path),h.buildURLFromParts(n)}var i=this.parseURL(e);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=h.normalizePath(i.path),h.buildURLFromParts(i)):e;var o=this.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var s=l.exec(o.path);o.netLoc=s[1],o.path=s[2]}o.netLoc&&!o.path&&(o.path="/");var a={scheme:o.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(a.netLoc=o.netLoc,"/"!==i.path[0]))if(i.path){var u=o.path,c=u.substring(0,u.lastIndexOf("/")+1)+i.path;a.path=h.normalizePath(c)}else a.path=o.path,i.params||(a.params=o.params,i.query||(a.query=o.query));return null===a.path&&(a.path=r.alwaysNormalize?h.normalizePath(i.path):i.path),h.buildURLFromParts(a)},parseURL:function(t){var e=n.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(i,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=h},function(t,e,r){"use strict";var tt=r(1),et=r(2),g=r(4),rt=r(0);function i(t,e){return 255===t[e]&&240==(246&t[e+1])}function l(t,e){return 1&t[e+1]?7:9}function h(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function v(t,e){return!!(e+1<t.length&&i(t,e))}function n(t,e){if(e+1<t.length&&i(t,e)){var r=l(t,e);e+5<t.length&&(r=h(t,e));var n=e+r;if(n===t.length||n+1<t.length&&i(t,n))return!0}return!1}function y(t,e,r,n,i){if(!t.samplerate){var o=function(t,e,r,n){var i,o,s,a,u,c=navigator.userAgent.toLowerCase(),l=n,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(i=1+((192&e[r+2])>>>6),o=(60&e[r+2])>>>2,!(h.length-1<o))return a=(1&e[r+2])<<2,a|=(192&e[r+3])>>>6,rt.b.log("manifest codec:"+n+",ADTS data:type:"+i+",sampleingIndex:"+o+"["+h[o]+"Hz],channelConfig:"+a),s=/firefox/i.test(c)?6<=o?(i=5,u=new Array(4),o-3):(i=2,u=new Array(2),o):-1!==c.indexOf("android")?(i=2,u=new Array(2),o):(i=5,u=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&6<=o?o-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(6<=o&&1==a||/vivaldi/i.test(c))||!n&&1==a)&&(i=2,u=new Array(2)),o)),u[0]=i<<3,u[0]|=(14&o)>>1,u[1]|=(1&o)<<7,u[1]|=a<<3,5===i&&(u[1]|=(14&s)>>1,u[2]=(1&s)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:h[o],channelCount:a,codec:"mp4a.40."+i,manifestCodec:l};t.trigger(Event.ERROR,{type:et.b.MEDIA_ERROR,details:et.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o})}(e,r,n,i);t.config=o.config,t.samplerate=o.samplerate,t.channelCount=o.channelCount,t.codec=o.codec,t.manifestCodec=o.manifestCodec,rt.b.log("parsed codec:"+t.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)}}function m(t){return 9216e4/t}function _(t,e,r,n,i){var o=function(t,e,r,n,i){var o,s,a=t.length;if(o=l(t,e),s=h(t,e),0<(s-=o)&&e+o+s<=a)return{headerLength:o,frameLength:s,stamp:r+n*i}}(e,r,n,i,m(t.samplerate));if(o){var s=o.stamp,a=o.headerLength,u=o.frameLength,c={unit:e.subarray(r+a,r+a+u),pts:s,dts:s};return t.samples.push(c),t.len+=u,{sample:c,length:u+a}}}var p=r(3);function o(t,e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.observer=t,this.config=r,this.remuxer=e}var S=(o.prototype.resetInitSegment=function(t,e,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},o.prototype.resetTimeStamp=function(){},o.probe=function(t){if(!t)return!1;for(var e=(p.a.getID3Data(t,0)||[]).length,r=t.length;e<r;e++)if(n(t,e))return rt.b.log("ADTS sync word found !"),!0;return!1},o.prototype.append=function(t,e,r,n){for(var i=this._audioTrack,o=p.a.getID3Data(t,0)||[],s=p.a.getTimeStamp(o),a=s?90*s:9e4*e,u=0,c=a,l=t.length,h=o.length,d=[{pts:c,dts:c,data:o}];h<l-1;)if(v(t,h)&&h+5<l){y(i,this.observer,t,h,i.manifestCodec);var f=_(i,t,h,a,u);if(!f){rt.b.log("Unable to parse AAC frame");break}h+=f.length,c=f.sample.pts,u++}else p.a.isHeader(t,h)?(o=p.a.getID3Data(t,h),d.push({pts:c,dts:c,data:o}),h+=o.length):h++;this.remuxer.remux(i,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},e,r,n)},o.prototype.destroy=function(){},o);var a=Math.pow(2,32)-1;function d(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),this.observer=t,this.remuxer=e}var w=(d.prototype.resetTimeStamp=function(t){this.initPTS=t},d.prototype.resetInitSegment=function(t,e,r,n){if(t&&t.byteLength){var i=this.initData=d.parseInitSegment(t);null==e&&(e="mp4a.40.5"),null==r&&(r="avc1.42e01e");var o={};i.audio&&i.video?o.audiovideo={container:"video/mp4",codec:e+","+r,initSegment:n?t:null}:(i.audio&&(o.audio={container:"audio/mp4",codec:e,initSegment:n?t:null}),i.video&&(o.video={container:"video/mp4",codec:r,initSegment:n?t:null})),this.observer.trigger(tt.a.FRAG_PARSING_INIT_SEGMENT,{tracks:o})}else e&&(this.audioCodec=e),r&&(this.videoCodec=r)},d.probe=function(t){return 0<d.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length},d.bin2str=function(t){return String.fromCharCode.apply(null,t)},d.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var r=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return r<0?4294967296+r:r},d.writeUint32=function(t,e,r){t.data&&(e+=t.start,t=t.data),t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r},d.findBox=function(t,e){var r,n,i,o,s,a,u=[];if(t.data?(s=t.start,i=t.end,t=t.data):(s=0,i=t.byteLength),!e.length)return null;for(r=s;r<i;)a=1<(n=d.readUint32(t,r))?r+n:i,d.bin2str(t.subarray(r+4,r+8))===e[0]&&(1===e.length?u.push({data:t,start:r+8,end:a}):(o=d.findBox({data:t,start:r+8,end:a},e.slice(1))).length&&(u=u.concat(o))),r=a;return u},d.parseInitSegment=function(t){var h=[];return d.findBox(t,["moov","trak"]).forEach(function(t){var e=d.findBox(t,["tkhd"])[0];if(e){var r=e.data[e.start],n=0===r?12:20,i=d.readUint32(e,n),o=d.findBox(t,["mdia","mdhd"])[0];if(o){r=o.data[o.start];var s=d.readUint32(o,n=0===r?12:20),a=d.findBox(t,["mdia","hdlr"])[0];if(a){var u={soun:"audio",vide:"video"}[d.bin2str(a.data.subarray(a.start+8,a.start+12))];if(u){var c=d.findBox(t,["mdia","minf","stbl","stsd"]);if(c.length){c=c[0];var l=d.bin2str(c.data.subarray(c.start+12,c.start+16));rt.b.log("MP4Demuxer:"+u+":"+l+" found")}h[i]={timescale:s,type:u},h[u]={timescale:s,id:i}}}}}}),h},d.getStartDTS=function(i,t){var e,r,n;return e=d.findBox(t,["moof","traf"]),r=[].concat.apply([],e.map(function(n){return d.findBox(n,["tfhd"]).map(function(t){var e,r;return e=d.readUint32(t,4),r=i[e].timescale||9e4,d.findBox(n,["tfdt"]).map(function(t){var e,r;return e=t.data[t.start],r=d.readUint32(t,4),1===e&&(r*=Math.pow(2,32),r+=d.readUint32(t,8)),r})[0]/r})})),n=Math.min.apply(null,r),isFinite(n)?n:0},d.offsetStartDTS=function(n,t,s){d.findBox(t,["moof","traf"]).map(function(r){return d.findBox(r,["tfhd"]).map(function(t){var e=d.readUint32(t,4),o=n[e].timescale||9e4;d.findBox(r,["tfdt"]).map(function(t){var e=t.data[t.start],r=d.readUint32(t,4);if(0===e)d.writeUint32(t,4,r-s*o);else{r*=Math.pow(2,32),r+=d.readUint32(t,8),r-=s*o,r=Math.max(r,0);var n=Math.floor(r/(1+a)),i=Math.floor(r%(1+a));d.writeUint32(t,4,n),d.writeUint32(t,8,i)}})})})},d.prototype.append=function(t,e,r,n){var i=this.initData;i||(this.resetInitSegment(t,this.audioCodec,this.videoCodec),i=this.initData);var o,s=this.initPTS;if(void 0===s){var a=d.getStartDTS(i,t);this.initPTS=s=a-e,this.observer.trigger(tt.a.INIT_PTS_FOUND,{initPTS:s})}d.offsetStartDTS(i,t,s),o=d.getStartDTS(i,t),this.remuxer.remux(i.audio,i.video,null,null,o,r,n,t)},d.prototype.destroy=function(){},d),b={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,r,n,i){if(!(r+24>e.length)){var o=this.parseHeader(e,r);if(o&&r+o.frameLength<=e.length){var s=n+i*(9e4*o.samplesPerFrame/o.sampleRate),a={unit:e.subarray(r,r+o.frameLength),pts:s,dts:s};return t.config=[],t.channelCount=o.channelCount,t.samplerate=o.sampleRate,t.samples.push(a),t.len+=o.frameLength,{sample:a,length:o.frameLength}}}},parseHeader:function(t,e){var r=t[e+1]>>3&3,n=t[e+1]>>1&3,i=t[e+2]>>4&15,o=t[e+2]>>2&3,s=t[e+2]>>1&1;if(1!=r&&0!=i&&15!=i&&3!=o){var a=3==r?3-n:3==n?3:4,u=1e3*b.BitratesMap[14*a+i-1],c=3==r?0:2==r?1:2,l=b.SamplingRateMap[3*c+o],h=t[e+3]>>6==3?1:2,d=b.SamplesCoefficients[r][n],f=b.BytesInSlot[n],p=8*d*f;return{sampleRate:l,channelCount:h,frameLength:parseInt(d*u/l+s,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var r=this.parseHeader(t,e),n=4;r&&r.frameLength&&(n=r.frameLength);var i=e+n;if(i===t.length||i+1<t.length&&this.isHeaderPattern(t,i))return!0}return!1}},T=b;function s(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var A=(s.prototype.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,n=new Uint8Array(4),i=Math.min(4,e);if(0===i)throw new Error("no bytes available");n.set(t.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},s.prototype.skipBits=function(t){var e;this.bitsAvailable>t||(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord()),this.word<<=t,this.bitsAvailable-=t},s.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return 32<t&&rt.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,0<this.bitsAvailable?this.word<<=e:0<this.bytesAvailable&&this.loadWord(),0<(e=t-e)&&this.bitsAvailable?r<<e|this.readBits(e):r},s.prototype.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},s.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},s.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},s.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},s.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},s.prototype.readBoolean=function(){return 1===this.readBits(1)},s.prototype.readUByte=function(){return this.readBits(8)},s.prototype.readUShort=function(){return this.readBits(16)},s.prototype.readUInt=function(){return this.readBits(32)},s.prototype.skipScalingList=function(t){var e,r=8,n=8;for(e=0;e<t;e++)0!==n&&(n=(r+this.readEG()+256)%256),r=0===n?r:n},s.prototype.readSPS=function(){var t,e,r,n,i,o,s,a=0,u=0,c=0,l=0,h=this.readUByte.bind(this),d=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),v=this.skipEG.bind(this),y=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(h(),t=h(),d(5),g(3),h(),y(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var _=f();if(3===_&&g(1),y(),y(),g(1),p())for(o=3!==_?8:12,s=0;s<o;s++)p()&&m(s<6?16:64)}y();var b=f();if(0===b)f();else if(1===b)for(g(1),v(),v(),e=f(),s=0;s<e;s++)v();y(),g(1),r=f(),n=f(),0===(i=d(1))&&g(1),g(1),p()&&(a=f(),u=f(),c=f(),l=f());var T=[1,1];if(p()&&p())switch(h()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[h()<<8|h(),h()<<8|h()]}return{width:Math.ceil(16*(r+1)-2*a-2*u),height:(2-i)*(n+1)*16-(i?2:4)*(c+l),pixelRatio:T}},s.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},s);function u(t,e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),this.decryptdata=r,this.discardEPB=n,this.decrypter=new g.a(t,e)}var c=(u.prototype.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},u.prototype.decryptAacSample=function(e,r,n,i){var o=e[r].unit,t=o.subarray(16,o.length-o.length%16),s=t.buffer.slice(t.byteOffset,t.byteOffset+t.length),a=this;this.decryptBuffer(s,function(t){t=new Uint8Array(t),o.set(t,16),i||a.decryptAacSamples(e,r+1,n)})},u.prototype.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(t,e,r,n),!n)return}}},u.prototype.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),n=0,i=32;i<=t.length-16;i+=160,n+=16)r.set(t.subarray(i,i+16),n);return r},u.prototype.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var r=0,n=32;n<=t.length-16;n+=160,r+=16)t.set(e.subarray(r,r+16),n);return t},u.prototype.decryptAvcSample=function(e,r,n,i,o,s){var a=this.discardEPB(o.data),t=this.getAvcEncryptedData(a),u=this;this.decryptBuffer(t.buffer,function(t){o.data=u.getAvcDecryptedUnit(a,t),s||u.decryptAvcSamples(e,r,n+1,i)})},u.prototype.decryptAvcSamples=function(t,e,r,n){for(;;e++,r=0){if(e>=t.length)return void n();for(var i=t[e].units;!(r>=i.length);r++){var o=i[r];if(!(o.length<=48||1!==o.type&&5!==o.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(t,e,r,n,o,s),!s)return}}}},u);var f={video:0,audio:1,id3:2,text:3};function L(t,e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,L),this.observer=t,this.config=r,this.typeSupported=n,this.remuxer=e,this.sampleAes=null}var k=(L.prototype.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new c(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},L.probe=function(t){var e=L._syncOffset(t);return!(e<0||(e&&rt.b.warn("MPEG2-TS detected but first sync word found @ offset "+e+", junk ahead ?"),0))},L._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),r=0;r<e;){if(71===t[r]&&71===t[r+188]&&71===t[r+376])return r;r++}return-1},L.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:f[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},L.prototype.resetInitSegment=function(t,e,r,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=L.createTrack("video",n),this._audioTrack=L.createTrack("audio",n),this._id3Track=L.createTrack("id3",n),this._txtTrack=L.createTrack("text",n),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=r,this._duration=n},L.prototype.resetTimeStamp=function(){},L.prototype.append=function(t,e,r,n){var i,o,s,a,u,c=t.length,l=!1;this.contiguous=r;var h=this.pmtParsed,d=this._avcTrack,f=this._audioTrack,p=this._id3Track,g=d.pid,v=f.pid,y=p.pid,m=this._pmtId,_=d.pesData,b=f.pesData,T=p.pesData,E=this._parsePAT,S=this._parsePMT,w=this._parsePES,A=this._parseAVCPES.bind(this),k=this._parseAACPES.bind(this),C=this._parseMPEGPES.bind(this),x=this._parseID3PES.bind(this),R=L._syncOffset(t);for(c-=(c+R)%188,i=R;i<c;i+=188)if(71===t[i]){if(o=!!(64&t[i+1]),s=((31&t[i+1])<<8)+t[i+2],1<(48&t[i+3])>>4){if((a=i+5+t[i+4])===i+188)continue}else a=i+4;switch(s){case g:o&&(_&&(u=w(_))&&A(u,!1),_={data:[],size:0}),_&&(_.data.push(t.subarray(a,i+188)),_.size+=i+188-a);break;case v:o&&(b&&(u=w(b))&&(f.isAAC?k(u):C(u)),b={data:[],size:0}),b&&(b.data.push(t.subarray(a,i+188)),b.size+=i+188-a);break;case y:o&&(T&&(u=w(T))&&x(u),T={data:[],size:0}),T&&(T.data.push(t.subarray(a,i+188)),T.size+=i+188-a);break;case 0:o&&(a+=t[a]+1),m=this._pmtId=E(t,a);break;case m:o&&(a+=t[a]+1);var P=S(t,a,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);0<(g=P.avc)&&(d.pid=g),0<(v=P.audio)&&(f.pid=v,f.isAAC=P.isAAC),0<(y=P.id3)&&(p.pid=y),l&&!h&&(rt.b.log("reparse from beginning"),l=!1,i=R-188),h=this.pmtParsed=!0;break;case 17:case 8191:break;default:l=!0}}else this.observer.trigger(tt.a.ERROR,{type:et.b.MEDIA_ERROR,details:et.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});_&&(u=w(_))?(A(u,!0),d.pesData=null):d.pesData=_,b&&(u=w(b))?(f.isAAC?k(u):C(u),f.pesData=null):(b&&b.size&&rt.b.log("last AAC PES packet truncated,might overlap between fragments"),f.pesData=b),T&&(u=w(T))?(x(u),p.pesData=null):p.pesData=T,null==this.sampleAes?this.remuxer.remux(f,d,p,this._txtTrack,e,r,n):this.decryptAndRemux(f,d,p,this._txtTrack,e,r,n)},L.prototype.decryptAndRemux=function(t,e,r,n,i,o,s){if(t.samples&&t.isAAC){var a=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){a.decryptAndRemuxAvc(t,e,r,n,i,o,s)})}else this.decryptAndRemuxAvc(t,e,r,n,i,o,s)},L.prototype.decryptAndRemuxAvc=function(t,e,r,n,i,o,s){if(e.samples){var a=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){a.remuxer.remux(t,e,r,n,i,o,s)})}else this.remuxer.remux(t,e,r,n,i,o,s)},L.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},L.prototype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},L.prototype._parsePMT=function(t,e,r,n){var i,o,s={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=e+3+((15&t[e+1])<<8|t[e+2])-4,e+=12+((15&t[e+10])<<8|t[e+11]);e<i;){switch(o=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!n){rt.b.log("unkown stream type:"+t[e]);break}case 15:-1===s.audio&&(s.audio=o);break;case 21:-1===s.id3&&(s.id3=o);break;case 219:if(!n){rt.b.log("unkown stream type:"+t[e]);break}case 27:-1===s.avc&&(s.avc=o);break;case 3:case 4:r?-1===s.audio&&(s.audio=o,s.isAAC=!1):rt.b.log("MPEG audio found, not supported in this browser for now");break;case 36:rt.b.warn("HEVC stream type found, not supported for now");break;default:rt.b.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return s},L.prototype._parsePES=function(t){var e,r,n,i,o,s,a,u,c=0,l=t.data;if(!t||0===t.size)return null;for(;l[0].length<19&&1<l.length;){var h=new Uint8Array(l[0].length+l[1].length);h.set(l[0]),h.set(l[1],l[0].length),l[0]=h,l.splice(1,1)}if(1!==((e=l[0])[0]<<16)+(e[1]<<8)+e[2])return null;if((n=(e[4]<<8)+e[5])&&n>t.size-6)return null;192&(r=e[7])&&(4294967295<(s=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2)&&(s-=8589934592),64&r?(4294967295<(a=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)&&(a-=8589934592),54e5<s-a&&(rt.b.warn(Math.round((s-a)/9e4)+"s delta between PTS and DTS, align them"),s=a)):a=s),u=(i=e[8])+9,t.size-=u,o=new Uint8Array(t.size);for(var d=0,f=l.length;d<f;d++){var p=(e=l[d]).byteLength;if(u){if(p<u){u-=p;continue}e=e.subarray(u),p-=u,u=0}o.set(e,c),c+=p}return n&&(n-=i+3),{data:o,pts:s,dts:a,len:n}},L.prototype.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var r=e.samples,n=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(n||this.contiguous)?(t.id=n,r.push(t)):e.dropped++}t.debug.length&&rt.b.log(t.pts+"/"+t.dts+":"+t.debug)},L.prototype._parseAVCPES=function(p,t){function g(t,e,r,n){return{key:t,pts:e,dts:r,units:[],debug:n}}var v,y,m,_=this,b=this._avcTrack,e=this._parseAVCNALu(p.data),T=this.avcSample,E=!1,S=this.pushAccesUnit.bind(this);p.data=null,T&&e.length&&!b.audFound&&(S(T,b),T=this.avcSample=g(!1,p.pts,p.dts,"")),e.forEach(function(t){switch(t.type){case 1:y=!0,(T=T||(_.avcSample=g(!0,p.pts,p.dts,""))).frame=!0;var e=t.data;if(E&&4<e.length){var r=new A(e).readSliceType();2!==r&&4!==r&&7!==r&&9!==r||(T.key=!0)}break;case 5:y=!0,(T=T||(_.avcSample=g(!0,p.pts,p.dts,""))).key=!0,T.frame=!0;break;case 6:y=!0,(v=new A(_.discardEPB(t.data))).readUByte();for(var n=0,i=0,o=!1,s=0;!o&&1<v.bytesAvailable;){for(n=0;n+=s=v.readUByte(),255===s;);for(i=0;i+=s=v.readUByte(),255===s;);if(4===n&&0!==v.bytesAvailable){if(o=!0,181===v.readUByte()&&49===v.readUShort()&&1195456820===v.readUInt()&&3===v.readUByte()){var a=v.readUByte(),u=31&a,c=[a,v.readUByte()];for(m=0;m<u;m++)c.push(v.readUByte()),c.push(v.readUByte()),c.push(v.readUByte());_._insertSampleInOrder(_._txtTrack.samples,{type:3,pts:p.pts,bytes:c})}}else if(i<v.bytesAvailable)for(m=0;m<i;m++)v.readUByte()}break;case 7:if(E=y=!0,!b.sps){var l=(v=new A(t.data)).readSPS();b.width=l.width,b.height=l.height,b.pixelRatio=l.pixelRatio,b.sps=[t.data],b.duration=_._duration;var h=t.data.subarray(1,4),d="avc1.";for(m=0;m<3;m++){var f=h[m].toString(16);f.length<2&&(f="0"+f),d+=f}b.codec=d}break;case 8:y=!0,b.pps||(b.pps=[t.data]);break;case 9:y=!1,b.audFound=!0,T&&S(T,b),T=_.avcSample=g(!1,p.pts,p.dts,"");break;case 12:y=!1;break;default:y=!1,T&&(T.debug+="unknown NAL "+t.type+" ")}T&&y&&T.units.push(t)}),t&&T&&(S(T,b),this.avcSample=null)},L.prototype._insertSampleInOrder=function(t,e){var r=t.length;if(0<r){if(e.pts>=t[r-1].pts)t.push(e);else for(var n=r-1;0<=n;n--)if(e.pts<t[n].pts){t.splice(n,0,e);break}}else t.push(e)},L.prototype._getLastNalUnit=function(){var t=this.avcSample,e=void 0;if(!t||0===t.units.length){var r=this._avcTrack.samples;t=r[r.length-1]}if(t){var n=t.units;e=n[n.length-1]}return e},L.prototype._parseAVCNALu=function(t){var e,r,n,i,o=0,s=t.byteLength,a=this._avcTrack,u=a.naluState||0,c=u,l=[],h=-1;for(-1===u&&(i=31&t[h=0],u=0,o=1);o<s;)if(e=t[o++],u)if(1!==u)if(e)if(1===e){if(0<=h)n={data:t.subarray(h,o-u-1),type:i},l.push(n);else{var d=this._getLastNalUnit();if(d&&(c&&o<=4-c&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-c)),0<(r=o-u-1))){var f=new Uint8Array(d.data.byteLength+r);f.set(d.data,0),f.set(t.subarray(0,r),d.data.byteLength),d.data=f}}u=o<s?(i=31&t[h=o],0):-1}else u=0;else u=3;else u=e?0:2;else u=e?0:1;if(0<=h&&0<=u&&(n={data:t.subarray(h,s),type:i,state:u},l.push(n)),0===l.length){var p=this._getLastNalUnit();if(p){var g=new Uint8Array(p.data.byteLength+t.byteLength);g.set(p.data,0),g.set(t,p.data.byteLength),p.data=g}}return a.naluState=u,l},L.prototype.discardEPB=function(t){for(var e,r,n=t.byteLength,i=[],o=1;o<n-2;)0===t[o]&&0===t[o+1]&&3===t[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return t;e=n-i.length,r=new Uint8Array(e);var s=0;for(o=0;o<e;s++,o++)s===i[0]&&(s++,i.shift()),r[o]=t[s];return r},L.prototype._parseAACPES=function(t){var e,r,n,i,o,s,a,u=this._audioTrack,c=t.data,l=t.pts,h=this.aacOverFlow,d=this.aacLastPTS;if(h){var f=new Uint8Array(h.byteLength+c.byteLength);f.set(h,0),f.set(c,h.byteLength),c=f}for(n=0,o=c.length;n<o-1&&!v(c,n);n++);if(!n||(a=n<o-1?(s="AAC PES did not start with ADTS header,offset:"+n,!1):(s="no ADTS header found in AAC PES",!0),rt.b.warn("parsing error:"+s),this.observer.trigger(tt.a.ERROR,{type:et.b.MEDIA_ERROR,details:et.a.FRAG_PARSING_ERROR,fatal:a,reason:s}),!a)){if(y(u,this.observer,c,n,this.audioCodec),r=0,e=m(u.samplerate),h&&d){var p=d+e;1<Math.abs(p-l)&&(rt.b.log("AAC: align PTS for overlapping frames by "+Math.round((p-l)/90)),l=p)}for(;n<o;)if(v(c,n)&&n+5<o){var g=_(u,c,n,l,r);if(!g)break;n+=g.length,i=g.sample.pts,r++}else n++;h=n<o?c.subarray(n,o):null,this.aacOverFlow=h,this.aacLastPTS=i}},L.prototype._parseMPEGPES=function(t){for(var e=t.data,r=e.length,n=0,i=0,o=t.pts;i<r;)if(T.isHeader(e,i)){var s=T.appendFrame(this._audioTrack,e,i,o,n);if(!s)break;i+=s.length,n++}else i++},L.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},L);function E(t,e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,E),this.observer=t,this.config=r,this.remuxer=e}var C=(E.prototype.resetInitSegment=function(t,e,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},E.prototype.resetTimeStamp=function(){},E.probe=function(t){var e,r,n=p.a.getID3Data(t,0);if(n&&void 0!==p.a.getTimeStamp(n))for(e=n.length,r=Math.min(t.length-1,e+100);e<r;e++)if(T.probe(t,e))return rt.b.log("MPEG Audio sync word found !"),!0;return!1},E.prototype.append=function(t,e,r,n){for(var i=p.a.getID3Data(t,0),o=p.a.getTimeStamp(i),s=o?90*o:9e4*e,a=i.length,u=t.length,c=0,l=0,h=this._audioTrack,d=[{pts:s,dts:s,data:i}];a<u;)if(T.isHeader(t,a)){var f=T.appendFrame(h,t,a,s,c);if(!f)break;a+=f.length,l=f.sample.pts,c++}else p.a.isHeader(t,a)?(i=p.a.getID3Data(t,a),d.push({pts:l,dts:l,data:i}),a+=i.length):a++;this.remuxer.remux(h,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},e,r,n)},E.prototype.destroy=function(){},E);function x(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,x)}var q=(x.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},x);var R=Math.pow(2,32)-1;function P(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,P)}var nt=(P.init=function(){var t;for(t in P.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})P.types.hasOwnProperty(t)&&(P.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var e=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);P.HDLR_TYPES={video:e,audio:r};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);P.STTS=P.STSC=P.STCO=i,P.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),P.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),P.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),P.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),a=new Uint8Array([0,0,0,1]);P.FTYP=P.box(P.types.ftyp,o,a,o,s),P.DINF=P.box(P.types.dinf,P.box(P.types.dref,n))},P.box=function(t){for(var e,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,o=i;i--;)n+=r[i].byteLength;for((e=new Uint8Array(n))[0]=n>>24&255,e[1]=n>>16&255,e[2]=n>>8&255,e[3]=255&n,e.set(t,4),i=0,n=8;i<o;i++)e.set(r[i],n),n+=r[i].byteLength;return e},P.hdlr=function(t){return P.box(P.types.hdlr,P.HDLR_TYPES[t])},P.mdat=function(t){return P.box(P.types.mdat,t)},P.mdhd=function(t,e){e*=t;var r=Math.floor(e/(1+R)),n=Math.floor(e%(1+R));return P.box(P.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},P.mdia=function(t){return P.box(P.types.mdia,P.mdhd(t.timescale,t.duration),P.hdlr(t.type),P.minf(t))},P.mfhd=function(t){return P.box(P.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},P.minf=function(t){return"audio"===t.type?P.box(P.types.minf,P.box(P.types.smhd,P.SMHD),P.DINF,P.stbl(t)):P.box(P.types.minf,P.box(P.types.vmhd,P.VMHD),P.DINF,P.stbl(t))},P.moof=function(t,e,r){return P.box(P.types.moof,P.mfhd(t),P.traf(r,e))},P.moov=function(t){for(var e=t.length,r=[];e--;)r[e]=P.trak(t[e]);return P.box.apply(null,[P.types.moov,P.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(P.mvex(t)))},P.mvex=function(t){for(var e=t.length,r=[];e--;)r[e]=P.trex(t[e]);return P.box.apply(null,[P.types.mvex].concat(r))},P.mvhd=function(t,e){e*=t;var r=Math.floor(e/(1+R)),n=Math.floor(e%(1+R)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return P.box(P.types.mvhd,i)},P.sdtp=function(t){var e,r,n=t.samples||[],i=new Uint8Array(4+n.length);for(r=0;r<n.length;r++)e=n[r].flags,i[r+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return P.box(P.types.sdtp,i)},P.stbl=function(t){return P.box(P.types.stbl,P.stsd(t),P.box(P.types.stts,P.STTS),P.box(P.types.stsc,P.STSC),P.box(P.types.stsz,P.STSZ),P.box(P.types.stco,P.STCO))},P.avc1=function(t){var e,r,n,i=[],o=[];for(e=0;e<t.sps.length;e++)n=(r=t.sps[e]).byteLength,i.push(n>>>8&255),i.push(255&n),i=i.concat(Array.prototype.slice.call(r));for(e=0;e<t.pps.length;e++)n=(r=t.pps[e]).byteLength,o.push(n>>>8&255),o.push(255&n),o=o.concat(Array.prototype.slice.call(r));var s=P.box(P.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|t.sps.length].concat(i).concat([t.pps.length]).concat(o))),a=t.width,u=t.height,c=t.pixelRatio[0],l=t.pixelRatio[1];return P.box(P.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>8&255,255&a,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,P.box(P.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),P.box(P.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,l>>24,l>>16&255,l>>8&255,255&l])))},P.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},P.mp4a=function(t){var e=t.samplerate;return P.box(P.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]),P.box(P.types.esds,P.esds(t)))},P.mp3=function(t){var e=t.samplerate;return P.box(P.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]))},P.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?P.box(P.types.stsd,P.STSD,P.mp4a(t)):P.box(P.types.stsd,P.STSD,P.mp3(t)):P.box(P.types.stsd,P.STSD,P.avc1(t))},P.tkhd=function(t){var e=t.id,r=t.duration*t.timescale,n=t.width,i=t.height,o=Math.floor(r/(1+R)),s=Math.floor(r%(1+R));return P.box(P.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,i>>8&255,255&i,0,0]))},P.traf=function(t,e){var r=P.sdtp(t),n=t.id,i=Math.floor(e/(1+R)),o=Math.floor(e%(1+R));return P.box(P.types.traf,P.box(P.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),P.box(P.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o])),P.trun(t,r.length+16+20+8+16+8+8),r)},P.trak=function(t){return t.duration=t.duration||4294967295,P.box(P.types.trak,P.tkhd(t),P.mdia(t))},P.trex=function(t){var e=t.id;return P.box(P.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},P.trun=function(t,e){var r,n,i,o,s,a,u=t.samples||[],c=u.length,l=12+16*c,h=new Uint8Array(l);for(e+=8+l,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,e>>>24&255,e>>>16&255,e>>>8&255,255&e],0),r=0;r<c;r++)i=(n=u[r]).duration,o=n.size,s=n.flags,a=n.cts,h.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,a>>>24&255,a>>>16&255,a>>>8&255,255&a],12+16*r);return P.box(P.types.trun,h)},P.initSegment=function(t){P.types||P.init();var e,r=P.moov(t);return(e=new Uint8Array(P.FTYP.byteLength+r.byteLength)).set(P.FTYP),e.set(r,P.FTYP.byteLength),e},P);function I(t,e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,I),this.observer=t,this.config=e,this.typeSupported=r;var i=navigator.userAgent;this.isSafari=n&&-1<n.indexOf("Apple")&&i&&!i.match("CriOS"),this.ISGenerated=!1}var O=(I.prototype.destroy=function(){},I.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},I.prototype.resetInitSegment=function(){this.ISGenerated=!1},I.prototype.remux=function(t,e,r,n,i,o,s){if(this.ISGenerated||this.generateIS(t,e,i),this.ISGenerated){var a=t.samples.length,u=e.samples.length,c=i,l=i;if(a&&u){var h=(t.samples[0].dts-e.samples[0].dts)/e.inputTimeScale;c+=Math.max(0,h),l+=Math.max(0,-h)}if(a){t.timescale||(rt.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,i));var d=this.remuxAudio(t,c,o,s);if(u){var f=void 0;d&&(f=d.endPTS-d.startPTS),e.timescale||(rt.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,i)),this.remuxVideo(e,l,o,f,s)}}else{var p=void 0;u&&(p=this.remuxVideo(e,l,o,s)),p&&t.codec&&this.remuxEmptyAudio(t,c,o,p)}}r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(tt.a.FRAG_PARSED)},I.prototype.generateIS=function(t,e,r){var n,i,o=this.observer,s=t.samples,a=e.samples,u=this.typeSupported,c="audio/mp4",l={},h={tracks:l},d=void 0===this._initPTS;if(d&&(n=i=1/0),t.config&&s.length&&(t.timescale=t.samplerate,rt.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(u.mpeg?(c="audio/mpeg",t.codec=""):u.mp3&&(t.codec="mp3")),l.audio={container:c,codec:t.codec,initSegment:!t.isAAC&&u.mpeg?new Uint8Array:nt.initSegment([t]),metadata:{channelCount:t.channelCount}},d&&(n=i=s[0].pts-t.inputTimeScale*r)),e.sps&&e.pps&&a.length){var f=e.inputTimeScale;e.timescale=f,l.video={container:"video/mp4",codec:e.codec,initSegment:nt.initSegment([e]),metadata:{width:e.width,height:e.height}},d&&(n=Math.min(n,a[0].pts-f*r),i=Math.min(i,a[0].dts-f*r),this.observer.trigger(tt.a.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(l).length?(o.trigger(tt.a.FRAG_PARSING_INIT_SEGMENT,h),this.ISGenerated=!0,d&&(this._initPTS=n,this._initDTS=i)):o.trigger(tt.a.ERROR,{type:et.b.MEDIA_ERROR,details:et.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},I.prototype.remuxVideo=function(t,e,r,n,i){var o,s,a,u,c,l,h,d=8,f=t.timescale,p=t.samples,g=[],v=p.length,y=this._PTSNormalize,m=this._initDTS,_=this.nextAvcDts,b=this.isSafari;b&&(r|=p.length&&_&&(i&&Math.abs(e-_/f)<.1||Math.abs(p[0].pts-_-m)<f/5)),r||(_=e*f),p.forEach(function(t){t.pts=y(t.pts-m,_),t.dts=y(t.dts-m,_)}),p.sort(function(t,e){var r=t.dts-e.dts,n=t.pts-e.pts;return r||n||t.id-e.id});var T=p.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(T<0){rt.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(T/90)+" ms to overcome this issue");for(var E=0;E<p.length;E++)p[E].dts+=T}var S=p[0];c=Math.max(S.dts,0),u=Math.max(S.pts,0);var w=Math.round((c-_)/90);r&&w&&(1<w?rt.b.log("AVC:"+w+" ms hole between fragments detected,filling it"):w<-1&&rt.b.log("AVC:"+-w+" ms overlapping between fragments detected"),c=_,p[0].dts=c,u=Math.max(u-w,_),p[0].pts=u,rt.b.log("Video/PTS/DTS adjusted: "+Math.round(u/90)+"/"+Math.round(c/90)+",delta:"+w+" ms")),S=p[p.length-1],h=Math.max(S.dts,0),l=Math.max(S.pts,0,h),b&&(o=Math.round((h-c)/(p.length-1)));for(var A=0,k=0,C=0;C<v;C++){for(var x=p[C],R=x.units,P=R.length,L=0,I=0;I<P;I++)L+=R[I].data.length;k+=L,A+=P,x.length=L,x.dts=b?c+C*o:Math.max(x.dts,c),x.pts=Math.max(x.pts,x.dts)}var O=k+4*A+8;try{s=new Uint8Array(O)}catch(t){return void this.observer.trigger(tt.a.ERROR,{type:et.b.MUX_ERROR,details:et.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:O,reason:"fail allocating video mdat "+O})}var D=new DataView(s.buffer);D.setUint32(0,O),s.set(nt.types.mdat,4);for(var N=0;N<v;N++){for(var M=p[N],F=M.units,B=0,j=void 0,U=0,V=F.length;U<V;U++){var G=F[U],H=G.data,W=G.data.byteLength;D.setUint32(d,W),d+=4,s.set(H,d),d+=W,B+=4+W}if(b)j=Math.max(0,o*Math.round((M.pts-M.dts)/o));else{if(N<v-1)o=p[N+1].dts-M.dts;else{var q=this.config,K=M.dts-p[0<N?N-1:N].dts;if(q.stretchShortVideoTrack){var z=q.maxBufferHole,Y=q.maxSeekHole,X=Math.floor(Math.min(z,Y)*f),J=(n?u+n*f:this.nextAudioPts)-M.pts;X<J?((o=J-K)<0&&(o=K),rt.b.log("It is approximately "+J/90+" ms to the next segment; using duration "+o/90+" ms for the last video frame.")):o=K}else o=K}j=Math.round(M.pts-M.dts)}g.push({size:B,duration:o,cts:j,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:M.key?2:1,isNonSync:M.key?0:1}})}this.nextAvcDts=h+o;var Q=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,g.length&&-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var $=g[0].flags;$.dependsOn=2,$.isNonSync=0}t.samples=g,a=nt.moof(t.sequenceNumber++,c,t),t.samples=[];var Z={data1:a,data2:s,startPTS:u/f,endPTS:(l+o)/f,startDTS:c/f,endDTS:this.nextAvcDts/f,type:"video",nb:g.length,dropped:Q};return this.observer.trigger(tt.a.FRAG_PARSING_DATA,Z),Z},I.prototype.remuxAudio=function(t,e,r,n){var i,o,s,a,u,c,l,h=t.inputTimeScale,d=t.timescale,f=h/d,p=(t.isAAC?1024:1152)*f,g=this._PTSNormalize,v=this._initDTS,y=!t.isAAC&&this.typeSupported.mpeg,m=t.samples,_=[],b=this.nextAudioPts;if(r|=m.length&&b&&(n&&Math.abs(e-b/h)<.1||Math.abs(m[0].pts-b-v)<20*p),m.forEach(function(t){t.pts=t.dts=g(t.pts-v,e*h)}),0!==(m=m.filter(function(t){return 0<=t.pts})).length){if(r||(b=n?e*h:m[0].pts),t.isAAC)for(var T=this.config.maxAudioFramesDrift,E=0,S=b;E<m.length;){var w,A=m[E];w=A.pts-S;var k=Math.abs(1e3*w/h);if(w<=-T*p)rt.b.warn("Dropping 1 audio frame @ "+(S/h).toFixed(3)+"s due to "+Math.round(k)+" ms overlap."),m.splice(E,1),t.len-=A.unit.length;else if(T*p<=w&&k<1e4&&S){var C=Math.round(w/p);rt.b.warn("Injecting "+C+" audio frame @ "+(S/h).toFixed(3)+"s due to "+Math.round(1e3*w/h)+" ms gap.");for(var x=0;x<C;x++){var R=Math.max(S,0);(s=q.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(rt.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),s=A.unit.subarray()),m.splice(E,0,{unit:s,pts:R,dts:R}),t.len+=s.length,S+=p,E++}A.pts=A.dts=S,S+=p,E++}else Math.abs(w),A.pts=A.dts=S,S+=p,E++}for(var P=0,L=m.length;P<L;P++){var I=m[P],O=I.unit,D=I.pts;if(void 0!==l)o.duration=Math.round((D-l)/f);else{var N=Math.round(1e3*(D-b)/h),M=0;if(r&&t.isAAC&&N){if(0<N&&N<1e4)M=Math.round((D-b)/p),rt.b.log(N+" ms hole between AAC samples detected,filling it"),0<M&&(s=(s=q.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||O.subarray(),t.len+=M*s.length);else if(N<-12){rt.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(b/h).toFixed(3)+"s/"+(D/h).toFixed(3)+"s/"+-N+"ms"),t.len-=O.byteLength;continue}D=b}if(c=D,!(0<t.len))return;var F=y?t.len:t.len+8;i=y?0:8;try{a=new Uint8Array(F)}catch(t){return void this.observer.trigger(tt.a.ERROR,{type:et.b.MUX_ERROR,details:et.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating audio mdat "+F})}y||(new DataView(a.buffer).setUint32(0,F),a.set(nt.types.mdat,4));for(var B=0;B<M;B++)(s=q.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(rt.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),s=O.subarray()),a.set(s,i),i+=s.byteLength,o={size:s.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},_.push(o)}a.set(O,i);var j=O.byteLength;i+=j,o={size:j,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},_.push(o),l=D}var U=0,V=_.length;if(2<=V&&(U=_[V-2].duration,o.duration=U),V){this.nextAudioPts=b=l+f*U,t.len=0,t.samples=_,u=y?new Uint8Array:nt.moof(t.sequenceNumber++,c/f,t),t.samples=[];var G=c/h,H=b/h,W={data1:u,data2:a,startPTS:G,endPTS:H,startDTS:G,endDTS:H,type:"audio",nb:V};return this.observer.trigger(tt.a.FRAG_PARSING_DATA,W),W}return null}},I.prototype.remuxEmptyAudio=function(t,e,r,n){var i=t.inputTimeScale,o=i/(t.samplerate?t.samplerate:i),s=this.nextAudioPts,a=(void 0!==s?s:n.startDTS*i)+this._initDTS,u=n.endDTS*i+this._initDTS,c=1024*o,l=Math.ceil((u-a)/c),h=q.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(rt.b.warn("remux empty Audio"),h){for(var d=[],f=0;f<l;f++){var p=a+f*c;d.push({unit:h,pts:p,dts:p}),t.len+=h.length}t.samples=d,this.remuxAudio(t,e,r)}else rt.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},I.prototype.remuxID3=function(t,e){var r,n=t.samples.length,i=t.inputTimeScale,o=this._initPTS,s=this._initDTS;if(n){for(var a=0;a<n;a++)(r=t.samples[a]).pts=(r.pts-o)/i,r.dts=(r.dts-s)/i;this.observer.trigger(tt.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[],e=e},I.prototype.remuxText=function(t,e){t.samples.sort(function(t,e){return t.pts-e.pts});var r,n=t.samples.length,i=t.inputTimeScale,o=this._initPTS;if(n){for(var s=0;s<n;s++)(r=t.samples[s]).pts=(r.pts-o)/i;this.observer.trigger(tt.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[],e=e},I.prototype._PTSNormalize=function(t,e){var r;if(void 0===e)return t;for(r=e<t?-8589934592:8589934592;4294967296<Math.abs(t-e);)t+=r;return t},I);function D(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,D),this.observer=t}var N=(D.prototype.destroy=function(){},D.prototype.resetTimeStamp=function(){},D.prototype.resetInitSegment=function(){},D.prototype.remux=function(t,e,r,n,i,o,s,a){var u=this.observer,c="";t&&(c+="audio"),e&&(c+="video"),u.trigger(tt.a.FRAG_PARSING_DATA,{data1:a,startPTS:i,startDTS:i,type:c,nb:1,dropped:0}),u.trigger(tt.a.FRAG_PARSED)},D);var M=(F.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},F.prototype.push=function(t,r,n,i,o,s,a,u,c,l,h,d){if(0<t.byteLength&&null!=r&&null!=r.key&&"AES-128"===r.method){var e=this.decrypter;null==e&&(e=this.decrypter=new g.a(this.observer,this.config));var f,p=this;try{f=performance.now()}catch(t){f=Date.now()}e.decrypt(t,r.key.buffer,r.iv.buffer,function(t){var e;try{e=performance.now()}catch(t){e=Date.now()}p.observer.trigger(tt.a.FRAG_DECRYPTED,{stats:{tstart:f,tdecrypt:e}}),p.pushDecrypted(new Uint8Array(t),r,new Uint8Array(n),i,o,s,a,u,c,l,h,d)})}else this.pushDecrypted(new Uint8Array(t),r,new Uint8Array(n),i,o,s,a,u,c,l,h,d)},F.prototype.pushDecrypted=function(t,e,r,n,i,o,s,a,u,c,l,h){var d=this.demuxer;if(!d||s&&!this.probe(t)){for(var f=this.observer,p=this.typeSupported,g=this.config,v=[{demux:k,remux:O},{demux:w,remux:N},{demux:S,remux:O},{demux:C,remux:O}],y=0,m=v.length;y<m;y++){var _=v[y],b=_.demux.probe;if(b(t)){var T=this.remuxer=new _.remux(f,g,p,this.vendor);d=new _.demux(f,T,g,p),this.probe=b;break}}if(!d)return void f.trigger(tt.a.ERROR,{type:et.b.MEDIA_ERROR,details:et.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=d}var E=this.remuxer;(s||a)&&(d.resetInitSegment(r,n,i,c),E.resetInitSegment()),s&&(d.resetTimeStamp(h),E.resetTimeStamp(h)),"function"==typeof d.setDecryptData&&d.setDecryptData(e),d.append(t,o,u,l)},F);function F(t,e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,F),this.observer=t,this.typeSupported=e,this.config=r,this.vendor=n}e.a=M},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};r.d(n,"newCue",function(){return Le});var i=r(6),o=r.n(i),O=r(1),D=r(2),N=r(0),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function a(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}var u=(a.prototype.destroy=function(){this.unregisterListeners()},a.prototype.isEventHandler=function(){return"object"===s(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},a.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if("hlsEventGeneric"===t)throw new Error("Forbidden event name: "+t);this.hls.on(t,this.onEvent)},this)},a.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},a.prototype.onEvent=function(t,e){this.onEventGeneric(t,e)},a.prototype.onEventGeneric=function(e,t){try{(function(t,e){var r="on"+t.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,e)}).call(this,e,t).call()}catch(t){N.b.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(O.a.ERROR,{type:D.b.OTHER_ERROR,details:D.a.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},a);var c=/^(\d+)x(\d+)$/,l=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g;function h(t){for(var e in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),"string"==typeof t&&(t=h.parseAttrList(t)),t)t.hasOwnProperty(e)&&(this[e]=t[e])}var A=(h.prototype.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},h.prototype.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),n=0;n<e.length/2;n++)r[n]=parseInt(e.slice(2*n,2*n+2),16);return r}return null},h.prototype.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},h.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},h.prototype.enumeratedString=function(t){return this[t]},h.prototype.decimalResolution=function(t){var e=c.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},h.parseAttrList=function(t){var e,r={};for(l.lastIndex=0;null!==(e=l.exec(t));){var n=e[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),r[e[1]]=n}return r},h),d={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function f(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}var p=function(t,e,r){return e&&g(t.prototype,e),r&&g(t,r),t};function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var y=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,m=/#EXT-X-MEDIA:(.*)/g,k=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),C=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,x=(p(_,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=o.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),_);function _(){v(this,_),this.method=null,this.key=null,this.iv=null,this._uri=null}var b,R=(T.prototype.createInitializationVector=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e},T.prototype.fragmentDecryptdataFromLevelkey=function(t,e){var r=t;return t&&t.method&&t.uri&&!t.iv&&((r=new x).method=t.method,r.baseuri=t.baseuri,r.reluri=t.reluri,r.iv=this.createInitializationVector(e)),r},T.prototype.cloneObj=function(t){return JSON.parse(JSON.stringify(t))},p(T,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=o.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var t=this._byteRange=[];if(this.rawByteRange){var e=this.rawByteRange.split("@",2);if(1===e.length){var r=this.lastByteRangeEndOffset;t[0]=r||0}else t[0]=parseInt(e[1]);t[1]=parseInt(e[0])+t[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),T);function T(){v(this,T),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}function E(t,e){if(!t)return null;for(var r=null,n=0;n<t.length;n++){var i=t[n];i.id===e&&(r=i)}return r}function S(t){v(this,S);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,b.call(this,t,O.a.MANIFEST_LOADING,O.a.LEVEL_LOADING,O.a.AUDIO_TRACK_LOADING,O.a.SUBTITLE_TRACK_LOADING));return e.loaders={},e}var w,P=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(S,b=u),S.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},u.prototype.destroy.call(this)},S.prototype.onManifestLoading=function(t){this.load(t.url,{type:"manifest"})},S.prototype.onLevelLoading=function(t){this.load(t.url,{type:"level",level:t.level,id:t.id})},S.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:"audioTrack",id:t.id})},S.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:"subtitleTrack",id:t.id})},S.prototype.load=function(t,e){var r=this.loaders[e.type];if(void 0!==r){var n=r.context;if(n&&n.url===t)return void N.b.trace("playlist request ongoing");N.b.warn("abort previous loader for type:"+e.type),r.abort()}var i,o,s=this.hls.config,a=void 0,u=void 0,c=void 0,l=void 0;"manifest"===e.type?(a=s.manifestLoadingMaxRetry,u=s.manifestLoadingTimeOut,c=s.manifestLoadingRetryDelay,l=s.manifestLoadingMaxRetryTimeout):"level"===e.type?(a=0,u=s.levelLoadingTimeOut):(a=s.levelLoadingMaxRetry,u=s.levelLoadingTimeOut,c=s.levelLoadingRetryDelay,l=s.levelLoadingMaxRetryTimeout,N.b.log("loading playlist for "+e.type+" "+(e.level||e.id))),r=this.loaders[e.type]=e.loader=void 0!==s.pLoader?new s.pLoader(s):new s.loader(s),e.url=t,e.responseType="",i={timeout:u,maxRetry:a,retryDelay:c,maxRetryDelay:l},o={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(e,i,o)},S.prototype.resolve=function(t,e){return o.a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},S.prototype.parseMasterPlaylist=function(t,e){var r=[],n=void 0;function i(n,i){["video","audio"].forEach(function(e){var r=n.filter(function(t){return function(t,e){var r=d[e];return!!r&&!0===r[t.slice(0,4)]}(t,e)});if(r.length){var t=r.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});i[e+"Codec"]=0<t.length?t[0]:r[0],n=n.filter(function(t){return-1===r.indexOf(t)})}}),i.unknownCodecs=n}for(y.lastIndex=0;null!=(n=y.exec(t));){var o={},s=o.attrs=new A(n[1]);o.url=this.resolve(n[2],e);var a=s.decimalResolution("RESOLUTION");a&&(o.width=a.width,o.height=a.height),o.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),o.name=s.NAME,i([].concat((s.CODECS||"").split(/[ ,]+/)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=this.avc1toavcoti(o.videoCodec)),r.push(o)}return r},S.prototype.parseMasterPlaylistMedia=function(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:[],o=void 0,s=[],a=0;for(m.lastIndex=0;null!==(o=m.exec(t));){var u={},c=new A(o[1]);if(c.TYPE===r){if(u.groupId=c["GROUP-ID"],u.name=c.NAME,u.type=r,u.default="YES"===c.DEFAULT,u.autoselect="YES"===c.AUTOSELECT,u.forced="YES"===c.FORCED,c.URI&&(u.url=this.resolve(c.URI,e)),u.lang=c.LANGUAGE,u.name||(u.name=u.lang),i.length){var l=E(i,u.groupId);u.audioCodec=l?l.codec:i[0].codec}u.id=a++,s.push(u)}}return s},S.prototype.avc1toavcoti=function(t){var e,r=t.split(".");return 2<r.length?(e=r.shift()+".",e+=parseInt(r.shift()).toString(16),e+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):e=t,e},S.prototype.parseLevelPlaylist=function(t,e,r,n){var i,o,s=0,a=0,u={type:null,version:null,url:e,fragments:[],live:!0,startSN:0},c=new x,l=0,h=null,d=new R;for(k.lastIndex=0;null!==(i=k.exec(t));){var f=i[1];if(f){d.duration=parseFloat(f);var p=(" "+i[2]).slice(1);d.title=p||null,d.tagList.push(p?["INF",f,p]:["INF",f])}else if(i[3]){if(!isNaN(d.duration)){var g=s++;d.type=n,d.start=a,d.levelkey=c,d.sn=g,d.level=r,d.cc=l,d.baseurl=e,d.relurl=(" "+i[3]).slice(1),u.fragments.push(d),a+=(h=d).duration,d=new R}}else if(i[4]){if(d.rawByteRange=(" "+i[4]).slice(1),h){var v=h.byteRangeEndOffset;v&&(d.lastByteRangeEndOffset=v)}}else if(i[5])d.rawProgramDateTime=(" "+i[5]).slice(1),d.tagList.push(["PROGRAM-DATE-TIME",d.rawProgramDateTime]),void 0===u.programDateTime&&(u.programDateTime=new Date(new Date(Date.parse(i[5]))-1e3*a));else{for(i=i[0].match(C),o=1;o<i.length&&void 0===i[o];o++);var y=(" "+i[o+1]).slice(1),m=(" "+i[o+2]).slice(1);switch(i[o]){case"#":d.tagList.push(m?[y,m]:[y]);break;case"PLAYLIST-TYPE":u.type=y.toUpperCase();break;case"MEDIA-SEQUENCE":s=u.startSN=parseInt(y);break;case"TARGETDURATION":u.targetduration=parseFloat(y);break;case"VERSION":u.version=parseInt(y);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":l++,d.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":l=parseInt(y);break;case"KEY":var _=new A(y),b=_.enumeratedString("METHOD"),T=_.URI,E=_.hexadecimalInteger("IV");b&&(c=new x,T&&0<=["AES-128","SAMPLE-AES"].indexOf(b)&&(c.method=b,c.baseuri=e,c.reluri=T,c.key=null,c.iv=E));break;case"START":var S=new A(y).decimalFloatingPoint("TIME-OFFSET");isNaN(S)||(u.startTimeOffset=S);break;case"MAP":var w=new A(y);d.relurl=w.URI,d.rawByteRange=w.BYTERANGE,d.baseurl=e,d.level=r,d.type=n,d.sn="initSegment",u.initSegment=d,d=new R;break;default:N.b.warn("line parsed but not handled: "+i)}}}return(d=h)&&!d.relurl&&(u.fragments.pop(),a-=d.duration),u.totalduration=a,u.averagetargetduration=a/u.fragments.length,u.endSN=s-1,u.startCC=u.fragments[0]?u.fragments[0].cc:0,u.endCC=l,u},S.prototype.loadsuccess=function(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:null,o=t.data,s=t.url,a=r.type,u=r.id,c=r.level,l=this.hls;if((this.loaders[a]=void 0)!==s&&0!==s.indexOf("data:")||(s=r.url),e.tload=performance.now(),0===o.indexOf("#EXTM3U"))if(0<o.indexOf("#EXTINF:")){var h="audioTrack"!==a&&"subtitleTrack"!==a,d=isNaN(c)?isNaN(u)?0:u:c,f=this.parseLevelPlaylist(o,s,d,"audioTrack"===a?"audio":"subtitleTrack"===a?"subtitle":"main");f.tload=e.tload,"manifest"===a&&l.trigger(O.a.MANIFEST_LOADED,{levels:[{url:s,details:f}],audioTracks:[],url:s,stats:e,networkDetails:i}),e.tparsed=performance.now(),f.targetduration?h?l.trigger(O.a.LEVEL_LOADED,{details:f,level:c||0,id:u||0,stats:e,networkDetails:i}):"audioTrack"===a?l.trigger(O.a.AUDIO_TRACK_LOADED,{details:f,id:u,stats:e,networkDetails:i}):"subtitleTrack"===a&&l.trigger(O.a.SUBTITLE_TRACK_LOADED,{details:f,id:u,stats:e,networkDetails:i}):l.trigger(O.a.ERROR,{type:D.b.NETWORK_ERROR,details:D.a.MANIFEST_PARSING_ERROR,fatal:!0,url:s,reason:"invalid targetduration",networkDetails:i})}else{var p=this.parseMasterPlaylist(o,s);if(p.length){var g=p.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),v=this.parseMasterPlaylistMedia(o,s,"AUDIO",g),y=this.parseMasterPlaylistMedia(o,s,"SUBTITLES");if(v.length){var m=!1;v.forEach(function(t){t.url||(m=!0)}),!1===m&&p[0].audioCodec&&!p[0].attrs.AUDIO&&(N.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),v.unshift({type:"main",name:"main"}))}l.trigger(O.a.MANIFEST_LOADED,{levels:p,audioTracks:v,subtitles:y,url:s,stats:e,networkDetails:i})}else l.trigger(O.a.ERROR,{type:D.b.NETWORK_ERROR,details:D.a.MANIFEST_PARSING_ERROR,fatal:!0,url:s,reason:"no level found in manifest",networkDetails:i})}else l.trigger(O.a.ERROR,{type:D.b.NETWORK_ERROR,details:D.a.MANIFEST_PARSING_ERROR,fatal:!0,url:s,reason:"no EXTM3U delimiter",networkDetails:i})},S.prototype.loaderror=function(t,e,r){var n,i,o=2<arguments.length&&void 0!==r?r:null,s=e.loader;switch(e.type){case"manifest":n=D.a.MANIFEST_LOAD_ERROR,i=!0;break;case"level":n=D.a.LEVEL_LOAD_ERROR,i=!1;break;case"audioTrack":n=D.a.AUDIO_TRACK_LOAD_ERROR,i=!1}s&&(s.abort(),this.loaders[e.type]=void 0),this.hls.trigger(O.a.ERROR,{type:D.b.NETWORK_ERROR,details:n,fatal:i,url:s.url,loader:s,response:t,context:e,networkDetails:o})},S.prototype.loadtimeout=function(t,e,r){var n,i,o=2<arguments.length&&void 0!==r?r:null,s=e.loader;switch(e.type){case"manifest":n=D.a.MANIFEST_LOAD_TIMEOUT,i=!0;break;case"level":n=D.a.LEVEL_LOAD_TIMEOUT,i=!1;break;case"audioTrack":n=D.a.AUDIO_TRACK_LOAD_TIMEOUT,i=!1}s&&(s.abort(),this.loaders[e.type]=void 0),this.hls.trigger(O.a.ERROR,{type:D.b.NETWORK_ERROR,details:n,fatal:i,url:s.url,loader:s,context:e,networkDetails:o})},S);function L(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,L);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,w.call(this,t,O.a.FRAG_LOADING));return e.loaders={},e}var I,M=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(L,w=u),L.prototype.destroy=function(){var t=this.loaders;for(var e in t){var r=t[e];r&&r.destroy()}this.loaders={},u.prototype.destroy.call(this)},L.prototype.onFragLoading=function(t){var e=t.frag,r=e.type,n=this.loaders[r],i=this.hls.config;e.loaded=0,n&&(N.b.warn("abort previous fragment loader for type:"+r),n.abort()),n=this.loaders[r]=e.loader=void 0!==i.fLoader?new i.fLoader(i):new i.loader(i);var o,s,a=void 0;a={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var u=e.byteRangeStartOffset,c=e.byteRangeEndOffset;isNaN(u)||isNaN(c)||(a.rangeStart=u,a.rangeEnd=c),o={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},n.load(a,o,s)},L.prototype.loadsuccess=function(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:null,o=t.data,s=r.frag;s.loader=void 0,this.loaders[s.type]=void 0,this.hls.trigger(O.a.FRAG_LOADED,{payload:o,frag:s,stats:e,networkDetails:i})},L.prototype.loaderror=function(t,e,r){var n=2<arguments.length&&void 0!==r?r:null,i=e.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(O.a.ERROR,{type:D.b.NETWORK_ERROR,details:D.a.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:n})},L.prototype.loadtimeout=function(t,e,r){var n=2<arguments.length&&void 0!==r?r:null,i=e.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(O.a.ERROR,{type:D.b.NETWORK_ERROR,details:D.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:n})},L.prototype.loadprogress=function(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:null,o=e.frag;o.loaded=t.loaded,this.hls.trigger(O.a.FRAG_LOAD_PROGRESS,{frag:o,stats:t,networkDetails:i})},L);function F(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,F);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,I.call(this,t,O.a.KEY_LOADING));return e.loaders={},e.decryptkey=null,e.decrypturl=null,e}var B=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(F,I=u),F.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},u.prototype.destroy.call(this)},F.prototype.onKeyLoading=function(t){var e=t.frag,r=e.type,n=this.loaders[r],i=e.decryptdata,o=i.uri;if(o!==this.decrypturl||null===this.decryptkey){var s,a,u,c=this.hls.config;n&&(N.b.warn("abort previous key loader for type:"+r),n.abort()),e.loader=this.loaders[r]=new c.loader(c),this.decrypturl=o,this.decryptkey=null,s={url:o,frag:e,responseType:"arraybuffer"},a={timeout:c.fragLoadingTimeOut,maxRetry:c.fragLoadingMaxRetry,retryDelay:c.fragLoadingRetryDelay,maxRetryDelay:c.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(s,a,u)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(O.a.KEY_LOADED,{frag:e}))},F.prototype.loadsuccess=function(t,e,r){var n=r.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(t.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(O.a.KEY_LOADED,{frag:n})},F.prototype.loaderror=function(t,e){var r=e.frag,n=r.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(O.a.ERROR,{type:D.b.NETWORK_ERROR,details:D.a.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t})},F.prototype.loadtimeout=function(t,e){var r=e.frag,n=r.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(O.a.ERROR,{type:D.b.NETWORK_ERROR,details:D.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},F),j={search:function(t,e){for(var r=0,n=t.length-1,i=null,o=null;r<=n;){var s=e(o=t[i=(r+n)/2|0]);if(0<s)r=i+1;else{if(!(s<0))return o;n=i-1}}return null}},U={isBuffered:function(t,e){try{if(t)for(var r=t.buffered,n=0;n<r.length;n++)if(e>=r.start(n)&&e<=r.end(n))return!0}catch(t){}return!1},bufferInfo:function(t,e,r){try{if(t){var n,i=t.buffered,o=[];for(n=0;n<i.length;n++)o.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(o,e,r)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},bufferedInfo:function(t,e,r){var n,i,o,s,a,u=[];for(t.sort(function(t,e){var r=t.start-e.start;return r||e.end-t.end}),a=0;a<t.length;a++){var c=u.length;if(c){var l=u[c-1].end;t[a].start-l<r?t[a].end>l&&(u[c-1].end=t[a].end):u.push(t[a])}else u.push(t[a])}for(n=a=0,i=o=e;a<u.length;a++){var h=u[a].start,d=u[a].end;if(h<=e+r&&e<d)i=h,n=(o=d)-e;else if(e+r<h){s=h;break}}return{len:n,start:i,end:o,nextStart:s}}},V=r(7),G=r(5),H=r.n(G),W=r(9),q=r.n(W);function K(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}var z=K();function Y(r,t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Y),this.hls=r,this.id=t;var i=this.observer=new H.a,e=r.config;i.trigger=function(t){for(var e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];i.emit.apply(i,[t,t].concat(r))},i.off=function(t){for(var e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];i.removeListener.apply(i,[t].concat(r))};var n=function(t,e){(e=e||{}).frag=this.frag,e.id=this.id,r.trigger(t,e)}.bind(this);i.on(O.a.FRAG_DECRYPTED,n),i.on(O.a.FRAG_PARSING_INIT_SEGMENT,n),i.on(O.a.FRAG_PARSING_DATA,n),i.on(O.a.FRAG_PARSED,n),i.on(O.a.ERROR,n),i.on(O.a.FRAG_PARSING_METADATA,n),i.on(O.a.FRAG_PARSING_USERDATA,n),i.on(O.a.INIT_PTS_FOUND,n);var o={mp4:z.isTypeSupported("video/mp4"),mpeg:z.isTypeSupported("audio/mpeg"),mp3:z.isTypeSupported('audio/mp4; codecs="mp3"')},s=navigator.vendor;if(e.enableWorker&&"undefined"!=typeof Worker){N.b.log("demuxing in webworker");var a=void 0;try{a=this.w=q()(10),this.onwmsg=this.onWorkerMessage.bind(this),a.addEventListener("message",this.onwmsg),a.onerror=function(t){r.trigger(O.a.ERROR,{type:D.b.OTHER_ERROR,details:D.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},a.postMessage({cmd:"init",typeSupported:o,vendor:s,id:t,config:JSON.stringify(e)})}catch(t){N.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),a&&URL.revokeObjectURL(a.objectURL),this.demuxer=new V.a(i,o,e,s),this.w=void 0}}else this.demuxer=new V.a(i,o,e,s)}var X=(Y.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},Y.prototype.push=function(t,e,r,n,i,o,s,a){var u=this.w,c=isNaN(i.startDTS)?i.start:i.startDTS,l=i.decryptdata,h=this.frag,d=!(h&&i.cc===h.cc),f=!(h&&i.level===h.level),p=h&&i.sn===h.sn+1,g=!f&&p;if(d&&N.b.log(this.id+":discontinuity detected"),f&&N.b.log(this.id+":switch detected"),this.frag=i,u)u.postMessage({cmd:"demux",data:t,decryptdata:l,initSegment:e,audioCodec:r,videoCodec:n,timeOffset:c,discontinuity:d,trackSwitch:f,contiguous:g,duration:o,accurateTimeOffset:s,defaultInitPTS:a},t instanceof ArrayBuffer?[t]:[]);else{var v=this.demuxer;v&&v.push(t,l,e,r,n,c,d,f,g,o,s,a)}},Y.prototype.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case O.a.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},Y);function J(t,e,r){var n=t[e],i=t[r],o=i.startPTS;isNaN(o)?i.start=e<r?n.start+n.duration:Math.max(n.start-i.duration,0):e<r?(n.duration=o-n.start,n.duration<0&&N.b.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(i.duration=n.start-o,i.duration<0&&N.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}function Q(t,e,r,n,i,o){var s=r;if(!isNaN(e.startPTS)){var a=Math.abs(e.startPTS-r);isNaN(e.deltaPTS)?e.deltaPTS=a:e.deltaPTS=Math.max(a,e.deltaPTS),s=Math.max(r,e.startPTS),r=Math.min(r,e.startPTS),n=Math.max(n,e.endPTS),i=Math.min(i,e.startDTS),o=Math.max(o,e.endDTS)}var u=r-e.start;e.start=e.startPTS=r,e.maxStartPTS=s,e.endPTS=n,e.startDTS=i,e.endDTS=o,e.duration=n-r;var c,l,h,d=e.sn;if(!t||d<t.startSN||d>t.endSN)return 0;for(c=d-t.startSN,(l=t.fragments)[c]=e,h=c;0<h;h--)J(l,h,h-1);for(h=c;h<l.length-1;h++)J(l,h,h+1);return t.PTSKnown=!0,u}function $(t,e){var r,n=Math.max(t.startSN,e.startSN)-e.startSN,i=Math.min(t.endSN,e.endSN)-e.startSN,o=e.startSN-t.startSN,s=t.fragments,a=e.fragments,u=0;if(i<n)e.PTSKnown=!1;else{for(var c=n;c<=i;c++){var l=s[o+c],h=a[c];h&&l&&(u=l.cc-h.cc,isNaN(l.startPTS)||(h.start=h.startPTS=l.startPTS,h.endPTS=l.endPTS,h.duration=l.duration,h.backtracked=l.backtracked,h.dropped=l.dropped,r=h))}if(u)for(N.b.log("discontinuity sliding from playlist, take drift into account"),c=0;c<a.length;c++)a[c].cc+=u;if(r)Q(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(0<=o&&o<s.length){var d=s[o].start;for(c=0;c<a.length;c++)a[c].start+=d}e.PTSKnown=t.PTSKnown}}var Z={toString:function(t){for(var e="",r=t.length,n=0;n<r;n++)e+="["+t.start(n).toFixed(3)+","+t.end(n).toFixed(3)+"]";return e}};function tt(t,e){var r=t.fragments,n=e.fragments;if(n.length&&r.length){var i=function(t,e){for(var r=null,n=0;n<t.length;n+=1){var i=t[n];if(i&&i.cc===e){r=i;break}}return r}(r,n[0].cc);if(i&&(!i||i.startPTS))return i;N.b.log("No frag in previous level to align on")}else N.b.log("No fragments to align")}function et(r,t){t.fragments.forEach(function(t){if(t){var e=t.start+r;t.start=t.startPTS=e,t.endPTS=e+t.duration}}),t.PTSKnown=!0}function rt(t,e,r){if(function(t,e,r){var n=!1;return e&&e.details&&r&&(r.endCC>r.startCC||t&&t.cc<r.startCC)&&(n=!0),n}(t,e,r)){var n=tt(e.details,r);n&&(N.b.log("Adjusting PTS using last level due to CC increase within current level"),et(n.start,r))}if(!1===r.PTSKnown&&e&&e.details){var i=e.details.programDateTime,o=(r.programDateTime-i)/1e3+e.details.fragments[0].start;isNaN(o)||(N.b.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),et(o,r))}}var nt=function(t,e,r){return e&&it(t.prototype,e),r&&it(t,r),t};function it(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ot,st="STOPPED",at="IDLE",ut="KEY_LOADING",ct="FRAG_LOADING",lt="FRAG_LOADING_WAITING_RETRY",ht="WAITING_LEVEL",dt="PARSING",ft="PARSED",pt="BUFFER_FLUSHING",gt="ENDED",vt="ERROR";function yt(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,yt);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,ot.call(this,t,O.a.MEDIA_ATTACHED,O.a.MEDIA_DETACHING,O.a.MANIFEST_LOADING,O.a.MANIFEST_PARSED,O.a.LEVEL_LOADED,O.a.KEY_LOADED,O.a.FRAG_LOADED,O.a.FRAG_LOAD_EMERGENCY_ABORTED,O.a.FRAG_PARSING_INIT_SEGMENT,O.a.FRAG_PARSING_DATA,O.a.FRAG_PARSED,O.a.ERROR,O.a.AUDIO_TRACK_SWITCHING,O.a.AUDIO_TRACK_SWITCHED,O.a.BUFFER_CREATED,O.a.BUFFER_APPENDED,O.a.BUFFER_FLUSHED));return e.config=t.config,e.audioCodecSwap=!1,e.ticks=0,e._state=st,e.ontick=e.tick.bind(e),e}var mt,_t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(yt,ot=u),yt.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),u.prototype.destroy.call(this),this.state=st},yt.prototype.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}0<e&&-1===t&&(N.b.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=at,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=st},yt.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=st,this.forceStartLoad=!1},yt.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)},yt.prototype.doTick=function(){switch(this.state){case vt:break;case pt:this.fragLoadError=0;break;case at:this._doTickIdle();break;case ht:var t=this.levels[this.level];t&&t.details&&(this.state=at);break;case lt:var e=performance.now(),r=this.retryDate;(!r||r<=e||this.media&&this.media.seeking)&&(N.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=at)}this._checkBuffer(),this._checkFragmentChanged()},yt.prototype._doTickIdle=function(){var t=this.hls,e=t.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&e.startFragPrefetch)){var n=void 0;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=t.nextLoadLevel,o=this.levels[i];if(o){var s=o.bitrate,a=void 0;a=s?Math.max(8*e.maxBufferSize/s,e.maxBufferLength):e.maxBufferLength,a=Math.min(a,e.maxMaxBufferLength);var u=U.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,e.maxBufferHole),c=u.len;if(!(a<=c)){N.b.trace("buffer length of "+c.toFixed(3)+" is below max of "+a.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=i;var l=o.details;if(void 0===l||!0===l.live&&this.levelLastLoaded!==i)this.state=ht;else{var h=this.fragPrevious;if(!l.live&&h&&!h.backtracked&&h.sn===l.endSN&&!u.nextStart&&Math.min(r.duration,h.start+h.duration)-Math.max(u.end,h.start)<=Math.max(.2,h.duration)){var d={};return this.altAudio&&(d.type="video"),this.hls.trigger(O.a.BUFFER_EOS,d),void(this.state=gt)}this._fetchPayloadOrEos(n,u,l)}}}}},yt.prototype._fetchPayloadOrEos=function(t,e,r){var n=this.fragPrevious,i=this.level,o=r.fragments,s=o.length;if(0!==s){var a=o[0].start,u=o[s-1].start+o[s-1].duration,c=e.end,l=void 0;if(r.initSegment&&!r.initSegment.data)l=r.initSegment;else if(r.live){var h=this.config.initialLiveManifestSize;if(s<h)return void N.b.warn("Can not start playback of a level, reason: not enough fragments "+s+" < "+h);if(null===(l=this._ensureFragmentAtLivePoint(r,c,a,u,n,o,s)))return}else c<a&&(l=o[0]);(l=l||this._findFragment(a,n,s,o,c,u,r))&&this._loadFragmentOrKey(l,i,r,t,c)}},yt.prototype._ensureFragmentAtLivePoint=function(t,e,r,n,i,o,s){var a=this.hls.config,u=this.media,c=void 0,l=void 0!==a.liveMaxLatencyDuration?a.liveMaxLatencyDuration:a.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(r-a.maxFragLookUpTolerance,n-l)){var h=this.liveSyncPosition=this.computeLivePosition(r,t);N.b.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),e=h,u&&u.readyState&&u.duration>h&&(u.currentTime=h),this.nextLoadPosition=h}if(t.PTSKnown&&n<e&&u&&u.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(i){var d=i.sn+1;if(d>=t.startSN&&d<=t.endSN){var f=o[d-t.startSN];i.cc===f.cc&&(c=f,N.b.log("live playlist, switching playlist, load frag with next SN: "+c.sn))}c||(c=j.search(o,function(t){return i.cc-t.cc}))&&N.b.log("live playlist, switching playlist, load frag with same CC: "+c.sn)}c||(c=o[Math.min(s-1,Math.round(s/2))],N.b.log("live playlist, switching playlist, unknown, load middle frag : "+c.sn))}return c},yt.prototype._findFragment=function(t,e,r,n,i,o,s){function a(t){var e=Math.min(h,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-e<=i?1:t.start-e>i&&t.start?-1:0}var u=this.hls.config,c=void 0,l=void 0,h=u.maxFragLookUpTolerance,d=e?n[e.sn-n[0].sn+1]:void 0;if(l=i<o?(o-h<i&&(h=0),d&&!a(d)?d:j.search(n,a)):n[r-1]){var f=(c=l).sn-s.startSN,p=e&&c.level===e.level,g=n[f-1],v=n[1+f];if(e&&c.sn===e.sn)if(p&&!c.backtracked)if(c.sn<s.endSN){var y=e.deltaPTS;y&&y>u.maxBufferHole&&e.dropped&&f?(c=g,N.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),e.loadCounter--):(c=v,N.b.log("SN just loaded, load next one: "+c.sn))}else c=null;else c.backtracked&&(v&&v.backtracked?(N.b.warn("Already backtracked from fragment "+v.sn+", will not backtrack to fragment "+c.sn+". Loading fragment "+v.sn),c=v):(N.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),c.dropped=0,g?(g.loadCounter&&g.loadCounter--,(c=g).backtracked=!0):f&&(c=null)))}return c},yt.prototype._loadFragmentOrKey=function(t,e,r,n,i){var o=this.hls,s=o.config;if(!t.decryptdata||null==t.decryptdata.uri||null!=t.decryptdata.key){if(N.b.log("Loading "+t.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+e+", currentTime:"+n.toFixed(3)+",bufferEnd:"+i.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,t.loadCounter){t.loadCounter++;var a=s.fragLoadingLoopThreshold;if(t.loadCounter>a&&Math.abs(this.fragLoadIdx-t.loadIdx)<a)return void o.trigger(O.a.ERROR,{type:D.b.MEDIA_ERROR,details:D.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:t})}else t.loadCounter=1;return t.loadIdx=this.fragLoadIdx,t.autoLevel=o.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.fragCurrent=t,this.startFragRequested=!0,isNaN(t.sn)||t.bitrateTest||(this.nextLoadPosition=t.start+t.duration),o.trigger(O.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new X(o,"main")),void(this.state=ct)}N.b.log("Loading key for "+t.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+e),this.state=ut,o.trigger(O.a.KEY_LOADING,{frag:t})},yt.prototype.getBufferedFrag=function(e){return j.search(this._bufferedFrags,function(t){return e<t.startPTS?-1:e>t.endPTS?1:0})},yt.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},yt.prototype._checkFragmentChanged=function(){var t,e,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((e=r.currentTime)>r.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=e),U.isBuffered(r,e)?t=this.getBufferedFrag(e):U.isBuffered(r,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var n=t;if(n!==this.fragPlaying){this.hls.trigger(O.a.FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(O.a.LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}},yt.prototype.immediateLevelSwitch=function(){if(N.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,e=void 0;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},yt.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,U.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},yt.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e,r=void 0,n=void 0;if(void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),(e=this.getBufferedFrag(t.currentTime))&&1<e.startPTS&&this.flushMainBuffer(0,e.startPTS-1),t.paused)r=0;else{var i=this.hls.nextLoadLevel,o=this.levels[i],s=this.fragLastKbps;r=s&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*s)+1:0}if(n=(n=this.getBufferedFrag(t.currentTime+r))&&this.followingBufferedFrag(n)){var a=this.fragCurrent;a&&a.loader&&a.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.maxStartPTS,Number.POSITIVE_INFINITY)}}},yt.prototype.flushMainBuffer=function(t,e){this.state=pt;var r={startOffset:t,endOffset:e};this.altAudio&&(r.type="video"),this.hls.trigger(O.a.BUFFER_FLUSHING,r)},yt.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition)},yt.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(N.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0,t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},yt.prototype.onMediaSeeking=function(){var t=this.media,e=t?t.currentTime:void 0,r=this.config;isNaN(e)||N.b.log("media seeking to "+e.toFixed(3));var n=this.mediaBuffer?this.mediaBuffer:t,i=U.bufferInfo(n,e,this.config.maxBufferHole);if(this.state===ct){var o=this.fragCurrent;if(0===i.len&&o){var s=r.maxFragLookUpTolerance,a=o.start-s,u=o.start+o.duration+s;e<a||u<e?(o.loader&&(N.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=at):N.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===gt&&(0===i.len&&(this.fragPrevious=0),this.state=at);t&&(this.lastCurrentTime=e),this.state!==ct&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*r.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=e),this.tick()},yt.prototype.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;isNaN(e)||N.b.log("media seeked to "+e.toFixed(3)),this.tick()},yt.prototype.onMediaEnded=function(){N.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},yt.prototype.onManifestLoading=function(){N.b.log("trigger BUFFER_RESET"),this.hls.trigger(O.a.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0},yt.prototype.onManifestParsed=function(t){var e,r=!1,n=!1;t.levels.forEach(function(t){(e=t.audioCodec)&&(-1!==e.indexOf("mp4a.40.2")&&(r=!0),-1!==e.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&N.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},yt.prototype.onLevelLoaded=function(t){var e=t.details,r=t.level,n=this.levels[this.levelLastLoaded],i=this.levels[r],o=e.totalduration,s=0;if(N.b.log("level "+r+" loaded ["+e.startSN+","+e.endSN+"],duration:"+o),e.live){var a=i.details;a&&0<e.fragments.length?($(a,e),s=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(s,a),e.PTSKnown&&!isNaN(s)?N.b.log("live playlist sliding:"+s.toFixed(3)):(N.b.log("live playlist - outdated PTS, unknown sliding"),rt(this.fragPrevious,n,e))):(N.b.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,rt(this.fragPrevious,n,e))}else e.PTSKnown=!1;if(i.details=e,this.levelLastLoaded=r,this.hls.trigger(O.a.LEVEL_UPDATED,{details:e,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var u=e.startTimeOffset;isNaN(u)?e.live?(this.startPosition=this.computeLivePosition(s,e),N.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(u<0&&(N.b.log("negative start time offset "+u+", count from end of last fragment"),u=s+o+u),N.b.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===ht&&(this.state=at),this.tick()},yt.prototype.onKeyLoaded=function(){this.state===ut&&(this.state=at,this.tick())},yt.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag;if(this.state===ct&&e&&"main"===r.type&&r.level===e.level&&r.sn===e.sn){var n=t.stats,i=this.levels[e.level],o=i.details;if(N.b.log("Loaded  "+e.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+e.level),this.bitrateTest=!1,this.stats=n,!0===r.bitrateTest&&this.hls.nextLoadLevel)this.state=at,this.startFragRequested=!1,n.tparsed=n.tbuffered=performance.now(),this.hls.trigger(O.a.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.tick();else if("initSegment"===r.sn)this.state=at,n.tparsed=n.tbuffered=performance.now(),o.initSegment.data=t.payload,this.hls.trigger(O.a.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.tick();else{this.state=dt;var s=o.totalduration,a=e.level,u=e.sn,c=this.config.defaultAudioCodec||i.audioCodec;this.audioCodecSwap&&(N.b.log("swapping playlist audio codec"),void 0===c&&(c=this.lastAudioCodec),c=c&&(-1!==c.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,N.b.log("Parsing "+u+" of ["+o.startSN+" ,"+o.endSN+"],level "+a+", cc "+e.cc);var l=this.demuxer;l=l||(this.demuxer=new X(this.hls,"main"));var h=this.media,d=!(h&&h.seeking)&&(o.PTSKnown||!o.live),f=o.initSegment?o.initSegment.data:[];l.push(t.payload,f,c,i.videoCodec,e,s,d,void 0)}}this.fragLoadError=0},yt.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;if(e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===dt){var n,i,o=t.tracks;if(o.audio&&this.altAudio&&delete o.audio,i=o.audio){var s=this.levels[this.level].audioCodec,a=navigator.userAgent.toLowerCase();s&&this.audioCodecSwap&&(N.b.log("swapping playlist audio codec"),s=-1!==s.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===a.indexOf("firefox")&&(s="mp4a.40.5"),-1!==a.indexOf("android")&&"audio/mpeg"!==i.container&&(s="mp4a.40.2",N.b.log("Android: force audio codec to "+s)),i.levelCodec=s,i.id=t.id}for(n in(i=o.video)&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=t.id),this.hls.trigger(O.a.BUFFER_CODECS,o),o){i=o[n],N.b.log("main track:"+n+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var u=i.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(O.a.BUFFER_APPENDING,{type:n,data:u,parent:"main",content:"initSegment"}))}this.tick()}},yt.prototype.onFragParsingData=function(e){var r=this,t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&("audio"!==e.type||!this.altAudio)&&this.state===dt){var i=this.levels[this.level],o=t;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+t.duration,e.endDTS=e.startDTS+t.duration),N.b.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(o.dropped=e.dropped,o.dropped)if(o.backtracked)N.b.warn("Already backtracked on this fragment, appending with the gap");else{var s=i.details;if(!s||o.sn!==s.startSN)return N.b.warn("missing video frame(s), backtracking fragment"),o.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=at,this.fragPrevious=o,void this.tick();N.b.warn("missing video frame(s) on first frag, appending with gap")}else o.backtracked=!1;var a=Q(i.details,o,e.startPTS,e.endPTS,e.startDTS,e.endDTS),u=this.hls;u.trigger(O.a.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:a,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(t){t&&t.length&&r.state===dt&&(r.appended=!0,r.pendingBuffering=!0,u.trigger(O.a.BUFFER_APPENDING,{type:e.type,data:t,parent:"main",content:"data"}))}),this.tick()}},yt.prototype.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===dt&&(this.stats.tparsed=performance.now(),this.state=ft,this._checkAppendedParsed())},yt.prototype.onAudioTrackSwitching=function(t){var e=!!t.url,r=t.id;if(!e){if(this.mediaBuffer!==this.media){N.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(N.b.log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=at}var i=this.hls;i.trigger(O.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(O.a.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}},yt.prototype.onAudioTrackSwitched=function(t){var e=t.id,r=!!this.hls.audioTracks[e].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(N.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},yt.prototype.onBufferCreated=function(t){var e=t.tracks,r=void 0,n=void 0,i=!1;for(var o in e){var s=e[o];"main"===s.id?(r=s,"video"===(n=o)&&(this.videoBuffer=e[o].buffer)):i=!0}i&&r?(N.b.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},yt.prototype.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==dt&&e!==ft||(this.pendingBuffering=0<t.pending,this._checkAppendedParsed())}},yt.prototype._checkAppendedParsed=function(){if(!(this.state!==ft||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;N.b.log("main buffered : "+Z.toString(e.buffered));var r=this._bufferedFrags.filter(function(t){return U.isBuffered(e,(t.startPTS+t.endPTS)/2)});r.push(t),this._bufferedFrags=r.sort(function(t,e){return t.startPTS-e.startPTS}),this.fragPrevious=t;var n=this.stats;n.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(O.a.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.state=at}this.tick()}},yt.prototype.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var r=!!this.media&&U.isBuffered(this.media,this.media.currentTime)&&U.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case D.a.FRAG_LOAD_ERROR:case D.a.FRAG_LOAD_TIMEOUT:case D.a.KEY_LOAD_ERROR:case D.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var n=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);e.loadCounter=0,N.b.warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=lt}else N.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=vt;break;case D.a.FRAG_LOOP_LOADING_ERROR:t.fatal||(r?(this._reduceMaxBufferLength(e.duration),this.state=at):e.autoLevel&&0!==e.level||(t.fatal=!0,this.state=vt));break;case D.a.LEVEL_LOAD_ERROR:case D.a.LEVEL_LOAD_TIMEOUT:this.state!==vt&&(t.fatal?(this.state=vt,N.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==ht||(this.state=at));break;case D.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==dt&&this.state!==ft||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=at):(N.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},yt.prototype._reduceMaxBufferLength=function(t){var e=this.config;e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,N.b.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*e.fragLoadingLoopThreshold))},yt.prototype._checkBuffer=function(){var t=this.media,e=this.config;if(t&&t.readyState){var r=t.currentTime,n=this.mediaBuffer?this.mediaBuffer:t,i=n.buffered;if(!this.loadedmetadata&&i.length){this.loadedmetadata=!0;var o=t.seeking?r:this.startPosition,s=U.isBuffered(n,o),a=i.start(0),u=!s&&Math.abs(o-a)<e.maxSeekHole;r===o&&!u||(N.b.log("target start position:"+o),u&&(o=a,N.b.log("target start position not buffered, seek to buffered.start(0) "+o)),N.b.log("adjust currentTime from "+r+" to "+o),t.currentTime=o)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var c=U.bufferInfo(t,r,0),l=!(t.paused||t.ended||0===t.buffered.length);if(r!==this.lastCurrentTime)this.stallReported&&(N.b.warn("playback not stuck anymore @"+r+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(l){var h=performance.now(),d=this.hls;if(this.stalled){var f=h-this.stalled,p=c.len,g=this.nudgeRetry||0;if(p<=.5&&f>1e3*e.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,N.b.warn("playback stalling in low buffer @"+r),d.trigger(O.a.ERROR,{type:D.b.MEDIA_ERROR,details:D.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:p}));var v=c.nextStart,y=v-r;if(v&&y<e.maxSeekHole&&0<y){this.nudgeRetry=++g;var m=g*e.nudgeOffset;N.b.log("adjust currentTime from "+t.currentTime+" to next buffered @ "+v+" + nudge "+m),t.currentTime=v+m,this.stalled=void 0,d.trigger(O.a.ERROR,{type:D.b.MEDIA_ERROR,details:D.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:v+m-r})}}else if(.5<p&&f>1e3*e.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,N.b.warn("playback stalling in high buffer @"+r),d.trigger(O.a.ERROR,{type:D.b.MEDIA_ERROR,details:D.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:p})),this.stalled=void 0,this.nudgeRetry=++g,g<e.nudgeMaxRetry){var _=t.currentTime,b=_+g*e.nudgeOffset;N.b.log("adjust currentTime from "+_+" to "+b),t.currentTime=b,d.trigger(O.a.ERROR,{type:D.b.MEDIA_ERROR,details:D.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else N.b.error("still stuck in high buffer @"+r+" after "+e.nudgeMaxRetry+", raise fatal error"),d.trigger(O.a.ERROR,{type:D.b.MEDIA_ERROR,details:D.a.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=h,this.stallReported=!1}}}},yt.prototype.onFragLoadEmergencyAborted=function(){this.state=at,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},yt.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(t){return U.isBuffered(e,(t.startPTS+t.endPTS)/2)}),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.state=at,this.fragPrevious=null},yt.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},yt.prototype.computeLivePosition=function(t,e){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-r)},nt(yt,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,N.b.log("main stream:"+e+"->"+t),this.hls.trigger(O.a.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),yt),bt=function(t,e,r){return e&&Tt(t.prototype,e),r&&Tt(t,r),t};function Tt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Et(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Et);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,mt.call(this,t,O.a.MANIFEST_LOADED,O.a.LEVEL_LOADED,O.a.FRAG_LOADED,O.a.ERROR));return e.canload=!1,e.currentLevelIndex=null,e.manualLevelIndex=-1,e.timer=null,e}var St,wt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Et,mt=u),Et.prototype.destroy=function(){this.cleanTimer(),this.manualLevelIndex=-1},Et.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},Et.prototype.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},Et.prototype.stopLoad=function(){this.canload=!1},Et.prototype.onManifestLoaded=function(t){var e=[],r=void 0,n={},i=null,o=!1,s=!1,a=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),u=[];if(t.levels.forEach(function(t){t.loadError=0,t.fragmentError=!1,o=o||!!t.videoCodec,s=s||!!t.audioCodec||!(!t.attrs||!t.attrs.AUDIO),!0===a&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),void 0===(i=n[t.bitrate])?(t.url=[t.url],t.urlId=0,n[t.bitrate]=t,e.push(t)):i.url.push(t.url)}),!0===o&&!0===s&&(e=e.filter(function(t){return!!t.videoCodec})),e=e.filter(function(t){var e=t.audioCodec,r=t.videoCodec;return(!e||f(e))&&(!r||f(r))}),t.audioTracks&&(u=t.audioTracks.filter(function(t){return!t.audioCodec||f(t.audioCodec,"audio")})),0<e.length){r=e[0].bitrate,e.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=e;for(var c=0;c<e.length;c++)if(e[c].bitrate===r){this._firstLevel=c,N.b.log("manifest loaded,"+e.length+" level(s) found, first bitrate:"+r);break}this.hls.trigger(O.a.MANIFEST_PARSED,{levels:e,audioTracks:u,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:o,altAudio:0<u.length})}else this.hls.trigger(O.a.ERROR,{type:D.b.MEDIA_ERROR,details:D.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},Et.prototype.setLevelInternal=function(t){var e=this._levels,r=this.hls;if(0<=t&&t<e.length){if(this.cleanTimer(),this.currentLevelIndex!==t){N.b.log("switching to level "+t);var n=e[this.currentLevelIndex=t];n.level=t,r.trigger(O.a.LEVEL_SWITCH,n),r.trigger(O.a.LEVEL_SWITCHING,n)}var i=e[t],o=i.details;if(!o||!0===o.live){var s=i.urlId;r.trigger(O.a.LEVEL_LOADING,{url:i.url[s],level:t,id:s})}}else r.trigger(O.a.ERROR,{type:D.b.OTHER_ERROR,details:D.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},Et.prototype.onError=function(t){if(!0!==t.fatal){var e=!1,r=!1,n=void 0;switch(t.details){case D.a.FRAG_LOAD_ERROR:case D.a.FRAG_LOAD_TIMEOUT:case D.a.FRAG_LOOP_LOADING_ERROR:case D.a.KEY_LOAD_ERROR:case D.a.KEY_LOAD_TIMEOUT:n=t.frag.level,r=!0;break;case D.a.LEVEL_LOAD_ERROR:case D.a.LEVEL_LOAD_TIMEOUT:n=t.context.level,e=!0;break;case D.a.REMUX_ALLOC_ERROR:n=t.level,e=!0}void 0!==n&&this.recoverLevel(t,n,e,r)}else t.type===D.b.NETWORK_ERROR&&this.cleanTimer()},Et.prototype.recoverLevel=function(t,e,r,n){var i=this,o=this.hls.config,s=t.details,a=this._levels[e],u=void 0,c=void 0,l=void 0;if(a.loadError++,a.fragmentError=n,!0===r){if(!(this.levelRetryCount+1<=o.levelLoadingMaxRetry))return N.b.error("level controller, cannot recover from "+s+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(t.fatal=!0);c=Math.min(Math.pow(2,this.levelRetryCount)*o.levelLoadingRetryDelay,o.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return i.loadLevel()},c),t.levelRetry=!0,this.levelRetryCount++,N.b.warn("level controller, "+s+", retry in "+c+" ms, current retry count is "+this.levelRetryCount)}!0!==r&&!0!==n||(1<(u=a.url.length)&&a.loadError<u?(N.b.warn("level controller, "+s+" for level "+e+": switching to redundant stream id "+a.urlId),a.urlId=(a.urlId+1)%u,a.details=void 0):-1===this.manualLevelIndex?(l=0===e?this._levels.length-1:e-1,N.b.warn("level controller, "+s+": switch to "+l),this.hls.nextAutoLevel=this.currentLevelIndex=l):!0===n&&(N.b.warn("level controller, "+s+": reload a fragment"),this.currentLevelIndex=null))},Et.prototype.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var r=this._levels[e.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},Et.prototype.onLevelLoaded=function(t){var e=this,r=t.level;if(r===this.currentLevelIndex){var n=this._levels[r];!1===n.fragmentError&&(n.loadError=0,this.levelRetryCount=0);var i=t.details;if(i.live){var o=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),s=n.details;s&&i.endSN===s.endSN&&(o/=2,N.b.log("same live playlist, reload twice faster")),o-=performance.now()-t.stats.trequest,o=Math.max(1e3,Math.round(o)),N.b.log("live playlist, reload in "+o+" ms"),this.timer=setTimeout(function(){return e.loadLevel()},o)}else this.cleanTimer()}},Et.prototype.loadLevel=function(){var t=void 0,e=void 0;null!==this.currentLevelIndex&&!0===this.canload&&void 0!==(t=this._levels[this.currentLevelIndex])&&0<t.url.length&&(e=t.urlId,this.hls.trigger(O.a.LEVEL_LOADING,{url:t.url[e],level:this.currentLevelIndex,id:e}))},bt(Et,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&void 0!==e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0!==this._startLevel)return this._startLevel;var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),Et),At=r(3);function kt(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,kt);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,St.call(this,t,O.a.MEDIA_ATTACHED,O.a.MEDIA_DETACHING,O.a.FRAG_PARSING_METADATA));return e.id3Track=void 0,e.media=void 0,e}var Ct=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(kt,St=u),kt.prototype.destroy=function(){u.prototype.destroy.call(this)},kt.prototype.onMediaAttached=function(t){this.media=t.media,this.media},kt.prototype.onMediaDetaching=function(){this.media=void 0},kt.prototype.onFragParsingMetadata=function(t){var e=t.frag,r=t.samples;this.id3Track||(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var o=At.a.getID3Frames(r[i].data);if(o){var s=r[i].pts,a=i<r.length-1?r[i+1].pts:e.endPTS;s===a&&(a+=1e-4);for(var u=0;u<o.length;u++){var c=o[u];if(!At.a.isTimeStampFrame(c)){var l=new n(s,a,"");l.value=c,this.id3Track.addCue(l)}}}}},kt);function xt(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,xt),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}var Rt=(xt.prototype.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},xt.prototype.getTotalWeight=function(){return this.totalWeight_},xt.prototype.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},xt);function Pt(t,e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Pt),this.hls=t,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Rt(e),this.fast_=new Rt(r)}var Lt,It=(Pt.prototype.sample=function(t,e){var r=8e3*e/(t=Math.max(t,this.minDelayMs_)),n=t/1e3;this.fast_.sample(n,r),this.slow_.sample(n,r)},Pt.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},Pt.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},Pt.prototype.destroy=function(){},Pt),Ot=function(t,e,r){return e&&Dt(t.prototype,e),r&&Dt(t,r),t};function Dt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Nt(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Nt);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,Lt.call(this,t,O.a.FRAG_LOADING,O.a.FRAG_LOADED,O.a.FRAG_BUFFERED,O.a.ERROR));return e.lastLoadedFragLevel=0,e._nextAutoLevel=-1,e.hls=t,e.timer=null,e._bwEstimator=null,e.onCheck=e._abandonRulesCheck.bind(e),e}var Mt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Nt,Lt=u),Nt.prototype.destroy=function(){this.clearTimer(),u.prototype.destroy.call(this)},Nt.prototype.onFragLoading=function(t){var e=t.frag;if("main"===e.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var r=this.hls,n=t.frag.level,i=r.levels[n].details.live,o=r.config,s=void 0,a=void 0;a=i?(s=o.abrEwmaFastLive,o.abrEwmaSlowLive):(s=o.abrEwmaFastVoD,o.abrEwmaSlowVoD),this._bwEstimator=new It(r,a,s,o.abrEwmaDefaultEstimate)}this.fragCurrent=e}},Nt.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,r=this.fragCurrent,n=r.loader,i=t.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return N.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var o=n.stats;if(e&&o&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&r.autoLevel&&r.level){var s=performance.now()-o.trequest,a=Math.abs(e.playbackRate);if(s>500*r.duration/a){var u=t.levels,c=Math.max(1,o.bw?o.bw/8:1e3*o.loaded/s),l=u[r.level],h=l.realBitrate?Math.max(l.realBitrate,l.bitrate):l.bitrate,d=o.total?o.total:Math.max(o.loaded,Math.round(r.duration*h/8)),f=e.currentTime,p=(d-o.loaded)/c,g=(U.bufferInfo(e,f,t.config.maxBufferHole).end-f)/a;if(g<2*r.duration/a&&g<p){var v=void 0,y=void 0;for(y=r.level-1;i<y;y--){var m=u[y].realBitrate?Math.max(u[y].realBitrate,u[y].bitrate):u[y].bitrate;if((v=r.duration*m/(6.4*c))<g)break}v<p&&(N.b.warn("loading too slow, abort fragment loading and switch to level "+y+":fragLoadedDelay["+y+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+v.toFixed(1)+"<"+p.toFixed(1)+":"+g.toFixed(1)),t.nextLoadLevel=y,this._bwEstimator.sample(s,o.loaded),n.abort(),this.clearTimer(),t.trigger(O.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:o}))}}}},Nt.prototype.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&!isNaN(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[e.level],n=(r.loaded?r.loaded.bytes:0)+t.stats.loaded,i=(r.loaded?r.loaded.duration:0)+t.frag.duration;r.loaded={bytes:n,duration:i},r.realBitrate=Math.round(8*n/i)}if(t.frag.bitrateTest){var o=t.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(t)}}},Nt.prototype.onFragBuffered=function(t){var e=t.stats,r=t.frag;if(!(!0===e.aborted||1!==r.loadCounter||"main"!==r.type||isNaN(r.sn)||r.bitrateTest&&e.tload!==e.tbuffered)){var n=e.tparsed-e.trequest;N.b.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(n,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}},Nt.prototype.onError=function(t){switch(t.details){case D.a.FRAG_LOAD_ERROR:case D.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},Nt.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},Nt.prototype._findBestLevel=function(t,e,r,n,i,o,s,a,u){for(var c=i;n<=c;c--){var l=u[c].details,h=l?l.totalduration/l.fragments.length:e,d=!!l&&l.live,f=void 0;f=c<=t?s*r:a*r;var p=u[c].realBitrate?Math.max(u[c].realBitrate,u[c].bitrate):u[c].bitrate,g=p*h/f;if(N.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(f)+"/"+p+"/"+h+"/"+o+"/"+g),p<f&&(!g||d&&!this.bitrateTestDelay||g<o))return c}return-1},Ot(Nt,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var r=this._nextABRAutoLevel;return-1!==t&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,r=t.levels,n=t.config,i=t.minAutoLevel,o=t.media,s=this.lastLoadedFragLevel,a=this.fragCurrent?this.fragCurrent.duration:0,u=o?o.currentTime:0,c=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,l=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=(U.bufferInfo(o,u,n.maxBufferHole).end-u)/c,d=this._findBestLevel(s,a,l,i,e,h,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(0<=d)return d;N.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var f=a?Math.min(a,n.maxStarvationDelay):n.maxStarvationDelay,p=n.abrBandWidthFactor,g=n.abrBandWidthUpFactor;if(0==h){var v=this.bitrateTestDelay;v&&(f=(a?Math.min(a,n.maxLoadingDelay):n.maxLoadingDelay)-v,N.b.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),p=g=1)}return d=this._findBestLevel(s,a,l,i,e,h+f,p,g,r),Math.max(d,0)}}]),Nt);var Ft,Bt=K();function jt(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,jt);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,Ft.call(this,t,O.a.MEDIA_ATTACHING,O.a.MEDIA_DETACHING,O.a.MANIFEST_PARSED,O.a.BUFFER_RESET,O.a.BUFFER_APPENDING,O.a.BUFFER_CODECS,O.a.BUFFER_EOS,O.a.BUFFER_FLUSHING,O.a.LEVEL_PTS_UPDATED,O.a.LEVEL_UPDATED));return e._msDuration=null,e._levelDuration=null,e._live=null,e._objectUrl=null,e.onsbue=e.onSBUpdateEnd.bind(e),e.onsbe=e.onSBUpdateError.bind(e),e.pendingTracks={},e.tracks={},e}var Ut,Vt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(jt,Ft=u),jt.prototype.destroy=function(){u.prototype.destroy.call(this)},jt.prototype.onLevelPtsUpdated=function(t){var e=t.type,r=this.tracks.audio;if("audio"===e&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(.1<Math.abs(n.timestampOffset-t.start)){var i=n.updating;try{n.abort()}catch(t){i=!0,N.b.warn("can not abort audio buffer: "+t)}i?this.audioTimestampOffset=t.start:(N.b.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+t.start),n.timestampOffset=t.start)}}},jt.prototype.onManifestParsed=function(t){var e=t.audio,r=t.video||t.levels.length&&t.audio,n=0;t.altAudio&&(e||r)&&(n=(e?1:0)+(r?1:0),N.b.log(n+" sourceBuffer(s) expected")),this.sourceBufferNb=n},jt.prototype.onMediaAttaching=function(t){var e=this.media=t.media;if(e){var r=this.mediaSource=new Bt;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),e.src=URL.createObjectURL(r),this._objectUrl=e.src}},jt.prototype.onMediaDetaching=function(){N.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){N.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):N.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(O.a.MEDIA_DETACHED)},jt.prototype.onMediaSourceOpen=function(){N.b.log("media source opened"),this.hls.trigger(O.a.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},jt.prototype.checkPendingTracks=function(){var t=this.pendingTracks,e=Object.keys(t).length;e&&(this.sourceBufferNb<=e||0===this.sourceBufferNb)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},jt.prototype.onMediaSourceClose=function(){N.b.log("media source closed")},jt.prototype.onMediaSourceEnded=function(){N.b.log("media source ended")},jt.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;N.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var r=this.parent,e=this.segments.reduce(function(t,e){return e.parent===r?t+1:t},0);this.hls.trigger(O.a.BUFFER_APPENDED,{parent:r,pending:e}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},jt.prototype.onSBUpdateError=function(t){N.b.error("sourceBuffer error:",t),this.hls.trigger(O.a.ERROR,{type:D.b.MEDIA_ERROR,details:D.a.BUFFER_APPENDING_ERROR,fatal:!1})},jt.prototype.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var r=t[e];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},jt.prototype.onBufferCodecs=function(t){if(0===Object.keys(this.sourceBuffer).length){for(var e in t)this.pendingTracks[e]=t[e];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}},jt.prototype.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;for(var n in t)if(!e[n]){var i=t[n],o=i.levelCodec||i.codec,s=i.container+";codecs="+o;N.b.log("creating sourceBuffer("+s+")");try{var a=e[n]=r.addSourceBuffer(s);a.addEventListener("updateend",this.onsbue),a.addEventListener("error",this.onsbe),this.tracks[n]={codec:o,container:i.container},i.buffer=a}catch(t){N.b.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(O.a.ERROR,{type:D.b.MEDIA_ERROR,details:D.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:s})}}this.hls.trigger(O.a.BUFFER_CREATED,{tracks:t})},jt.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},jt.prototype.onBufferAppendFail=function(t){N.b.error("sourceBuffer error:",t.event),this.hls.trigger(O.a.ERROR,{type:D.b.MEDIA_ERROR,details:D.a.BUFFER_APPENDING_ERROR,fatal:!1})},jt.prototype.onBufferEos=function(t){var e=this.sourceBuffer,r=t.type;for(var n in e)r&&n!==r||e[n].ended||(e[n].ended=!0,N.b.log(n+" sourceBuffer now EOS"));this.checkEos()},jt.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(e&&"open"===e.readyState){for(var r in t){var n=t[r];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}N.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){N.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},jt.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},jt.prototype.onLevelUpdated=function(t){var e=t.details;0<e.fragments.length&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._live=e.live,this.updateMediaElementDuration())},jt.prototype.updateMediaElementDuration=function(){var t,e=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer)if(!0===this.sourceBuffer[r].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===e.liveDurationInfinity?(N.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||t===1/0||isNaN(t))&&(N.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},jt.prototype.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,r=this.sourceBuffer;try{for(var n in r)e+=r[n].buffered.length}catch(t){N.b.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(O.a.BUFFER_FLUSHED)}},jt.prototype.doAppending=function(){var e=this.hls,t=this.sourceBuffer,r=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void N.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var n=r.shift();try{var i=t[n.type];i?i.updating?r.unshift(n):(i.ended=!1,this.parent=n.parent,i.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){N.b.error("error while trying to append buffer:"+t.message),r.unshift(n);var o={type:D.b.MEDIA_ERROR,parent:n.parent};if(22===t.code)return this.segments=[],o.details=D.a.BUFFER_FULL_ERROR,o.fatal=!1,void e.trigger(O.a.ERROR,o);if(this.appendError?this.appendError++:this.appendError=1,o.details=D.a.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return N.b.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],o.fatal=!0,void e.trigger(O.a.ERROR,o);o.fatal=!1,e.trigger(O.a.ERROR,o)}}}},jt.prototype.flushBuffer=function(t,e,r){var n,i,o,s,a,u,c=this.sourceBuffer;if(Object.keys(c).length){if(N.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var l in c)if(!r||l===r){if((n=c[l]).ended=!1,n.updating)return N.b.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<n.buffered.length;i++)if(o=n.buffered.start(i),s=n.buffered.end(i),u=-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&e===Number.POSITIVE_INFINITY?(a=t,e):(a=Math.max(o,t),Math.min(s,e)),.5<Math.min(u,s)-a)return this.flushBufferCounter++,N.b.log("flush "+l+" ["+a+","+u+"], of ["+o+","+s+"], pos:"+this.media.currentTime),n.remove(a,u),!1}catch(t){N.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else N.b.warn("abort flushing too many retries");N.b.log("buffer flushed")}return!0},jt),Gt=function(t,e,r){return e&&Ht(t.prototype,e),r&&Ht(t,r),t};function Ht(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Wt(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Wt),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,Ut.call(this,t,O.a.FPS_DROP_LEVEL_CAPPING,O.a.MEDIA_ATTACHING,O.a.MANIFEST_PARSED))}var qt,Kt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Wt,Ut=u),Wt.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},Wt.prototype.onFpsDropLevelCapping=function(t){Wt.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},Wt.prototype.onMediaAttaching=function(t){this.media=t.media instanceof HTMLVideoElement?t.media:null},Wt.prototype.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],e.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=t.levels,e.firstLevel=this.getMaxLevel(t.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},Wt.prototype.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},Wt.prototype.getMaxLevel=function(r){var n=this;if(!this.levels)return-1;var t=this.levels.filter(function(t,e){return Wt.isLevelAllowed(e,n.restrictedLevels)&&e<=r});return Wt.getMaxLevelByMediaSize(t,this.mediaWidth,this.mediaHeight)},Wt.isLevelAllowed=function(t,e){return-1===(1<arguments.length&&void 0!==e?e:[]).indexOf(t)},Wt.getMaxLevelByMediaSize=function(t,e,r){if(!t||t&&!t.length)return-1;for(var n,i,o=t.length-1,s=0;s<t.length;s+=1){var a=t[s];if((a.width>=e||a.height>=r)&&(n=a,!(i=t[s+1])||n.width!==i.width||n.height!==i.height)){o=s;break}}return o},Gt(Wt,[{key:"mediaWidth",get:function(){var t=void 0,e=this.media;return e&&(t=e.width||e.clientWidth||e.offsetWidth,t*=Wt.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t=void 0,e=this.media;return e&&(t=e.height||e.clientHeight||e.offsetHeight,t*=Wt.contentScaleFactor),t}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}]),Wt);function zt(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,zt),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,qt.call(this,t,O.a.MEDIA_ATTACHING))}var Yt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(zt,qt=u),zt.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},zt.prototype.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},zt.prototype.checkFPS=function(t,e,r){var n=performance.now();if(e){if(this.lastTime){var i=n-this.lastTime,o=r-this.lastDroppedFrames,s=e-this.lastDecodedFrames,a=1e3*o/i,u=this.hls;if(u.trigger(O.a.FPS_DROP,{currentDropped:o,currentDecoded:s,totalDroppedFrames:r}),0<a&&o>u.config.fpsDroppedMonitoringThreshold*s){var c=u.currentLevel;N.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),0<c&&(-1===u.autoLevelCapping||u.autoLevelCapping>=c)&&(c-=1,u.trigger(O.a.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,u.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=e}},zt.prototype.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},zt);function Xt(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Xt),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}var Jt,Qt=(Xt.prototype.destroy=function(){this.abort(),this.loader=null},Xt.prototype.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},Xt.prototype.load=function(t,e,r){this.context=t,this.config=e,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},Xt.prototype.loadInternal=function(){var e,r=this.context;e=this.loader=new XMLHttpRequest;var t=this.stats;t.tfirst=0,t.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,r.url)}catch(t){e.open("GET",r.url,!0),n(e,r.url)}e.readyState||e.open("GET",r.url,!0)}catch(t){return void this.callbacks.onError({code:e.status,text:t.message},r,e)}r.rangeEnd&&e.setRequestHeader("Range","bytes="+r.rangeStart+"-"+(r.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=r.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},Xt.prototype.readystatechange=function(t){var e=t.currentTarget,r=e.readyState,n=this.stats,i=this.context,o=this.config;if(!n.aborted&&2<=r)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(performance.now(),n.trequest)),4===r){var s=e.status;if(200<=s&&s<300){n.tload=Math.max(n.tfirst,performance.now());var a=void 0,u=void 0;u="arraybuffer"===i.responseType?(a=e.response).byteLength:(a=e.responseText).length,n.loaded=n.total=u;var c={url:e.responseURL,data:a};this.callbacks.onSuccess(c,n,i,e)}else n.retry>=o.maxRetry||400<=s&&s<499?(N.b.error(s+" while loading "+i.url),this.callbacks.onError({code:s,text:e.statusText},i,e)):(N.b.warn(s+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)},Xt.prototype.loadtimeout=function(){N.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},Xt.prototype.loadprogress=function(t){var e=t.currentTarget,r=this.stats;r.loaded=t.loaded,t.lengthComputable&&(r.total=t.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,e)},Xt),$t=function(t,e,r){return e&&Zt(t.prototype,e),r&&Zt(t,r),t};function Zt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function te(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,te);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,Jt.call(this,t,O.a.MANIFEST_LOADING,O.a.MANIFEST_PARSED,O.a.AUDIO_TRACK_LOADED,O.a.ERROR));return e.ticks=0,e.ontick=e.tick.bind(e),e}var ee=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(te,Jt=u),te.prototype.destroy=function(){this.cleanTimer(),u.prototype.destroy.call(this)},te.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},te.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)},te.prototype.doTick=function(){this.updateTrack(this.trackId)},te.prototype.onError=function(t){t.fatal&&t.type===D.b.NETWORK_ERROR&&this.cleanTimer()},te.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},te.prototype.onManifestParsed=function(t){var e=this,r=t.audioTracks||[],n=!1;this.tracks=r,this.hls.trigger(O.a.AUDIO_TRACKS_UPDATED,{audioTracks:r});var i=0;r.forEach(function(t){if(t.default&&!n)return e.audioTrack=i,void(n=!0);i++}),!1===n&&r.length&&(N.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},te.prototype.onAudioTrackLoaded=function(t){t.id<this.tracks.length&&(N.b.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*t.details.targetduration)),!t.details.live&&this.timer&&this.cleanTimer())},te.prototype.setAudioTrackInternal=function(t){if(0<=t&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,N.b.log("switching to audioTrack "+t);var e=this.tracks[t],r=this.hls,n=e.type,i=e.url,o={id:t,type:n,url:i};r.trigger(O.a.AUDIO_TRACK_SWITCH,o),r.trigger(O.a.AUDIO_TRACK_SWITCHING,o);var s=e.details;!i||void 0!==s&&!0!==s.live||(N.b.log("(re)loading playlist for audioTrack "+t),r.trigger(O.a.AUDIO_TRACK_LOADING,{url:i,id:t}))}},te.prototype.updateTrack=function(t){if(0<=t&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,N.b.log("updating audioTrack "+t);var e=this.tracks[t],r=e.url,n=e.details;!r||void 0!==n&&!0!==n.live||(N.b.log("(re)loading playlist for audioTrack "+t),this.hls.trigger(O.a.AUDIO_TRACK_LOADING,{url:r,id:t}))}},$t(te,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.trackId===t&&void 0!==this.tracks[t].details||this.setAudioTrackInternal(t)}}]),te),re=function(t,e,r){return e&&ne(t.prototype,e),r&&ne(t,r),t};function ne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ie,oe="STOPPED",se="STARTING",ae="IDLE",ue="PAUSED",ce="KEY_LOADING",le="FRAG_LOADING",he="FRAG_LOADING_WAITING_RETRY",de="WAITING_TRACK",fe="PARSING",pe="PARSED",ge="BUFFER_FLUSHING",ve="ENDED",ye="ERROR",me="WAITING_INIT_PTS";function _e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_e);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,ie.call(this,t,O.a.MEDIA_ATTACHED,O.a.MEDIA_DETACHING,O.a.AUDIO_TRACKS_UPDATED,O.a.AUDIO_TRACK_SWITCHING,O.a.AUDIO_TRACK_LOADED,O.a.KEY_LOADED,O.a.FRAG_LOADED,O.a.FRAG_PARSING_INIT_SEGMENT,O.a.FRAG_PARSING_DATA,O.a.FRAG_PARSED,O.a.ERROR,O.a.BUFFER_RESET,O.a.BUFFER_CREATED,O.a.BUFFER_APPENDED,O.a.BUFFER_FLUSHED,O.a.INIT_PTS_FOUND));return e.config=t.config,e.audioCodecSwap=!1,e.ticks=0,e._state=oe,e.ontick=e.tick.bind(e),e.initPTS=[],e.waitingFragment=null,e.videoTrackCC=null,e}function be(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}}var Te=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(_e,ie=u),_e.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),u.prototype.destroy.call(this),this.state=oe},_e.prototype.onInitPtsFound=function(t){var e=t.id,r=t.frag.cc,n=t.initPTS;"main"===e&&(this.initPTS[r]=n,this.videoTrackCC=r,N.b.log("InitPTS for cc:"+r+" found from video track:"+n),this.state===me&&this.tick())},_e.prototype.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),(this.fragLoadError=0)<e&&-1===t?(N.b.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=ae):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=se),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=oe},_e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=oe},_e.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)},_e.prototype.doTick=function(){var t,e,r,n=this.hls,i=n.config;switch(this.state){case ye:case ue:case ge:break;case se:this.state=de,this.loadedmetadata=!1;break;case ae:var o=this.tracks;if(!o)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var s=this.mediaBuffer?this.mediaBuffer:this.media,a=this.videoBuffer?this.videoBuffer:this.media,u=U.bufferInfo(s,t,i.maxBufferHole),c=U.bufferInfo(a,t,i.maxBufferHole),l=u.len,h=u.end,d=this.fragPrevious,f=Math.max(i.maxBufferLength,c.len),p=this.audioSwitch,g=this.trackId;if((l<f||p)&&g<o.length){if(void 0===(r=o[g].details)){this.state=de;break}if(!p&&!r.live&&d&&d.sn===r.endSN&&!u.nextStart&&(!this.media.seeking||this.media.duration-h<d.duration/2)){this.hls.trigger(O.a.BUFFER_EOS,{type:"audio"}),this.state=ve;break}var v=r.fragments,y=v.length,m=v[0].start,_=v[y-1].start+v[y-1].duration,b=void 0;if(p)if(r.live&&!r.PTSKnown)N.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),h=0;else if(h=t,r.PTSKnown&&t<m){if(!(u.end>m||u.nextStart))return;N.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=m+.05}if(r.initSegment&&!r.initSegment.data)b=r.initSegment;else if(h<=m){if(b=v[0],null!==this.videoTrackCC&&b.cc!==this.videoTrackCC&&(b=function(t,e){return j.search(t,function(t){return t.cc<e?1:t.cc>e?-1:0})}(v,this.videoTrackCC)),r.live&&b.loadIdx&&b.loadIdx===this.fragLoadIdx){var T=u.nextStart?u.nextStart:m;return N.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(T+.05)),void(this.media.currentTime=T+.05)}}else{var E=void 0,S=i.maxFragLookUpTolerance,w=d?v[d.sn-v[0].sn+1]:void 0,A=function(t){var e=Math.min(S,t.duration);return t.start+t.duration-e<=h?1:t.start-e>h&&t.start?-1:0};(E=h<_?(_-S<h&&(S=0),w&&!A(w)?w:j.search(v,A)):v[y-1])&&(m=(b=E).start,d&&b.level===d.level&&b.sn===d.sn&&(b.sn<r.endSN?(b=v[b.sn+1-r.startSN],N.b.log("SN just loaded, load next one: "+b.sn)):b=null))}if(b)if(b.decryptdata&&null!=b.decryptdata.uri&&null==b.decryptdata.key)N.b.log("Loading key for "+b.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+g),this.state=ce,n.trigger(O.a.KEY_LOADING,{frag:b});else{if(N.b.log("Loading "+b.sn+", cc: "+b.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+g+", currentTime:"+t+",bufferEnd:"+h.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,b.loadCounter){b.loadCounter++;var k=i.fragLoadingLoopThreshold;if(b.loadCounter>k&&Math.abs(this.fragLoadIdx-b.loadIdx)<k)return void n.trigger(O.a.ERROR,{type:D.b.MEDIA_ERROR,details:D.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:b})}else b.loadCounter=1;b.loadIdx=this.fragLoadIdx,this.fragCurrent=b,this.startFragRequested=!0,isNaN(b.sn)||(this.nextLoadPosition=b.start+b.duration),n.trigger(O.a.FRAG_LOADING,{frag:b}),this.state=le}}break;case de:(e=this.tracks[this.trackId])&&e.details&&(this.state=ae);break;case he:var C=performance.now(),x=this.retryDate,R=(s=this.media)&&s.seeking;(!x||x<=C||R)&&(N.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=ae);break;case me:var P=this.videoTrackCC;if(void 0===this.initPTS[P])break;var L=this.waitingFragment;if(L){var I=L.frag.cc;P!==I?(e=this.tracks[this.trackId]).details&&e.details.live&&(N.b.warn("Waiting fragment CC ("+I+") does not match video track CC ("+P+")"),this.waitingFragment=null,this.state=ae):(this.state=le,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=ae}},_e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},_e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(N.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.tracks;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},_e.prototype.onMediaSeeking=function(){this.state===ve&&(this.state=ae),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()},_e.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},_e.prototype.onAudioTracksUpdated=function(t){N.b.log("audio tracks updated"),this.tracks=t.audioTracks},_e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=ue,this.waitingFragment=null,e?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=ae,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()},_e.prototype.onAudioTrackLoaded=function(t){var e=t.details,r=t.id,n=this.tracks[r],i=e.totalduration,o=0;if(N.b.log("track "+r+" loaded ["+e.startSN+","+e.endSN+"],duration:"+i),e.live){var s=n.details;s&&0<e.fragments.length?($(s,e),o=e.fragments[0].start,e.PTSKnown?N.b.log("live audio playlist sliding:"+o.toFixed(3)):N.b.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,N.b.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(n.details=e,!this.startFragRequested){if(-1===this.startPosition){var a=e.startTimeOffset;isNaN(a)?this.startPosition=0:(N.b.log("start time offset found in playlist, adjust startPosition to "+a),this.startPosition=a)}this.nextLoadPosition=this.startPosition}this.state===de&&(this.state=ae),this.tick()},_e.prototype.onKeyLoaded=function(){this.state===ce&&(this.state=ae,this.tick())},_e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag;if(this.state===le&&e&&"audio"===r.type&&r.level===e.level&&r.sn===e.sn){var n=this.tracks[this.trackId],i=n.details,o=i.totalduration,s=e.level,a=e.sn,u=e.cc,c=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",l=this.stats=t.stats;if("initSegment"===a)this.state=ae,l.tparsed=l.tbuffered=performance.now(),i.initSegment.data=t.payload,this.hls.trigger(O.a.FRAG_BUFFERED,{stats:l,frag:e,id:"audio"}),this.tick();else{this.state=fe,this.appended=!1,this.demuxer||(this.demuxer=new X(this.hls,"audio"));var h=this.initPTS[u],d=i.initSegment?i.initSegment.data:[];i.initSegment||void 0!==h?(this.pendingBuffering=!0,N.b.log("Demuxing "+a+" of ["+i.startSN+" ,"+i.endSN+"],track "+s),this.demuxer.push(t.payload,d,c,null,e,o,!1,h)):(N.b.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+a+" of ["+i.startSN+" ,"+i.endSN+"],track "+s),this.waitingFragment=t,this.state=me)}}this.fragLoadError=0},_e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;if(e&&"audio"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===fe){var n=t.tracks,i=void 0;if(n.video&&delete n.video,i=n.audio){i.levelCodec=i.codec,i.id=t.id,this.hls.trigger(O.a.BUFFER_CODECS,n),N.b.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var o=i.initSegment;if(o){var s={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[s]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(O.a.BUFFER_APPENDING,s))}this.tick()}}},_e.prototype.onFragParsingData=function(e){var r=this,t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&"audio"===e.type&&n.sn===t.sn&&n.level===t.level&&this.state===fe){var i=this.trackId,o=this.tracks[i],s=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+t.duration,e.endDTS=e.startDTS+t.duration),N.b.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),Q(o.details,t,e.startPTS,e.endPTS);var a=this.audioSwitch,u=this.media,c=!1;if(a&&u)if(u.readyState){var l=u.currentTime;N.b.log("switching audio track : currentTime:"+l),l>=e.startPTS&&(N.b.log("switching audio track : flushing all audio"),this.state=ge,s.trigger(O.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),c=!0,this.audioSwitch=!1,s.trigger(O.a.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,s.trigger(O.a.AUDIO_TRACK_SWITCHED,{id:i});var h=this.pendingData;this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&h.push({type:e.type,data:t,parent:"audio",content:"data"})}),!c&&h.length&&(h.forEach(function(t){r.state===fe&&(r.pendingBuffering=!0,r.hls.trigger(O.a.BUFFER_APPENDING,t))}),this.pendingData=[],this.appended=!0)),this.tick()}},_e.prototype.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"audio"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===fe&&(this.stats.tparsed=performance.now(),this.state=pe,this._checkAppendedParsed())},_e.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},_e.prototype.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},_e.prototype.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==fe&&e!==pe||(this.pendingBuffering=0<t.pending,this._checkAppendedParsed())}},_e.prototype._checkAppendedParsed=function(){if(!(this.state!==pe||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,r=this.hls;if(t){this.fragPrevious=t,e.tbuffered=performance.now(),r.trigger(O.a.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;N.b.log("audio buffered : "+Z.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(O.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=ae}this.tick()}},_e.prototype.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case D.a.FRAG_LOAD_ERROR:case D.a.FRAG_LOAD_TIMEOUT:if(!t.fatal){var r=this.fragLoadError;r?r++:r=1;var n=this.config;if(r<=n.fragLoadingMaxRetry){this.fragLoadError=r,e.loadCounter=0;var i=Math.min(Math.pow(2,r-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);N.b.warn("audioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.state=he}else N.b.error("audioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=ye}break;case D.a.FRAG_LOOP_LOADING_ERROR:case D.a.AUDIO_TRACK_LOAD_ERROR:case D.a.AUDIO_TRACK_LOAD_TIMEOUT:case D.a.KEY_LOAD_ERROR:case D.a.KEY_LOAD_TIMEOUT:this.state!==ye&&(this.state=t.fatal?ye:ae,N.b.warn("audioStreamController: "+t.details+" while loading frag,switch to "+this.state+" state ..."));break;case D.a.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===fe||this.state===pe)){var o=this.mediaBuffer,s=this.media.currentTime;if(o&&U.isBuffered(o,s)&&U.isBuffered(o,s+.5)){var a=this.config;a.maxMaxBufferLength>=a.maxBufferLength&&(a.maxMaxBufferLength/=2,N.b.warn("audio:reduce max buffer length to "+a.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*a.fragLoadingLoopThreshold),this.state=ae}else N.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=ge,this.hls.trigger(O.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},_e.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(N.b.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(O.a.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=pe):(this.state=ae,this.fragPrevious=null,this.tick())},re(_e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,N.b.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}]),_e),Ee=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var b={"":!0,lr:!0,rl:!0},e={start:!0,middle:!0,end:!0,left:!0,right:!0};function T(t){return"string"==typeof t&&(!!e[t.toLowerCase()]&&t.toLowerCase())}function E(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(t,e,r){var n=this,i=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),o={};i?n=document.createElement("custom"):o.enumerable=!0,n.hasBeenReset=!1;var s="",a=!1,u=t,c=e,l=r,h=null,d="",f=!0,p="auto",g="start",v=50,y="middle",m=50,_="middle";if(Object.defineProperty(n,"id",E({},o,{get:function(){return s},set:function(t){s=""+t}})),Object.defineProperty(n,"pauseOnExit",E({},o,{get:function(){return a},set:function(t){a=!!t}})),Object.defineProperty(n,"startTime",E({},o,{get:function(){return u},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");u=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"endTime",E({},o,{get:function(){return c},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");c=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"text",E({},o,{get:function(){return l},set:function(t){l=""+t,this.hasBeenReset=!0}})),Object.defineProperty(n,"region",E({},o,{get:function(){return h},set:function(t){h=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"vertical",E({},o,{get:function(){return d},set:function(t){var e=function(t){return"string"==typeof t&&(!!b[t.toLowerCase()]&&t.toLowerCase())}(t);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"snapToLines",E({},o,{get:function(){return f},set:function(t){f=!!t,this.hasBeenReset=!0}})),Object.defineProperty(n,"line",E({},o,{get:function(){return p},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");p=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"lineAlign",E({},o,{get:function(){return g},set:function(t){var e=T(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"position",E({},o,{get:function(){return v},set:function(t){if(t<0||100<t)throw new Error("Position must be between 0 and 100.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"positionAlign",E({},o,{get:function(){return y},set:function(t){var e=T(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"size",E({},o,{get:function(){return m},set:function(t){if(t<0||100<t)throw new Error("Size must be between 0 and 100.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"align",E({},o,{get:function(){return _},set:function(t){var e=T(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");_=e,this.hasBeenReset=!0}})),n.displayState=void 0,i)return n}return t.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},t}();function Se(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new be,this.regionList=[]}function we(){this.values=Object.create(null)}function Ae(t,e,r,n){var i=n?t.split(n):[t];for(var o in i)if("string"==typeof i[o]){var s=i[o].split(r);if(2===s.length)e(s[0],s[1])}}we.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,r){for(var n=0;n<r.length;++n)if(e===r[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(e=parseFloat(e))&&e<=100)&&(this.set(t,e),!0)}};var ke=new Ee(0,0,0),Ce="middle"===ke.align?"middle":"center";function xe(e,t,s){var r=e;function n(){var t=function(t){function e(t,e,r,n){return 3600*(0|t)+60*(0|e)+(0|r)+(0|n)/1e3}var r=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?e(r[1],r[2],r[3].replace(":",""),r[4]):59<r[1]?e(r[1],r[2],0,r[4]):e(0,r[1],r[2],r[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function i(){e=e.replace(/^\s+/,"")}if(i(),t.startTime=n(),i(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),i(),t.endTime=n(),i(),function(t,e){var o=new we;Ae(t,function(t,e){switch(t){case"region":for(var r=s.length-1;0<=r;r--)if(s[r].id===e){o.set(t,s[r].region);break}break;case"vertical":o.alt(t,e,["rl","lr"]);break;case"line":var n=e.split(","),i=n[0];o.integer(t,i),o.percent(t,i)&&o.set("snapToLines",!1),o.alt(t,i,["auto"]),2===n.length&&o.alt("lineAlign",n[1],["start",Ce,"end"]);break;case"position":n=e.split(","),o.percent(t,n[0]),2===n.length&&o.alt("positionAlign",n[1],["start",Ce,"end","line-left","line-right","auto"]);break;case"size":o.percent(t,e);break;case"align":o.alt(t,e,["start",Ce,"end","left","right"])}},/:/,/\s/),e.region=o.get("region",null),e.vertical=o.get("vertical","");var r=o.get("line","auto");"auto"===r&&-1===ke.line&&(r=-1),e.line=r,e.lineAlign=o.get("lineAlign","start"),e.snapToLines=o.get("snapToLines",!0),e.size=o.get("size",100),e.align=o.get("align",Ce);var n=o.get("position","auto");"auto"===n&&50===ke.position&&(n="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=n}(e,t)}function Re(t){return t.replace(/<br(?: \/)?>/gi,"\n")}Se.prototype={parse:function(t){var n=this;function e(){var t=n.buffer,e=0;for(t=Re(t);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var r=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,n.buffer=t.substr(e),r}t&&(n.buffer+=n.decoder.decode(t,{stream:!0}));try{var r;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var i=(r=e()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var o=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:r=e(),n.state){case"HEADER":/:/.test(r)?Ae(r,function(t,e){switch(t){case"Region":console.log("parse region",e)}},/:/):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;if(n.cue=new Ee(0,0,""),n.state="CUE",-1===r.indexOf("--\x3e")){n.cue.id=r;continue}case"CUE":try{xe(r,n.cue,n.regionList)}catch(t){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var s=-1!==r.indexOf("--\x3e");if(!r||s&&(o=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r;continue;case"BADCUE":r||(n.state="ID");continue}}}catch(t){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&"HEADER"!==this.state||(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return this.onflush&&this.onflush(),this}};var Pe=Se;function Le(t,e,r,n){for(var i,o,s,a,u,c=window.VTTCue||window.TextTrackCue,l=0;l<n.rows.length;l++)if(s=!0,a=0,u="",!(i=n.rows[l]).isEmpty()){for(var h=0;h<i.chars.length;h++)i.chars[h].uchar.match(/\s/)&&s?a++:(u+=i.chars[h].uchar,s=!1);(i.cueStartTime=e)===r&&(r+=1e-4),o=new c(e,r,Re(u.trim())),16<=a?a--:a++,navigator.userAgent.match(/Firefox\//)?o.line=l+1:o.line=7<l?l-2:l+1,o.align="left",o.position=Math.max(0,Math.min(100,a/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),t.addCue(o)}}function Ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oe(t){var e=t;return Ne.hasOwnProperty(t)&&(e=Ne[t]),String.fromCharCode(e)}function De(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].toString(16));return e}var Ne={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Me={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Fe={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Be={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},je={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Ue=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Ve={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){var r=this.verboseFilter[t];this.verboseLevel>=r&&console.log(this.time+" ["+t+"] "+e)}},Ge=(He.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},He.prototype.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],r=0;r<e.length;r++){var n=e[r];t.hasOwnProperty(n)&&(this[n]=t[n])}},He.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},He.prototype.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},He.prototype.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},He.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},He);function He(t,e,r,n,i){Ie(this,He),this.foreground=t||"white",this.underline=e||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}var We=(qe.prototype.reset=function(){this.uchar=" ",this.penState.reset()},qe.prototype.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},qe.prototype.setPenState=function(t){this.penState.copy(t)},qe.prototype.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},qe.prototype.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},qe.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},qe);function qe(t,e,r,n,i,o){Ie(this,qe),this.uchar=t||" ",this.penState=new Ge(e,r,n,i,o)}var Ke=(ze.prototype.equals=function(t){for(var e=!0,r=0;r<100;r++)if(!this.chars[r].equals(t.chars[r])){e=!1;break}return e},ze.prototype.copy=function(t){for(var e=0;e<100;e++)this.chars[e].copy(t.chars[e])},ze.prototype.isEmpty=function(){for(var t=!0,e=0;e<100;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},ze.prototype.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(Ve.log("ERROR","Negative cursor position "+this.pos),this.pos=0):100<this.pos&&(Ve.log("ERROR","Too large cursor position "+this.pos),this.pos=100)},ze.prototype.moveCursor=function(t){var e=this.pos+t;if(1<t)for(var r=this.pos+1;r<e+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(e)},ze.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},ze.prototype.insertChar=function(t){144<=t&&this.backSpace();var e=Oe(t);100<=this.pos?Ve.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},ze.prototype.clearFromPos=function(t){var e;for(e=t;e<100;e++)this.chars[e].reset()},ze.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},ze.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},ze.prototype.getTextString=function(){for(var t=[],e=!0,r=0;r<100;r++){var n=this.chars[r].uchar;" "!==n&&(e=!1),t.push(n)}return e?"":t.join("")},ze.prototype.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},ze);function ze(){Ie(this,ze),this.chars=[];for(var t=0;t<100;t++)this.chars.push(new We);this.pos=0,this.currPenState=new Ge}var Ye=(Xe.prototype.reset=function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14},Xe.prototype.equals=function(t){for(var e=!0,r=0;r<15;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e},Xe.prototype.copy=function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e])},Xe.prototype.isEmpty=function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},Xe.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},Xe.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},Xe.prototype.insertChar=function(t){this.rows[this.currRow].insertChar(t)},Xe.prototype.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},Xe.prototype.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},Xe.prototype.setCursor=function(t){Ve.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},Xe.prototype.setPAC=function(t){Ve.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var r=0;r<15;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var o=i.rows[n].cueStartTime;if(o&&o<Ve.time)for(var s=0;s<this.nrRollUpRows;s++)this.rows[e-this.nrRollUpRows+s+1].copy(i.rows[n+s])}}this.currRow=e;var a=this.rows[this.currRow];if(null!==t.indent){var u=t.indent,c=Math.max(u-1,0);a.setCursor(t.indent),t.color=a.chars[c].penState.foreground}var l={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(l)},Xe.prototype.setBkgData=function(t){Ve.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},Xe.prototype.setRollUpRows=function(t){this.nrRollUpRows=t},Xe.prototype.rollUp=function(){if(null!==this.nrRollUpRows){Ve.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),Ve.log("INFO","Rolling up")}else Ve.log("DEBUG","roll_up but nrRollUpRows not set yet")},Xe.prototype.getDisplayText=function(t){t=t||!1;for(var e=[],r="",n=-1,i=0;i<15;i++){var o=this.rows[i].getTextString();o&&(n=i+1,t?e.push("Row "+n+": '"+o+"'"):e.push(o.trim()))}return 0<e.length&&(r=t?"["+e.join(" | ")+"]":e.join("\n")),r},Xe.prototype.getTextAndFormat=function(){return this.rows},Xe);function Xe(){Ie(this,Xe),this.rows=[];for(var t=0;t<15;t++)this.rows.push(new Ke);this.currRow=14,this.nrRollUpRows=null,this.reset()}var Je=(Qe.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},Qe.prototype.getHandler=function(){return this.outputFilter},Qe.prototype.setHandler=function(t){this.outputFilter=t},Qe.prototype.setPAC=function(t){this.writeScreen.setPAC(t)},Qe.prototype.setBkgData=function(t){this.writeScreen.setBkgData(t)},Qe.prototype.setMode=function(t){t!==this.mode&&(this.mode=t,Ve.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},Qe.prototype.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";Ve.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(Ve.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},Qe.prototype.ccRCL=function(){Ve.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},Qe.prototype.ccBS=function(){Ve.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},Qe.prototype.ccAOF=function(){},Qe.prototype.ccAON=function(){},Qe.prototype.ccDER=function(){Ve.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},Qe.prototype.ccRU=function(t){Ve.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},Qe.prototype.ccFON=function(){Ve.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},Qe.prototype.ccRDC=function(){Ve.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},Qe.prototype.ccTR=function(){Ve.log("INFO","TR"),this.setMode("MODE_TEXT")},Qe.prototype.ccRTD=function(){Ve.log("INFO","RTD"),this.setMode("MODE_TEXT")},Qe.prototype.ccEDM=function(){Ve.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},Qe.prototype.ccCR=function(){Ve.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},Qe.prototype.ccENM=function(){Ve.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},Qe.prototype.ccEOC=function(){if(Ve.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,Ve.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},Qe.prototype.ccTO=function(t){Ve.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},Qe.prototype.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=46<=t,e.italics)e.foreground="white";else{var r=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}Ve.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},Qe.prototype.outputDataUpdate=function(t){var e=0<arguments.length&&void 0!==t&&t,r=Ve.time;null!==r&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,r,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:r):this.cueStartTime=r,this.lastOutputScreen.copy(this.displayedMemory))},Qe.prototype.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},Qe);function Qe(t,e){Ie(this,Qe),this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new Ye,this.nonDisplayedMemory=new Ye,this.lastOutputScreen=new Ye,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}function $e(t,e,r){Ie(this,$e),this.field=t||1,this.outputs=[e,r],this.channels=[new Je(1,e),new Je(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var Ze=($e.prototype.getHandler=function(t){return this.channels[t].getHandler()},$e.prototype.setHandler=function(t,e){this.channels[t].setHandler(e)},$e.prototype.addData=function(t,e){var r,n,i,o=!1;this.lastTime=t,Ve.setTime(t);for(var s=0;s<e.length;s+=2)n=127&e[s],i=127&e[s+1],0!=n||0!=i?(Ve.log("DATA","["+De([e[s],e[s+1]])+"] -> ("+De([n,i])+")"),(r=(r=(r=(r=this.parseCmd(n,i))||this.parseMidrow(n,i))||this.parsePAC(n,i))||this.parseBackgroundAttributes(n,i))||(o=this.parseChars(n,i))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(o):Ve.log("WARNING","No channel found yet. TEXT-MODE?")),r?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,Ve.log("WARNING","Couldn't parse cleaned data "+De([n,i])+" orig: "+De([e[s],e[s+1]])))):this.dataCounters.padding+=2},$e.prototype.parseCmd=function(t,e){var r=null;if(!((20===t||28===t)&&32<=e&&e<=47||(23===t||31===t)&&33<=e&&e<=35))return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,Ve.log("DEBUG","Repeated command ("+De([t,e])+") is dropped"),!0;r=20===t||23===t?1:2;var n=this.channels[r-1];return 20===t||28===t?32===e?n.ccRCL():33===e?n.ccBS():34===e?n.ccAOF():35===e?n.ccAON():36===e?n.ccDER():37===e?n.ccRU(2):38===e?n.ccRU(3):39===e?n.ccRU(4):40===e?n.ccFON():41===e?n.ccRDC():42===e?n.ccTR():43===e?n.ccRTD():44===e?n.ccEDM():45===e?n.ccCR():46===e?n.ccENM():47===e&&n.ccEOC():n.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=r,!0},$e.prototype.parseMidrow=function(t,e){var r=null;return(17===t||25===t)&&32<=e&&e<=47&&((r=17===t?1:2)!==this.currChNr?(Ve.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[r-1].ccMIDROW(e),Ve.log("DEBUG","MIDROW ("+De([t,e])+")"),!0))},$e.prototype.parsePAC=function(t,e){var r,n=null;if(!((17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127||(16===t||24===t)&&64<=e&&e<=95))return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,!(this.lastCmdB=null);r=t<=23?1:2,n=64<=e&&e<=95?1==r?Me[t]:Be[t]:1==r?Fe[t]:je[t];var i=this.interpretPAC(n,e);return this.channels[r-1].setPAC(i),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=r,!0},$e.prototype.interpretPAC=function(t,e){var r=e,n={color:null,italics:!1,indent:null,underline:!1,row:t};return r=95<e?e-96:e-64,n.underline=1==(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},$e.prototype.parseChars=function(t,e){var r=null,n=null,i=null;if(17<=(i=25<=t?(r=2,t-8):(r=1,t))&&i<=19){var o=e;o=17===i?e+80:18===i?e+112:e+144,Ve.log("INFO","Special char '"+Oe(o)+"' in channel "+r),n=[o]}else 32<=t&&t<=127&&(n=0===e?[t]:[t,e]);if(n){var s=De(n);Ve.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n},$e.prototype.parseBackgroundAttributes=function(t,e){var r,n,i;return((16===t||24===t)&&32<=e&&e<=47||(23===t||31===t)&&45<=e&&e<=47)&&(r={},16===t||24===t?(n=Math.floor((e-32)/2),r.background=Ue[n],e%2==1&&(r.background=r.background+"_semi")):45===e?r.background="transparent":(r.foreground="black",47===e&&(r.underline=!0)),i=t<24?1:2,this.channels[i-1].setBkgData(r),this.lastCmdA=null,!(this.lastCmdB=null))},$e.prototype.reset=function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},$e.prototype.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)},$e);function tr(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,tr),this.timelineController=t,this.track=e,this.startTime=null,this.endTime=null,this.screen=null}function er(t,e,r){return t.substr(r||0,e.length)===e}function rr(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()}var nr,ir=(tr.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues("textTrack"+this.track,this.startTime,this.endTime,this.screen),this.startTime=null)},tr.prototype.newCue=function(t,e,r){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=r,this.timelineController.createCaptionsTrack(this.track)},tr),or={parse:function(t,r,n,i,e,o){var s=Object(At.b)(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),a="00:00.000",u=0,c=0,l=0,h=[],d=void 0,f=!0,p=new Pe;p.oncue=function(t){var e=n[i],r=n.ccOffset;e&&e.new&&(void 0!==c?r=n.ccOffset=e.start:function(t,e,r){var n=t[e],i=t[n.prevCC];if(!i||!i.new&&n.new)return t.ccOffset=t.presentationOffset=n.start,n.new=!1;for(;i&&i.new;)t.ccOffset+=n.start-i.start,n.new=!1,i=t[(n=i).prevCC];t.presentationOffset=r}(n,i,l)),l&&(r=l+n.ccOffset-n.presentationOffset),t.startTime+=r-c,t.endTime+=r-c,t.id=rr(t.startTime.toString())+rr(t.endTime.toString())+rr(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),0<t.endTime&&h.push(t)},p.onparsingerror=function(t){d=t},p.onflush=function(){d&&o?o(d):e(h)},s.forEach(function(e){if(f){if(er(e,"X-TIMESTAMP-MAP=")){f=!1,e.substr(16).split(",").forEach(function(t){er(t,"LOCAL:")?a=t.substr(6):er(t,"MPEGTS:")&&(u=parseInt(t.substr(7)))});try{u-=r=r<0?r+8589934592:r,c=function(t){var e=parseInt(t.substr(-3)),r=parseInt(t.substr(-6,2)),n=parseInt(t.substr(-9,2)),i=9<t.length?parseInt(t.substr(0,t.indexOf(":"))):0;return isNaN(e)||isNaN(r)||isNaN(n)||isNaN(i)?-1:(e+=1e3*r,e+=6e4*n,e+=36e5*i)}(a)/1e3,l=u/9e4,-1===c&&(d=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){d=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(f=!1)}p.parse(e+"\n")}),p.flush()}};function sr(t){if(t&&t.cues)for(;0<t.cues.length;)t.removeCue(t.cues[0])}function ar(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ar);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,nr.call(this,t,O.a.MEDIA_ATTACHING,O.a.MEDIA_DETACHING,O.a.FRAG_PARSING_USERDATA,O.a.FRAG_DECRYPTED,O.a.MANIFEST_LOADING,O.a.MANIFEST_LOADED,O.a.FRAG_LOADED,O.a.LEVEL_SWITCHING,O.a.INIT_PTS_FOUND));if(e.hls=t,e.config=t.config,e.enabled=!0,e.Cues=t.config.cueHandler,e.textTracks=[],e.tracks=[],e.unparsedVttFrags=[],e.initPTS=void 0,e.cueRanges=[],e.config.enableCEA708Captions){var r=new ir(e,1),n=new ir(e,2);e.cea608Parser=new Ze(0,r,n)}return e}var ur,cr=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ar,nr=u),ar.prototype.addCues=function(t,e,r,n){for(var i,o,s,a,u=this.cueRanges,c=!1,l=u.length;l--;){var h=u[l],d=(i=h[0],o=h[1],s=e,a=r,Math.min(o,a)-Math.max(i,s));if(0<=d&&(h[0]=Math.min(h[0],e),h[1]=Math.max(h[1],r),c=!0,.5<d/(r-e)))return}c||u.push([e,r]),this.Cues.newCue(this[t],e,r,n)},ar.prototype.onInitPtsFound=function(t){var e=this;void 0===this.initPTS&&(this.initPTS=t.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(t){e.onFragLoaded(t)}),this.unparsedVttFrags=[])},ar.prototype.getExistingTrack=function(t){var e=this.media;if(e)for(var r=0;r<e.textTracks.length;r++){var n=e.textTracks[r];if(!0===n["textTrack"+t])return n}return null},ar.prototype.sendAddTrackEvent=function(t,e){var r=null;try{r=new window.Event("addtrack")}catch(t){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)},ar.prototype.createCaptionsTrack=function(t){var e="textTrack"+t;if(!this[e]){var r=this.getExistingTrack(t);if(r)this[e]=r,sr(this[e]),this.sendAddTrackEvent(this[e],this.media);else{var n=this.createTextTrack("captions",this.config["captionsTextTrack"+t+"Label"],this.config.captionsTextTrack1LanguageCode);n&&(n[e]=!0,this[e]=n)}}},ar.prototype.createTextTrack=function(t,e,r){var n=this.media;if(n)return n.addTextTrack(t,e,r)},ar.prototype.destroy=function(){u.prototype.destroy.call(this)},ar.prototype.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},ar.prototype.onMediaDetaching=function(){sr(this.textTrack1),sr(this.textTrack2)},ar.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},ar.prototype._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var r=0;r<e.length;r++)sr(e[r])}},ar.prototype.onManifestLoaded=function(t){var i=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=t.subtitles||[];var o=this.media?this.media.textTracks:[];this.tracks.forEach(function(t,e){var r=void 0;if(e<o.length){var n=o[e];!function(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}(n,t)||(r=n)}(r=r||i.createTextTrack("subtitles",t.name,t.lang)).mode=t.default?"showing":"hidden",i.textTracks.push(r)})}},ar.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},ar.prototype.onFragLoaded=function(t){var e=t.frag,r=t.payload;if("main"===e.type){var n=e.sn;if(n!==this.lastSn+1){var i=this.cea608Parser;i&&i.reset()}this.lastSn=n}else if("subtitle"===e.type)if(r.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);var o=e.decryptdata;null!=o&&null!=o.key&&"AES-128"===o.method||this._parseVTTs(e,r)}else this.hls.trigger(O.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},ar.prototype._parseVTTs=function(e,t){var r=this.vttCCs;r[e.cc]||(r[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var i=this.textTracks,o=this.hls;or.parse(t,this.initPTS,r,e.cc,function(t){var n=i[e.trackId];t.forEach(function(e){if(!n.cues.getCueById(e.id))try{n.addCue(e)}catch(t){var r=new window.TextTrackCue(e.startTime,e.endTime,e.text);r.id=e.id,n.addCue(r)}}),o.trigger(O.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(t){N.b.log("Failed to parse VTT cue: "+t),o.trigger(O.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},ar.prototype.onFragDecrypted=function(t){var e=t.payload,r=t.frag;if("subtitle"===r.type){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);this._parseVTTs(r,e)}},ar.prototype.onFragParsingUserdata=function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var r=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,r)}},ar.prototype.extractCea608Data=function(t){for(var e,r,n,i=31&t[0],o=2,s=[],a=0;a<i;a++)e=t[o++],r=127&t[o++],n=127&t[o++],0==r&&0==n||0!=(4&e)&&0==(3&e)&&(s.push(r),s.push(n));return s},ar),lr=function(t,e,r){return e&&hr(t.prototype,e),r&&hr(t,r),t};function hr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dr(t){for(var e=[],r=0;r<t.length;r++)"subtitles"===t[r].kind&&e.push(t[r]);return e}function fr(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,fr);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,ur.call(this,t,O.a.MEDIA_ATTACHED,O.a.MEDIA_DETACHING,O.a.MANIFEST_LOADING,O.a.MANIFEST_LOADED,O.a.SUBTITLE_TRACK_LOADED));return e.tracks=[],e.trackId=-1,e.media=void 0,e.subtitleDisplay=!1,e}var pr=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(fr,ur=u),fr.prototype._onTextTracksChanged=function(){if(this.media){for(var t=-1,e=dr(this.media.textTracks),r=0;r<e.length;r++)"showing"===e[r].mode&&(t=r);this.subtitleTrack=t}},fr.prototype.destroy=function(){u.prototype.destroy.call(this)},fr.prototype.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(void 0!==this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){e.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},fr.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},fr.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},fr.prototype.onManifestLoaded=function(t){var e=this,r=t.subtitles||[];this.tracks=r,this.trackId=-1,this.hls.trigger(O.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)})},fr.prototype.onTick=function(){var t=this.trackId,e=this.tracks[t];if(e){var r=e.details;void 0!==r&&!0!==r.live||(N.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(O.a.SUBTITLE_TRACK_LOADING,{url:e.url,id:t}))}},fr.prototype.onSubtitleTrackLoaded=function(t){var e=this;t.id<this.tracks.length&&(N.b.log("subtitle track "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(function(){e.onTick()},1e3*t.details.targetduration,this)),!t.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},fr.prototype.setSubtitleTrackInternal=function(t){if(!(t<-1||t>=this.tracks.length)){this.timer&&(clearInterval(this.timer),this.timer=null);var e=dr(this.media.textTracks);if(-1!==this.trackId&&this.subtitleDisplay&&(e[this.trackId].mode="hidden"),this.trackId=t,N.b.log("switching to subtitle track "+t),this.hls.trigger(O.a.SUBTITLE_TRACK_SWITCH,{id:t}),-1!==t){var r=this.tracks[t];this.subtitleDisplay&&(e[t].mode="showing");var n=r.details;void 0!==n&&!0!==n.live||(N.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(O.a.SUBTITLE_TRACK_LOADING,{url:r.url,id:t}))}}},lr(fr,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&this.setSubtitleTrackInternal(t)}}]),fr),gr=r(4);var vr,yr="STOPPED",mr="IDLE",_r="KEY_LOADING",br="FRAG_LOADING";function Tr(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Tr);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,vr.call(this,t,O.a.MEDIA_ATTACHED,O.a.ERROR,O.a.KEY_LOADED,O.a.FRAG_LOADED,O.a.SUBTITLE_TRACKS_UPDATED,O.a.SUBTITLE_TRACK_SWITCH,O.a.SUBTITLE_TRACK_LOADED,O.a.SUBTITLE_FRAG_PROCESSED));return e.config=t.config,e.vttFragSNsProcessed={},e.vttFragQueues=void 0,e.currentlyProcessing=null,e.state=yr,e.currentTrackId=-1,e.ticks=0,e.decrypter=new gr.a(t.observer,t.config),e}var Er=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Tr,vr=u),Tr.prototype.destroy=function(){u.prototype.destroy.call(this),this.state=yr},Tr.prototype.clearVttFragQueues=function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})},Tr.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&-1<this.currentTrackId&&this.vttFragQueues[this.currentTrackId].length){var t=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=t,this.hls.trigger(O.a.FRAG_LOADING,{frag:t}),this.state=br}},Tr.prototype.onSubtitleFragProcessed=function(t){t.success&&this.vttFragSNsProcessed[t.frag.trackId].push(t.frag.sn),this.currentlyProcessing=null,this.state=mr,this.nextFrag()},Tr.prototype.onMediaAttached=function(){this.state=mr},Tr.prototype.onError=function(t){var e=t.frag;e&&"subtitle"!==e.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},Tr.prototype.tick=function(){var t=this;this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(function(){t.tick()},1),this.ticks=0)},Tr.prototype.doTick=function(){var e=this;switch(this.state){case mr:var t,r=this.tracks,n=this.currentTrackId,i=this.vttFragSNsProcessed[n],o=this.vttFragQueues[n],s=this.currentlyProcessing?this.currentlyProcessing.sn:-1;if(!r)break;if(n<r.length&&(t=r[n].details),void 0===t)break;t.fragments.forEach(function(t){(function(t){return-1<i.indexOf(t.sn)})(t)||t.sn===s||function(e){return o.some(function(t){return t.sn===e.sn})}(t)||(t.decryptdata&&null!=t.decryptdata.uri&&null==t.decryptdata.key?(N.b.log("Loading key for "+t.sn),e.state=_r,e.hls.trigger(O.a.KEY_LOADING,{frag:t})):(t.trackId=n,o.push(t),e.nextFrag()))})}},Tr.prototype.onSubtitleTracksUpdated=function(t){var e=this;N.b.log("subtitle tracks updated"),this.tracks=t.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(t){e.vttFragSNsProcessed[t.id]=[]})},Tr.prototype.onSubtitleTrackSwitch=function(t){this.currentTrackId=t.id,this.clearVttFragQueues()},Tr.prototype.onSubtitleTrackLoaded=function(){this.tick()},Tr.prototype.onKeyLoaded=function(){this.state===_r&&(this.state=mr,this.tick())},Tr.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag.decryptdata,n=t.frag,i=this.hls;if(this.state===br&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&0<t.payload.byteLength&&null!=r&&null!=r.key&&"AES-128"===r.method){var o;try{o=performance.now()}catch(t){o=Date.now()}this.decrypter.decrypt(t.payload,r.key.buffer,r.iv.buffer,function(t){var e;try{e=performance.now()}catch(t){e=Date.now()}i.trigger(O.a.FRAG_DECRYPTED,{frag:n,payload:t,stats:{tstart:o,tdecrypt:e}})})}},Tr),Sr={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Qt,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:Mt,bufferController:Vt,capLevelController:Kt,fpsController:Yt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0};Sr.subtitleStreamController=Er,Sr.subtitleTrackController=pr,Sr.timelineController=cr,Sr.cueHandler=n,Sr.enableCEA708Captions=!0,Sr.enableWebVTT=!0,Sr.captionsTextTrack1Label="English",Sr.captionsTextTrack1LanguageCode="en",Sr.captionsTextTrack2Label="Spanish",Sr.captionsTextTrack2LanguageCode="es",Sr.audioStreamController=Te,Sr.audioTrackController=ee;var wr=function(t,e,r){return e&&Ar(t.prototype,e),r&&Ar(t,r),t};function Ar(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var kr=(Cr.isSupported=function(){return function(){var t=K(),e=window.SourceBuffer||window.WebKitSourceBuffer,r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!r&&!!n}()},wr(Cr,null,[{key:"version",get:function(){return"0.8.9"}},{key:"Events",get:function(){return O.a}},{key:"ErrorTypes",get:function(){return D.b}},{key:"ErrorDetails",get:function(){return D.a}},{key:"DefaultConfig",get:function(){return Cr.defaultConfig?Cr.defaultConfig:Sr},set:function(t){Cr.defaultConfig=t}}]),Cr.prototype.destroy=function(){N.b.log("destroy"),this.trigger(O.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},Cr.prototype.attachMedia=function(t){N.b.log("attachMedia"),this.media=t,this.trigger(O.a.MEDIA_ATTACHING,{media:t})},Cr.prototype.detachMedia=function(){N.b.log("detachMedia"),this.trigger(O.a.MEDIA_DETACHING),this.media=null},Cr.prototype.loadSource=function(t){t=o.a.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),N.b.log("loadSource:"+t),this.url=t,this.trigger(O.a.MANIFEST_LOADING,{url:t})},Cr.prototype.startLoad=function(t){var e=0<arguments.length&&void 0!==t?t:-1;N.b.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},Cr.prototype.stopLoad=function(){N.b.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},Cr.prototype.swapAudioCodec=function(){N.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},Cr.prototype.recoverMediaError=function(){N.b.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},wr(Cr,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){N.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){N.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){N.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){N.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){N.b.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){N.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,e=this.config.minAutoBitrate,r=t?t.length:0,n=0;n<r;n++)if(e<(t[n].realBitrate?Math.max(t[n].realBitrate,t[n].bitrate):t[n].bitrate))return n;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),Cr);function Cr(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Cr);var r=Cr.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var n in r)n in t||(t[n]=r[n]);if(void 0!==t.liveMaxLatencyDurationCount&&t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(t.liveMaxLatencyDuration<=t.liveSyncDuration||void 0===t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(N.a)(t.debug),this.config=t,this._autoLevelCapping=-1;var i=this.observer=new H.a;i.trigger=function(t){for(var e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];i.emit.apply(i,[t,t].concat(r))},i.off=function(t){for(var e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];i.removeListener.apply(i,[t].concat(r))},this.on=i.on.bind(i),this.off=i.off.bind(i),this.trigger=i.trigger.bind(i);var o=this.abrController=new t.abrController(this),s=new t.bufferController(this),a=new t.capLevelController(this),u=new t.fpsController(this),c=new P(this),l=new M(this),h=new B(this),d=new Ct(this),f=[this.levelController=new wt(this),this.streamController=new _t(this)],p=t.audioStreamController;p&&f.push(new p(this)),this.networkControllers=f;var g=[c,l,h,o,s,a,u,d];if(p=t.audioTrackController){var v=new p(this);this.audioTrackController=v,g.push(v)}if(p=t.subtitleTrackController){var y=new p(this);this.subtitleTrackController=y,g.push(y)}[t.subtitleStreamController,t.timelineController].forEach(function(t){t&&g.push(new t(e))}),this.coreComponents=g}e.default=kr},function(t,e,u){function c(t){var e=[],r=t.toString(),n=r.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!n)return e;for(var i,o=n[1],s=new RegExp("(\\\\n|\\W)"+function(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}(o)+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\w|/|@]+).*?\\)","g");i=s.exec(r);)e.push(i[3]);return e}t.exports=function(t,e){e=e||{};var r=u.m,n=e.all?Object.keys(r):function(t,e){for(var r=[e],n=[],i={};r.length;){var o=r.pop();if(!i[o]&&t[o]){i[o]=!0,n.push(o);var s=c(t[o]);r=r.concat(s)}}return n}(r,t),i="("+function(r){var n={};function i(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=r,i.c=n,i.i=function(t){return t},i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var t=i(i.s=ENTRY_MODULE);return t.default||t}.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+n.map(function(t){return JSON.stringify(t)+": "+r[t].toString()}).join(",")+"})(self);",o=new window.Blob([i],{type:"text/javascript"});if(e.bare)return o;var s=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(o),a=new window.Worker(s);return a.objectURL=s,a}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r(7),a=r(1),u=r(0),n=r(5),c=r.n(n);e.default=function(i){var o=new c.a;o.trigger=function(t){for(var e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];o.emit.apply(o,[t,t].concat(r))},o.off=function(t){for(var e=arguments.length,r=Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];o.removeListener.apply(o,[t].concat(r))};function n(t,e){i.postMessage({event:t,data:e})}i.addEventListener("message",function(t){var e=t.data;switch(e.cmd){case"init":var r=JSON.parse(e.config);i.demuxer=new s.a(o,e.typeSupported,r,e.vendor);try{Object(u.a)(!0===r.debug)}catch(t){console.warn("demuxerWorker: unable to enable logs")}n("init",null);break;case"demux":i.demuxer.push(e.data,e.decryptdata,e.initSegment,e.audioCodec,e.videoCodec,e.timeOffset,e.discontinuity,e.trackSwitch,e.contiguous,e.duration,e.accurateTimeOffset,e.defaultInitPTS)}}),o.on(a.a.FRAG_DECRYPTED,n),o.on(a.a.FRAG_PARSING_INIT_SEGMENT,n),o.on(a.a.FRAG_PARSED,n),o.on(a.a.ERROR,n),o.on(a.a.FRAG_PARSING_METADATA,n),o.on(a.a.FRAG_PARSING_USERDATA,n),o.on(a.a.INIT_PTS_FOUND,n),o.on(a.a.FRAG_PARSING_DATA,function(t,e){var r=[],n={event:t,data:e};e.data1&&(n.data1=e.data1.buffer,r.push(e.data1.buffer),delete e.data1),e.data2&&(n.data2=e.data2.buffer,r.push(e.data2.buffer),delete e.data2),i.postMessage(n,r)})}}],n.c=i,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=8)).default;function n(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var r,i},"object"==typeof r&&"object"==typeof e?e.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof r?r.Hls=i():n.Hls=i()},{}],13:[function(t,e,r){"use strict";function n(t){try{var e=i.call(t);return o.test(e)}catch(t){return!1}}var i=Function.prototype.toString,o=/^\s*class\b/,s=Object.prototype.toString,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(a)return function(t){try{return!n(t)&&(i.call(t),!0)}catch(t){return!1}}(t);if(n(t))return!1;var e=s.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},{}],14:[function(t,e,r){e.exports=function(t){var e=n.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var n=Object.prototype.toString},{}],15:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.calendarMonthsBetween=r.getUserSegments=r.getUserActions=r.getPreferredTags=r.getPreferredResourceTypes=r.getPreferredAuthors=r.getAdParams=r.fetchUserInfo=r.ByzantiumCore=void 0;var s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t};function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o,a=t("./util/makeUrl"),u=(o=a)&&o.__esModule?o:{default:o},c=t("./util/params"),l=t("./util/domainMapping");var h="userInfo",d="pageAdCodes",f=(n(p,[{key:"_withUserInfo",value:function(r,t){var n=1<arguments.length&&void 0!==t?t:{};return this._bridge.getItem(h).then(function(t){var e=Object.assign({},n,{userInfo:t});return r(e)})}},{key:"_refreshUserInfo",value:function(o){var s=this,a=!1;if("function"==typeof this._bridge.needsPersonalizationRefresh)return this._bridge.needsPersonalizationRefresh().then(function(t){return t?Promise.all([s._bridge.getCurrentResource(),s._bridge.getSessionInfo(),s._bridge.getPersonalizationAllowed(),s._bridge.getContentTags(),s._bridge.getReferrer()]).then(function(t){a=t[2];var e=t[0],r=e.id,n=e.contentType,i=a?t[1]:{};return s.adParams.contentTags=t[3],s.adParams.referrer=t[4],s.fetchUserInfo({baseUrl:o,sessionInfo:i,id:r,contentType:n})}).then(function(t){s.adParams.userInfo=a?t:{}}).catch(function(t){console.error(t)}):Promise.resolve()})}},{key:"fetchUserInfo",value:function(t){var e=this;return v(t).then(function(t){return e._bridge.setItem(h,t).then(function(){return t})})}},{key:"getAdParams",value:function(t){return this._withUserInfo(y,t)}},{key:"getTags",value:function(t){var e=y({userInfo:this.adParams.userInfo,referrer:this.adParams.referrer,contentTags:this.adParams.contentTags});return Object.assign({},t,e)}},{key:"getTagsWithDefaults",value:function(t){return this.getTags(t)}},{key:"getTagsWithContentInfo",value:function(t,e){var r=0<arguments.length&&void 0!==t?t:{},n=1<arguments.length&&void 0!==e?e:{},i=y({userInfo:this.adParams.userInfo,referrer:this.adParams.referrer,contentTags:n.contentTags||[]});return Object.assign({},r,i)}},{key:"injectIFrame",value:function(t,e,r){"function"==typeof this._bridge.injectIFrame&&this._bridge.injectIFrame(t,e,r)}},{key:"getPreferredTags",value:function(t){return this._withUserInfo(m,t)}},{key:"getPreferredResourceTypes",value:function(){return this._withUserInfo(_)}},{key:"getPreferredAuthors",value:function(){return this._withUserInfo(b)}},{key:"getUserSegments",value:function(){return this._withUserInfo(T)}},{key:"getUserActions",value:function(){return this._withUserInfo(E)}},{key:"getUserMetadata",value:function(){return this._bridge.getItem(h).then(function(t){var e=(t||{}).Metadata,r=void 0===e?{}:e,n=function(t){var e=new Date,r=t&&t.firstVisitedDate?g(e,t.firstVisitedDate):1;return Object.assign({},t,{calendarMonthSinceFirstVisit:r})}(r.attribute);return{Metadata:Object.assign({},r,{attribute:n})}})}},{key:"getUserInfo",value:function(){return this.adParams.userInfo}},{key:"getContextMetadata",value:function(){return"function"==typeof this._bridge.getReferrer?this._bridge.getReferrer().then(function(t){return{Metadata:{attribute:{domainCategory:(0,l.getDomainCategory)(t)}}}}):Promise.resolve({})}},{key:"setAdCodes",value:function(t){var e=0<arguments.length&&void 0!==t?t:[];return this._bridge.setItem(d,e)}},{key:"getSTRValues",value:function(){var r=this,i=void 0,o=void 0,t=[this._bridge.getItem(d),this._bridge.geoIp(),this._bridge.getItem("strFile")];return Promise.all(t).then(function(t){if(o=t[0]||[],i=t[1]||"",t[2]){var e=t[2].timestamp;return 288e5<new Date-e&&r._backgroundSTRFileRefresh(r.strFileUrl),Promise.resolve(t[2])}return r._refreshSTRFile(r.strFileUrl)}).then(function(r){var n=0;return o.forEach(function(t){var e=r.fileJSON[t][i].v1;n=Math.max(e[0]/e[1],n)}),{max:n}})}},{key:"_backgroundSTRFileRefresh",value:function(t){return this._fetchAndSetSTRFile(t)}},{key:"_refreshSTRFile",value:function(t){return this._fetchAndSetSTRFile(t).then(function(){return strFileInfo})}},{key:"_fetchAndSetSTRFile",value:function(t){var e=this,r={};return fetch(t).then(function(t){return r={timestamp:new Date,strJSON:t.json()},e._bridge.setItem("strFile",{timestamp:new Date,strJSON:t.json()})}).then(function(){return Promise.resolve(r)}).catch(function(t){console.error(t)})}}]),p);function p(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=e.baseUrl,n=void 0===r?"https://personalization.bloomberg.com/user/info":r,i=e.strFileUrl,o=void 0===i?"https://assets.bwbx.io/mediaservices/superelastic/str.json":i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),this.getTags=this.getTags.bind(this),this.getUserInfo=this.getUserInfo.bind(this),this.getTagsWithContentInfo=this.getTagsWithContentInfo.bind(this),this.getTagsWithDefaults=this.getTagsWithDefaults.bind(this),this.injectIFrame=this.injectIFrame.bind(this),this.setAdCodes=this.setAdCodes.bind(this),this.getSTRValues=this.getSTRValues.bind(this),this._bridge=t,this.strFileUrl=o,this.adParams={referrer:"",contentTags:[],userInfo:{}},this._refreshUserInfo(n)}function g(t,e){var r=e.split("-"),n=s(r,2),i=n[0],o=n[1];return 12*(t.getFullYear()-parseInt(i))+(t.getMonth()+1-parseInt(o))+1}function v(t){var e=t.fetchApi;return(void 0===e?fetch:e)((0,u.default)(t)).then(function(t){return t.json()})}function y(t){var e=t.userInfo,r=t.contentTags,n=t.referrer;return(0,c.makeParams)({userInfo:e,contextInfo:{referrer:n,contentTags:r}})}function m(t){var e=t.userInfo,r=t.contentTags;return(0,c.makeTypeMaps)({userInfo:e,contextInfo:{contentTags:r}}).preferredTagsTypeMap}function _(t){var e=t.userInfo;return(0,c.makeTypeMaps)({userInfo:e}).preferredResourceTypesMap}function b(t){var e=t.userInfo;return(0,c.makeTypeMaps)({userInfo:e}).preferredAuthorsMap}function T(t){return S({userInfo:t.userInfo,targetField:"segment",outputField:"userSegments"})}function E(t){return S({userInfo:t.userInfo,targetField:"action",outputField:"userActions"})}function S(t){var e=t.userInfo,r=t.targetField,n=t.outputField,i=(e||{}).Metadata,o=(i=void 0===i?{}:i)[r];return function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}({},n,(void 0===o?[]:o).map(function(t){return t[r+"Id"]}))}r.ByzantiumCore=f,r.fetchUserInfo=v,r.getAdParams=y,r.getPreferredAuthors=b,r.getPreferredResourceTypes=_,r.getPreferredTags=m,r.getUserActions=E,r.getUserSegments=T,r.calendarMonthsBetween=g},{"./util/domainMapping":18,"./util/makeUrl":19,"./util/params":20}],16:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parsePreferenceAuthors=r.getTopKAuthors=void 0;var a=i(t("./authorsConfig")),n=t("./params"),u=i(t("./preferences"));function i(t){return t&&t.__esModule?t:{default:t}}r.getTopKAuthors=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a.default.targetingParamLimit;return(0,n.getTopK)(t,e)},r.parsePreferenceAuthors=function(t){var r=[],e=t.Author,n=(e=void 0===e?{}:e).Confidence,i=void 0===n?0:n,o=e.Preferences,s=void 0===o?[]:o;if(i<a.default.confidenceThreshold)return r;return Array.isArray(s)&&s.forEach(function(t){var e=(0,u.default)(t,i);e&&r.push(e)}),r}},{"./authorsConfig":17,"./params":20,"./preferences":22}],17:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={targetingParamLimit:20,confidenceThreshold:0},e.exports=r.default},{}],18:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i=t("url"),o=(n=i)&&n.__esModule?n:{default:n};function s(t){return t.filter(function(t){return t}).join(".")}var a=["com","co.jp","co.uk","es","ca","de","it","fr","com.au","com.br","com.gr","co.in","co.id","com.mx","dk","com.ar","ch","cl","at","co.kr","ie","com.co","pl","pt","com.pk"].map(function(t){return"www.google."+t}),u=["","us","ca","uk","in","au","nl","nz","sg","de","es","ln","fr"],c=u.map(function(t){return s([t,"search.yahoo.com"])}),l=u.map(function(t){return s([t,"video.search.yahoo.com"])}),h={"drudgereport.com":"DRUDGEREPORT","www.drudgereport.com":"DRUDGEREPORT","m.facebook.com":"FACEBOOK","www.facebook.com":"FACEBOOK","lm.facebook.com":"FACEBOOK","l.facebook.com":"FACEBOOK","t.co":"TWITTER","www.twitter.com":"TWITTER","www.linkedin.com":"LINKEDIN","lnkd.in":"LINKEDIN","touch.www.linkedin.com":"LINKEDIN","plus.url.google.com":"GOOGLE_PLUS","www.reddit.com":"REDDIT","www.bing.com":"BING_SEARCH","bing.com":"BING_SEARCH"};a.forEach(function(t){return h[t]="GOOGLE_SEARCH"}),l.forEach(function(t){return h[t]="YAHOO_SEARCH"}),c.forEach(function(t){return h[t]="YAHOO_SEARCH"});var d={INTERNAL_WEB:"INTERNAL",INTERNAL_MOBILE:"INTERNAL",FACEBOOK:"SOCIAL",LINKEDIN:"SOCIAL",TWITTER:"SOCIAL",GOOGLE_PLUS:"SOCIAL",REDDIT:"SOCIAL",DRUDGEREPORT:"NEWS_PORTALS",GOOGLE_SEARCH:"SEARCH",BING_SEARCH:"SEARCH",YAHOO_SEARCH:"SEARCH",OTHERS:"OTHERS"},f="INTERNAL_WEB",p="INTERNAL_MOBILE",g="GOOGLE_SEARCH",v="OTHERS",y=function(t){var e=T(t);if(null!==e)return e;var r=b(t);if(null===r)return v;if(m(r)||_(r))return g;var n=r.host,i=h[n];return i=i||v},m=function(t){var e=t.path,r=t.hostname;return e&&0===e.indexOf("//com.google.android.googlequicksearchbox")&&"android-app"===r},_=function(t){var e=t.path,r=t.hostname;return e&&0===e.indexOf("/auth/chrome-content-suggestions")&&"googleapis.com"===r},b=function(t){var e=null,r=RegExp("^(http|https)://.*$");if(t&&0<t.length){var n=decodeURI(t);n=E(n),n=r.test(n)?n:"http://"+n,e=o.default.parse(n)}return e},T=function(t){var e=null;if(t&&0<t.length){var r=E(t);-1!==r.indexOf(".bloomberg.com")&&(e=f),-1!==r.indexOf("mobile://")&&(e=p)}return e},E=function(t){return t.split("\\?",2)[0]};r.default={getDomainCategory:function(t){var e=y(t),r=d[e];return r=r||d.OTHERS}},e.exports=r.default},{url:36}],19:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return t.baseUrl+"?"+function(t){var e=function(t){var e=t.id,r=t.contentType;if(void 0!==e&&i.hasOwnProperty(r)){return{currentResource:r+"|"+e}}}(t),r=function(t){return t.sessionInfo}(t);return function(r){return Object.keys(r).filter(function(t){var e=r[t];return!(null==e||""===e)}).map(function(t){var e=r[t];return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&")}(Object.assign({},e,r,{limit:n}))}(t)};var n=100,i={Author:!0,City:!0,Classification:!0,Commodity:!0,Company:!0,Country:!0,Currency:!0,Dataarticle:!0,Event:!0,Feature:!0,Fund:!0,Index:!0,Interactive:!0,Location:!0,Organization:!0,Person:!0,Region:!0,Series:!0,Slideshow:!0,Story:!0,Topic:!0,Video:!0};e.exports=r.default},{}],20:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTopK=r.makeParams=r.makeTypeMaps=void 0;var v=t("../util/tags"),c=t("../util/authors"),l=t("../util/resourceTypes"),y=n(t("../util/transformReferrer")),m=n(t("../util/pluckUserAttributeParams"));function n(t){return t&&t.__esModule?t:{default:t}}function _(t){var e=t.userInfo,r=t.contextInfo;e=e||{};var n=(void 0===r?{}:r).contentTags,i=void 0===n?[]:n,o=b(i,[v.filterByType,v.defaultDerivedScore,v.filterByScore]),s=b(o,[v.getTopKTags,v.transformToTypeMap]),a=b(i,[v.scoreContentTags,v.getTopKContextTagTypes,v.transformToTypeMap]),u=(0,v.parsePreferenceTags)(e);return{contextTagsTypeMap:s,preferredTagsTypeMap:b((0,v.combineTags)({contextTags:o,preferredTags:u}),[v.getTopKTags,v.transformToTypeMap]),preferredAuthorsMap:b((0,c.parsePreferenceAuthors)(e),[c.getTopKAuthors,v.transformToTypeMap]),preferredResourceTypesMap:b((0,l.parsePreferenceResourceTypes)(e),[l.getTopKResourceTypes,v.transformToTypeMap]),cumulativeScoredContentTagsMap:a}}function b(t,e){return e.reduce(function(t,e){return e(t)},t)}function T(t,e){var r={};for(var n in t){if(t[n])r[e+n]=t[n]}return r}r.makeTypeMaps=_,r.makeParams=function(t){var e=t.userInfo,r=void 0===e?{}:e,n=t.contextInfo,i=(n=void 0===n?{}:n).referrer,o=_(t),s=o.contextTagsTypeMap,a=o.preferredTagsTypeMap,u=o.preferredResourceTypesMap,c=o.cumulativeScoredContentTagsMap,l=b(s,[v.translateTypes,v.typeMapToCSV]),h=b(c,[v.translateTypes,v.typeMapToCSV]),d=b(Object.assign({},a,u),[v.translateTypes,v.typeMapToCSV]),f=Object.assign({},T(l,"context"),T(d,"preferred"),h),p=i?{referrer:(0,y.default)(i)}:{},g=(0,m.default)(r);return Object.assign({},p,f,g)},r.getTopK=function(t,e){if(void 0===e||e<=0)return[];return t.slice().sort(function(t,e){return t.derivedScore<e.derivedScore?-1:t.derivedScore>e.derivedScore?1:0}).slice(-e).reverse()}},{"../util/authors":16,"../util/pluckUserAttributeParams":21,"../util/resourceTypes":23,"../util/tags":25,"../util/transformReferrer":27}],21:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};null===t&&(t={});var e=t.Metadata,r=(e=void 0===e?{}:e).attribute,n=void 0===r?{}:r;return Object.keys(n).reduce(function(t,e){var r=i[e];return r&&(t[r]=n[e]),t},{})};var i={deepestPaywallStage:"ua_dps"};e.exports=r.default},{}],22:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){if(!t.hasOwnProperty("assetType")||!t.hasOwnProperty("assetID"))return;var r=void 0;t.statsInfo&&t.statsInfo[n]&&(r=t.statsInfo[n].score);return r?{id:t.assetID,derivedScore:r*e,type:t.assetType}:void 0};var n="1y";e.exports=r.default},{}],23:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parsePreferenceResourceTypes=r.getTopKResourceTypes=void 0;var n,i=t("./resourceTypesConfig"),u=(n=i)&&n.__esModule?n:{default:n},o=t("./params");r.getTopKResourceTypes=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:u.default.targetingParamLimit;return(0,o.getTopK)(t,e)},r.parsePreferenceResourceTypes=function(t){var e=[],n={},r=t.Resourcetype,i=(r=void 0===r?{}:r).Confidence,o=void 0===i?0:i,s=r.Preferences,a=void 0===s?[]:s;if(o<u.default.confidenceThreshold)return e;return Array.isArray(a)?(a.forEach(function(t){if(t.hasOwnProperty("assetType")){var e=c[t.assetType];if(e){var r=void 0;t.statsInfo&&t.statsInfo[l]&&(r=t.statsInfo[l].score),n[e]=(n[e]||0)+r}}}),e=Object.keys(n).map(function(t){return{id:t,type:"Resourcetype",derivedScore:n[t]}})):e};var c={Commodity:"Quote",Company:"Quote",Currency:"Quote",Dataarticle:"Story",Feature:"Story",Fund:"Quote",Index:"Quote",Interactive:"Story",Quicktake:"Story",Slideshow:"Story",Story:"Story",Video:"Video"},l="1y"},{"./params":20,"./resourceTypesConfig":24}],24:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={targetingParamLimit:1,confidenceThreshold:.25},e.exports=r.default},{}],25:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTopKContextTagTypes=r.scoreContentTags=r.combineTags=r.parsePreferenceTags=r.translateTypes=r.transformToTypeMap=r.typeMapToCSV=r.getTopKTags=r.defaultDerivedScore=r.filterByScore=r.filterByType=void 0;var a=i(t("./tagsConfig")),n=t("./params"),u=i(t("./preferences"));function i(t){return t&&t.__esModule?t:{default:t}}r.filterByType=function(t){return t.filter(function(t){var e=t.type;return c.hasOwnProperty(e)})},r.filterByScore=function(t){return t.filter(function(t){var e=t.type;return t.derivedScore>=o[e]})},r.defaultDerivedScore=function(t){return t.map(function(t){var e=t.derivedScore,r=t.type;return void 0===e&&(e=o[r]||0),Object.assign({},t,{derivedScore:e})})},r.getTopKTags=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a.default.targetingParamLimit;return(0,n.getTopK)(t,e)},r.typeMapToCSV=function(e){return Object.keys(e).forEach(function(t){e[t]=e[t].join(",")}),e},r.transformToTypeMap=function(t){return t.reduce(function(t,e){var r=e.id,n=e.type;return t[n]=t[n]||[],t[n].push(r),t},{})},r.translateTypes=function(r){return Object.keys(r).reduce(function(t,e){return t[function(t){return s[t]||t}(e)]=r[e],t},{})},r.parsePreferenceTags=function(t){var r=[],e=t.Tag,n=(e=void 0===e?{}:e).Confidence,i=void 0===n?0:n,o=e.Preferences,s=void 0===o?{}:o;if(i<a.default.confidenceThreshold)return r;return Object.keys(c).forEach(function(t){var e=s[t];Array.isArray(e)&&e.forEach(function(t){var e=(0,u.default)(t,i);e&&r.push(e)})}),r},r.combineTags=function(t){var e=t.contextTags,r=t.preferredTags,n=JSON.parse(JSON.stringify(e)),i={};n.forEach(function(t){var e=l(t);i[e]=t});var o=[];return r.forEach(function(t){var e=l(t);i.hasOwnProperty(e)?i[e].derivedScore+=t.derivedScore:o.push(t)}),n.concat(o)},r.scoreContentTags=function(t){var e=t.reduce(function(t,e){return t.hasOwnProperty(e.type)?t[e.type]+=e.derivedScore:t[e.type]=e.derivedScore,t},{});return Object.keys(e).map(function(t){return{id:t,type:"contextTagTypes",derivedScore:e[t]}})},r.getTopKContextTagTypes=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a.default.contextTagTypesLimit;return(0,n.getTopK)(t,e)};var o=a.default.thresholds,c={Bond:!0,City:!0,Classification:!0,Commodity:!0,Company:!0,Country:!0,Currency:!0,Event:!0,Fund:!0,Index:!0,Location:!0,Organization:!0,Person:!0,Region:!0,Topic:!0},s={Person:"People",Company:"Tickers",Index:"Indexes",Topic:"Topics",Resourcetype:"Resourcetypes"};function l(t){return t.type+"|"+t.id}},{"./params":20,"./preferences":22,"./tagsConfig":26}],26:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={thresholds:{Person:3,Company:3,Index:1,Topic:2,Commodity:1.5,City:2,Fund:1,Organization:1,Country:2,Currency:2,Region:3,Classification:2,Location:1,Event:1},targetingParamLimit:20,contextTagTypesLimit:1,confidenceThreshold:.25},e.exports=r.default},{}],27:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){var e=i.exec(t);return null===e||""===e?t:n[e[1]]||e[1]};var n={"m.facebook.com":"FACEBOOK","www.facebook.com":"FACEBOOK","lm.facebook.com":"FACEBOOK","l.facebook.com":"FACEBOOK","t.co":"TWITTER","www.twitter.com":"TWITTER","www.linkedin.com":"LINKEDIN","lnkd.in":"LINKEDIN","touch.www.linkedin.com":"LINKEDIN","plus.url.google.com":"GOOGLE_PLUS","www.reddit.com":"REDDIT","www.bloomberg.com":"BLOOMBERG"},i=/https?:\/\/([^ \/]+)/;e.exports=r.default},{}],28:[function(t,e,r){var o=t("trim"),n=t("for-each");e.exports=function(t){if(!t)return{};var i={};return n(o(t).split("\n"),function(t){var e=t.indexOf(":"),r=o(t.slice(0,e)).toLowerCase(),n=o(t.slice(e+1));void 0===i[r]?i[r]=n:!function(t){return"[object Array]"===Object.prototype.toString.call(t)}(i[r])?i[r]=[i[r],n]:i[r].push(n)}),i}},{"for-each":9,trim:34}],29:[function(t,I,O){(function(L){!function(t){var e="object"==typeof O&&O&&!O.nodeType&&O,r="object"==typeof I&&I&&!I.nodeType&&I,n="object"==typeof L&&L;n.global!==n&&n.window!==n&&n.self!==n||(t=n);var i,o,y=2147483647,m=36,_=1,b=26,s=38,a=700,T=72,E=128,S="-",u=/^xn--/,c=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=m-_,w=Math.floor,A=String.fromCharCode;function k(t){throw new RangeError(h[t])}function f(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function p(t,e){var r=t.split("@"),n="";return 1<r.length&&(n=r[0]+"@",t=r[1]),n+f((t=t.replace(l,".")).split("."),e).join(".")}function C(t){for(var e,r,n=[],i=0,o=t.length;i<o;)55296<=(e=t.charCodeAt(i++))&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function x(t){return f(t,function(t){var e="";return 65535<t&&(e+=A((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=A(t)}).join("")}function R(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function P(t,e,r){var n=0;for(t=r?w(t/a):t>>1,t+=w(t/e);d*b>>1<t;n+=m)t=w(t/d);return w(n+(d+1)*t/(t+s))}function g(t){var e,r,n,i,o,s,a,u,c,l,h,d=[],f=t.length,p=0,g=E,v=T;for((r=t.lastIndexOf(S))<0&&(r=0),n=0;n<r;++n)128<=t.charCodeAt(n)&&k("not-basic"),d.push(t.charCodeAt(n));for(i=0<r?r+1:0;i<f;){for(o=p,s=1,a=m;f<=i&&k("invalid-input"),h=t.charCodeAt(i++),(m<=(u=h-48<10?h-22:h-65<26?h-65:h-97<26?h-97:m)||u>w((y-p)/s))&&k("overflow"),p+=u*s,!(u<(c=a<=v?_:v+b<=a?b:a-v));a+=m)s>w(y/(l=m-c))&&k("overflow"),s*=l;v=P(p-o,e=d.length+1,0==o),w(p/e)>y-g&&k("overflow"),g+=w(p/e),p%=e,d.splice(p++,0,g)}return x(d)}function v(t){var e,r,n,i,o,s,a,u,c,l,h,d,f,p,g,v=[];for(d=(t=C(t)).length,e=E,o=T,s=r=0;s<d;++s)(h=t[s])<128&&v.push(A(h));for(n=i=v.length,i&&v.push(S);n<d;){for(a=y,s=0;s<d;++s)e<=(h=t[s])&&h<a&&(a=h);for(a-e>w((y-r)/(f=n+1))&&k("overflow"),r+=(a-e)*f,e=a,s=0;s<d;++s)if((h=t[s])<e&&++r>y&&k("overflow"),h==e){for(u=r,c=m;!(u<(l=c<=o?_:o+b<=c?b:c-o));c+=m)g=u-l,p=m-l,v.push(A(R(l+g%p,0))),u=w(g/p);v.push(A(R(u,0))),o=P(r,f,n==i),r=0,++n}++r,++e}return v.join("")}if(i={version:"1.4.1",ucs2:{decode:C,encode:x},decode:g,encode:v,toASCII:function(t){return p(t,function(t){return c.test(t)?"xn--"+v(t):t})},toUnicode:function(t){return p(t,function(t){return u.test(t)?g(t.slice(4).toLowerCase()):t})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return i});else if(e&&r)if(I.exports==e)r.exports=i;else for(o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);else t.punycode=i}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],30:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){e=e||"&",r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var a,u,c=t.length;0<s&&s<c&&(c=s);for(var l=0;l<c;++l){var h,d,f,p,g=t[l].replace(o,"%20"),v=g.indexOf(r);d=0<=v?(h=g.substr(0,v),g.substr(v+1)):(h=g,""),f=decodeURIComponent(h),p=decodeURIComponent(d),a=i,u=f,Object.prototype.hasOwnProperty.call(a,u)?y(i[f])?i[f].push(p):i[f]=[i[f],p]:i[f]=p}return i};var y=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],31:[function(t,e,r){"use strict";function o(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}e.exports=function(r,n,i,t){return n=n||"&",i=i||"=",null===r&&(r=void 0),"object"==typeof r?a(u(r),function(t){var e=encodeURIComponent(o(t))+i;return s(r[t])?a(r[t],function(t){return e+encodeURIComponent(o(t))}).join(n):e+encodeURIComponent(o(r[t]))}).join(n):t?encodeURIComponent(o(t))+i+encodeURIComponent(o(r)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var u=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],32:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":30,"./encode":31}],33:[function(t,e,r){e.exports=function(t,e){var r,n=null;try{r=JSON.parse(t,e)}catch(t){n=t}return[n,r]}},{}],34:[function(t,e,r){(r=e.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},r.right=function(t){return t.replace(/\s*$/,"")}},{}],35:[function(t,e,r){e.exports=function(t){for(var e="",r=0;r<arguments.length;r++)e+=t[r].replace(/\n\r?\s*/g,"")+(arguments[r+1]||"");return e}},{}],36:[function(t,e,r){"use strict";var O=t("punycode"),D=t("./util");function C(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=o,r.resolve=function(t,e){return o(t,!1,!0).resolve(e)},r.resolveObject=function(t,e){return t?o(t,!1,!0).resolveObject(e):e},r.format=function(t){D.isString(t)&&(t=o(t));return t instanceof C?t.format():C.prototype.format.call(t)},r.Url=C;var N=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,M=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,i=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),F=["'"].concat(i),B=["%","/","?",";","#"].concat(F),j=["/","?","#"],U=/^[+a-z0-9A-Z_-]{0,63}$/,V=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,G={javascript:!0,"javascript:":!0},H={javascript:!0,"javascript:":!0},W={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},q=t("querystring");function o(t,e,r){if(t&&D.isObject(t)&&t instanceof C)return t;var n=new C;return n.parse(t,e,r),n}C.prototype.parse=function(t,e,r){if(!D.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=-1!==n&&n<t.indexOf("#")?"?":"#",o=t.split(i);o[0]=o[0].replace(/\\/g,"/");var s=t=o.join(i);if(s=s.trim(),!r&&1===t.split("#").length){var a=M.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?q.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=N.exec(s);if(u){var c=(u=u[0]).toLowerCase();this.protocol=c,s=s.substr(u.length)}if(r||u||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===s.substr(0,2);!l||u&&H[u]||(s=s.substr(2),this.slashes=!0)}if(!H[u]&&(l||u&&!W[u])){for(var h,d,f=-1,p=0;p<j.length;p++){-1!==(g=s.indexOf(j[p]))&&(-1===f||g<f)&&(f=g)}-1!==(d=-1===f?s.lastIndexOf("@"):s.lastIndexOf("@",f))&&(h=s.slice(0,d),s=s.slice(d+1),this.auth=decodeURIComponent(h)),f=-1;for(p=0;p<B.length;p++){var g;-1!==(g=s.indexOf(B[p]))&&(-1===f||g<f)&&(f=g)}-1===f&&(f=s.length),this.host=s.slice(0,f),s=s.slice(f),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var y=this.hostname.split(/\./),m=(p=0,y.length);p<m;p++){var _=y[p];if(_&&!_.match(U)){for(var b="",T=0,E=_.length;T<E;T++)127<_.charCodeAt(T)?b+="x":b+=_[T];if(!b.match(U)){var S=y.slice(0,p),w=y.slice(p+1),A=_.match(V);A&&(S.push(A[1]),w.unshift(A[2])),w.length&&(s="/"+w.join(".")+s),this.hostname=S.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=O.toASCII(this.hostname));var k=this.port?":"+this.port:"",C=this.hostname||"";this.host=C+k,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!G[c])for(p=0,m=F.length;p<m;p++){var x=F[p];if(-1!==s.indexOf(x)){var R=encodeURIComponent(x);R===x&&(R=escape(x)),s=s.split(x).join(R)}}var P=s.indexOf("#");-1!==P&&(this.hash=s.substr(P),s=s.slice(0,P));var L=s.indexOf("?");if(-1!==L?(this.search=s.substr(L),this.query=s.substr(L+1),e&&(this.query=q.parse(this.query)),s=s.slice(0,L)):e&&(this.search="",this.query={}),s&&(this.pathname=s),W[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){k=this.pathname||"";var I=this.search||"";this.path=k+I}return this.href=this.format(),this},C.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&D.isObject(this.query)&&Object.keys(this.query).length&&(o=q.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||W[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i=i||"",n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),e+i+(r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+n},C.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},C.prototype.resolveObject=function(t){if(D.isString(t)){var e=new C;e.parse(t,!1,!0),t=e}for(var r=new C,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),a=0;a<s.length;a++){var u=s[a];"protocol"!==u&&(r[u]=t[u])}return W[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!W[t.protocol]){for(var c=Object.keys(t),l=0;l<c.length;l++){var h=c[l];r[h]=t[h]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||H[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var f=r.pathname||"",p=r.search||"";r.path=f+p}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var g=r.pathname&&"/"===r.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=v||g||r.host&&t.pathname,m=y,_=r.pathname&&r.pathname.split("/")||[],b=(d=t.pathname&&t.pathname.split("/")||[],r.protocol&&!W[r.protocol]);if(b&&(r.hostname="",r.port=null,r.host&&(""===_[0]?_[0]=r.host:_.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),y=y&&(""===d[0]||""===_[0])),v)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,_=d;else if(d.length)(_=_||[]).pop(),_=_.concat(d),r.search=t.search,r.query=t.query;else if(!D.isNullOrUndefined(t.search)){if(b)r.hostname=r.host=_.shift(),(A=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=A.shift(),r.host=r.hostname=A.shift());return r.search=t.search,r.query=t.query,D.isNull(r.pathname)&&D.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!_.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var T=_.slice(-1)[0],E=(r.host||t.host||1<_.length)&&("."===T||".."===T)||""===T,S=0,w=_.length;0<=w;w--)"."===(T=_[w])?_.splice(w,1):".."===T?(_.splice(w,1),S++):S&&(_.splice(w,1),S--);if(!y&&!m)for(;S--;)_.unshift("..");!y||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),E&&"/"!==_.join("/").substr(-1)&&_.push("");var A,k=""===_[0]||_[0]&&"/"===_[0].charAt(0);b&&(r.hostname=r.host=k?"":_.length?_.shift():"",(A=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=A.shift(),r.host=r.hostname=A.shift()));return(y=y||r.host&&_.length)&&!k&&_.unshift(""),_.length?r.pathname=_.join("/"):(r.pathname=null,r.path=null),D.isNull(r.pathname)&&D.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},C.prototype.parseHost=function(){var t=this.host,e=n.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":37,punycode:29,querystring:32}],37:[function(t,e,r){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],38:[function(t,e,r){function n(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){return t.raw=e,t}var s,a,u,c,f=n(t("global/window")),p=n(t("global/document")),l=n(t("tsml")),g=n(t("safe-json-parse/tuple")),v=n(t("xhr")),y=n(t("videojs-vtt.js")),m=f.navigator&&f.navigator.userAgent||"",_=/AppleWebKit\/([\d.]+)/i.exec(m),b=_?parseFloat(_.pop()):null,T=/iPad/i.test(m),E=/iPhone/i.test(m)&&!T,S=/iPod/i.test(m),w=E||T||S,A=(s=m.match(/OS (\d+)_/i))&&s[1]?s[1]:null,k=/Android/i.test(m),C=function(){var t=m.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),r=t[2]&&parseFloat(t[2]);return e&&r?parseFloat(t[1]+"."+t[2]):e||null}(),x=k&&/webkit/i.test(m)&&C<2.3,R=k&&C<5&&b<537,P=/Firefox/i.test(m),L=/Edge/i.test(m),I=!L&&(/Chrome/i.test(m)||/CriOS/i.test(m)),O=(a=m.match(/(Chrome|CriOS)\/(\d+)/))&&a[2]?parseFloat(a[2]):null,D=/MSIE\s8\.0/.test(m),N=(u=/MSIE\s(\d+)\.\d/.exec(m),!(c=u&&parseFloat(u[1]))&&/Trident\/7.0/i.test(m)&&/rv:11.0/.test(m)&&(c=11),c),M=/Safari/i.test(m)&&!I&&!k&&!L,F=(M||w)&&!I,B=rt()&&("ontouchstart"in f||f.navigator.maxTouchPoints||f.DocumentTouch&&f.document instanceof f.DocumentTouch),j=rt()&&"backgroundSize"in f.document.createElement("video").style,U=(Object.freeze||Object)({IS_IPAD:T,IS_IPHONE:E,IS_IPOD:S,IS_IOS:w,IOS_VERSION:A,IS_ANDROID:k,ANDROID_VERSION:C,IS_OLD_ANDROID:x,IS_NATIVE_ANDROID:R,IS_FIREFOX:P,IS_EDGE:L,IS_CHROME:I,CHROME_VERSION:O,IS_IE8:D,IE_VERSION:N,IS_SAFARI:M,IS_ANY_SAFARI:F,TOUCH_ENABLED:B,BACKGROUND_SIZE_SUPPORTED:j}),V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G=Object.prototype.toString,H=function(t){return K(t)?Object.keys(t):[]};function W(e,r){H(e).forEach(function(t){return r(e[t],t)})}function q(r){for(var t=arguments.length,e=Array(1<t?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return Object.assign?Object.assign.apply(Object,[r].concat(e)):(e.forEach(function(t){t&&W(t,function(t,e){r[e]=t})}),r)}function K(t){return!!t&&"object"===(void 0===t?"undefined":V(t))}function z(t){return K(t)&&"[object Object]"===G.call(t)&&t.constructor===Object}var Y=[],X=function(a,u){return function(t,e,r,n){var i=u.levels[e],o=new RegExp("^("+i+")$");if("log"!==t&&r.unshift(t.toUpperCase()+":"),r.unshift(a+":"),Y&&Y.push([].concat(r)),f.console){var s=f.console[t];s||"debug"!==t||(s=f.console.info||f.console.log),s&&i&&o.test(t)&&(n&&(r=r.map(function(e){if(K(e)||Array.isArray(e))try{return JSON.stringify(e)}catch(t){return String(e)}return String(e)}).join(" ")),s.apply?s[Array.isArray(r)?"apply":"call"](f.console,r):s(r))}}};var J=function e(r){function i(){for(var t=i.stringify||N&&N<11,e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];s("log",o,r,t)}var o="info",s=void 0;return s=X(r,i),i.createLogger=function(t){return e(r+": "+t)},i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:o},i.level=function(t){if("string"==typeof t){if(!i.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');o=t}return o},(i.history=function(){return Y?[].concat(Y):[]}).filter=function(e){return(Y||[]).filter(function(t){return new RegExp(".*"+e+".*").test(t[0])})},i.history.clear=function(){Y&&(Y.length=0)},i.history.disable=function(){null!==Y&&(Y.length=0,Y=null)},i.history.enable=function(){null===Y&&(Y=[])},i.error=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return s("error",o,e)},i.warn=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return s("warn",o,e)},i.debug=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return s("debug",o,e)},i}("VIDEOJS"),Q=J.createLogger;function $(t,e){if(!t||!e)return"";if("function"!=typeof f.getComputedStyle)return t.currentStyle[e]||"";var r=f.getComputedStyle(t);return r?r[e]:""}var Z=o(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);function tt(t){return"string"==typeof t&&/\S/.test(t)}function et(t){if(/\s/.test(t))throw new Error("class has illegal whitespace characters")}function rt(){return p===f.document&&void 0!==p.createElement}function nt(t){return K(t)&&1===t.nodeType}function it(){try{return f.parent!==f.self}catch(t){return!0}}function ot(n){return function(t,e){if(!tt(t))return p[n](null);tt(e)&&(e=p.querySelector(e));var r=nt(e)?e:p;return r[n]&&r[n](t)}}function st(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],i=p.createElement(t);return Object.getOwnPropertyNames(r).forEach(function(t){var e=r[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(J.warn(l(Z,t,e)),i.setAttribute(t,e)):"textContent"===t?at(i,e):i[t]=e}),Object.getOwnPropertyNames(e).forEach(function(t){i.setAttribute(t,e[t])}),n&&kt(i,n),i}function at(t,e){return void 0===t.textContent?t.innerText=e:t.textContent=e,t}function ut(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function ct(t,e){return et(e),t.classList?t.classList.contains(e):function(t){return new RegExp("(^|\\s)"+t+"($|\\s)")}(e).test(t.className)}function lt(t,e){return t.classList?t.classList.add(e):ct(t,e)||(t.className=(t.className+" "+e).trim()),t}function ht(t,e){return t.classList?t.classList.remove(e):(et(e),t.className=t.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),t}function dt(t,e,r){var n=ct(t,e);if("function"==typeof r&&(r=r(t,e)),"boolean"!=typeof r&&(r=!n),r!==n)return r?lt(t,e):ht(t,e),t}function ft(r,n){Object.getOwnPropertyNames(n).forEach(function(t){var e=n[t];null==e||!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})}function pt(t){var e={},r=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&0<t.attributes.length)for(var n=t.attributes,i=n.length-1;0<=i;i--){var o=n[i].name,s=n[i].value;"boolean"!=typeof t[o]&&-1===r.indexOf(","+o+",")||(s=null!==s),e[o]=s}return e}function gt(t,e){return t.getAttribute(e)}function vt(t,e,r){t.setAttribute(e,r)}function yt(t,e){t.removeAttribute(e)}function mt(){p.body.focus(),p.onselectstart=function(){return!1}}function _t(){p.onselectstart=function(){return!0}}function bt(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),r={};return["bottom","height","left","right","top","width"].forEach(function(t){void 0!==e[t]&&(r[t]=e[t])}),r.height||(r.height=parseFloat($(t,"height"))),r.width||(r.width=parseFloat($(t,"width"))),r}}function Tt(t){var e=void 0;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};var r=p.documentElement,n=p.body,i=r.clientLeft||n.clientLeft||0,o=f.pageXOffset||n.scrollLeft,s=e.left+o-i,a=r.clientTop||n.clientTop||0,u=f.pageYOffset||n.scrollTop,c=e.top+u-a;return{left:Math.round(s),top:Math.round(c)}}function Et(t,e){var r={},n=Tt(t),i=t.offsetWidth,o=t.offsetHeight,s=n.top,a=n.left,u=e.pageY,c=e.pageX;return e.changedTouches&&(c=e.changedTouches[0].pageX,u=e.changedTouches[0].pageY),r.y=Math.max(0,Math.min(1,(s-u+o)/o)),r.x=Math.max(0,Math.min(1,(c-a)/i)),r}function St(t){return K(t)&&3===t.nodeType}function wt(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function At(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map(function(t){return"function"==typeof t&&(t=t()),nt(t)||St(t)?t:"string"==typeof t&&/\S/.test(t)?p.createTextNode(t):void 0}).filter(function(t){return t})}function kt(e,t){return At(t).forEach(function(t){return e.appendChild(t)}),e}function Ct(t,e){return kt(wt(t),e)}function xt(t){return void 0===t.button&&void 0===t.buttons||(0===t.button&&void 0===t.buttons||(9===N||0===t.button&&1===t.buttons))}var Rt=ot("querySelector"),Pt=ot("querySelectorAll"),Lt=(Object.freeze||Object)({isReal:rt,isEl:nt,isInFrame:it,createEl:st,textContent:at,prependTo:ut,hasClass:ct,addClass:lt,removeClass:ht,toggleClass:dt,setAttributes:ft,getAttributes:pt,getAttribute:gt,setAttribute:vt,removeAttribute:yt,blockTextSelection:mt,unblockTextSelection:_t,getBoundingClientRect:bt,findPosition:Tt,getPointerPosition:Et,isTextNode:St,emptyEl:wt,normalizeContent:At,appendContent:kt,insertContent:Ct,isSingleLeftClick:xt,$:Rt,$$:Pt}),It=1;function Ot(){return It++}var Dt={},Nt="vdata"+(new Date).getTime();function Mt(t){var e=t[Nt];return e=e||(t[Nt]=Ot()),Dt[e]||(Dt[e]={}),Dt[e]}function Ft(t){var e=t[Nt];return!!e&&!!Object.getOwnPropertyNames(Dt[e]).length}function Bt(e){var t=e[Nt];if(t){delete Dt[t];try{delete e[Nt]}catch(t){e.removeAttribute?e.removeAttribute(Nt):e[Nt]=null}}}function jt(t,e){var r=Mt(t);0===r.handlers[e].length&&(delete r.handlers[e],t.removeEventListener?t.removeEventListener(e,r.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,r.dispatcher)),Object.getOwnPropertyNames(r.handlers).length<=0&&(delete r.handlers,delete r.dispatcher,delete r.disabled),0===Object.getOwnPropertyNames(r).length&&Bt(t)}function Ut(e,r,t,n){t.forEach(function(t){e(r,t,n)})}function Vt(t){function e(){return!0}function r(){return!1}if(!t||!t.isPropagationStopped){var n=t||f.event;for(var i in t={},n)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&("returnValue"===i&&n.preventDefault||(t[i]=n[i]));if(t.target||(t.target=t.srcElement||p),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){n.preventDefault&&n.preventDefault(),t.returnValue=!1,n.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),t.cancelBubble=!0,n.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=r,t.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=r,null!==t.clientX&&void 0!==t.clientX){var o=p.documentElement,s=p.body;t.pageX=t.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),t.pageY=t.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)}t.which=t.charCode||t.keyCode,null!==t.button&&void 0!==t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t}var Gt=!1;!function(){try{var t=Object.defineProperty({},"passive",{get:function(){Gt=!0}});f.addEventListener("test",null,t),f.removeEventListener("test",null,t)}catch(t){}}();var Ht=["touchstart","touchmove"];function Wt(s,t,e){if(Array.isArray(t))return Ut(Wt,s,t,e);var a=Mt(s);if(a.handlers||(a.handlers={}),a.handlers[t]||(a.handlers[t]=[]),e.guid||(e.guid=Ot()),a.handlers[t].push(e),a.dispatcher||(a.disabled=!1,a.dispatcher=function(t,e){if(!a.disabled){t=Vt(t);var r=a.handlers[t.type];if(r)for(var n=r.slice(0),i=0,o=n.length;i<o&&!t.isImmediatePropagationStopped();i++)try{n[i].call(s,t,e)}catch(t){J.error(t)}}}),1===a.handlers[t].length)if(s.addEventListener){var r=!1;Gt&&-1<Ht.indexOf(t)&&(r={passive:!0}),s.addEventListener(t,a.dispatcher,r)}else s.attachEvent&&s.attachEvent("on"+t,a.dispatcher)}function qt(t,e,r){if(Ft(t)){var n=Mt(t);if(n.handlers){if(Array.isArray(e))return Ut(qt,t,e,r);function i(t,e){n.handlers[e]=[],jt(t,e)}if(void 0!==e){var o=n.handlers[e];if(o)if(r){if(r.guid)for(var s=0;s<o.length;s++)o[s].guid===r.guid&&o.splice(s--,1);jt(t,e)}else i(t,e)}else for(var a in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},a)&&i(t,a)}}}function Kt(t,e,r){var n=Ft(t)?Mt(t):{},i=t.parentNode||t.ownerDocument;if("string"==typeof e?e={type:e,target:t}:e.target||(e.target=t),e=Vt(e),n.dispatcher&&n.dispatcher.call(t,e,r),i&&!e.isPropagationStopped()&&!0===e.bubbles)Kt.call(null,i,e,r);else if(!i&&!e.defaultPrevented){var o=Mt(e.target);e.target[e.type]&&(o.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),o.disabled=!1)}return!e.defaultPrevented}function zt(t,e,r){if(Array.isArray(e))return Ut(zt,t,e,r);function n(){qt(t,e,n),r.apply(this,arguments)}n.guid=r.guid=r.guid||Ot(),Wt(t,e,n)}var Yt=(Object.freeze||Object)({fixEvent:Vt,on:Wt,off:qt,trigger:Kt,one:zt}),Xt=!1,Jt=void 0,Qt=function(){if(rt()&&!1!==Jt.options.autoSetup){var t=p.getElementsByTagName("video"),e=p.getElementsByTagName("audio"),r=p.getElementsByTagName("video-js"),n=[];if(t&&0<t.length)for(var i=0,o=t.length;i<o;i++)n.push(t[i]);if(e&&0<e.length)for(var s=0,a=e.length;s<a;s++)n.push(e[s]);if(r&&0<r.length)for(var u=0,c=r.length;u<c;u++)n.push(r[u]);if(n&&0<n.length)for(var l=0,h=n.length;l<h;l++){var d=n[l];if(!d||!d.getAttribute){$t(1);break}void 0===d.player&&null!==d.getAttribute("data-setup")&&Jt(d)}else Xt||$t(1)}};function $t(t,e){e&&(Jt=e),f.setTimeout(Qt,t)}rt()&&"complete"===p.readyState?Xt=!0:zt(f,"load",function(){Xt=!0});function Zt(t){var e=p.createElement("style");return e.className=t,e}function te(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e}function ee(t,e,r){function n(){return e.apply(t,arguments)}return e.guid||(e.guid=Ot()),n.guid=r?r+"_"+e.guid:e.guid,n}function re(e,r){var n=Date.now();return function(){var t=Date.now();r<=t-n&&(e.apply(void 0,arguments),n=t)}}function ne(n,i,o,t){function e(){var t=this,e=arguments,r=function(){r=a=null,o||n.apply(t,e)};!a&&o&&n.apply(t,e),s.clearTimeout(a),a=s.setTimeout(r,i)}var s=3<arguments.length&&void 0!==t?t:f,a=void 0;return e.cancel=function(){s.clearTimeout(a),a=null},e}function ie(){}ie.prototype.allowedEvents_={},ie.prototype.addEventListener=ie.prototype.on=function(t,e){var r=this.addEventListener;this.addEventListener=function(){},Wt(this,t,e),this.addEventListener=r},ie.prototype.removeEventListener=ie.prototype.off=function(t,e){qt(this,t,e)},ie.prototype.one=function(t,e){var r=this.addEventListener;this.addEventListener=function(){},zt(this,t,e),this.addEventListener=r},ie.prototype.dispatchEvent=ie.prototype.trigger=function(t){var e=t.type||t;"string"==typeof t&&(t={type:e}),t=Vt(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),Kt(this,t)};function oe(t){return"string"==typeof t&&/\S/.test(t)||Array.isArray(t)&&!!t.length}function se(t){if(!t.nodeName&&!he(t))throw new Error("Invalid target; must be a DOM node or evented object.")}function ae(t){if(!oe(t))throw new Error("Invalid event type; must be a non-empty string or array.")}function ue(t){if("function"!=typeof t)throw new Error("Invalid listener; must be a function.")}function ce(t,e){var r=e.length<3||e[0]===t||e[0]===t.eventBusEl_,n=void 0,i=void 0,o=void 0;return o=r?(n=t.eventBusEl_,3<=e.length&&e.shift(),i=e[0],e[1]):(n=e[0],i=e[1],e[2]),se(n),ae(i),ue(o),{isTargetingSelf:r,target:n,type:i,listener:o=ee(t,o)}}function le(t,e,r,n){se(t),t.nodeName?Yt[e](t,r,n):t[e](r,n)}var he=function(e){return e instanceof ie||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},de={on:function(){for(var t=this,e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=ce(this,r),o=i.isTargetingSelf,s=i.target,a=i.type,u=i.listener;if(le(s,"on",a,u),!o){function c(){return t.off(s,a,u)}c.guid=u.guid;function l(){return t.off("dispose",c)}l.guid=u.guid,le(this,"on","dispose",c),le(s,"on","dispose",l)}},one:function(){for(var n=this,t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=ce(this,e),o=i.isTargetingSelf,s=i.target,a=i.type,u=i.listener;if(o)le(s,"one",a,u);else{function c(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];n.off(s,a,c),u.apply(null,e)}c.guid=u.guid,le(s,"one",a,c)}},off:function(t,e,r){if(!t||oe(t))qt(this.eventBusEl_,t,e);else{var n=t,i=e;se(n),ae(i),ue(r),r=ee(this,r),this.off("dispose",r),n.nodeName?(qt(n,i,r),qt(n,"dispose",r)):he(n)&&(n.off(i,r),n.off("dispose",r))}},trigger:function(t,e){return Kt(this.eventBusEl_,t,e)}};function fe(t,e){var r=(1<arguments.length&&void 0!==e?e:{}).eventBusKey;if(r){if(!t[r].nodeName)throw new Error('The eventBusKey "'+r+'" does not refer to an element.');t.eventBusEl_=t[r]}else t.eventBusEl_=st("span",{className:"vjs-event-bus"});return q(t,de),t.on("dispose",function(){t.off(),f.setTimeout(function(){t.eventBusEl_=null},0)}),t}var pe={state:{},setState:function(t){var r=this;"function"==typeof t&&(t=t());var n=void 0;return W(t,function(t,e){r.state[e]!==t&&((n=n||{})[e]={from:r.state[e],to:t}),r.state[e]=t}),n&&he(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function ge(t,e){return q(t,pe),t.state=q({},t.state,e),"function"==typeof t.handleStateChanged&&he(t)&&t.on("statechanged",t.handleStateChanged),t}function ve(t){return"string"!=typeof t?t:t.charAt(0).toUpperCase()+t.slice(1)}function ye(){for(var r={},t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.forEach(function(t){t&&W(t,function(t,e){z(t)?(z(r[e])||(r[e]={}),r[e]=ye(r[e],t)):r[e]=t})}),r}var me=(_e.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var t=this.children_.length-1;0<=t;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Bt(this.el_),this.el_=null),this.player_=null},_e.prototype.player=function(){return this.player_},_e.prototype.options=function(t){return J.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),t&&(this.options_=ye(this.options_,t)),this.options_},_e.prototype.el=function(){return this.el_},_e.prototype.createEl=function(t,e,r){return st(t,e,r)},_e.prototype.localize=function(t,i,e){var r=2<arguments.length&&void 0!==e?e:t,n=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),s=o&&o[n],a=n&&n.split("-")[0],u=o&&o[a],c=r;return s&&s[t]?c=s[t]:u&&u[t]&&(c=u[t]),i&&(c=c.replace(/\{(\d+)\}/g,function(t,e){var r=i[e-1],n=r;return void 0===r&&(n=t),n})),c},_e.prototype.contentEl=function(){return this.contentEl_||this.el_},_e.prototype.id=function(){return this.id_},_e.prototype.name=function(){return this.name_},_e.prototype.children=function(){return this.children_},_e.prototype.getChildById=function(t){return this.childIndex_[t]},_e.prototype.getChild=function(t){if(t)return t=ve(t),this.childNameIndex_[t]},_e.prototype.addChild=function(t,e,r){var n=1<arguments.length&&void 0!==e?e:{},i=2<arguments.length&&void 0!==r?r:this.children_.length,o=void 0,s=void 0;if("string"==typeof t){s=ve(t);var a=n.componentClass||s;n.name=s;var u=_e.getComponent(a);if(!u)throw new Error("Component "+a+" does not exist");if("function"!=typeof u)return null;o=new u(this.player_||this,n)}else o=t;if(this.children_.splice(i,0,o),"function"==typeof o.id&&(this.childIndex_[o.id()]=o),(s=s||o.name&&ve(o.name()))&&(this.childNameIndex_[s]=o),"function"==typeof o.el&&o.el()){var c=this.contentEl().children[i]||null;this.contentEl().insertBefore(o.el(),c)}return o},_e.prototype.removeChild=function(t){if("string"==typeof t&&(t=this.getChild(t)),t&&this.children_){for(var e=!1,r=this.children_.length-1;0<=r;r--)if(this.children_[r]===t){e=!0,this.children_.splice(r,1);break}if(e){this.childIndex_[t.id()]=null,this.childNameIndex_[t.name()]=null;var n=t.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},_e.prototype.initChildren=function(){var i=this,n=this.options_.children;if(n){var o=this.options_,t=void 0,r=_e.getComponent("Tech");(t=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter(function(e){return!t.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(t){var e=void 0,r=void 0;return r="string"==typeof t?n[e=t]||i.options_[e]||{}:(e=t.name,t),{name:e,opts:r}}).filter(function(t){var e=_e.getComponent(t.opts.componentClass||ve(t.name));return e&&!r.isTech(e)}).forEach(function(t){var e=t.name,r=t.opts;if(void 0!==o[e]&&(r=o[e]),!1!==r){!0===r&&(r={}),r.playerOptions=i.options_.playerOptions;var n=i.addChild(e,r);n&&(i[e]=n)}})}},_e.prototype.buildCSSClass=function(){return""},_e.prototype.ready=function(t,e){var r=1<arguments.length&&void 0!==e&&e;if(t)return this.isReady_?void(r?t.call(this):this.setTimeout(t,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t))},_e.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var t=this.readyQueue_;this.readyQueue_=[],t&&0<t.length&&t.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},_e.prototype.$=function(t,e){return Rt(t,e||this.contentEl())},_e.prototype.$$=function(t,e){return Pt(t,e||this.contentEl())},_e.prototype.hasClass=function(t){return ct(this.el_,t)},_e.prototype.addClass=function(t){lt(this.el_,t)},_e.prototype.removeClass=function(t){ht(this.el_,t)},_e.prototype.toggleClass=function(t,e){dt(this.el_,t,e)},_e.prototype.show=function(){this.removeClass("vjs-hidden")},_e.prototype.hide=function(){this.addClass("vjs-hidden")},_e.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")},_e.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")},_e.prototype.getAttribute=function(t){return gt(this.el_,t)},_e.prototype.setAttribute=function(t,e){vt(this.el_,t,e)},_e.prototype.removeAttribute=function(t){yt(this.el_,t)},_e.prototype.width=function(t,e){return this.dimension("width",t,e)},_e.prototype.height=function(t,e){return this.dimension("height",t,e)},_e.prototype.dimensions=function(t,e){this.width(t,!0),this.height(e)},_e.prototype.dimension=function(t,e,r){if(void 0!==e)return null!==e&&e==e||(e=0),-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[t]=e:this.el_.style[t]="auto"===e?"":e+"px",void(r||this.trigger("componentresize"));if(!this.el_)return 0;var n=this.el_.style[t],i=n.indexOf("px");return-1!==i?parseInt(n.slice(0,i),10):parseInt(this.el_["offset"+ve(t)],10)},_e.prototype.currentDimension=function(t){var e=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");if("function"==typeof f.getComputedStyle){var r=f.getComputedStyle(this.el_);e=r.getPropertyValue(t)||r[t]}if(0===(e=parseFloat(e))){var n="offset"+ve(t);e=this.el_[n]}return e},_e.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},_e.prototype.currentWidth=function(){return this.currentDimension("width")},_e.prototype.currentHeight=function(){return this.currentDimension("height")},_e.prototype.focus=function(){this.el_.focus()},_e.prototype.blur=function(){this.el_.blur()},_e.prototype.emitTapEvents=function(){var e=0,n=null,i=void 0;function t(){i=!1}this.on("touchstart",function(t){1===t.touches.length&&(n={pageX:t.touches[0].pageX,pageY:t.touches[0].pageY},e=(new Date).getTime(),i=!0)}),this.on("touchmove",function(t){if(1<t.touches.length)i=!1;else if(n){var e=t.touches[0].pageX-n.pageX,r=t.touches[0].pageY-n.pageY;10<Math.sqrt(e*e+r*r)&&(i=!1)}}),this.on("touchleave",t),this.on("touchcancel",t),this.on("touchend",function(t){!(n=null)===i&&(new Date).getTime()-e<200&&(t.preventDefault(),this.trigger("tap"))})},_e.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e=ee(this.player(),this.player().reportUserActivity),r=void 0;function t(t){e(),this.clearInterval(r)}this.on("touchstart",function(){e(),this.clearInterval(r),r=this.setInterval(e,250)}),this.on("touchmove",e),this.on("touchend",t),this.on("touchcancel",t)}},_e.prototype.setTimeout=function(t,e){var r,n,i=this;return t=ee(this,t),r=f.setTimeout(function(){i.off("dispose",n),t()},e),(n=function(){return i.clearTimeout(r)}).guid="vjs-timeout-"+r,this.on("dispose",n),r},_e.prototype.clearTimeout=function(t){function e(){}return f.clearTimeout(t),e.guid="vjs-timeout-"+t,this.off("dispose",e),t},_e.prototype.setInterval=function(t,e){var r=this;function n(){return r.clearInterval(i)}t=ee(this,t);var i=f.setInterval(t,e);return n.guid="vjs-interval-"+i,this.on("dispose",n),i},_e.prototype.clearInterval=function(t){function e(){}return f.clearInterval(t),e.guid="vjs-interval-"+t,this.off("dispose",e),t},_e.prototype.requestAnimationFrame=function(t){var e,r,n=this;return this.supportsRaf_?(t=ee(this,t),e=f.requestAnimationFrame(function(){n.off("dispose",r),t()}),(r=function(){return n.cancelAnimationFrame(e)}).guid="vjs-raf-"+e,this.on("dispose",r),e):this.setTimeout(t,1e3/60)},_e.prototype.cancelAnimationFrame=function(t){if(this.supportsRaf_){function e(){}return f.cancelAnimationFrame(t),e.guid="vjs-raf-"+t,this.off("dispose",e),t}return this.clearTimeout(t)},_e.registerComponent=function(t,e){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var r=_e.getComponent("Tech"),n=r&&r.isTech(e),i=_e===e||_e.prototype.isPrototypeOf(e.prototype);if(n||!i){var o=void 0;throw o=n?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+t+'"; '+o+".")}t=ve(t),_e.components_||(_e.components_={});var s=_e.getComponent("Player");if("Player"===t&&s&&s.players){var a=s.players,u=Object.keys(a);if(a&&0<u.length&&u.map(function(t){return a[t]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return _e.components_[t]=e},_e.getComponent=function(t){if(t)return t=ve(t),_e.components_&&_e.components_[t]?_e.components_[t]:void 0},_e);function _e(t,e,r){if(h(this,_e),!t&&this.play?this.player_=t=this:this.player_=t,this.options_=ye({},this.options_),e=this.options_=ye(this.options_,e),this.id_=e.id||e.el&&e.el.id,!this.id_){var n=t&&t.id&&t.id()||"no_player";this.id_=n+"_component_"+Ot()}this.name_=e.name||null,e.el?this.el_=e.el:!1!==e.createEl&&(this.el_=this.createEl()),!1!==e.evented&&fe(this,{eventBusKey:this.el_?"el_":null}),ge(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},!(this.childNameIndex_={})!==e.initChildren&&this.initChildren(),this.ready(r),!1!==e.reportTouchActivity&&this.enableTouchActivity()}function be(t,e,r,n){return function(t,e,r){if("number"!=typeof e||e<0||r<e)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+r+").")}(t,n,r.length-1),r[n][e]}function Te(t){return void 0===t||0===t.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:be.bind(null,"start",0,t),end:be.bind(null,"end",1,t)}}function Ee(t,e){return Array.isArray(t)?Te(t):void 0===t||void 0===e?Te():Te([[t,e]])}function Se(t,e){var r=0,n=void 0,i=void 0;if(!e)return 0;t&&t.length||(t=Ee(0,0));for(var o=0;o<t.length;o++)n=t.start(o),e<(i=t.end(o))&&(i=e),r+=i-n;return r/e}me.prototype.supportsRaf_="function"==typeof f.requestAnimationFrame&&"function"==typeof f.cancelAnimationFrame,me.registerComponent("Component",me);for(var we={},Ae=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],ke=Ae[0],Ce=void 0,xe=0;xe<Ae.length;xe++)if(Ae[xe][1]in p){Ce=Ae[xe];break}if(Ce)for(var Re=0;Re<Ce.length;Re++)we[ke[Re]]=Ce[Re];function Pe(t){if(t instanceof Pe)return t;"number"==typeof t?this.code=t:"string"==typeof t?this.message=t:K(t)&&("number"==typeof t.code&&(this.code=t.code),q(this,t)),this.message||(this.message=Pe.defaultMessages[this.code]||"")}Pe.prototype.code=0,Pe.prototype.message="",Pe.prototype.status=null,Pe.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Pe.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Le=0;Le<Pe.errorTypes.length;Le++)Pe[Pe.errorTypes[Le]]=Le,Pe.prototype[Pe.errorTypes[Le]]=Le;function Ie(t){return null!=t&&"function"==typeof t.then}function Oe(t){Ie(t)&&t.then(null,function(t){})}function De(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,e,r){return n[e]&&(t[e]=n[e]),t},{cues:n.cues&&Array.prototype.map.call(n.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})}var Ne,Me=function(t){var e=t.$$("track"),r=Array.prototype.map.call(e,function(t){return t.track});return Array.prototype.map.call(e,function(t){var e=De(t.track);return t.src&&(e.src=t.src),e}).concat(Array.prototype.filter.call(t.textTracks(),function(t){return-1===r.indexOf(t)}).map(De))},Fe=function(t,r){return t.forEach(function(t){var e=r.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(function(t){return e.addCue(t)})}),r.textTracks()},Be="vjs-modal-dialog",je=(i(Ue,Ne=me),Ue.prototype.createEl=function(){return Ne.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},Ue.prototype.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,Ne.prototype.dispose.call(this)},Ue.prototype.buildCSSClass=function(){return Be+" vjs-hidden "+Ne.prototype.buildCSSClass.call(this)},Ue.prototype.handleKeyPress=function(t){27===t.which&&this.closeable()&&this.close()},Ue.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")},Ue.prototype.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},Ue.prototype.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",ee(this,this.handleKeyPress)),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},Ue.prototype.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},Ue.prototype.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",ee(this,this.handleKeyPress)),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},Ue.prototype.closeable=function(t){if("boolean"==typeof t){var e=this.closeable_=!!t,r=this.getChild("closeButton");if(e&&!r){var n=this.contentEl_;this.contentEl_=this.el_,r=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(r,"close",this.close)}!e&&r&&(this.off(r,"close",this.close),this.removeChild(r),r.dispose())}return this.closeable_},Ue.prototype.fill=function(){this.fillWith(this.content())},Ue.prototype.fillWith=function(t){var e=this.contentEl(),r=e.parentNode,n=e.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(e),this.empty(),Ct(e,t),this.trigger("modalfill"),n?r.insertBefore(e,n):r.appendChild(e);var i=this.getChild("closeButton");i&&r.appendChild(i.el_)},Ue.prototype.empty=function(){this.trigger("beforemodalempty"),wt(this.contentEl()),this.trigger("modalempty")},Ue.prototype.content=function(t){return void 0!==t&&(this.content_=t),this.content_},Ue.prototype.conditionalFocus_=function(){var t=p.activeElement,e=this.player_.el_;this.previouslyActiveEl_=null,!e.contains(t)&&e!==t||(this.previouslyActiveEl_=t,this.focus(),this.on(p,"keydown",this.handleKeyDown))},Ue.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(p,"keydown",this.handleKeyDown)},Ue.prototype.handleKeyDown=function(t){if(9===t.which){for(var e=this.focusableEls_(),r=this.el_.querySelector(":focus"),n=void 0,i=0;i<e.length;i++)if(r===e[i]){n=i;break}p.activeElement===this.el_&&(n=0),t.shiftKey&&0===n?(e[e.length-1].focus(),t.preventDefault()):t.shiftKey||n!==e.length-1||(e[0].focus(),t.preventDefault())}},Ue.prototype.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(t){return(t instanceof f.HTMLAnchorElement||t instanceof f.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof f.HTMLInputElement||t instanceof f.HTMLSelectElement||t instanceof f.HTMLTextAreaElement||t instanceof f.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof f.HTMLIFrameElement||t instanceof f.HTMLObjectElement||t instanceof f.HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")})},Ue);function Ue(t,e){h(this,Ue);var r=d(this,Ne.call(this,t,e));return r.opened_=r.hasBeenOpened_=r.hasBeenFilled_=!1,r.closeable(!r.options_.uncloseable),r.content(r.options_.content),r.contentEl_=st("div",{className:Be+"-content"},{role:"document"}),r.descEl_=st("p",{className:Be+"-description vjs-control-text",id:r.el().getAttribute("aria-describedby")}),at(r.descEl_,r.description()),r.el_.appendChild(r.descEl_),r.el_.appendChild(r.contentEl_),r}je.prototype.options_={pauseOnOpen:!0,temporary:!0},me.registerComponent("ModalDialog",je);var Ve,Ge=(i(He,Ve=ie),He.prototype.addTrack=function(t){var e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.tracks_[e]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack"}))},He.prototype.removeTrack=function(t){for(var e=void 0,r=0,n=this.length;r<n;r++)if(this[r]===t){(e=this[r]).off&&e.off(),this.tracks_.splice(r,1);break}e&&this.trigger({track:e,type:"removetrack"})},He.prototype.getTrackById=function(t){for(var e=null,r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===t){e=i;break}}return e},He);function He(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;h(this,He);var r=d(this,Ve.call(this));if(!e&&(e=r,D))for(var n in e=p.createElement("custom"),He.prototype)"constructor"!==n&&(e[n]=He.prototype[n]);e.tracks_=[],Object.defineProperty(e,"length",{get:function(){return this.tracks_.length}});for(var i=0;i<t.length;i++)e.addTrack(t[i]);return d(r,e)}for(var We in Ge.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Ge.prototype.allowedEvents_)Ge.prototype["on"+We]=null;function qe(t,e){for(var r=0;r<t.length;r++)Object.keys(t[r]).length&&e.id!==t[r].id&&(t[r].enabled=!1)}var Ke,ze=(i(Ye,Ke=Ge),Ye.prototype.addTrack=function(t){var e=this;t.enabled&&qe(this,t),Ke.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("enabledchange",function(){e.changing_||(e.changing_=!0,qe(e,t),e.changing_=!1,e.trigger("change"))})},Ye);function Ye(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];h(this,Ye);for(var r=void 0,n=e.length-1;0<=n;n--)if(e[n].enabled){qe(e,e[n]);break}if(D){for(var i in r=p.createElement("custom"),Ge.prototype)"constructor"!==i&&(r[i]=Ge.prototype[i]);for(var o in Ye.prototype)"constructor"!==o&&(r[o]=Ye.prototype[o])}return(r=t=d(this,Ke.call(this,e,r))).changing_=!1,d(t,r)}function Xe(t,e){for(var r=0;r<t.length;r++)Object.keys(t[r]).length&&e.id!==t[r].id&&(t[r].selected=!1)}var Je,Qe=(i($e,Je=Ge),$e.prototype.addTrack=function(t){var e=this;t.selected&&Xe(this,t),Je.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("selectedchange",function(){e.changing_||(e.changing_=!0,Xe(e,t),e.changing_=!1,e.trigger("change"))})},$e);function $e(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];h(this,$e);for(var r=void 0,n=e.length-1;0<=n;n--)if(e[n].selected){Xe(e,e[n]);break}if(D){for(var i in r=p.createElement("custom"),Ge.prototype)"constructor"!==i&&(r[i]=Ge.prototype[i]);for(var o in $e.prototype)"constructor"!==o&&(r[o]=$e.prototype[o])}return(r=t=d(this,Je.call(this,e,r))).changing_=!1,Object.defineProperty(r,"selectedIndex",{get:function(){for(var t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set:function(){}}),d(t,r)}var Ze,tr=(i(er,Ze=Ge),er.prototype.addTrack=function(t){Ze.prototype.addTrack.call(this,t),t.addEventListener("modechange",ee(this,function(){this.trigger("change")})),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",ee(this,function(){this.trigger("selectedlanguagechange")}))},er);function er(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];h(this,er);var r=void 0;if(D){for(var n in r=p.createElement("custom"),Ge.prototype)"constructor"!==n&&(r[n]=Ge.prototype[n]);for(var i in er.prototype)"constructor"!==i&&(r[i]=er.prototype[i])}return t=d(this,Ze.call(this,e,r)),d(r=t,r)}var rr=(nr.prototype.addTrackElement_=function(t){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),-1===this.trackElements_.indexOf(t)&&this.trackElements_.push(t)},nr.prototype.getTrackElementByTrack_=function(t){for(var e=void 0,r=0,n=this.trackElements_.length;r<n;r++)if(t===this.trackElements_[r].track){e=this.trackElements_[r];break}return e},nr.prototype.removeTrackElement_=function(t){for(var e=0,r=this.trackElements_.length;e<r;e++)if(t===this.trackElements_[e]){this.trackElements_.splice(e,1);break}},nr);function nr(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];h(this,nr);var e=this;if(D)for(var r in e=p.createElement("custom"),nr.prototype)"constructor"!==r&&(e[r]=nr.prototype[r]);e.trackElements_=[],Object.defineProperty(e,"length",{get:function(){return this.trackElements_.length}});for(var n=0,i=t.length;n<i;n++)e.addTrackElement_(t[n]);if(D)return e}var ir=(or.prototype.setCues_=function(t){var e=this.length||0,r=0,n=t.length;function i(t){""+t in this||Object.defineProperty(this,""+t,{get:function(){return this.cues_[t]}})}if(this.cues_=t,this.length_=t.length,e<n)for(r=e;r<n;r++)i.call(this,r)},or.prototype.getCueById=function(t){for(var e=null,r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===t){e=i;break}}return e},or);function or(t){h(this,or);var e=this;if(D)for(var r in e=p.createElement("custom"),or.prototype)"constructor"!==r&&(e[r]=or.prototype[r]);if(or.prototype.setCues_.call(e,t),Object.defineProperty(e,"length",{get:function(){return this.length_}}),D)return e}var sr,ar={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},ur={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},cr={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},lr={disabled:"disabled",hidden:"hidden",showing:"showing"},hr=(i(dr,sr=ie),dr);function dr(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};h(this,dr);var e=d(this,sr.call(this)),r=e;if(D)for(var n in r=p.createElement("custom"),dr.prototype)"constructor"!==n&&(r[n]=dr.prototype[n]);function i(t){Object.defineProperty(r,t,{get:function(){return o[t]},set:function(){}})}var o={id:t.id||"vjs_track_"+Ot(),kind:t.kind||"",label:t.label||"",language:t.language||""};for(var s in o)i(s);return d(e,r)}function fr(t){var e=["protocol","hostname","port","pathname","search","hash","host"],r=p.createElement("a");r.href=t;var n=""===r.host&&"file:"!==r.protocol,i=void 0;n&&((i=p.createElement("div")).innerHTML='<a href="'+t+'"></a>',r=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),p.body.appendChild(i));for(var o={},s=0;s<e.length;s++)o[e[s]]=r[e[s]];return"http:"===o.protocol&&(o.host=o.host.replace(/:80$/,"")),"https:"===o.protocol&&(o.host=o.host.replace(/:443$/,"")),o.protocol||(o.protocol=f.location.protocol),n&&p.body.removeChild(i),o}function pr(t){if(!t.match(/^https?:\/\//)){var e=p.createElement("div");e.innerHTML='<a href="'+t+'">x</a>',t=e.firstChild.href}return t}function gr(t){if("string"==typeof t){var e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(t);if(e)return e.pop().toLowerCase()}return""}function vr(t){var e=f.location,r=fr(t);return(":"===r.protocol?e.protocol:r.protocol)+r.host!==e.protocol+e.host}function yr(t,e){var r=new f.WebVTT.Parser(f,f.vttjs,f.WebVTT.StringDecoder()),n=[];r.oncue=function(t){e.addCue(t)},r.onparsingerror=function(t){n.push(t)},r.onflush=function(){e.trigger({type:"loadeddata",target:e})},r.parse(t),0<n.length&&(f.console&&f.console.groupCollapsed&&f.console.groupCollapsed("Text Track parsing errors for "+e.src),n.forEach(function(t){return J.error(t)}),f.console&&f.console.groupEnd&&f.console.groupEnd()),r.flush()}var mr,_r=(Object.freeze||Object)({parseUrl:fr,getAbsoluteURL:pr,getFileExtension:gr,isCrossOrigin:vr}),br=(i(Tr,mr=hr),Tr.prototype.addCue=function(t){var e=t;if(f.vttjs&&!(t instanceof f.vttjs.VTTCue)){for(var r in e=new f.vttjs.VTTCue(t.startTime,t.endTime,t.text),t)r in e||(e[r]=t[r]);e.id=t.id,e.originalCue_=t}for(var n=this.tech_.textTracks(),i=0;i<n.length;i++)n[i]!==this&&n[i].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},Tr.prototype.removeCue=function(t){for(var e=this.cues_.length;e--;){var r=this.cues_[e];if(r===t||r.originalCue_&&r.originalCue_===t){this.cues_.splice(e,1),this.cues.setCues_(this.cues_);break}}},Tr);function Tr(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(h(this,Tr),!e.tech)throw new Error("A tech was not provided.");var r=ye(e,{kind:cr[e.kind]||"subtitles",language:e.language||e.srclang||""}),n=lr[r.mode]||"disabled",i=r.default;"metadata"!==r.kind&&"chapters"!==r.kind||(n="hidden");var o=t=d(this,mr.call(this,r));if(o.tech_=r.tech,D)for(var s in Tr.prototype)"constructor"!==s&&(o[s]=Tr.prototype[s]);o.cues_=[],o.activeCues_=[];var a=new ir(o.cues_),u=new ir(o.activeCues_),c=!1,l=ee(o,function(){this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1)});return"disabled"!==n&&o.tech_.ready(function(){o.tech_.on("timeupdate",l)},!0),Object.defineProperty(o,"default",{get:function(){return i},set:function(){}}),Object.defineProperty(o,"mode",{get:function(){return n},set:function(t){var e=this;lr[t]&&("disabled"!==(n=t)?this.tech_.ready(function(){e.tech_.on("timeupdate",l)},!0):this.tech_.off("timeupdate",l),this.trigger("modechange"))}}),Object.defineProperty(o,"cues",{get:function(){return this.loaded_?a:null},set:function(){}}),Object.defineProperty(o,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return u;for(var t=this.tech_.currentTime(),e=[],r=0,n=this.cues.length;r<n;r++){var i=this.cues[r];i.startTime<=t&&i.endTime>=t?e.push(i):i.startTime===i.endTime&&i.startTime<=t&&i.startTime+.5>=t&&e.push(i)}if(c=!1,e.length!==this.activeCues_.length)c=!0;else for(var o=0;o<e.length;o++)-1===this.activeCues_.indexOf(e[o])&&(c=!0);return this.activeCues_=e,u.setCues_(this.activeCues_),u},set:function(){}}),r.src?(o.src=r.src,function(t,i){var e={uri:t},r=vr(t);r&&(e.cors=r),v(e,ee(this,function(t,e,r){if(t)return J.error(t,e);if(i.loaded_=!0,"function"!=typeof f.WebVTT){if(i.tech_){function n(){return yr(r,i)}i.tech_.on("vttjsloaded",n),i.tech_.on("vttjserror",function(){J.error("vttjs failed to load, stopping trying to process "+i.src),i.tech_.off("vttjsloaded",n)})}}else yr(r,i)}))}(r.src,o)):o.loaded_=!0,d(t,o)}br.prototype.allowedEvents_={cuechange:"cuechange"};var Er,Sr=(i(wr,Er=hr),wr);function wr(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};h(this,wr);var r=ye(e,{kind:ur[e.kind]||""}),n=t=d(this,Er.call(this,r)),i=!1;if(D)for(var o in wr.prototype)"constructor"!==o&&(n[o]=wr.prototype[o]);return Object.defineProperty(n,"enabled",{get:function(){return i},set:function(t){"boolean"==typeof t&&t!==i&&(i=t,this.trigger("enabledchange"))}}),r.enabled&&(n.enabled=r.enabled),n.loaded_=!0,d(t,n)}var Ar,kr=(i(Cr,Ar=hr),Cr);function Cr(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};h(this,Cr);var r=ye(e,{kind:ar[e.kind]||""}),n=t=d(this,Ar.call(this,r)),i=!1;if(D)for(var o in Cr.prototype)"constructor"!==o&&(n[o]=Cr.prototype[o]);return Object.defineProperty(n,"selected",{get:function(){return i},set:function(t){"boolean"==typeof t&&t!==i&&(i=t,this.trigger("selectedchange"))}}),r.selected&&(n.selected=r.selected),d(t,n)}var xr,Rr=(i(Pr,xr=ie),Pr);function Pr(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};h(this,Pr);var e=d(this,xr.call(this)),r=void 0,n=e;if(D)for(var i in n=p.createElement("custom"),Pr.prototype)"constructor"!==i&&(n[i]=Pr.prototype[i]);var o=new br(t);return n.kind=o.kind,n.src=o.src,n.srclang=o.language,n.label=o.label,n.default=o.default,Object.defineProperty(n,"readyState",{get:function(){return r}}),Object.defineProperty(n,"track",{get:function(){return o}}),r=0,o.addEventListener("loadeddata",function(){r=2,n.trigger({type:"load",target:n})}),D?d(e,n):e}Rr.prototype.allowedEvents_={load:"load"},Rr.NONE=0,Rr.LOADING=1,Rr.LOADED=2,Rr.ERROR=3;var Lr={audio:{ListClass:ze,TrackClass:Sr,capitalName:"Audio"},video:{ListClass:Qe,TrackClass:kr,capitalName:"Video"},text:{ListClass:tr,TrackClass:br,capitalName:"Text"}};Object.keys(Lr).forEach(function(t){Lr[t].getterName=t+"Tracks",Lr[t].privateName=t+"Tracks_"});var Ir={remoteText:{ListClass:tr,TrackClass:br,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:rr,TrackClass:Rr,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Or=ye(Lr,Ir);Ir.names=Object.keys(Ir),Lr.names=Object.keys(Lr),Or.names=[].concat(Ir.names).concat(Lr.names);var Dr,Nr=(i(Mr,Dr=me),Mr.prototype.triggerSourceset=function(t){var e=this;this.isReady_||this.one("ready",function(){return e.setTimeout(function(){return e.triggerSourceset(t)},1)}),this.trigger({src:t,type:"sourceset"})},Mr.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},Mr.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},Mr.prototype.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ee(this,function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),1===(this.bufferedPercent_=t)&&this.stopTrackingProgress()}),500)},Mr.prototype.onDurationChange=function(t){this.duration_=this.duration()},Mr.prototype.buffered=function(){return Ee(0,0)},Mr.prototype.bufferedPercent=function(){return Se(this.buffered(),this.duration_)},Mr.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},Mr.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},Mr.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},Mr.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},Mr.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},Mr.prototype.dispose=function(){this.clearTracks(Lr.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),Dr.prototype.dispose.call(this)},Mr.prototype.clearTracks=function(t){var i=this;(t=[].concat(t)).forEach(function(t){for(var e=i[t+"Tracks"]()||[],r=e.length;r--;){var n=e[r];"text"===t&&i.removeRemoteTextTrack(n),e.removeTrack(n)}})},Mr.prototype.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],e=t.length;e--;){var r=t[e];this.removeRemoteTextTrack(r)}},Mr.prototype.reset=function(){},Mr.prototype.error=function(t){return void 0!==t&&(this.error_=new Pe(t),this.trigger("error")),this.error_},Mr.prototype.played=function(){return this.hasStarted_?Ee(0,0):Ee()},Mr.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},Mr.prototype.initTrackListeners=function(){var i=this;Lr.names.forEach(function(t){function e(){i.trigger(t+"trackchange")}var r=Lr[t],n=i[r.getterName]();n.addEventListener("removetrack",e),n.addEventListener("addtrack",e),i.on("dispose",function(){n.removeEventListener("removetrack",e),n.removeEventListener("addtrack",e)})})},Mr.prototype.addWebVttScript_=function(){var t=this;if(!f.WebVTT)if(p.body.contains(this.el())){if(!this.options_["vtt.js"]&&z(y)&&0<Object.keys(y).length)return void this.trigger("vttjsloaded");var e=p.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){e.onload=null,e.onerror=null}),f.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)},Mr.prototype.emulateTextTracks=function(){function e(t){return n.addTrack(t.track)}function r(t){return n.removeTrack(t.track)}var t=this,n=this.textTracks(),i=this.remoteTextTracks();function o(){return t.trigger("texttrackchange")}function s(){o();for(var t=0;t<n.length;t++){var e=n[t];e.removeEventListener("cuechange",o),"showing"===e.mode&&e.addEventListener("cuechange",o)}}i.on("addtrack",e),i.on("removetrack",r),this.addWebVttScript_(),s(),n.addEventListener("change",s),n.addEventListener("addtrack",s),n.addEventListener("removetrack",s),this.on("dispose",function(){i.off("addtrack",e),i.off("removetrack",r),n.removeEventListener("change",s),n.removeEventListener("addtrack",s),n.removeEventListener("removetrack",s);for(var t=0;t<n.length;t++)n[t].removeEventListener("cuechange",o)})},Mr.prototype.addTextTrack=function(t,e,r){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(t,e,r,n,i){var o=4<arguments.length&&void 0!==i?i:{},s=t.textTracks();o.kind=e,r&&(o.label=r),n&&(o.language=n),o.tech=t;var a=new Or.text.TrackClass(o);return s.addTrack(a),a}(this,t,e,r)},Mr.prototype.createRemoteTextTrack=function(t){var e=ye(t,{tech:this});return new Ir.remoteTextEl.TrackClass(e)},Mr.prototype.addRemoteTextTrack=function(t,e){var r=this,n=0<arguments.length&&void 0!==t?t:{},i=e,o=this.createRemoteTextTrack(n);return!0!==i&&!1!==i&&(J.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),i=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),!0!==i&&this.ready(function(){return r.autoRemoteTextTracks_.addTrack(o.track)}),o},Mr.prototype.removeRemoteTextTrack=function(t){var e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},Mr.prototype.getVideoPlaybackQuality=function(){return{}},Mr.prototype.setPoster=function(){},Mr.prototype.playsinline=function(){},Mr.prototype.setPlaysinline=function(){},Mr.prototype.canPlayType=function(){return""},Mr.canPlayType=function(){return""},Mr.canPlaySource=function(t,e){return Mr.canPlayType(t.type)},Mr.isTech=function(t){return t.prototype instanceof Mr||t instanceof Mr||t===Mr},Mr.registerTech=function(t,e){if(Mr.techs_||(Mr.techs_={}),!Mr.isTech(e))throw new Error("Tech "+t+" must be a Tech");if(!Mr.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Mr.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=ve(t),Mr.techs_[t]=e,"Tech"!==t&&Mr.defaultTechOrder_.push(t),e},Mr.getTech=function(t){if(t)return t=ve(t),Mr.techs_&&Mr.techs_[t]?Mr.techs_[t]:f&&f.videojs&&f.videojs[t]?(J.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),f.videojs[t]):void 0},Mr);function Mr(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};h(this,Mr),r.reportTouchActivity=!1;var n=d(this,Dr.call(this,null,r,t));return n.hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),Or.names.forEach(function(t){var e=Or[t];r&&r[e.getterName]&&(n[e.privateName]=r[e.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(t){!1===r["native"+t+"Tracks"]&&(n["featuresNative"+t+"Tracks"]=!1)}),!1===r.nativeCaptions||!1===r.nativeTextTracks?n.featuresNativeTextTracks=!1:!0!==r.nativeCaptions&&!0!==r.nativeTextTracks||(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.autoRemoteTextTracks_=new Or.text.ListClass,n.initTrackListeners(),r.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}Or.names.forEach(function(t){var e=Or[t];Nr.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),Nr.prototype.featuresVolumeControl=!0,Nr.prototype.featuresMuteControl=!0,Nr.prototype.featuresFullscreenResize=!1,Nr.prototype.featuresPlaybackRate=!1,Nr.prototype.featuresProgressEvents=!1,Nr.prototype.featuresSourceset=!1,Nr.prototype.featuresTimeupdateEvents=!1,Nr.prototype.featuresNativeTextTracks=!1,Nr.withSourceHandlers=function(i){i.registerSourceHandler=function(t,e){var r=i.sourceHandlers;r=r||(i.sourceHandlers=[]),void 0===e&&(e=r.length),r.splice(e,0,t)},i.canPlayType=function(t){for(var e=i.sourceHandlers||[],r=void 0,n=0;n<e.length;n++)if(r=e[n].canPlayType(t))return r;return""},i.selectSourceHandler=function(t,e){for(var r=i.sourceHandlers||[],n=0;n<r.length;n++)if(r[n].canHandleSource(t,e))return r[n];return null},i.canPlaySource=function(t,e){var r=i.selectSourceHandler(t,e);return r?r.canHandleSource(t,e):""};["seekable","seeking","duration"].forEach(function(t){var e=this[t];"function"==typeof e&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})},i.prototype),i.prototype.setSource=function(t){var e=i.selectSourceHandler(t,this.options_);e||(i.nativeSourceHandler?e=i.nativeSourceHandler:J.error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),e!==i.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=e.handleSource(t,this,this.options_),this.on("dispose",this.disposeSourceHandler)},i.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},me.registerComponent("Tech",Nr),Nr.registerTech("Tech",Nr),Nr.defaultTechOrder_=[];var Fr={},Br={},jr={};function Ur(t,e,r){t.setTimeout(function(){return function r(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];var i=arguments[2];var o=arguments[3];var s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[];var a=5<arguments.length&&void 0!==arguments[5]&&arguments[5];var e=t[0],u=t.slice(1);if("string"==typeof e)r(n,Fr[e],i,o,s,a);else if(e){var c=Kr(o,e);if(!c.setSource)return s.push(c),r(n,u,i,o,s,a);c.setSource(q({},n),function(t,e){if(t)return r(n,u,i,o,s,a);s.push(c),r(e,n.type===e.type?u:Fr[e.type],i,o,s,a)})}else u.length?r(n,u,i,o,s,a):a?i(n,s):r(n,Fr["*"],i,o,s,!0)}(e,Fr[e.type],r,t)},1)}function Vr(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:null,o="call"+ve(r),s=t.reduce(qr(o),i),a=s===jr,u=a?null:e[r](s);return function(t,e,r,n){for(var i=t.length-1;0<=i;i--){var o=t[i];o[e]&&o[e](n,r)}}(t,r,u,a),u}var Gr={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},Hr={setCurrentTime:1},Wr={play:1,pause:1};function qr(r){return function(t,e){return t===jr?jr:e[r]?e[r](t):t}}function Kr(t,e){var r=Br[t.id()],n=null;if(null==r)return n=e(t),Br[t.id()]=[[e,n]],n;for(var i=0;i<r.length;i++){var o=r[i],s=o[0],a=o[1];s===e&&(n=a)}return null===n&&(n=e(t),r.push([e,n])),n}function zr(t){var e=gr(0<arguments.length&&void 0!==t?t:"");return Yr[e.toLowerCase()]||""}var Yr={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"};function Xr(t){var e=zr(t.src);return!t.type&&e&&(t.type=e),t}var Jr,Qr=(i($r,Jr=me),$r);function $r(t,e,r){h(this,$r);var n=ye({createEl:!1},e),i=d(this,Jr.call(this,t,n,r));if(e.playerOptions.sources&&0!==e.playerOptions.sources.length)t.src(e.playerOptions.sources);else for(var o=0,s=e.playerOptions.techOrder;o<s.length;o++){var a=ve(s[o]),u=Nr.getTech(a);if(a||(u=me.getComponent(a)),u&&u.isSupported()){t.loadTech_(a);break}}return i}me.registerComponent("MediaLoader",Qr);var Zr,tn=(i(en,Zr=me),en.prototype.createEl=function(t,e,r){var n=0<arguments.length&&void 0!==t?t:"div",i=1<arguments.length&&void 0!==e?e:{},o=2<arguments.length&&void 0!==r?r:{};i=q({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},i),"button"===n&&J.error("Creating a ClickableComponent with an HTML element of "+n+" is not supported; use a Button instead."),o=q({role:"button"},o),this.tabIndex_=i.tabIndex;var s=Zr.prototype.createEl.call(this,n,i,o);return this.createControlTextEl(s),s},en.prototype.dispose=function(){this.controlTextEl_=null,Zr.prototype.dispose.call(this)},en.prototype.createControlTextEl=function(t){return this.controlTextEl_=st("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},en.prototype.controlText=function(t,e){var r=1<arguments.length&&void 0!==e?e:this.el();if(void 0===t)return this.controlText_||"Need Text";var n=this.localize(t);this.controlText_=t,at(this.controlTextEl_,n),this.nonIconControl||r.setAttribute("title",n)},en.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+Zr.prototype.buildCSSClass.call(this)},en.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},en.prototype.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},en.prototype.handleClick=function(t){},en.prototype.handleFocus=function(t){Wt(p,"keydown",ee(this,this.handleKeyPress))},en.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.trigger("click")):Zr.prototype.handleKeyPress&&Zr.prototype.handleKeyPress.call(this,t)},en.prototype.handleBlur=function(t){qt(p,"keydown",ee(this,this.handleKeyPress))},en);function en(t,e){h(this,en);var r=d(this,Zr.call(this,t,e));return r.emitTapEvents(),r.enable(),r}me.registerComponent("ClickableComponent",tn);var rn,nn=(i(on,rn=tn),on.prototype.dispose=function(){this.player().off("posterchange",this.update),rn.prototype.dispose.call(this)},on.prototype.createEl=function(){var t=st("div",{className:"vjs-poster",tabIndex:-1});return j||(this.fallbackImg_=st("img"),t.appendChild(this.fallbackImg_)),t},on.prototype.update=function(t){var e=this.player().poster();this.setSrc(e),e?this.show():this.hide()},on.prototype.setSrc=function(t){if(this.fallbackImg_)this.fallbackImg_.src=t;else{var e="";t&&(e='url("'+t+'")'),this.el_.style.backgroundImage=e}},on.prototype.handleClick=function(t){this.player_.controls()&&(this.player_.paused()?Oe(this.player_.play()):this.player_.pause())},on);function on(t,e){h(this,on);var r=d(this,rn.call(this,t,e));return r.update(),t.on("posterchange",ee(r,r.update)),r}me.registerComponent("PosterImage",nn);var sn={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function an(t,e){var r=void 0;if(4===t.length)r=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else{if(7!==t.length)throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");r=t.slice(1)}return"rgba("+parseInt(r.slice(0,2),16)+","+parseInt(r.slice(2,4),16)+","+parseInt(r.slice(4,6),16)+","+e+")"}function un(t,e,r){try{t.style[e]=r}catch(t){return}}var cn,ln=(i(hn,cn=me),hn.prototype.preselectTrack=function(){for(var t={captions:1,subtitles:1},e=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage,n=void 0,i=void 0,o=void 0,s=0;s<e.length;s++){var a=e[s];r&&r.enabled&&r.language===a.language?o=a.kind===r.kind?a:o||a:r&&!r.enabled?i=n=o=null:a.default&&("descriptions"!==a.kind||n?a.kind in t&&!i&&(i=a):n=a)}o?o.mode="showing":i?i.mode="showing":n&&(n.mode="showing")},hn.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},hn.prototype.createEl=function(){return cn.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},hn.prototype.clearDisplay=function(){"function"==typeof f.WebVTT&&f.WebVTT.processCues(f,[],this.el_)},hn.prototype.updateDisplay=function(){var t=this.player_.textTracks();this.clearDisplay();for(var e=null,r=null,n=t.length;n--;){var i=t[n];"showing"===i.mode&&("descriptions"===i.kind?e=i:r=i)}r?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(r)):e&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(e))},hn.prototype.updateForTrack=function(t){if("function"==typeof f.WebVTT&&t.activeCues){for(var e=[],r=0;r<t.activeCues.length;r++)e.push(t.activeCues[r]);if(f.WebVTT.processCues(f,e,this.el_),this.player_.textTrackSettings)for(var n=this.player_.textTrackSettings.getValues(),i=e.length;i--;){var o=e[i];if(o){var s=o.displayState;if(n.color&&(s.firstChild.style.color=n.color),n.textOpacity&&un(s.firstChild,"color",an(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(s.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&un(s.firstChild,"backgroundColor",an(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?un(s,"backgroundColor",an(n.windowColor,n.windowOpacity)):s.style.backgroundColor=n.windowColor),n.edgeStyle&&("dropshadow"===n.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===n.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===n.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===n.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),n.fontPercent&&1!==n.fontPercent){var a=f.parseFloat(s.style.fontSize);s.style.fontSize=a*n.fontPercent+"px",s.style.height="auto",s.style.top="auto",s.style.bottom="2px"}n.fontFamily&&"default"!==n.fontFamily&&("small-caps"===n.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=sn[n.fontFamily])}}}},hn);function hn(r,t,e){h(this,hn);var n=d(this,cn.call(this,r,t,e)),i=ee(n,n.updateDisplay);return r.on("loadstart",ee(n,n.toggleDisplay)),r.on("texttrackchange",i),r.on("loadstart",ee(n,n.preselectTrack)),r.ready(ee(n,function(){if(r.tech_&&r.tech_.featuresNativeTextTracks)this.hide();else{r.on("fullscreenchange",i),r.on("playerresize",i),f.addEventListener&&f.addEventListener("orientationchange",i),r.on("dispose",function(){return f.removeEventListener("orientationchange",i)});for(var t=this.options_.playerOptions.tracks||[],e=0;e<t.length;e++)this.player_.addRemoteTextTrack(t[e],!0);this.preselectTrack()}})),n}me.registerComponent("TextTrackDisplay",ln);var dn,fn=(i(pn,dn=me),pn.prototype.createEl=function(){var t=this.player_.isAudio(),e=this.localize(t?"Audio Player":"Video Player"),r=st("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[e])}),n=dn.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return n.appendChild(r),n},pn);function pn(){return h(this,pn),d(this,dn.apply(this,arguments))}me.registerComponent("LoadingSpinner",fn);var gn,vn=(i(yn,gn=tn),yn.prototype.createEl=function(t,e,r){var n=1<arguments.length&&void 0!==e?e:{},i=2<arguments.length&&void 0!==r?r:{};t="button",n=q({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},n),i=q({type:"button"},i);var o=me.prototype.createEl.call(this,"button",n,i);return this.createControlTextEl(o),o},yn.prototype.addChild=function(t,e){var r=1<arguments.length&&void 0!==e?e:{},n=this.constructor.name;return J.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),me.prototype.addChild.call(this,t,r)},yn.prototype.enable=function(){gn.prototype.enable.call(this),this.el_.removeAttribute("disabled")},yn.prototype.disable=function(){gn.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},yn.prototype.handleKeyPress=function(t){32!==t.which&&13!==t.which&&gn.prototype.handleKeyPress.call(this,t)},yn);function yn(){return h(this,yn),d(this,gn.apply(this,arguments))}me.registerComponent("Button",vn);var mn,_n=(i(bn,mn=vn),bn.prototype.buildCSSClass=function(){return"vjs-big-play-button"},bn.prototype.handleClick=function(t){var e=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY)Oe(e);else{var r=this.player_.getChild("controlBar"),n=r&&r.getChild("playToggle");if(n){function i(){return n.focus()}Ie(e)?e.then(i,function(){}):this.setTimeout(i,1)}else this.player_.focus()}},bn.prototype.handleKeyPress=function(t){this.mouseused_=!1,mn.prototype.handleKeyPress.call(this,t)},bn.prototype.handleMouseDown=function(t){this.mouseused_=!0},bn);function bn(t,e){h(this,bn);var r=d(this,mn.call(this,t,e));return r.mouseused_=!1,r.on("mousedown",r.handleMouseDown),r}_n.prototype.controlText_="Play Video",me.registerComponent("BigPlayButton",_n);var Tn,En=(i(Sn,Tn=vn),Sn.prototype.buildCSSClass=function(){return"vjs-close-button "+Tn.prototype.buildCSSClass.call(this)},Sn.prototype.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},Sn);function Sn(t,e){h(this,Sn);var r=d(this,Tn.call(this,t,e));return r.controlText(e&&e.controlText||r.localize("Close")),r}me.registerComponent("CloseButton",En);var wn,An=(i(kn,wn=vn),kn.prototype.buildCSSClass=function(){return"vjs-play-control "+wn.prototype.buildCSSClass.call(this)},kn.prototype.handleClick=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},kn.prototype.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},kn.prototype.handlePlay=function(t){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},kn.prototype.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},kn.prototype.handleEnded=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},kn);function kn(t,e){h(this,kn);var r=d(this,wn.call(this,t,e));return r.on(t,"play",r.handlePlay),r.on(t,"pause",r.handlePause),r.on(t,"ended",r.handleEnded),r}An.prototype.controlText_="Play",me.registerComponent("PlayToggle",An);function Cn(t,e){t=t<0?0:t;var r=Math.floor(t%60),n=Math.floor(t/60%60),i=Math.floor(t/3600),o=Math.floor(e/60%60),s=Math.floor(e/3600);return!isNaN(t)&&t!==1/0||(i=n=r="-"),(i=0<i||0<s?i+":":"")+(n=((i||10<=o)&&n<10?"0"+n:n)+":")+(r=r<10?"0"+r:r)}var xn=Cn;function Rn(t){return xn(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:t)}var Pn,Ln=(i(In,Pn=me),In.prototype.createEl=function(t){var e=this.buildCSSClass(),r=Pn.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=st("span",{className:e+"-display"},{"aria-live":"off"}),this.updateTextNode_(),r.appendChild(this.contentEl_),r},In.prototype.dispose=function(){this.contentEl_=null,this.textNode_=null,Pn.prototype.dispose.call(this)},In.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=p.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},In.prototype.formatTime_=function(t){return Rn(t)},In.prototype.updateFormattedTime_=function(t){var e=this.formatTime_(t);e!==this.formattedTime_&&(this.formattedTime_=e,this.requestAnimationFrame(this.updateTextNode_))},In.prototype.updateContent=function(t){},In);function In(t,e){h(this,In);var r=d(this,Pn.call(this,t,e));return r.throttledUpdateContent=re(ee(r,r.updateContent),25),r.on(t,"timeupdate",r.throttledUpdateContent),r}Ln.prototype.labelText_="Time",Ln.prototype.controlText_="Time",me.registerComponent("TimeDisplay",Ln);var On,Dn=(i(Nn,On=Ln),Nn.prototype.buildCSSClass=function(){return"vjs-current-time"},Nn.prototype.updateContent=function(t){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(e)},Nn.prototype.handleEnded=function(t){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},Nn);function Nn(t,e){h(this,Nn);var r=d(this,On.call(this,t,e));return r.on(t,"ended",r.handleEnded),r}Dn.prototype.labelText_="Current Time",Dn.prototype.controlText_="Current Time",me.registerComponent("CurrentTimeDisplay",Dn);var Mn,Fn=(i(Bn,Mn=Ln),Bn.prototype.buildCSSClass=function(){return"vjs-duration"},Bn.prototype.updateContent=function(t){var e=this.player_.duration();e&&this.duration_!==e&&(this.duration_=e,this.updateFormattedTime_(e))},Bn);function Bn(t,e){h(this,Bn);var r=d(this,Mn.call(this,t,e));return r.on(t,"durationchange",r.updateContent),r.on(t,"loadedmetadata",r.throttledUpdateContent),r}Fn.prototype.labelText_="Duration",Fn.prototype.controlText_="Duration",me.registerComponent("DurationDisplay",Fn);var jn,Un=(i(Vn,jn=me),Vn.prototype.createEl=function(){return jn.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},Vn);function Vn(){return h(this,Vn),d(this,jn.apply(this,arguments))}me.registerComponent("TimeDivider",Un);var Gn,Hn=(i(Wn,Gn=Ln),Wn.prototype.buildCSSClass=function(){return"vjs-remaining-time"},Wn.prototype.formatTime_=function(t){return"-"+Gn.prototype.formatTime_.call(this,t)},Wn.prototype.updateContent=function(t){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},Wn.prototype.handleEnded=function(t){this.player_.duration()&&this.updateFormattedTime_(0)},Wn);function Wn(t,e){h(this,Wn);var r=d(this,Gn.call(this,t,e));return r.on(t,"durationchange",r.throttledUpdateContent),r.on(t,"ended",r.handleEnded),r}Hn.prototype.labelText_="Remaining Time",Hn.prototype.controlText_="Remaining Time",me.registerComponent("RemainingTimeDisplay",Hn);var qn,Kn=(i(zn,qn=me),zn.prototype.createEl=function(){var t=qn.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=st("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},zn.prototype.dispose=function(){this.contentEl_=null,qn.prototype.dispose.call(this)},zn.prototype.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},zn);function zn(t,e){h(this,zn);var r=d(this,qn.call(this,t,e));return r.updateShowing(),r.on(r.player(),"durationchange",r.updateShowing),r}me.registerComponent("LiveDisplay",Kn);var Yn,Xn=(i(Jn,Yn=me),Jn.prototype.enabled=function(){return this.enabled_},Jn.prototype.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},Jn.prototype.disable=function(){if(this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},Jn.prototype.createEl=function(t,e,r){var n=1<arguments.length&&void 0!==e?e:{},i=2<arguments.length&&void 0!==r?r:{};return n.className=n.className+" vjs-slider",n=q({tabIndex:0},n),i=q({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),Yn.prototype.createEl.call(this,t,n,i)},Jn.prototype.handleMouseDown=function(t){var e=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"!==t.type||I||t.preventDefault(),mt(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchmove",this.handleMouseMove),this.on(e,"touchend",this.handleMouseUp),this.handleMouseMove(t)},Jn.prototype.handleMouseMove=function(t){},Jn.prototype.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;_t(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.update()},Jn.prototype.update=function(){if(this.el_){var t=this.getPercent(),e=this.bar;if(e){("number"!=typeof t||t!=t||t<0||t===1/0)&&(t=0);var r=(100*t).toFixed(2)+"%",n=e.el().style;return this.vertical()?n.height=r:n.width=r,t}}},Jn.prototype.calculateDistance=function(t){var e=Et(this.el_,t);return this.vertical()?e.y:e.x},Jn.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},Jn.prototype.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepBack()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepForward())},Jn.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},Jn.prototype.handleClick=function(t){t.stopImmediatePropagation(),t.preventDefault()},Jn.prototype.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},Jn);function Jn(t,e){h(this,Jn);var r=d(this,Yn.call(this,t,e));return r.bar=r.getChild(r.options_.barName),r.vertical(!!r.options_.vertical),r.enable(),r}me.registerComponent("Slider",Xn);var Qn,$n=(i(Zn,Qn=me),Zn.prototype.createEl=function(){return Qn.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},Zn.prototype.dispose=function(){this.partEls_=null,Qn.prototype.dispose.call(this)},Zn.prototype.update=function(t){function e(t,e){var r=t/e||0;return 100*(1<=r?1:r)+"%"}var r=this.player_.buffered(),n=this.player_.duration(),i=this.player_.bufferedEnd(),o=this.partEls_;this.el_.style.width=e(i,n);for(var s=0;s<r.length;s++){var a=r.start(s),u=r.end(s),c=o[s];c||(c=this.el_.appendChild(st()),o[s]=c),c.style.left=e(a,i),c.style.width=e(u-a,i)}for(var l=o.length;l>r.length;l--)this.el_.removeChild(o[l-1]);o.length=r.length},Zn);function Zn(t,e){h(this,Zn);var r=d(this,Qn.call(this,t,e));return r.partEls_=[],r.on(t,"progress",r.update),r}me.registerComponent("LoadProgressBar",$n);var ti,ei=(i(ri,ti=me),ri.prototype.createEl=function(){return ti.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},ri.prototype.update=function(t,e,r){var n=bt(this.el_),i=bt(this.player_.el()),o=t.width*e;if(i&&n){var s=t.left-i.left+o,a=t.width-o+(i.right-t.right),u=n.width/2;s<u?u+=u-s:a<u&&(u=a),u<0?u=0:u>n.width&&(u=n.width),this.el_.style.right="-"+u+"px",at(this.el_,r)}},ri);function ri(){return h(this,ri),d(this,ti.apply(this,arguments))}me.registerComponent("TimeTooltip",ei);var ni,ii=(i(oi,ni=me),oi.prototype.createEl=function(){return ni.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},oi.prototype.update=function(n,i){var o=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var t=o.player_.scrubbing()?o.player_.getCache().currentTime:o.player_.currentTime(),e=Rn(t,o.player_.duration()),r=o.getChild("timeTooltip");r&&r.update(n,i,e)})},oi);function oi(){return h(this,oi),d(this,ni.apply(this,arguments))}ii.prototype.options_={children:[]},N&&!(8<N)||w||k||ii.prototype.options_.children.push("timeTooltip"),me.registerComponent("PlayProgressBar",ii);var si,ai=(i(ui,si=me),ui.prototype.createEl=function(){return si.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},ui.prototype.update=function(r,n){var i=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var t=i.player_.duration(),e=Rn(n*t,t);i.el_.style.left=r.width*n+"px",i.getChild("timeTooltip").update(r,n,e)})},ui);function ui(t,e){h(this,ui);var r=d(this,si.call(this,t,e));return r.update=re(ee(r,r.update),25),r}ai.prototype.options_={children:["timeTooltip"]},me.registerComponent("MouseTimeDisplay",ai);var ci,li=(i(hi,ci=Xn),hi.prototype.setEventHandlers_=function(){var t=this;this.update=re(ee(this,this.update),30),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.updateInterval=null,this.on(this.player_,["playing"],function(){t.clearInterval(t.updateInterval),t.updateInterval=t.setInterval(function(){t.requestAnimationFrame(function(){t.update()})},30)}),this.on(this.player_,["ended","pause","waiting"],function(){t.clearInterval(t.updateInterval)}),this.on(this.player_,["timeupdate","ended"],this.update)},hi.prototype.createEl=function(){return ci.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},hi.prototype.update_=function(t,e){var r=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*e).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Rn(t,r),Rn(r,r)],"{1} of {2}")),this.bar.update(bt(this.el_),e)},hi.prototype.update=function(t){var e=ci.prototype.update.call(this);return this.update_(this.getCurrentTime_(),e),e},hi.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},hi.prototype.handleEnded=function(t){this.update_(this.player_.duration(),1)},hi.prototype.getPercent=function(){var t=this.getCurrentTime_()/this.player_.duration();return 1<=t?1:t},hi.prototype.handleMouseDown=function(t){xt(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),ci.prototype.handleMouseDown.call(this,t))},hi.prototype.handleMouseMove=function(t){if(xt(t)){var e=this.calculateDistance(t)*this.player_.duration();e===this.player_.duration()&&(e-=.1),this.player_.currentTime(e)}},hi.prototype.enable=function(){ci.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},hi.prototype.disable=function(){ci.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},hi.prototype.handleMouseUp=function(t){ci.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&Oe(this.player_.play())},hi.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},hi.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},hi.prototype.handleAction=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},hi.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleAction(t)):ci.prototype.handleKeyPress&&ci.prototype.handleKeyPress.call(this,t)},hi);function hi(t,e){h(this,hi);var r=d(this,ci.call(this,t,e));return r.setEventHandlers_(),r}li.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},N&&!(8<N)||w||k||li.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),li.prototype.playerEvent="timeupdate",me.registerComponent("SeekBar",li);var di,fi=(i(pi,di=me),pi.prototype.createEl=function(){return di.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},pi.prototype.handleMouseMove=function(t){var e=this.getChild("seekBar");if(e){var r=e.getChild("mouseTimeDisplay"),n=e.el(),i=bt(n),o=Et(n,t).x;1<o?o=1:o<0&&(o=0),r&&r.update(i,o)}},pi.prototype.handleMouseSeek=function(t){var e=this.getChild("seekBar");e&&e.handleMouseMove(t)},pi.prototype.enabled=function(){return this.enabled_},pi.prototype.disable=function(){this.children().forEach(function(t){return t.disable&&t.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},pi.prototype.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},pi.prototype.handleMouseDown=function(t){var e=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseDown(t),this.on(e,"mousemove",this.throttledHandleMouseSeek),this.on(e,"touchmove",this.throttledHandleMouseSeek),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},pi.prototype.handleMouseUp=function(t){var e=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseUp(t),this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},pi);function pi(t,e){h(this,pi);var r=d(this,di.call(this,t,e));return r.handleMouseMove=re(ee(r,r.handleMouseMove),25),r.throttledHandleMouseSeek=re(ee(r,r.handleMouseSeek),25),r.enable(),r}fi.prototype.options_={children:["seekBar"]},me.registerComponent("ProgressControl",fi);var gi,vi=(i(yi,gi=vn),yi.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+gi.prototype.buildCSSClass.call(this)},yi.prototype.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},yi.prototype.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},yi);function yi(t,e){h(this,yi);var r=d(this,gi.call(this,t,e));return r.on(t,"fullscreenchange",r.handleFullscreenChange),!1===p[we.fullscreenEnabled]&&r.disable(),r}vi.prototype.controlText_="Fullscreen",me.registerComponent("FullscreenToggle",vi);var mi,_i=(i(bi,mi=me),bi.prototype.createEl=function(){return mi.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},bi);function bi(){return h(this,bi),d(this,mi.apply(this,arguments))}me.registerComponent("VolumeLevel",_i);var Ti,Ei=(i(Si,Ti=Xn),Si.prototype.createEl=function(){return Ti.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},Si.prototype.handleMouseDown=function(t){xt(t)&&Ti.prototype.handleMouseDown.call(this,t)},Si.prototype.handleMouseMove=function(t){xt(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},Si.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},Si.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},Si.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},Si.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},Si.prototype.updateARIAAttributes=function(t){var e=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")},Si.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},Si.prototype.updateLastVolume_=function(){var t=this,e=this.player_.volume();this.one("sliderinactive",function(){0===t.player_.volume()&&t.player_.lastVolume_(e)})},Si);function Si(t,e){h(this,Si);var r=d(this,Ti.call(this,t,e));return r.on("slideractive",r.updateLastVolume_),r.on(t,"volumechange",r.updateARIAAttributes),t.ready(function(){return r.updateARIAAttributes()}),r}Ei.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Ei.prototype.playerEvent="volumechange",me.registerComponent("VolumeBar",Ei);var wi,Ai=(i(ki,wi=me),ki.prototype.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),wi.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},ki.prototype.handleMouseDown=function(t){var e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseMove),this.on(e,"touchmove",this.throttledHandleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},ki.prototype.handleMouseUp=function(t){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseMove),this.off(e,"touchmove",this.throttledHandleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},ki.prototype.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},ki);function ki(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};h(this,ki),e.vertical=e.vertical||!1,void 0!==e.volumeBar&&!z(e.volumeBar)||(e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical);var r=d(this,wi.call(this,t,e));return function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})}(r,t),r.throttledHandleMouseMove=re(ee(r,r.handleMouseMove),25),r.on("mousedown",r.handleMouseDown),r.on("touchstart",r.handleMouseDown),r.on(r.volumeBar,["focus","slideractive"],function(){r.volumeBar.addClass("vjs-slider-active"),r.addClass("vjs-slider-active"),r.trigger("slideractive")}),r.on(r.volumeBar,["blur","sliderinactive"],function(){r.volumeBar.removeClass("vjs-slider-active"),r.removeClass("vjs-slider-active"),r.trigger("sliderinactive")}),r}Ai.prototype.options_={children:["volumeBar"]},me.registerComponent("VolumeControl",Ai);var Ci,xi=(i(Ri,Ci=vn),Ri.prototype.buildCSSClass=function(){return"vjs-mute-control "+Ci.prototype.buildCSSClass.call(this)},Ri.prototype.handleClick=function(t){var e=this.player_.volume(),r=this.player_.lastVolume_();if(0===e){var n=r<.1?.1:r;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},Ri.prototype.update=function(t){this.updateIcon_(),this.updateControlText_()},Ri.prototype.updateIcon_=function(){var t=this.player_.volume(),e=3;w&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?e=0:t<.33?e=1:t<.67&&(e=2);for(var r=0;r<4;r++)ht(this.el_,"vjs-vol-"+r);lt(this.el_,"vjs-vol-"+e)},Ri.prototype.updateControlText_=function(){var t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},Ri);function Ri(t,e){h(this,Ri);var r=d(this,Ci.call(this,t,e));return function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})}(r,t),r.on(t,["loadstart","volumechange"],r.update),r}xi.prototype.controlText_="Mute",me.registerComponent("MuteToggle",xi);var Pi,Li=(i(Ii,Pi=me),Ii.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},Ii.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},Ii.prototype.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},Ii.prototype.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),Pi.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},Ii);function Ii(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};h(this,Ii),void 0!==e.inline?e.inline=e.inline:e.inline=!0,void 0!==e.volumeControl&&!z(e.volumeControl)||(e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline);var r=d(this,Pi.call(this,t,e));return r.on(t,["loadstart"],r.volumePanelState_),r.on(r.volumeControl,["slideractive"],r.sliderActive_),r.on(r.volumeControl,["sliderinactive"],r.sliderInactive_),r}Li.prototype.options_={children:["muteToggle","volumeControl"]},me.registerComponent("VolumePanel",Li);var Oi,Di=(i(Ni,Oi=me),Ni.prototype.addItem=function(e){this.addChild(e),e.on("click",ee(this,function(t){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus())}))},Ni.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=st(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var e=Oi.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return e.appendChild(this.contentEl_),Wt(e,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),e},Ni.prototype.dispose=function(){this.contentEl_=null,Oi.prototype.dispose.call(this)},Ni.prototype.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepForward()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepBack())},Ni.prototype.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},Ni.prototype.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},Ni.prototype.focus=function(t){var e=0<arguments.length&&void 0!==t?t:0,r=this.children().slice();r.length&&r[0].className&&/vjs-menu-title/.test(r[0].className)&&r.shift(),0<r.length&&(e<0?e=0:e>=r.length&&(e=r.length-1),r[this.focusedChild_=e].el_.focus())},Ni);function Ni(t,e){h(this,Ni);var r=d(this,Oi.call(this,t,e));return e&&(r.menuButton_=e.menuButton),r.focusedChild_=-1,r.on("keydown",r.handleKeyPress),r}me.registerComponent("Menu",Di);var Mi,Fi=(i(Bi,Mi=me),Bi.prototype.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},Bi.prototype.createMenu=function(){var t=new Di(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var e=st("li",{className:"vjs-menu-title",innerHTML:ve(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,t.children_.unshift(e),ut(e,t.contentEl())}if(this.items=this.createItems(),this.items)for(var r=0;r<this.items.length;r++)t.addItem(this.items[r]);return t},Bi.prototype.createItems=function(){},Bi.prototype.createEl=function(){return Mi.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},Bi.prototype.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+vn.prototype.buildCSSClass()+" "+Mi.prototype.buildCSSClass.call(this)},Bi.prototype.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+Mi.prototype.buildCSSClass.call(this)},Bi.prototype.controlText=function(t,e){var r=1<arguments.length&&void 0!==e?e:this.menuButton_.el();return this.menuButton_.controlText(t,r)},Bi.prototype.handleClick=function(t){this.one(this.menu.contentEl(),"mouseleave",ee(this,function(t){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},Bi.prototype.focus=function(){this.menuButton_.focus()},Bi.prototype.blur=function(){this.menuButton_.blur()},Bi.prototype.handleFocus=function(){Wt(p,"keydown",ee(this,this.handleKeyPress))},Bi.prototype.handleBlur=function(){qt(p,"keydown",ee(this,this.handleKeyPress))},Bi.prototype.handleKeyPress=function(t){27===t.which||9===t.which?(this.buttonPressed_&&this.unpressButton(),9!==t.which&&(t.preventDefault(),this.menuButton_.el_.focus())):38!==t.which&&40!==t.which||this.buttonPressed_||(this.pressButton(),t.preventDefault())},Bi.prototype.handleSubmenuKeyPress=function(t){27!==t.which&&9!==t.which||(this.buttonPressed_&&this.unpressButton(),9!==t.which&&(t.preventDefault(),this.menuButton_.el_.focus()))},Bi.prototype.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),w&&it())return;this.menu.focus()}},Bi.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},Bi.prototype.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},Bi.prototype.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},Bi);function Bi(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};h(this,Bi);var r=d(this,Mi.call(this,t,e));r.menuButton_=new vn(t,e),r.menuButton_.controlText(r.controlText_),r.menuButton_.el_.setAttribute("aria-haspopup","true");var n=vn.prototype.buildCSSClass();return r.menuButton_.el_.className=r.buildCSSClass()+" "+n,r.menuButton_.removeClass("vjs-control"),r.addChild(r.menuButton_),r.update(),r.enabled_=!0,r.on(r.menuButton_,"tap",r.handleClick),r.on(r.menuButton_,"click",r.handleClick),r.on(r.menuButton_,"focus",r.handleFocus),r.on(r.menuButton_,"blur",r.handleBlur),r.on("keydown",r.handleSubmenuKeyPress),r}me.registerComponent("MenuButton",Fi);var ji,Ui=(i(Vi,ji=Fi),Vi);function Vi(t,e){h(this,Vi);var r=e.tracks,n=d(this,ji.call(this,t,e));if(n.items.length<=1&&n.hide(),!r)return d(n);var i=ee(n,n.update);return r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),n.player_.on("ready",i),n.player_.on("dispose",function(){r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)}),n}me.registerComponent("TrackButton",Ui);var Gi,Hi=(i(Wi,Gi=tn),Wi.prototype.createEl=function(t,e,r){return this.nonIconControl=!0,Gi.prototype.createEl.call(this,"li",q({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},e),r)},Wi.prototype.handleClick=function(t){this.selected(!0)},Wi.prototype.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},Wi);function Wi(t,e){h(this,Wi);var r=d(this,Gi.call(this,t,e));return r.selectable=e.selectable,r.isSelected_=e.selected||!1,r.multiSelectable=e.multiSelectable,r.selected(r.isSelected_),r.selectable?r.multiSelectable?r.el_.setAttribute("role","menuitemcheckbox"):r.el_.setAttribute("role","menuitemradio"):r.el_.setAttribute("role","menuitem"),r}me.registerComponent("MenuItem",Hi);var qi,Ki=(i(zi,qi=Hi),zi.prototype.handleClick=function(t){var e=this.track.kind,r=this.track.kinds,n=this.player_.textTracks();if(r=r||[e],qi.prototype.handleClick.call(this,t),n)for(var i=0;i<n.length;i++){var o=n[i];o===this.track&&-1<r.indexOf(o.kind)?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled")}},zi.prototype.handleTracksChange=function(t){var e="showing"===this.track.mode;e!==this.isSelected_&&this.selected(e)},zi.prototype.handleSelectedLanguageChange=function(t){if("showing"===this.track.mode){var e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},zi.prototype.dispose=function(){this.track=null,qi.prototype.dispose.call(this)},zi);function zi(t,e){h(this,zi);var r=e.track,n=t.textTracks();e.label=r.label||r.language||"Unknown",e.selected="showing"===r.mode;var i=d(this,qi.call(this,t,e));i.track=r;function o(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];i.handleTracksChange.apply(i,e)}function s(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];i.handleSelectedLanguageChange.apply(i,e)}if(t.on(["loadstart","texttrackchange"],o),n.addEventListener("change",o),n.addEventListener("selectedlanguagechange",s),i.on("dispose",function(){t.off(["loadstart","texttrackchange"],o),n.removeEventListener("change",o),n.removeEventListener("selectedlanguagechange",s)}),void 0===n.onchange){var a=void 0;i.on(["tap","click"],function(){if("object"!==V(f.Event))try{a=new f.Event("change")}catch(t){}a||(a=p.createEvent("Event")).initEvent("change",!0,!0),n.dispatchEvent(a)})}return i.handleTracksChange(),i}me.registerComponent("TextTrackMenuItem",Ki);var Yi,Xi=(i(Ji,Yi=Ki),Ji.prototype.handleTracksChange=function(t){for(var e=this.player().textTracks(),r=!0,n=0,i=e.length;n<i;n++){var o=e[n];if(-1<this.options_.kinds.indexOf(o.kind)&&"showing"===o.mode){r=!1;break}}r!==this.isSelected_&&this.selected(r)},Ji.prototype.handleSelectedLanguageChange=function(t){for(var e=this.player().textTracks(),r=!0,n=0,i=e.length;n<i;n++){var o=e[n];if(-1<["captions","descriptions","subtitles"].indexOf(o.kind)&&"showing"===o.mode){r=!1;break}}r&&(this.player_.cache_.selectedLanguage={enabled:!1})},Ji);function Ji(t,e){return h(this,Ji),e.track={player:t,kind:e.kind,kinds:e.kinds,default:!1,mode:"disabled"},e.kinds||(e.kinds=[e.kind]),e.label?e.track.label=e.label:e.track.label=e.kinds.join(" and ")+" off",e.selectable=!0,e.multiSelectable=!1,d(this,Yi.call(this,t,e))}me.registerComponent("OffTextTrackMenuItem",Xi);var Qi,$i=(i(Zi,Qi=Ui),Zi.prototype.createItems=function(t,e){var r=0<arguments.length&&void 0!==t?t:[],n=1<arguments.length&&void 0!==e?e:Ki,i=void 0;this.label_&&(i=this.label_+" off"),r.push(new Xi(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var s=0;s<o.length;s++){var a=o[s];if(-1<this.kinds_.indexOf(a.kind)){var u=new n(this.player_,{track:a,selectable:!0,multiSelectable:!1});u.addClass("vjs-"+a.kind+"-menu-item"),r.push(u)}}return r},Zi);function Zi(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return h(this,Zi),e.tracks=t.textTracks(),d(this,Qi.call(this,t,e))}me.registerComponent("TextTrackButton",$i);var to,eo=(i(ro,to=Hi),ro.prototype.handleClick=function(t){to.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},ro.prototype.update=function(t){var e=this.cue,r=this.player_.currentTime();this.selected(e.startTime<=r&&r<e.endTime)},ro);function ro(t,e){h(this,ro);var r=e.track,n=e.cue,i=t.currentTime();e.selectable=!0,e.multiSelectable=!1,e.label=n.text,e.selected=n.startTime<=i&&i<n.endTime;var o=d(this,to.call(this,t,e));return o.track=r,o.cue=n,r.addEventListener("cuechange",ee(o,o.update)),o}me.registerComponent("ChaptersTrackMenuItem",eo);var no,io=(i(oo,no=$i),oo.prototype.buildCSSClass=function(){return"vjs-chapters-button "+no.prototype.buildCSSClass.call(this)},oo.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+no.prototype.buildWrapperCSSClass.call(this)},oo.prototype.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),no.prototype.update.call(this)},oo.prototype.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var r=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);r&&r.addEventListener("load",this.updateHandler_)}}},oo.prototype.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],e=t.length-1;0<=e;e--){var r=t[e];if(r.kind===this.kind_)return r}},oo.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(ve(this.kind_))},oo.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),no.prototype.createMenu.call(this)},oo.prototype.createItems=function(){var t=[];if(!this.track_)return t;var e=this.track_.cues;if(!e)return t;for(var r=0,n=e.length;r<n;r++){var i=e[r],o=new eo(this.player_,{track:this.track_,cue:i});t.push(o)}return t},oo);function oo(t,e,r){return h(this,oo),d(this,no.call(this,t,e,r))}io.prototype.kind_="chapters",io.prototype.controlText_="Chapters",me.registerComponent("ChaptersButton",io);var so,ao=(i(uo,so=$i),uo.prototype.handleTracksChange=function(t){for(var e=this.player().textTracks(),r=!1,n=0,i=e.length;n<i;n++){var o=e[n];if(o.kind!==this.kind_&&"showing"===o.mode){r=!0;break}}r?this.disable():this.enable()},uo.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+so.prototype.buildCSSClass.call(this)},uo.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+so.prototype.buildWrapperCSSClass.call(this)},uo);function uo(t,e,r){h(this,uo);var n=d(this,so.call(this,t,e,r)),i=t.textTracks(),o=ee(n,n.handleTracksChange);return i.addEventListener("change",o),n.on("dispose",function(){i.removeEventListener("change",o)}),n}ao.prototype.kind_="descriptions",ao.prototype.controlText_="Descriptions",me.registerComponent("DescriptionsButton",ao);var co,lo=(i(ho,co=$i),ho.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+co.prototype.buildCSSClass.call(this)},ho.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+co.prototype.buildWrapperCSSClass.call(this)},ho);function ho(t,e,r){return h(this,ho),d(this,co.call(this,t,e,r))}lo.prototype.kind_="subtitles",lo.prototype.controlText_="Subtitles",me.registerComponent("SubtitlesButton",lo);var fo,po=(i(go,fo=Ki),go.prototype.handleClick=function(t){this.player().getChild("textTrackSettings").open()},go);function go(t,e){h(this,go),e.track={player:t,kind:e.kind,label:e.kind+" settings",selectable:!1,default:!1,mode:"disabled"},e.selectable=!1,e.name="CaptionSettingsMenuItem";var r=d(this,fo.call(this,t,e));return r.addClass("vjs-texttrack-settings"),r.controlText(", opens "+e.kind+" settings dialog"),r}me.registerComponent("CaptionSettingsMenuItem",po);var vo,yo=(i(mo,vo=$i),mo.prototype.buildCSSClass=function(){return"vjs-captions-button "+vo.prototype.buildCSSClass.call(this)},mo.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+vo.prototype.buildWrapperCSSClass.call(this)},mo.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new po(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),vo.prototype.createItems.call(this,t)},mo);function mo(t,e,r){return h(this,mo),d(this,vo.call(this,t,e,r))}yo.prototype.kind_="captions",yo.prototype.controlText_="Captions",me.registerComponent("CaptionsButton",yo);var _o,bo=(i(To,_o=Ki),To.prototype.createEl=function(t,e,r){var n='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(n+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),n+="</span>",_o.prototype.createEl.call(this,t,q({innerHTML:n},e),r)},To);function To(){return h(this,To),d(this,_o.apply(this,arguments))}me.registerComponent("SubsCapsMenuItem",bo);var Eo,So=(i(wo,Eo=$i),wo.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+Eo.prototype.buildCSSClass.call(this)},wo.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+Eo.prototype.buildWrapperCSSClass.call(this)},wo.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new po(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=Eo.prototype.createItems.call(this,t,bo)},wo);function wo(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};h(this,wo);var r=d(this,Eo.call(this,t,e));return r.label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(r.player_.language_)&&(r.label_="captions"),r.menuButton_.controlText(ve(r.label_)),r}So.prototype.kinds_=["captions","subtitles"],So.prototype.controlText_="Subtitles",me.registerComponent("SubsCapsButton",So);var Ao,ko=(i(Co,Ao=Hi),Co.prototype.createEl=function(t,e,r){var n='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(n+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),n+="</span>",Ao.prototype.createEl.call(this,t,q({innerHTML:n},e),r)},Co.prototype.handleClick=function(t){var e=this.player_.audioTracks();Ao.prototype.handleClick.call(this,t);for(var r=0;r<e.length;r++){var n=e[r];n.enabled=n===this.track}},Co.prototype.handleTracksChange=function(t){this.selected(this.track.enabled)},Co);function Co(t,e){h(this,Co);var r=e.track,n=t.audioTracks();e.label=r.label||r.language||"Unknown",e.selected=r.enabled;var i=d(this,Ao.call(this,t,e));i.track=r,i.addClass("vjs-"+r.kind+"-menu-item");function o(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];i.handleTracksChange.apply(i,e)}return n.addEventListener("change",o),i.on("dispose",function(){n.removeEventListener("change",o)}),i}me.registerComponent("AudioTrackMenuItem",ko);var xo,Ro=(i(Po,xo=Ui),Po.prototype.buildCSSClass=function(){return"vjs-audio-button "+xo.prototype.buildCSSClass.call(this)},Po.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+xo.prototype.buildWrapperCSSClass.call(this)},Po.prototype.createItems=function(t){var e=0<arguments.length&&void 0!==t?t:[];this.hideThreshold_=1;for(var r=this.player_.audioTracks(),n=0;n<r.length;n++){var i=r[n];e.push(new ko(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e},Po);function Po(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return h(this,Po),e.tracks=t.audioTracks(),d(this,xo.call(this,t,e))}Ro.prototype.controlText_="Audio Track",me.registerComponent("AudioTrackButton",Ro);var Lo,Io=(i(Oo,Lo=Hi),Oo.prototype.handleClick=function(t){Lo.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},Oo.prototype.update=function(t){this.selected(this.player().playbackRate()===this.rate)},Oo);function Oo(t,e){h(this,Oo);var r=e.rate,n=parseFloat(r,10);e.label=r,e.selected=1===n,e.selectable=!0,e.multiSelectable=!1;var i=d(this,Lo.call(this,t,e));return i.label=r,i.rate=n,i.on(t,"ratechange",i.update),i}Io.prototype.contentElType="button",me.registerComponent("PlaybackRateMenuItem",Io);var Do,No=(i(Mo,Do=Fi),Mo.prototype.createEl=function(){var t=Do.prototype.createEl.call(this);return this.labelEl_=st("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},Mo.prototype.dispose=function(){this.labelEl_=null,Do.prototype.dispose.call(this)},Mo.prototype.buildCSSClass=function(){return"vjs-playback-rate "+Do.prototype.buildCSSClass.call(this)},Mo.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+Do.prototype.buildWrapperCSSClass.call(this)},Mo.prototype.createMenu=function(){var t=new Di(this.player()),e=this.playbackRates();if(e)for(var r=e.length-1;0<=r;r--)t.addChild(new Io(this.player(),{rate:e[r]+"x"}));return t},Mo.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},Mo.prototype.handleClick=function(t){for(var e=this.player().playbackRate(),r=this.playbackRates(),n=r[0],i=0;i<r.length;i++)if(r[i]>e){n=r[i];break}this.player().playbackRate(n)},Mo.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},Mo.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},Mo.prototype.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},Mo.prototype.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},Mo);function Mo(t,e){h(this,Mo);var r=d(this,Do.call(this,t,e));return r.updateVisibility(),r.updateLabel(),r.on(t,"loadstart",r.updateVisibility),r.on(t,"ratechange",r.updateLabel),r}No.prototype.controlText_="Playback Rate",me.registerComponent("PlaybackRateMenuButton",No);var Fo,Bo=(i(jo,Fo=me),jo.prototype.buildCSSClass=function(){return"vjs-spacer "+Fo.prototype.buildCSSClass.call(this)},jo.prototype.createEl=function(){return Fo.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},jo);function jo(){return h(this,jo),d(this,Fo.apply(this,arguments))}me.registerComponent("Spacer",Bo);var Uo,Vo=(i(Go,Uo=Bo),Go.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+Uo.prototype.buildCSSClass.call(this)},Go.prototype.createEl=function(){var t=Uo.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML=" ",t},Go);function Go(){return h(this,Go),d(this,Uo.apply(this,arguments))}me.registerComponent("CustomControlSpacer",Vo);var Ho,Wo=(i(qo,Ho=me),qo.prototype.createEl=function(){return Ho.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},qo);function qo(){return h(this,qo),d(this,Ho.apply(this,arguments))}Wo.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},me.registerComponent("ControlBar",Wo);var Ko,zo=(i(Yo,Ko=je),Yo.prototype.buildCSSClass=function(){return"vjs-error-display "+Ko.prototype.buildCSSClass.call(this)},Yo.prototype.content=function(){var t=this.player().error();return t?this.localize(t.message):""},Yo);function Yo(t,e){h(this,Yo);var r=d(this,Ko.call(this,t,e));return r.on(t,"error",r.open),r}zo.prototype.options_=ye(je.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),me.registerComponent("ErrorDisplay",zo);var Xo="vjs-text-track-settings",Jo=["#000","Black"],Qo=["#00F","Blue"],$o=["#0FF","Cyan"],Zo=["#0F0","Green"],ts=["#F0F","Magenta"],es=["#F00","Red"],rs=["#FFF","White"],ns=["#FF0","Yellow"],is=["1","Opaque"],os=["0.5","Semi-Transparent"],ss=["0","Transparent"],as={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Jo,rs,es,Zo,Qo,ns,ts,$o]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[is,os,ss]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[rs,Jo,es,Zo,Qo,ns,ts,$o]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return"1.00"===t?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[is,os]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[ss,os,is]}};function us(t,e){if(e&&(t=e(t)),t&&"none"!==t)return t}as.windowColor.options=as.backgroundColor.options;var cs,ls=(i(hs,cs=je),hs.prototype.dispose=function(){this.endDialog=null,cs.prototype.dispose.call(this)},hs.prototype.createElSelect_=function(t,e,r){var n=this,i=1<arguments.length&&void 0!==e?e:"",o=2<arguments.length&&void 0!==r?r:"label",s=as[t],a=s.id.replace("%s",this.id_),u=[i,a].join(" ").trim();return["<"+o+' id="'+a+'" class="'+("label"===o?"vjs-label":"")+'">',this.localize(s.label),"</"+o+">",'<select aria-labelledby="'+u+'">'].concat(s.options.map(function(t){var e=a+"-"+t[1].replace(/\W+/g,"");return['<option id="'+e+'" value="'+t[0]+'" ','aria-labelledby="'+u+" "+e+'">',n.localize(t[1]),"</option>"].join("")})).concat("</select>").join("")},hs.prototype.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},hs.prototype.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},hs.prototype.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},hs.prototype.createElColors_=function(){return st("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},hs.prototype.createElFont_=function(){return st("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},hs.prototype.createElControls_=function(){var t=this.localize("restore all settings to the default values");return st("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},hs.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},hs.prototype.label=function(){return this.localize("Caption Settings Dialog")},hs.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},hs.prototype.buildCSSClass=function(){return cs.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},hs.prototype.getValues=function(){var i=this;return function(r,n,t){var e=2<arguments.length&&void 0!==t?t:0;return H(r).reduce(function(t,e){return n(t,r[e],e)},e)}(as,function(t,e,r){var n=function(t,e){return us(t.options[t.options.selectedIndex].value,e)}(i.$(e.selector),e.parser);return void 0!==n&&(t[r]=n),t},{})},hs.prototype.setValues=function(r){var n=this;W(as,function(t,e){!function(t,e,r){if(e)for(var n=0;n<t.options.length;n++)if(us(t.options[n].value,r)===e){t.selectedIndex=n;break}}(n.$(t.selector),r[e],t.parser)})},hs.prototype.setDefaults=function(){var r=this;W(as,function(t){var e=t.hasOwnProperty("default")?t.default:0;r.$(t.selector).selectedIndex=e})},hs.prototype.restoreSettings=function(){var t=void 0;try{t=JSON.parse(f.localStorage.getItem(Xo))}catch(t){J.warn(t)}t&&this.setValues(t)},hs.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?f.localStorage.setItem(Xo,JSON.stringify(t)):f.localStorage.removeItem(Xo)}catch(t){J.warn(t)}}},hs.prototype.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},hs.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(p,"keydown",this.handleKeyDown);var t=this.player_.controlBar,e=t&&t.subsCapsButton,r=t&&t.captionsButton;e?e.focus():r&&r.focus()},hs);function hs(t,e){h(this,hs),e.temporary=!1;var r=d(this,cs.call(this,t,e));return r.updateDisplay=ee(r,r.updateDisplay),r.fill(),r.hasBeenOpened_=r.hasBeenFilled_=!0,r.endDialog=st("p",{className:"vjs-control-text",textContent:r.localize("End of dialog window.")}),r.el().appendChild(r.endDialog),r.setDefaults(),void 0===e.persistTextTrackSettings&&(r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings),r.on(r.$(".vjs-done-button"),"click",function(){r.saveSettings(),r.close()}),r.on(r.$(".vjs-default-button"),"click",function(){r.setDefaults(),r.updateDisplay()}),W(as,function(t){r.on(r.$(t.selector),"change",r.updateDisplay)}),r.options_.persistTextTrackSettings&&r.restoreSettings(),r}me.registerComponent("TextTrackSettings",ls);var ds,fs=(i(ps,ds=me),ps.prototype.createEl=function(){return ds.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},ps.prototype.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},ps.prototype.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&qt(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null},ps);function ps(t,e){h(this,ps);var r=e.ResizeObserver||f.ResizeObserver;null===e.ResizeObserver&&(r=!1);var n=ye({createEl:!r},e),i=d(this,ds.call(this,t,n));return i.ResizeObserver=e.ResizeObserver||f.ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHandler_=ne(function(){i.resizeHandler()},100,!1,i),r?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(t.el())):(i.loadListener_=function(){i.el_&&i.el_.contentWindow&&Wt(i.el_.contentWindow,"resize",i.debouncedHandler_)},i.one("load",i.loadListener_)),i}me.registerComponent("ResizeManager",fs);function gs(t){var e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;var r=t.$$("source"),n=[],i="";if(!r.length)return!1;for(var o=0;o<r.length;o++){var s=r[o].src;s&&-1===n.indexOf(s)&&n.push(s)}return!!n.length&&(1===n.length&&(i=n[0]),t.triggerSourceset(i),!0)}var vs={};D||(vs=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(t){var e=p.createElement(this.nodeName.toLowerCase());e.innerHTML=t;for(var r=p.createDocumentFragment();e.childNodes.length;)r.appendChild(e.childNodes[0]);return this.innerText="",f.Element.prototype.appendChild.call(this,r),this.innerHTML}}));function ys(t,e){for(var r={},n=0;n<t.length&&!((r=Object.getOwnPropertyDescriptor(t[n],e))&&r.set&&r.get);n++);return r.enumerable=!0,r.configurable=!0,r}function ms(o){var s=o.el();if(!s.resetSourceWatch_){function e(i){return function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=i.apply(s,e);return gs(o),n}}var r={},t=function(t){return ys([t.el(),f.HTMLMediaElement.prototype,f.Element.prototype,vs],"innerHTML")}(o);["append","appendChild","insertAdjacentHTML"].forEach(function(t){s[t]&&(r[t]=s[t],s[t]=e(r[t]))}),Object.defineProperty(s,"innerHTML",ye(t,{set:e(t.set)})),s.resetSourceWatch_=function(){s.resetSourceWatch_=null,Object.keys(r).forEach(function(t){s[t]=r[t]}),Object.defineProperty(s,"innerHTML",t)},o.one("sourceset",s.resetSourceWatch_)}}var _s={};D||(_s=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?pr(f.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return f.Element.prototype.setAttribute.call(this,"src",t),t}}));function bs(n){if(n.featuresSourceset){var i=n.el();if(!i.resetSourceset_){var r=function(t){return ys([t.el(),f.HTMLMediaElement.prototype,_s],"src")}(n),o=i.setAttribute,e=i.load;Object.defineProperty(i,"src",ye(r,{set:function(t){var e=r.set.call(i,t);return n.triggerSourceset(i.src),e}})),i.setAttribute=function(t,e){var r=o.call(i,t,e);return/src/i.test(t)&&n.triggerSourceset(i.src),r},i.load=function(){var t=e.call(i);return gs(n)||(n.triggerSourceset(""),ms(n)),t},i.currentSrc?n.triggerSourceset(i.currentSrc):gs(n)||ms(n),i.resetSourceset_=function(){i.resetSourceset_=null,i.load=e,i.setAttribute=o,Object.defineProperty(i,"src",r),i.resetSourceWatch_&&i.resetSourceWatch_()}}}}var Ts,Es=o(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),Ss=(i(ws,Ts=Nr),ws.prototype.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),ws.disposeMediaElement(this.el_),this.options_=null,Ts.prototype.dispose.call(this)},ws.prototype.setupSourcesetHandling_=function(){bs(this)},ws.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){function t(){n=[];for(var t=0;t<r.length;t++){var e=r[t];"metadata"===e.kind&&n.push({track:e,storedMode:e.mode})}}var r=this.textTracks(),n=void 0;function i(){for(var t=0;t<n.length;t++){var e=n[t];"disabled"===e.track.mode&&e.track.mode!==e.storedMode&&(e.track.mode=e.storedMode)}r.removeEventListener("change",i)}t(),r.addEventListener("change",t),this.on("dispose",function(){return r.removeEventListener("change",t)}),this.on("webkitbeginfullscreen",function(){r.removeEventListener("change",t),r.removeEventListener("change",i),r.addEventListener("change",i)}),this.on("webkitendfullscreen",function(){r.removeEventListener("change",t),r.addEventListener("change",t),r.removeEventListener("change",i)})},ws.prototype.proxyNativeTracks_=function(){var s=this;Lr.names.forEach(function(t){var e=Lr[t],i=s.el()[e.getterName],o=s[e.getterName]();if(s["featuresNative"+e.capitalName+"Tracks"]&&i&&i.addEventListener){function r(){for(var t=[],e=0;e<o.length;e++){for(var r=!1,n=0;n<i.length;n++)if(i[n]===o[e]){r=!0;break}r||t.push(o[e])}for(;t.length;)o.removeTrack(t.shift())}var n={change:function(t){o.trigger({type:"change",target:o,currentTarget:o,srcElement:o})},addtrack:function(t){o.addTrack(t.track)},removetrack:function(t){o.removeTrack(t.track)}};Object.keys(n).forEach(function(e){var r=n[e];i.addEventListener(e,r),s.on("dispose",function(t){return i.removeEventListener(e,r)})}),s.on("loadstart",r),s.on("dispose",function(t){return s.off("loadstart",r)})}})},ws.prototype.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var e=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(e,t),ws.disposeMediaElement(t),t=e}else{t=p.createElement("video");var r=ye({},this.options_.tag&&pt(this.options_.tag));B&&!0===this.options_.nativeControlsForTouch||delete r.controls,ft(t,q(r,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}void 0!==this.options_.preload&&vt(t,"preload",this.options_.preload);for(var n=["loop","muted","playsinline","autoplay"],i=0;i<n.length;i++){var o=n[i],s=this.options_[o];void 0!==s&&(s?vt(t,o,o):yt(t,o),t[o]=s)}return t},ws.prototype.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){function e(){r=!0}var r=!1;function n(){r||this.trigger("loadstart")}return this.on("loadstart",e),this.on("loadedmetadata",n),void this.ready(function(){this.off("loadstart",e),this.off("loadedmetadata",n),r||this.trigger("loadstart")})}var i=["loadstart"];i.push("loadedmetadata"),2<=t.readyState&&i.push("loadeddata"),3<=t.readyState&&i.push("canplay"),4<=t.readyState&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(t){this.trigger(t)},this)})}},ws.prototype.setCurrentTime=function(t){try{this.el_.currentTime=t}catch(t){J(t,"Video is not ready. (Video.js)")}},ws.prototype.duration=function(){var e=this;return this.el_.duration===1/0&&k&&I&&0===this.el_.currentTime?(this.on("timeupdate",function t(){0<e.el_.currentTime&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))}),NaN):this.el_.duration||NaN},ws.prototype.width=function(){return this.el_.offsetWidth},ws.prototype.height=function(){return this.el_.offsetHeight},ws.prototype.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){function e(){this.trigger("fullscreenchange",{isFullscreen:!1})}function r(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0}))}this.on("webkitbeginfullscreen",r),this.on("dispose",function(){t.off("webkitbeginfullscreen",r),t.off("webkitendfullscreen",e)})}},ws.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=f.navigator&&f.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},ws.prototype.enterFullScreen=function(){var t=this.el_;t.paused&&t.networkState<=t.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){t.pause(),t.webkitEnterFullScreen()},0)):t.webkitEnterFullScreen()},ws.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},ws.prototype.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},ws.prototype.reset=function(){ws.resetMediaElement(this.el_)},ws.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},ws.prototype.setControls=function(t){this.el_.controls=!!t},ws.prototype.addTextTrack=function(t,e,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,e,r):Ts.prototype.addTextTrack.call(this,t,e,r)},ws.prototype.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return Ts.prototype.createRemoteTextTrack.call(this,t);var e=p.createElement("track");return t.kind&&(e.kind=t.kind),t.label&&(e.label=t.label),(t.language||t.srclang)&&(e.srclang=t.language||t.srclang),t.default&&(e.default=t.default),t.id&&(e.id=t.id),t.src&&(e.src=t.src),e},ws.prototype.addRemoteTextTrack=function(t,e){var r=Ts.prototype.addRemoteTextTrack.call(this,t,e);return this.featuresNativeTextTracks&&this.el().appendChild(r),r},ws.prototype.removeRemoteTextTrack=function(t){if(Ts.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var e=this.$$("track"),r=e.length;r--;)t!==e[r]&&t!==e[r].track||this.el().removeChild(e[r])},ws.prototype.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),f.performance&&"function"==typeof f.performance.now?t.creationTime=f.performance.now():f.performance&&f.performance.timing&&"number"==typeof f.performance.timing.navigationStart&&(t.creationTime=f.Date.now()-f.performance.timing.navigationStart),t},ws);function ws(t,e){h(this,ws);var r=d(this,Ts.call(this,t,e)),n=t.source,i=!1;if(n&&(r.el_.currentSrc!==n.src||t.tag&&3===t.tag.initNetworkState_)?r.setSource(n):r.handleLateInit_(r.el_),t.enableSourceset&&r.setupSourcesetHandling_(),r.el_.hasChildNodes()){for(var o=r.el_.childNodes,s=o.length,a=[];s--;){var u=o[s];"track"===u.nodeName.toLowerCase()&&(r.featuresNativeTextTracks?(r.remoteTextTrackEls().addTrackElement_(u),r.remoteTextTracks().addTrack(u.track),r.textTracks().addTrack(u.track),i||r.el_.hasAttribute("crossorigin")||!vr(u.src)||(i=!0)):a.push(u))}for(var c=0;c<a.length;c++)r.el_.removeChild(a[c])}return r.proxyNativeTracks_(),r.featuresNativeTextTracks&&i&&J.warn(l(Es)),r.restoreMetadataTracksInIOSNativePlayer_(),(B||E||R)&&!0===t.nativeControlsForTouch&&r.setControls(!0),r.proxyWebkitFullscreen_(),r.triggerReady(),r}if(rt()){Ss.TEST_VID=p.createElement("video");var As=p.createElement("track");As.kind="captions",As.srclang="en",As.label="English",Ss.TEST_VID.appendChild(As)}Ss.isSupported=function(){try{Ss.TEST_VID.volume=.5}catch(t){return!1}return!(!Ss.TEST_VID||!Ss.TEST_VID.canPlayType)},Ss.canPlayType=function(t){return Ss.TEST_VID.canPlayType(t)},Ss.canPlaySource=function(t,e){return Ss.canPlayType(t.type)},Ss.canControlVolume=function(){try{var t=Ss.TEST_VID.volume;return Ss.TEST_VID.volume=t/2+.1,t!==Ss.TEST_VID.volume}catch(t){return!1}},Ss.canMuteVolume=function(){try{var t=Ss.TEST_VID.muted;return Ss.TEST_VID.muted=!t,Ss.TEST_VID.muted?vt(Ss.TEST_VID,"muted","muted"):yt(Ss.TEST_VID,"muted"),t!==Ss.TEST_VID.muted}catch(t){return!1}},Ss.canControlPlaybackRate=function(){if(k&&I&&O<58)return!1;try{var t=Ss.TEST_VID.playbackRate;return Ss.TEST_VID.playbackRate=t/2+.1,t!==Ss.TEST_VID.playbackRate}catch(t){return!1}},Ss.canOverrideAttributes=function(){if(D)return!1;try{function t(){}Object.defineProperty(p.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(p.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(p.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(p.createElement("audio"),"innerHTML",{get:t,set:t})}catch(t){return!1}return!0},Ss.supportsNativeTextTracks=function(){return F||w&&I},Ss.supportsNativeVideoTracks=function(){return!(!Ss.TEST_VID||!Ss.TEST_VID.videoTracks)},Ss.supportsNativeAudioTracks=function(){return!(!Ss.TEST_VID||!Ss.TEST_VID.audioTracks)},Ss.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Ss.prototype.featuresVolumeControl=Ss.canControlVolume(),Ss.prototype.featuresMuteControl=Ss.canMuteVolume(),Ss.prototype.featuresPlaybackRate=Ss.canControlPlaybackRate(),Ss.prototype.featuresSourceset=Ss.canOverrideAttributes(),Ss.prototype.movingMediaElementInDOM=!w,Ss.prototype.featuresFullscreenResize=!0,Ss.prototype.featuresProgressEvents=!0,Ss.prototype.featuresTimeupdateEvents=!0,Ss.prototype.featuresNativeTextTracks=Ss.supportsNativeTextTracks(),Ss.prototype.featuresNativeVideoTracks=Ss.supportsNativeVideoTracks(),Ss.prototype.featuresNativeAudioTracks=Ss.supportsNativeAudioTracks();var ks=Ss.TEST_VID&&Ss.TEST_VID.constructor.prototype.canPlayType,Cs=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,xs=/^video\/mp4/i;Ss.patchCanPlayType=function(){4<=C&&!P&&!I?Ss.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&Cs.test(t)?"maybe":ks.call(this,t)}:x&&(Ss.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&xs.test(t)?"maybe":ks.call(this,t)})},Ss.unpatchCanPlayType=function(){var t=Ss.TEST_VID.constructor.prototype.canPlayType;return Ss.TEST_VID.constructor.prototype.canPlayType=ks,t},Ss.patchCanPlayType(),Ss.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},Ss.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),r=e.length;r--;)t.removeChild(e[r]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Ss.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){Ss.prototype["set"+ve(e)]=function(t){(this.el_[e]=t)?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(t){Ss.prototype[t]=function(){return this.el_[t]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(e){Ss.prototype["set"+ve(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(t){Ss.prototype[t]=function(){return this.el_[t]()}}),Nr.withSourceHandlers(Ss),Ss.nativeSourceHandler={},Ss.nativeSourceHandler.canPlayType=function(t){try{return Ss.TEST_VID.canPlayType(t)}catch(t){return""}},Ss.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Ss.nativeSourceHandler.canPlayType(t.type);if(t.src){var r=gr(t.src);return Ss.nativeSourceHandler.canPlayType("video/"+r)}return""},Ss.nativeSourceHandler.handleSource=function(t,e,r){e.setSrc(t.src)},Ss.nativeSourceHandler.dispose=function(){},Ss.registerSourceHandler(Ss.nativeSourceHandler),Nr.registerTech("Html5",Ss);var Rs=o(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),Ps=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Ls={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Is=["tiny","xsmall","small","medium","large","xlarge","huge"],Os={};Is.forEach(function(t){var e="x"===t.charAt(0)?"x-"+t.substring(1):t;Os[t]="vjs-layout-"+e});var Ds,Ns={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Ms=(i(Fs,Ds=me),Fs.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Fs.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function(t){Br[t.id()]=null}(this),Ds.prototype.dispose.call(this)},Fs.prototype.createEl=function(){var e=this.tag,r=void 0,t=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),n="video-js"===this.tag.tagName.toLowerCase();t?r=this.el_=e.parentNode:n||(r=this.el_=Ds.prototype.createEl.call(this,"div"));var i=pt(e);if(n){for(r=this.el_=e,e=this.tag=p.createElement("video");r.children.length;)e.appendChild(r.firstChild);ct(r,"video-js")||lt(r,"video-js"),r.appendChild(e),t=this.playerElIngest_=r,["autoplay","controls","crossOrigin","defaultMuted","defaultPlaybackRate","loop","muted","playbackRate","src","volume"].forEach(function(t){void 0!==r[t]&&(e[t]=r[t])})}if(e.setAttribute("tabindex","-1"),i.tabindex="-1",N&&(e.setAttribute("role","application"),i.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in i&&delete i.width,"height"in i&&delete i.height,Object.getOwnPropertyNames(i).forEach(function(t){"class"===t?(r.className+=" "+i[t],n&&(e.className+=" "+i[t])):(r.setAttribute(t,i[t]),n&&e.setAttribute(t,i[t]))}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=r.player=this,this.addClass("vjs-paused"),!0!==f.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Zt("vjs-styles-dimensions");var o=Rt(".vjs-styles-defaults"),s=Rt("head");s.insertBefore(this.styleEl_,o?o.nextSibling:s.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var a=e.getElementsByTagName("a"),u=0;u<a.length;u++){var c=a.item(u);lt(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!t&&e.parentNode.insertBefore(r,e),ut(e,r),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_=r},Fs.prototype.width=function(t){return this.dimension("width",t)},Fs.prototype.height=function(t){return this.dimension("height",t)},Fs.prototype.dimension=function(t,e){var r=t+"_";if(void 0===e)return this[r]||0;if(""===e)return this[r]=void 0,void this.updateStyleEl_();var n=parseFloat(e);isNaN(n)?J.error('Improper value "'+e+'" supplied for for '+t):(this[r]=n,this.updateStyleEl_())},Fs.prototype.fluid=function(t){if(void 0===t)return!!this.fluid_;this.fluid_=!!t,t?(this.addClass("vjs-fluid"),this.fill(!1)):this.removeClass("vjs-fluid"),this.updateStyleEl_()},Fs.prototype.fill=function(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},Fs.prototype.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},Fs.prototype.updateStyleEl_=function(){if(!0!==f.VIDEOJS_NO_DYNAMIC_STYLE){var t=void 0,e=void 0,r=void 0,n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),i=n[1]/n[0];t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/i:this.videoWidth()||300,e=void 0!==this.height_?this.height_:t*i,r=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(r),te(this.styleEl_,"\n      ."+r+" {\n        width: "+t+"px;\n        height: "+e+"px;\n      }\n\n      ."+r+".vjs-fluid {\n        padding-top: "+100*i+"%;\n      }\n    ")}else{var o="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,a=this.tech_&&this.tech_.el();a&&(0<=o&&(a.width=o),0<=s&&(a.height=s))}},Fs.prototype.loadTech_=function(t,e){var r=this;this.tech_&&this.unloadTech_();var n=ve(t),i=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==n&&this.tag&&(Nr.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;var o={source:e,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+i+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Or.names.forEach(function(t){var e=Or[t];o[e.getterName]=r[e.privateName]}),q(o,this.options_[n]),q(o,this.options_[i]),q(o,this.options_[t.toLowerCase()]),this.tag&&(o.tag=this.tag),e&&e.src===this.cache_.src&&0<this.cache_.currentTime&&(o.startTime=this.cache_.currentTime);var s=Nr.getTech(t);if(!s)throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'");this.tech_=new s(o),this.tech_.ready(ee(this,this.handleTechReady_),!0),Fe(this.textTracksJson_||[],this.tech_),Ps.forEach(function(t){r.on(r.tech_,t,r["handleTech"+ve(t)+"_"])}),Object.keys(Ls).forEach(function(e){r.on(r.tech_,e,function(t){0===r.tech_.playbackRate()&&r.tech_.seeking()?r.queuedCallbacks_.push({callback:r["handleTech"+Ls[e]+"_"].bind(r),event:t}):r["handleTech"+Ls[e]+"_"](t)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||ut(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},Fs.prototype.unloadTech_=function(){var r=this;Or.names.forEach(function(t){var e=Or[t];r[e.privateName]=r[e.getterName]()}),this.textTracksJson_=Me(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},Fs.prototype.tech=function(t){return void 0===t&&J.warn(l(Rs)),this.tech_},Fs.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},Fs.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},Fs.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused())try{delete this.tag.poster}catch(t){J("deleting tag.poster throws in some browsers",t)}},Fs.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},Fs.prototype.manualAutoplay_=function(e){var r=this;if(this.tech_&&"string"==typeof e){function t(){var e=r.muted();r.muted(!0);var t=r.play();if(t&&t.then&&t.catch)return t.catch(function(t){r.muted(e)})}var n=void 0;if("any"===e?(n=this.play())&&n.then&&n.catch&&n.catch(function(){return t()}):n="muted"===e?t():this.play(),n&&n.then&&n.catch)return n.then(function(){r.trigger({type:"autoplay-success",autoplay:e})}).catch(function(t){r.trigger({type:"autoplay-failure",autoplay:e})})}},Fs.prototype.updateSourceCaches_=function(t){var e=0<arguments.length&&void 0!==t?t:"",r=e,n="";"string"!=typeof r&&(r=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],r&&!n&&(n=function(t,e){if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;var r=t.cache_.sources.filter(function(t){return t.src===e});if(r.length)return r[0].type;for(var n=t.$$("source"),i=0;i<n.length;i++){var o=n[i];if(o.type&&o.src&&o.src===e)return o.type}return zr(e)}(this,r)),this.cache_.source=ye({},e,{src:r,type:n});for(var i=this.cache_.sources.filter(function(t){return t.src&&t.src===r}),o=[],s=this.$$("source"),a=[],u=0;u<s.length;u++){var c=pt(s[u]);o.push(c),c.src&&c.src===r&&a.push(c.src)}a.length&&!i.length?this.cache_.sources=o:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=r},Fs.prototype.handleTechSourceset_=function(t){var n=this;if(!this.changingSrc_){var e=function(t){return n.updateSourceCaches_(t)},r=this.currentSource().src,i=t.src;r&&!/^blob:/.test(r)&&/^blob:/.test(i)&&(this.lastSource_&&(this.lastSource_.tech===i||this.lastSource_.player===r)||(e=function(){})),e(i),t.src||this.tech_.one(["sourceset","loadstart"],function t(e){if("sourceset"!==e.type){var r=n.techGet("currentSrc");n.lastSource_.tech=r,n.updateSourceCaches_(r)}n.tech_.off(["sourceset","loadstart"],t)})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},Fs.prototype.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},Fs.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},Fs.prototype.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},Fs.prototype.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return t.removeClass("vjs-waiting")})},Fs.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},Fs.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},Fs.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},Fs.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},Fs.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},Fs.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(J.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},Fs.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},Fs.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},Fs.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},Fs.prototype.handleTechClick_=function(t){xt(t)&&this.controls_&&(this.paused()?Oe(this.play()):this.pause())},Fs.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},Fs.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},Fs.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},Fs.prototype.handleTechTouchEnd_=function(t){t.preventDefault()},Fs.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},Fs.prototype.handleStageClick_=function(){this.reportUserActivity()},Fs.prototype.handleTechFullscreenChange_=function(t,e){e&&this.isFullscreen(e.isFullscreen),this.trigger("fullscreenchange")},Fs.prototype.handleTechError_=function(){var t=this.tech_.error();this.error(t)},Fs.prototype.handleTechTextData_=function(t,e){var r=null;1<arguments.length&&(r=e),this.trigger("textdata",r)},Fs.prototype.getCache=function(){return this.cache_},Fs.prototype.techCall_=function(t,e){this.ready(function(){if(t in Hr)return function(t,e,r,n){return e[r](t.reduce(qr(r),n))}(this.middleware_,this.tech_,t,e);if(t in Wr)return Vr(this.middleware_,this.tech_,t,e);try{this.tech_&&this.tech_[t](e)}catch(t){throw J(t),t}},!0)},Fs.prototype.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Gr)return function(t,e,r){return t.reduceRight(qr(r),e[r]())}(this.middleware_,this.tech_,e);if(e in Wr)return Vr(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw J("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw J("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw J(t),t}}},Fs.prototype.play=function(){var e=this,t=this.options_.Promise||f.Promise;return t?new t(function(t){e.play_(t)}):this.play_()},Fs.prototype.play_=function(t){var e=this,r=0<arguments.length&&void 0!==t?t:Oe;if(this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return void r(this.techGet_("play"));this.playOnLoadstart_=function(){e.playOnLoadstart_=null,r(e.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready(function(){e.playWaitingForReady_=!1,r(e.play())})}},Fs.prototype.pause=function(){this.techCall_("pause")},Fs.prototype.paused=function(){return!1!==this.techGet_("paused")},Fs.prototype.played=function(){return this.techGet_("played")||Ee(0,0)},Fs.prototype.scrubbing=function(t){if(void 0===t)return this.scrubbing_;this.scrubbing_=!!t,t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},Fs.prototype.currentTime=function(t){return void 0!==t?(t<0&&(t=0),void this.techCall_("setCurrentTime",t)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},Fs.prototype.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&((this.cache_.duration=t)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},Fs.prototype.remainingTime=function(){return this.duration()-this.currentTime()},Fs.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},Fs.prototype.buffered=function(){var t=this.techGet_("buffered");return t&&t.length||(t=Ee(0,0)),t},Fs.prototype.bufferedPercent=function(){return Se(this.buffered(),this.duration())},Fs.prototype.bufferedEnd=function(){var t=this.buffered(),e=this.duration(),r=t.end(t.length-1);return e<r&&(r=e),r},Fs.prototype.volume=function(t){var e=void 0;return void 0!==t?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall_("setVolume",e),void(0<e&&this.lastVolume_(e))):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)},Fs.prototype.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},Fs.prototype.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},Fs.prototype.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},Fs.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},Fs.prototype.isFullscreen=function(t){if(void 0===t)return!!this.isFullscreen_;this.isFullscreen_=!!t},Fs.prototype.requestFullscreen=function(){var r=we;this.isFullscreen(!0),r.requestFullscreen?(Wt(p,r.fullscreenchange,ee(this,function t(e){this.isFullscreen(p[r.fullscreenElement]),!1===this.isFullscreen()&&qt(p,r.fullscreenchange,t),this.trigger("fullscreenchange")})),this.el_[r.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},Fs.prototype.exitFullscreen=function(){var t=we;this.isFullscreen(!1),t.requestFullscreen?p[t.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},Fs.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=p.documentElement.style.overflow,Wt(p,"keydown",ee(this,this.fullWindowOnEscKey)),p.documentElement.style.overflow="hidden",lt(p.body,"vjs-full-window"),this.trigger("enterFullWindow")},Fs.prototype.fullWindowOnEscKey=function(t){27===t.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},Fs.prototype.exitFullWindow=function(){this.isFullWindow=!1,qt(p,"keydown",this.fullWindowOnEscKey),p.documentElement.style.overflow=this.docOrigOverflow,ht(p.body,"vjs-full-window"),this.trigger("exitFullWindow")},Fs.prototype.canPlayType=function(t){for(var e=void 0,r=0,n=this.options_.techOrder;r<n.length;r++){var i=n[r],o=Nr.getTech(i);if(o=o||me.getComponent(i)){if(o.isSupported()&&(e=o.canPlayType(t)))return e}else J.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},Fs.prototype.selectSource=function(t){function e(t,r,n){var i=void 0;return t.some(function(e){return r.some(function(t){if(i=n(e,t))return!0})}),i}function r(t,e){var r=t[0];if(t[1].canPlaySource(e,i.options_[r.toLowerCase()]))return{source:e,tech:r}}var n,i=this,o=this.options_.techOrder.map(function(t){return[t,Nr.getTech(t)]}).filter(function(t){var e=t[0],r=t[1];return r?r.isSupported():(J.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.'),!1)});return(this.options_.sourceOrder?e(t,o,(n=r,function(t,e){return n(e,t)})):e(o,t,r))||!1},Fs.prototype.src=function(t){var r=this;if(void 0===t)return this.cache_.src||"";var n=function e(t){if(Array.isArray(t)){var r=[];t.forEach(function(t){t=e(t),Array.isArray(t)?r=r.concat(t):K(t)&&r.push(t)}),t=r}else t="string"==typeof t&&t.trim()?[Xr({src:t})]:K(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[Xr(t)]:[];return t}(t);n.length?(this.changingSrc_=!0,this.cache_.sources=n,this.updateSourceCaches_(n[0]),Ur(this,n[0],function(t,e){if(r.middleware_=e,r.cache_.sources=n,r.updateSourceCaches_(t),r.src_(t))return 1<n.length?r.src(n.slice(1)):(r.changingSrc_=!1,r.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void r.triggerReady());!function(t,e){t.forEach(function(t){return t.setTech&&t.setTech(e)})}(e,r.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},Fs.prototype.src_=function(t){var e=this,r=this.selectSource([t]);return!r||(function(t,e){return ve(t)===ve(e)}(r.tech,this.techName_)?this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0):(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready(function(){e.changingSrc_=!1})),!1)},Fs.prototype.load=function(){this.techCall_("load")},Fs.prototype.reset=function(){this.tech_&&this.tech_.clearTracks("text"),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},Fs.prototype.currentSources=function(){var t=this.currentSource(),e=[];return 0!==Object.keys(t).length&&e.push(t),this.cache_.sources||e},Fs.prototype.currentSource=function(){return this.cache_.source||{}},Fs.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},Fs.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""},Fs.prototype.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},Fs.prototype.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var e=void 0;"string"==typeof t&&/(any|play|muted)/.test(t)?(this.options_.autoplay=t,this.manualAutoplay_(t),e=!1):this.options_.autoplay=!!t,e=e||this.options_.autoplay,this.tech_&&this.techCall_("setAutoplay",e)},Fs.prototype.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},Fs.prototype.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},Fs.prototype.poster=function(t){if(void 0===t)return this.poster_;(t=t||"")!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},Fs.prototype.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},Fs.prototype.controls=function(t){if(void 0===t)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},Fs.prototype.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},Fs.prototype.error=function(t){return void 0===t?this.error_||null:null===t?(this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new Pe(t),this.addClass("vjs-error"),J.error("(CODE:"+this.error_.code+" "+Pe.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},Fs.prototype.reportUserActivity=function(t){this.userActivity_=!0},Fs.prototype.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},Fs.prototype.listenForUserActivity_=function(){var e=void 0,r=void 0,n=void 0,i=ee(this,this.reportUserActivity);this.on("mousedown",function(){i(),this.clearInterval(e),e=this.setInterval(i,250)}),this.on("mousemove",function(t){t.screenX===r&&t.screenY===n||(r=t.screenX,n=t.screenY,i())}),this.on("mouseup",function(t){i(),this.clearInterval(e)}),this.on("keydown",i),this.on("keyup",i);var o=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o);var t=this.options_.inactivityTimeout;t<=0||(o=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},t))}},250)},Fs.prototype.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},Fs.prototype.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},Fs.prototype.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},Fs.prototype.addTextTrack=function(t,e,r){if(this.tech_)return this.tech_.addTextTrack(t,e,r)},Fs.prototype.addRemoteTextTrack=function(t,e){if(this.tech_)return this.tech_.addRemoteTextTrack(t,e)},Fs.prototype.removeRemoteTextTrack=function(t){var e=(0<arguments.length&&void 0!==t?t:{}).track,r=void 0===e?t:e;if(this.tech_)return this.tech_.removeRemoteTextTrack(r)},Fs.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},Fs.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},Fs.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},Fs.prototype.language=function(t){if(void 0===t)return this.language_;this.language_=String(t).toLowerCase()},Fs.prototype.languages=function(){return ye(Fs.prototype.options_.languages,this.languages_)},Fs.prototype.toJSON=function(){var t=ye(this.options_),e=t.tracks;t.tracks=[];for(var r=0;r<e.length;r++){var n=e[r];(n=ye(n)).player=void 0,t.tracks[r]=n}return t},Fs.prototype.createModal=function(t,e){var r=this;(e=e||{}).content=t||"";var n=new je(this,e);return this.addChild(n),n.on("dispose",function(){r.removeChild(n)}),n.open(),n},Fs.prototype.updateCurrentBreakpoint_=function(){if(this.responsive())for(var t=this.currentBreakpoint(),e=this.currentWidth(),r=0;r<Is.length;r++){var n=Is[r];if(e<=this.breakpoints_[n]){if(t===n)return;t&&this.removeClass(Os[t]),this.addClass(Os[n]),this.breakpoint_=n;break}}},Fs.prototype.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},Fs.prototype.breakpoints=function(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=q({},Ns,t),this.updateCurrentBreakpoint_()),q(this.breakpoints_)},Fs.prototype.responsive=function(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?((this.responsive_=t)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0},Fs.prototype.currentBreakpoint=function(){return this.breakpoint_},Fs.prototype.currentBreakpointClass=function(){return Os[this.breakpoint_]||""},Fs.getTagSettings=function(t){var e={sources:[],tracks:[]},r=pt(t),n=r["data-setup"];if(ct(t,"vjs-fill")&&(r.fill=!0),ct(t,"vjs-fluid")&&(r.fluid=!0),null!==n){var i=g(n||"{}"),o=i[0],s=i[1];o&&J.error(o),q(r,s)}if(q(e,r),t.hasChildNodes())for(var a=t.childNodes,u=0,c=a.length;u<c;u++){var l=a[u],h=l.nodeName.toLowerCase();"source"===h?e.sources.push(pt(l)):"track"===h&&e.tracks.push(pt(l))}return e},Fs.prototype.flexNotSupported_=function(){var t=p.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},Fs);function Fs(t,e,r){if(h(this,Fs),t.id=t.id||e.id||"vjs_video_"+Ot(),(e=q(Fs.getTagSettings(t),e)).initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language)if("function"==typeof t.closest){var n=t.closest("[lang]");n&&n.getAttribute&&(e.language=n.getAttribute("lang"))}else for(var i=t;i&&1===i.nodeType;){if(pt(i).hasOwnProperty("lang")){e.language=i.getAttribute("lang");break}i=i.parentNode}var o=d(this,Ds.call(this,null,e,r));if(o.log=Q(o.id_),o.isPosterFromTech_=!1,o.queuedCallbacks_=[],o.isReady_=!1,o.hasStarted_=!1,o.userActive_=!1,!o.options_||!o.options_.techOrder||!o.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(o.tag=t,o.tagAttributes=t&&pt(t),o.language(o.options_.language),e.languages){var s={};Object.getOwnPropertyNames(e.languages).forEach(function(t){s[t.toLowerCase()]=e.languages[t]}),o.languages_=s}else o.languages_=Fs.prototype.options_.languages;o.cache_={},o.poster_=e.poster||"",o.controls_=!!e.controls,o.cache_.lastVolume=1,t.controls=!1,t.removeAttribute("controls"),t.hasAttribute("autoplay")?o.options_.autoplay=!0:o.autoplay(o.options_.autoplay),o.scrubbing_=!1,o.el_=o.createEl(),o.cache_.lastPlaybackRate=o.defaultPlaybackRate(),fe(o,{eventBusKey:"el_"});var a=ye(o.options_);if(e.plugins){var u=e.plugins;Object.keys(u).forEach(function(t){if("function"!=typeof this[t])throw new Error('plugin "'+t+'" does not exist');this[t](u[t])},o)}o.options_.playerOptions=a,o.middleware_=[],o.initChildren(),o.isAudio("audio"===t.nodeName.toLowerCase()),o.controls()?o.addClass("vjs-controls-enabled"):o.addClass("vjs-controls-disabled"),o.el_.setAttribute("role","region"),o.isAudio()?o.el_.setAttribute("aria-label",o.localize("Audio Player")):o.el_.setAttribute("aria-label",o.localize("Video Player")),o.isAudio()&&o.addClass("vjs-audio"),o.flexNotSupported_()&&o.addClass("vjs-no-flex"),w||o.addClass("vjs-workinghover"),Fs.players[o.id_]=o;var c="6.13.0".split(".")[0];return o.addClass("vjs-v"+c),o.userActive(!0),o.reportUserActivity(),o.one("play",o.listenForUserActivity_),o.on("fullscreenchange",o.handleFullscreenChange_),o.on("stageclick",o.handleStageClick_),o.breakpoints(o.options_.breakpoints),o.responsive(o.options_.responsive),o.changingSrc_=!1,o.playWaitingForReady_=!1,o.playOnLoadstart_=null,o}Or.names.forEach(function(t){var e=Or[t];Ms.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),Ms.players={};var Bs=f.navigator;Ms.prototype.options_={techOrder:Nr.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:Bs&&(Bs.languages&&Bs.languages[0]||Bs.userLanguage||Bs.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",breakpoints:{},responsive:!1},D||Ms.prototype.options_.children.push("resizeManager"),["ended","seeking","seekable","networkState","readyState"].forEach(function(t){Ms.prototype[t]=function(){return this.techGet_(t)}}),Ps.forEach(function(t){Ms.prototype["handleTech"+ve(t)+"_"]=function(){return this.trigger(t)}}),me.registerComponent("Player",Ms);function js(t){return zs.hasOwnProperty(t)}function Us(t){return js(t)?zs[t]:void 0}function Vs(t,e){t[Ks]=t[Ks]||{},t[Ks][e]=!0}function Gs(t,e,r){var n=(r?"before":"")+"pluginsetup";t.trigger(n,e),t.trigger(n+":"+e.name,e)}function Hs(e,r){function n(){Gs(this,{name:e,plugin:r,instance:null},!0);var t=r.apply(this,arguments);return Vs(this,e),Gs(this,{name:e,plugin:r,instance:t}),t}return Object.keys(r).forEach(function(t){n[t]=r[t]}),n}function Ws(i,o){return o.prototype.name=i,function(){Gs(this,{name:i,plugin:o,instance:null},!0);for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=new(Function.prototype.bind.apply(o,[null].concat([this].concat(e))));return this[i]=function(){return n},Gs(this,n.getEventHash()),n}}var qs="plugin",Ks="activePlugins_",zs={},Ys=(Xs.prototype.version=function(){return this.constructor.VERSION},Xs.prototype.getEventHash=function(t){var e=0<arguments.length&&void 0!==t?t:{};return e.name=this.name,e.plugin=this.constructor,e.instance=this,e},Xs.prototype.trigger=function(t,e){var r=1<arguments.length&&void 0!==e?e:{};return Kt(this.eventBusEl_,t,this.getEventHash(r))},Xs.prototype.handleStateChanged=function(t){},Xs.prototype.dispose=function(){var t=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[Ks][t]=!1,this.player=this.state=null,e[t]=Ws(t,zs[t])},Xs.isBasic=function(t){var e="string"==typeof t?Us(t):t;return"function"==typeof e&&!Xs.prototype.isPrototypeOf(e.prototype)},Xs.registerPlugin=function(t,e){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+(void 0===t?"undefined":V(t))+".");if(js(t))J.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Ms.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof e)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+(void 0===e?"undefined":V(e))+".");return zs[t]=e,t!==qs&&(Xs.isBasic(e)?Ms.prototype[t]=Hs(t,e):Ms.prototype[t]=Ws(t,e)),e},Xs.deregisterPlugin=function(t){if(t===qs)throw new Error("Cannot de-register base plugin.");js(t)&&(delete zs[t],delete Ms.prototype[t])},Xs.getPlugins=function(t){var e=0<arguments.length&&void 0!==t?t:Object.keys(zs),r=void 0;return e.forEach(function(t){var e=Us(t);e&&((r=r||{})[t]=e)}),r},Xs.getPluginVersion=function(t){var e=Us(t);return e&&e.VERSION||""},Xs);function Xs(t){if(h(this,Xs),this.constructor===Xs)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,fe(this),delete this.trigger,ge(this,this.constructor.defaultState),Vs(t,this.name),this.dispose=ee(this,this.dispose),t.on("dispose",this.dispose)}Ys.getPlugin=Us,Ys.BASE_PLUGIN_NAME=qs,Ys.registerPlugin(qs,Ys),Ms.prototype.usingPlugin=function(t){return!!this[Ks]&&!0===this[Ks][t]},Ms.prototype.hasPlugin=function(t){return!!js(t)};"undefined"==typeof HTMLVideoElement&&rt()&&(p.createElement("video"),p.createElement("audio"),p.createElement("track"),p.createElement("video-js"));var Js=function(t){return 0===t.indexOf("#")?t.slice(1):t};function Qs(t,r,e){var n=Qs.getPlayer(t);if(n)return r&&J.warn('Player "'+t+'" is already initialised. Options will not be applied.'),e&&n.ready(e),n;var i="string"==typeof t?Rt("#"+Js(t)):t;if(!nt(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");p.body.contains(i)||J.warn("The element supplied is not included in the DOM"),r=r||{},Qs.hooks("beforesetup").forEach(function(t){var e=t(i,ye(r));K(e)&&!Array.isArray(e)?r=ye(r,e):J.error("please return an object in beforesetup hooks")});var o=me.getComponent("Player");return n=new o(i,r,e),Qs.hooks("setup").forEach(function(t){return t(n)}),n}if(Qs.hooks_={},Qs.hooks=function(t,e){return Qs.hooks_[t]=Qs.hooks_[t]||[],e&&(Qs.hooks_[t]=Qs.hooks_[t].concat(e)),Qs.hooks_[t]},Qs.hook=function(t,e){Qs.hooks(t,e)},Qs.hookOnce=function(r,t){Qs.hooks(r,[].concat(t).map(function(e){return function t(){return Qs.removeHook(r,t),e.apply(void 0,arguments)}}))},Qs.removeHook=function(t,e){var r=Qs.hooks(t).indexOf(e);return!(r<=-1)&&(Qs.hooks_[t]=Qs.hooks_[t].slice(),Qs.hooks_[t].splice(r,1),!0)},!0!==f.VIDEOJS_NO_DYNAMIC_STYLE&&rt()){var $s=Rt(".vjs-styles-defaults");if(!$s){$s=Zt("vjs-styles-defaults");var Zs=Rt("head");Zs&&Zs.insertBefore($s,Zs.firstChild),te($s,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}$t(1,Qs),Qs.VERSION="6.13.0",Qs.options=Ms.prototype.options_,Qs.getPlayers=function(){return Ms.players},Qs.getPlayer=function(t){var e=Ms.players,r=void 0;if("string"==typeof t){var n=Js(t),i=e[n];if(i)return i;r=Rt("#"+n)}else r=t;if(nt(r)){var o=r,s=o.player,a=o.playerId;if(s||e[a])return s||e[a]}},Qs.getAllPlayers=function(){return Object.keys(Ms.players).map(function(t){return Ms.players[t]}).filter(Boolean)},Qs.players=Ms.players,Qs.getComponent=me.getComponent,Qs.registerComponent=function(t,e){Nr.isTech(e)&&J.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),me.registerComponent.call(me,t,e)},Qs.getTech=Nr.getTech,Qs.registerTech=Nr.registerTech,Qs.use=function(t,e){Fr[t]=Fr[t]||[],Fr[t].push(e)},!D&&Object.defineProperty?(Object.defineProperty(Qs,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Qs.middleware,"TERMINATOR",{value:jr,writeable:!1,enumerable:!0})):Qs.middleware={TERMINATOR:jr},Qs.browser=U,Qs.TOUCH_ENABLED=B,Qs.extend=function(t,e){var r=1<arguments.length&&void 0!==e?e:{},n=function(){t.apply(this,arguments)},i={};for(var o in"object"===(void 0===r?"undefined":V(r))?(r.constructor!==Object.prototype.constructor&&(n=r.constructor),i=r):"function"==typeof r&&(n=r),function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":V(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.super_=e)}(n,t),i)i.hasOwnProperty(o)&&(n.prototype[o]=i[o]);return n},Qs.mergeOptions=ye,Qs.bind=ee,Qs.registerPlugin=Ys.registerPlugin,Qs.deregisterPlugin=Ys.deregisterPlugin,Qs.plugin=function(t,e){return J.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Ys.registerPlugin(t,e)},Qs.getPlugins=Ys.getPlugins,Qs.getPlugin=Ys.getPlugin,Qs.getPluginVersion=Ys.getPluginVersion,Qs.addLanguage=function(t,e){var r;return t=(""+t).toLowerCase(),Qs.options.languages=ye(Qs.options.languages,((r={})[t]=e,r)),Qs.options.languages[t]},Qs.log=J,Qs.createLogger=Q,Qs.createTimeRange=Qs.createTimeRanges=Ee,Qs.formatTime=Rn,Qs.setFormatTime=function(t){xn=t},Qs.resetFormatTime=function(){xn=Cn},Qs.parseUrl=fr,Qs.isCrossOrigin=vr,Qs.EventTarget=ie,Qs.on=Wt,Qs.one=zt,Qs.off=qt,Qs.trigger=Kt,Qs.xhr=v,Qs.TextTrack=br,Qs.AudioTrack=Sr,Qs.VideoTrack=kr,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){Qs[t]=function(){return J.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),Lt[t].apply(null,arguments)}}),Qs.computedStyle=$,Qs.dom=Lt,Qs.url=_r,e.exports=Qs},{"global/document":10,"global/window":11,"safe-json-parse/tuple":33,tsml:35,"videojs-vtt.js":39,xhr:43}],39:[function(t,e,r){var n=t("global/window"),i=e.exports={WebVTT:t("./vtt.js"),VTTCue:t("./vttcue.js"),VTTRegion:t("./vttregion.js")};n.vttjs=i,n.WebVTT=i.WebVTT;var o=i.VTTCue,s=i.VTTRegion,a=n.VTTCue,u=n.VTTRegion;i.shim=function(){n.VTTCue=o,n.VTTRegion=s},i.restore=function(){n.VTTCue=a,n.VTTRegion=u},n.VTTCue||i.shim()},{"./vtt.js":40,"./vttcue.js":41,"./vttregion.js":42,"global/window":11}],40:[function(t,e,r){var n=Object.create||function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return i.prototype=t,new i};function i(){}function c(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}function g(t){function e(t,e,r,n){return 3600*(0|t)+60*(0|e)+(0|r)+(0|n)/1e3}var r=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?e(r[1],r[2],r[3].replace(":",""),r[4]):59<r[1]?e(r[1],r[2],0,r[4]):e(0,r[1],r[2],r[4]):null}function l(){this.values=n(null)}function h(t,e,r,n){var i=n?t.split(n):[t];for(var o in i)if("string"==typeof i[o]){var s=i[o].split(r);if(2===s.length)e(s[0],s[1])}}function u(e,t,o){var r,n,s,i=e;function a(){var t=g(e);if(null===t)throw new c(c.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function u(){e=e.replace(/^\s+/,"")}if(u(),t.startTime=a(),u(),"--\x3e"!==e.substr(0,3))throw new c(c.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),u(),t.endTime=a(),u(),r=e,n=t,s=new l,h(r,function(t,e){switch(t){case"region":for(var r=o.length-1;0<=r;r--)if(o[r].id===e){s.set(t,o[r].region);break}break;case"vertical":s.alt(t,e,["rl","lr"]);break;case"line":var n=e.split(","),i=n[0];s.integer(t,i),s.percent(t,i)&&s.set("snapToLines",!1),s.alt(t,i,["auto"]),2===n.length&&s.alt("lineAlign",n[1],["start","middle","end"]);break;case"position":n=e.split(","),s.percent(t,n[0]),2===n.length&&s.alt("positionAlign",n[1],["start","middle","end"]);break;case"size":s.percent(t,e);break;case"align":s.alt(t,e,["start","middle","end","left","right"])}},/:/,/\s/),n.region=s.get("region",null),n.vertical=s.get("vertical",""),n.line=s.get("line","auto"),n.lineAlign=s.get("lineAlign","start"),n.snapToLines=s.get("snapToLines",!0),n.size=s.get("size",100),n.align=s.get("align","middle"),n.position=s.get("position",{start:0,left:0,middle:50,end:100,right:100},n.align),n.positionAlign=s.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},n.align)}((c.prototype=n(Error.prototype)).constructor=c).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},l.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,r){for(var n=0;n<r.length;++n)if(e===r[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(e=parseFloat(e))&&e<=100)&&(this.set(t,e),!0)}};var v={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},y={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},m={v:"title",lang:"lang"},_={rt:"ruby"};function d(o,r){function t(){if(!r)return null;var t,e=r.match(/^([^<]*)(<[^>]*>?)?/);return t=e[1]?e[1]:e[2],r=r.substr(t.length),t}function e(t){return v[t]}function n(t){for(;p=t.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)t=t.replace(p[0],e);return t}function i(t,e){var r=y[t];if(!r)return null;var n=o.document.createElement(r);n.localName=r;var i=m[t];return i&&e&&(n[i]=e.trim()),n}for(var s,a,u,c=o.document.createElement("div"),l=c,h=[];null!==(s=t());)if("<"!==s[0])l.appendChild(o.document.createTextNode(n(s)));else{if("/"===s[1]){h.length&&h[h.length-1]===s.substr(2).replace(">","")&&(h.pop(),l=l.parentNode);continue}var d,f=g(s.substr(1,s.length-2));if(f){d=o.document.createProcessingInstruction("timestamp",f),l.appendChild(d);continue}var p=s.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(d=i(p[1],p[3])))continue;if(a=l,_[(u=d).localName]&&_[u.localName]!==a.localName)continue;p[2]&&(d.className=p[2].substr(1).replace("."," ")),h.push(p[1]),l.appendChild(d),l=d}return c}var o=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function f(t){for(var e=0;e<o.length;e++){var r=o[e];if(t>=r[0]&&t<=r[1])return!0}return!1}function p(){}function b(t,e,r){var n=/MSIE\s8\.0/.test(navigator.userAgent),i="rgba(255, 255, 255, 1)",o="rgba(0, 0, 0, 0.8)";n&&(i="rgb(255, 255, 255)",o="rgb(0, 0, 0)"),p.call(this),this.cue=e,this.cueDiv=d(t,e.text);var s={color:i,backgroundColor:o,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};n||(s.writingMode=""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",s.unicodeBidi="plaintext"),this.applyStyles(s,this.cueDiv),this.div=t.document.createElement("div"),s={textAlign:"middle"===e.align?"center":e.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},n||(s.direction=function(t){var e=[],r="";if(!t||!t.childNodes)return"ltr";function i(t,e){for(var r=e.childNodes.length-1;0<=r;r--)t.push(e.childNodes[r])}function o(t){if(!t||!t.length)return null;var e=t.pop(),r=e.textContent||e.innerText;if(r){var n=r.match(/^.*(\n|\r)/);return n?n[t.length=0]:r}return"ruby"===e.tagName?o(t):e.childNodes?(i(t,e),o(t)):void 0}for(i(e,t);r=o(e);)for(var n=0;n<r.length;n++)if(f(r.charCodeAt(n)))return"rtl";return"ltr"}(this.cueDiv),s.writingMode=""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(s),this.div.appendChild(this.cueDiv);var a=0;switch(e.positionAlign){case"start":a=e.position;break;case"middle":a=e.position-e.size/2;break;case"end":a=e.position-e.size}""===e.vertical?this.applyStyles({left:this.formatStyle(a,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(a,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function T(t){var e,r,n,i,o=/MSIE\s8\.0/.test(navigator.userAgent);if(t.div){r=t.div.offsetHeight,n=t.div.offsetWidth,i=t.div.offsetTop;var s=(s=t.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();t=t.div.getBoundingClientRect(),e=s?Math.max(s[0]&&s[0].height||0,t.height/s.length):0}this.left=t.left,this.right=t.right,this.top=t.top||i,this.height=t.height||r,this.bottom=t.bottom||i+(t.height||r),this.width=t.width||n,this.lineHeight=void 0!==e?e:t.lineHeight,o&&!this.lineHeight&&(this.lineHeight=13)}function E(t,e,a,u){var r=new T(e),n=e.cue,i=function(t){if("number"==typeof t.line&&(t.snapToLines||0<=t.line&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,r=e.textTrackList,n=0,i=0;i<r.length&&r[i]!==e;i++)"showing"===r[i].mode&&n++;return-1*++n}(n),o=[];if(n.snapToLines){var s;switch(n.vertical){case"":o=["+y","-y"],s="height";break;case"rl":o=["+x","-x"],s="width";break;case"lr":o=["-x","+x"],s="width"}var c=r.lineHeight,l=c*Math.round(i),h=a[s]+c,d=o[0];Math.abs(l)>h&&(l=l<0?-1:1,l*=Math.ceil(h/c)*c),i<0&&(l+=""===n.vertical?a.height:a.width,o=o.reverse()),r.move(d,l)}else{var f=r.lineHeight/a.height*100;switch(n.lineAlign){case"middle":i-=f/2;break;case"end":i-=f}switch(n.vertical){case"":e.applyStyles({top:e.formatStyle(i,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(i,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(i,"%")})}o=["+y","-x","+x","-y"],r=new T(e)}var p=function(t,e){for(var r,n=new T(t),i=1,o=0;o<e.length;o++){for(;t.overlapsOppositeAxis(a,e[o])||t.within(a)&&t.overlapsAny(u);)t.move(e[o]);if(t.within(a))return t;var s=t.intersectPercentage(a);s<i&&(r=new T(t),i=s),t=new T(n)}return r||n}(r,o);e.move(p.toCSSCompatValues(a))}function s(){}p.prototype.applyStyles=function(t,e){for(var r in e=e||this.div,t)t.hasOwnProperty(r)&&(e.style[r]=t[r])},p.prototype.formatStyle=function(t,e){return 0===t?0:t+e},(b.prototype=n(p.prototype)).constructor=b,T.prototype.move=function(t,e){switch(e=void 0!==e?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e}},T.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},T.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},T.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},T.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},T.prototype.intersectPercentage=function(t){return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},T.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},T.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,r=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,n=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;return{left:(t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t).left,right:t.right,top:t.top||n,height:t.height||e,bottom:t.bottom||n+(t.height||e),width:t.width||r}},s.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},s.convertCueToDOMTree=function(t,e){return t&&e?d(t,e):null};s.processCues=function(n,i,t){if(!n||!i||!t)return null;for(;t.firstChild;)t.removeChild(t.firstChild);var o=n.document.createElement("div");if(o.style.position="absolute",o.style.left="0",o.style.right="0",o.style.top="0",o.style.bottom="0",o.style.margin="1.5%",t.appendChild(o),function(t){for(var e=0;e<t.length;e++)if(t[e].hasBeenReset||!t[e].displayState)return!0;return!1}(i)){var s=[],a=T.getSimpleBoxPosition(o),u={font:Math.round(.05*a.height*100)/100+"px sans-serif"};!function(){for(var t,e,r=0;r<i.length;r++)e=i[r],t=new b(n,e,u),o.appendChild(t.div),E(0,t,a,s),e.displayState=t.div,s.push(T.getSimpleBoxPosition(t))}()}else for(var e=0;e<i.length;e++)o.appendChild(i[e].displayState)},(s.Parser=function(t,e,r){r||(r=e,e={}),e=e||{},this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=r||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(t){if(!(t instanceof c))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){var n=this;function e(){for(var t=n.buffer,e=0;e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var r=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,n.buffer=t.substr(e),r}function r(t){t.match(/X-TIMESTAMP-MAP/)?h(t,function(t,e){switch(t){case"X-TIMESTAMP-MAP":!function(t){var r=new l;h(t,function(t,e){switch(t){case"MPEGT":r.integer(t+"S",e);break;case"LOCA":r.set(t+"L",g(e))}},/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:r.get("MPEGTS"),LOCAL:r.get("LOCAL")})}(e)}},/=/):h(t,function(t,e){switch(t){case"Region":!function(t){var i=new l;if(h(t,function(t,e){switch(t){case"id":i.set(t,e);break;case"width":i.percent(t,e);break;case"lines":i.integer(t,e);break;case"regionanchor":case"viewportanchor":var r=e.split(",");if(2!==r.length)break;var n=new l;if(n.percent("x",r[0]),n.percent("y",r[1]),!n.has("x")||!n.has("y"))break;i.set(t+"X",n.get("x")),i.set(t+"Y",n.get("y"));break;case"scroll":i.alt(t,e,["up"])}},/=/,/\s/),i.has("id")){var e=new(n.vttjs.VTTRegion||n.window.VTTRegion);e.width=i.get("width",100),e.lines=i.get("lines",3),e.regionAnchorX=i.get("regionanchorX",0),e.regionAnchorY=i.get("regionanchorY",100),e.viewportAnchorX=i.get("viewportanchorX",0),e.viewportAnchorY=i.get("viewportanchorY",100),e.scroll=i.get("scroll",""),n.onregion&&n.onregion(e),n.regionList.push({id:i.get("id"),region:e})}}(e)}},/:/)}t&&(n.buffer+=n.decoder.decode(t,{stream:!0}));try{var i;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var o=(i=e()).match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new c(c.Errors.BadSignature);n.state="HEADER"}for(var s=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(s?s=!1:i=e(),n.state){case"HEADER":/:/.test(i)?r(i):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;if(n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,""),n.state="CUE",-1===i.indexOf("--\x3e")){n.cue.id=i;continue}case"CUE":try{u(i,n.cue,n.regionList)}catch(t){n.reportOrThrowError(t),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var a=-1!==i.indexOf("--\x3e");if(!i||a&&(s=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=i;continue;case"BADCUE":i||(n.state="ID");continue}}}catch(t){n.reportOrThrowError(t),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),!e.cue&&"HEADER"!==e.state||(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new c(c.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=s},{}],41:[function(t,e,r){var b={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right:!0};function T(t){return"string"==typeof t&&(!!n[t.toLowerCase()]&&t.toLowerCase())}function E(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function i(t,e,r){var n=this,i=/MSIE\s8\.0/.test(navigator.userAgent),o={};i?n=document.createElement("custom"):o.enumerable=!0,n.hasBeenReset=!1;var s="",a=!1,u=t,c=e,l=r,h=null,d="",f=!0,p="auto",g="start",v=50,y="middle",m=50,_="middle";if(Object.defineProperty(n,"id",E({},o,{get:function(){return s},set:function(t){s=""+t}})),Object.defineProperty(n,"pauseOnExit",E({},o,{get:function(){return a},set:function(t){a=!!t}})),Object.defineProperty(n,"startTime",E({},o,{get:function(){return u},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");u=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"endTime",E({},o,{get:function(){return c},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");c=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"text",E({},o,{get:function(){return l},set:function(t){l=""+t,this.hasBeenReset=!0}})),Object.defineProperty(n,"region",E({},o,{get:function(){return h},set:function(t){h=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"vertical",E({},o,{get:function(){return d},set:function(t){var e=function(t){return"string"==typeof t&&(!!b[t.toLowerCase()]&&t.toLowerCase())}(t);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"snapToLines",E({},o,{get:function(){return f},set:function(t){f=!!t,this.hasBeenReset=!0}})),Object.defineProperty(n,"line",E({},o,{get:function(){return p},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");p=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"lineAlign",E({},o,{get:function(){return g},set:function(t){var e=T(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"position",E({},o,{get:function(){return v},set:function(t){if(t<0||100<t)throw new Error("Position must be between 0 and 100.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"positionAlign",E({},o,{get:function(){return y},set:function(t){var e=T(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"size",E({},o,{get:function(){return m},set:function(t){if(t<0||100<t)throw new Error("Size must be between 0 and 100.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"align",E({},o,{get:function(){return _},set:function(t){var e=T(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");_=e,this.hasBeenReset=!0}})),n.displayState=void 0,i)return n}i.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=i},{}],42:[function(t,e,r){var u={"":!0,up:!0};function c(t){return"number"==typeof t&&0<=t&&t<=100}e.exports=function(){var e=100,r=3,n=0,i=100,o=0,s=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!c(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return r},set:function(t){if("number"!=typeof t)throw new TypeError("Lines must be set to a number.");r=t}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(t){if(!c(t))throw new Error("RegionAnchorX must be between 0 and 100.");i=t}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(t){if(!c(t))throw new Error("RegionAnchorY must be between 0 and 100.");n=t}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(t){if(!c(t))throw new Error("ViewportAnchorY must be between 0 and 100.");s=t}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(t){if(!c(t))throw new Error("ViewportAnchorX must be between 0 and 100.");o=t}},scroll:{enumerable:!0,get:function(){return a},set:function(t){var e=function(t){return"string"==typeof t&&(!!u[t.toLowerCase()]&&t.toLowerCase())}(t);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");a=e}}})}},{}],43:[function(t,e,r){"use strict";var n=t("global/window"),i=t("is-function"),y=t("parse-headers"),o=t("xtend");function s(t,e,r){var n=t;return i(e)?(r=e,"string"==typeof t&&(n={uri:t})):n=o(e,{uri:t}),n.callback=r,n}function m(t,e,r){return a(e=s(t,e,r))}function a(n){if(void 0===n.callback)throw new Error("callback argument missing");var i=!1,o=function(t,e,r){i||(i=!0,n.callback(t,e,r))};function s(){var t=void 0;if(t=c.response?c.response:c.responseText||function(t){if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;return""!==t.responseType||e?null:t.responseXML}(c),g)try{t=JSON.parse(t)}catch(t){}return t}function e(t){return clearTimeout(u),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,o(t,v)}function t(){if(!a){var t;clearTimeout(u),t=n.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var e=v,r=null;return 0!==t?(e={body:s(),statusCode:t,method:h,headers:{},url:l,rawRequest:c},c.getAllResponseHeaders&&(e.headers=y(c.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),o(r,e,e.body)}}var r,a,u,c=n.xhr||null,l=(c=c||(n.cors||n.useXDR?new m.XDomainRequest:new m.XMLHttpRequest)).url=n.uri||n.url,h=c.method=n.method||"GET",d=n.body||n.data,f=c.headers=n.headers||{},p=!!n.sync,g=!1,v={body:void 0,headers:{},statusCode:0,method:h,url:l,rawRequest:c};if("json"in n&&!1!==n.json&&(g=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),d=JSON.stringify(!0===n.json?d:n.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(t,0)},c.onload=t,c.onerror=e,c.onprogress=function(){},c.onabort=function(){a=!0},c.ontimeout=e,c.open(h,l,!p,n.username,n.password),p||(c.withCredentials=!!n.withCredentials),!p&&0<n.timeout&&(u=setTimeout(function(){if(!a){a=!0,c.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",e(t)}},n.timeout)),c.setRequestHeader)for(r in f)f.hasOwnProperty(r)&&c.setRequestHeader(r,f[r]);else if(n.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(c.responseType=n.responseType),"beforeSend"in n&&"function"==typeof n.beforeSend&&n.beforeSend(c),c.send(d||null),c}(e.exports=m).XMLHttpRequest=n.XMLHttpRequest||function(){},m.XDomainRequest="withCredentials"in new m.XMLHttpRequest?m.XMLHttpRequest:n.XDomainRequest,function(t,e){for(var r=0;r<t.length;r++)e(t[r])}(["get","put","post","patch","head","delete"],function(n){m["delete"===n?"del":n]=function(t,e,r){return(e=s(t,e,r)).method=n.toUpperCase(),a(e)}})},{"global/window":11,"is-function":14,"parse-headers":28,xtend:44}],44:[function(t,e,r){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)i.call(r,n)&&(t[n]=r[n])}return t};var i=Object.prototype.hasOwnProperty},{}],45:[function(t,e,r){e.exports={name:"ima",type:"adapter",tech:"js",author:"Jesus Lopez",version:"6.5.4",built:"2019-11-20",repo:"https://bitbucket.org/npaw/ima-adapter-js",libVersion:"^6.5.20",features:{buffer:"monitor",seek:"monitor",error:!0,stop:!0,pause:!0,resume:!0,getters:["getPlayhead","getDuration","getRendition","getTitle","getTitle2","getIsLive","getResource","getPlayerVersion","getPosition","getGivenBreaks","getBreaksTime","getGivenAds","getIsVisible","getAudioEnabled","getIsSkippable","getIsFullscreen","getCreativeId"]},ads:[]}},{}],46:[function(t,e,r){var n=t("youboralib"),i=t("../manifest.json");n.adapters.Ima=n.Adapter.extend({getVersion:function(){return i.version+"-"+i.name+"-"+i.tech},getPlayhead:function(){return this.flags.isJoined?this.isDAI?this.playhead:this.getDuration()-this.player.getRemainingTime():0},getDuration:function(){return this.isDAI?this.duration:(this.player.getCurrentAd&&this.player.getCurrentAd()&&(this.lastDuration=this.player.getCurrentAd().getDuration()),this.lastDuration)},getRendition:function(){return this.isDAI?this.width&&this.height?this.width+"x"+this.height:null:this.player.getCurrentAd().getVastMediaWidth().toString()+"x"+this.player.getCurrentAd().getVastMediaHeight().toString()},getTitle:function(){return this.isDAI?this.title:this.player.getCurrentAd().getTitle()},getTitle2:function(){return this.isDAI?this.advertiser:this.player.getCurrentAd().getAdvertiserName()},getResource:function(){return this.isDAI?null:this.player.getCurrentAd().getMediaUrl()},getPlayerVersion:function(){return google.ima.VERSION},getPlayerName:function(){return"IMA"},getGivenBreaks:function(){return this.player.getCuePoints?this.player.getCuePoints().length:null},getBreaksTime:function(){if(this.player.getCuePoints){var r=this.player.getCuePoints();return r.forEach(function(t,e){-1!==r[e]&&null!==r[e]&&void 0!==r[e]||(r[e]=this.plugin._adapter.getDuration())}.bind(this)),r}},getGivenAds:function(){return this.totalAds},getAudioEnabled:function(){return!this.player.getVolume||0!==this.player.getVolume()},getIsSkippable:function(){return!!this.player.getCurrentAd&&this.player.getCurrentAd().g.skippable},getIsFullscreen:function(){if(!this.contentPlayer)for(var t in this.player){var e=this.player[t];if(e&&e.videoHeight&&e.clientHeight){this.contentPlayer=e;break}}return!!(this.contentPlayer&&this.contentPlayer.clientWidth&&this.contentPlayer.clientHeight)&&(window.innerHeight<=this.contentPlayer.clientHeight+30&&window.innerWidth<=this.contentPlayer.clientWidth+30)},getIsVisible:function(){if(!this.contentPlayer)for(var t in this.player){var e=this.player[t];if(e&&e.videoHeight&&e.clientHeight){this.contentPlayer=e;break}}return n.Util.calculateAdViewability(this.contentPlayer)},getPosition:function(){return this.plugin.getAdapter()&&!this.plugin.getAdapter().flags.isJoined?n.Constants.AdPosition.Preroll:this.isDAI&&this.plugin.getAdapter()&&this.plugin.getAdapter().getIsLive()?n.Constants.AdPosition.Midroll:this.adPosition||n.Constants.AdPosition.Midroll},getCreativeId:function(){return this.player.getCurrentAd?this.player.getCurrentAd().g.creativeId:null},registerListeners:function(){if(this.references=[],google.ima.AdEvent){this.monitorPlayhead(!0,!1);var t=google.ima.AdEvent.Type;n.Util.logAllEvents(this.player.addEventListener,[null,t.LOADED,t.CONTENT_PAUSE_REQUESTED]),this.references[t.LOADED]=this.readyListener.bind(this),this.references[t.CONTENT_PAUSE_REQUESTED]=this.playListener.bind(this),this.references[t.LOADED]=this.playListener.bind(this),this.references[t.PAUSED]=this.pauseListener.bind(this),this.references[t.STARTED]=this.playingListener.bind(this),this.references[t.RESUMED]=this.playingListener.bind(this),this.references[google.ima.AdErrorEvent.Type.AD_ERROR]=this.errorListener.bind(this),this.references[t.COMPLETE]=this.endedListener.bind(this),this.references[t.CONTENT_RESUME_REQUESTED]=this.endedListener.bind(this),this.references[t.SKIPPED]=this.skippedListener.bind(this),this.references[t.CLICK]=this.clickListener.bind(this),this.references[t.ALL_ADS_COMPLETED]=this.endedViewListener.bind(this),this.references[t.LOG]=this.logListener.bind(this),this.references[t.FIRST_QUARTILE]=this.firstQuartileListener.bind(this),this.references[t.MIDPOINT]=this.secondQuartileListener.bind(this),this.references[t.THIRD_QUARTILE]=this.thirdQuartileListener.bind(this),this.references[t.CONTENT_RESUME_REQUESTED]=this.breakEndListener.bind(this)}if(google.ima.dai){var e=google.ima.dai.api.StreamEvent.Type;this.references[e.SKIPPED]=this.skippedL.bind(this),this.references[e.ERROR]=this.errorDAIListener.bind(this),this.references[e.AD_BREAK_STARTED]=this.startDAIListener.bind(this),this.references[e.AD_BREAK_ENDED]=this.stopDAIListener.bind(this),this.references[e.AD_PROGRESS]=this.progressDAIListener.bind(this),this.references[e.CLICK]=this.clickDAIListener.bind(this),this.references[e.STARTED]=this.joinDAIListener.bind(this),this.references[e.FIRST_QUARTILE]=this.firstQuartileListener.bind(this),this.references[e.MIDPOINT]=this.secondQuartileListener.bind(this),this.references[e.THIRD_QUARTILE]=this.thirdQuartileListener.bind(this)}for(var r in this.references)this.player.addEventListener(r,this.references[r])},unregisterListeners:function(){if(this.monitor&&this.monitor.stop(),this.player&&this.references){for(var t in this.references)this.player.removeEventListener(t,this.references[t]);this.references=[]}},skippedL:function(){this.firstQuartileTriggered=!1,this.secondQuartileTriggered=!1,this.thirdQuartileTriggered=!1,this.fireSkip()},errorDAIListener:function(t){this.fireError(),this.firstQuartileTriggered=!1,this.secondQuartileTriggered=!1,this.thirdQuartileTriggered=!1,this.fireStop()},startDAIListener:function(t){this.isDAI=!0,this.playhead=0,this.adPosition=this.getAdPosition(),this.duration=null,this.plugin.fireInit(),this.fireStart()},progressDAIListener:function(t){t.getStreamData&&t.getStreamData()?this.playhead=t.getStreamData().adProgressData.currentTime:t.getAdData&&t.getAdData()&&(this.playhead=t.getAdData().currentTime),this.fireJoin()},clickDAIListener:function(t){this.fireClick()},stopDAIListener:function(t){this.firstQuartileTriggered=!1,this.secondQuartileTriggered=!1,this.thirdQuartileTriggered=!1,this.fireStop({adPlayhead:this.duration}),this.plugin.getAdapter()&&this.plugin.getAdapter().fireResume(),this.fireBreakStop()},joinDAIListener:function(t){var e=t.getAd();e&&(this.duration=e.getDuration(),this.title=e.getTitle(),this.width=e.getVastMediaWidth(),this.height=e.getVastMediaHeight(),this.advertiser=e.getAdvertiserName()),this.plugin.getAdapter()&&this.plugin.getAdapter().firePause(),this.fireStart(),this.fireJoin()},logListener:function(t){if(t.getAdData()&&t.getAdData().adError){var e=t.getAdData().adError;this.fireError(e.getErrorCode(),e.getMessage())}},playListener:function(t){this.isDAI=!1,this.adPosition=this.getAdPosition();var e=t.getAdData();this.totalAds=e&&e.adPodInfo?e.adPodInfo.totalAds:null,this.plugin.fireInit(),this.plugin.getAdapter()&&this.plugin.getAdapter().firePause(),this.fireStart({adPlayhead:"0"})},pauseListener:function(t){this.firePause()},playingListener:function(t){this.fireResume(),this.fireSeekEnd(),this.fireBufferEnd(),this.fireJoin({adPlayhead:"0"})},errorListener:function(t){this.fireError(),this.firstQuartileTriggered=!1,this.secondQuartileTriggered=!1,this.thirdQuartileTriggered=!1,this.fireStop()},firstQuartileListener:function(t){this.firstQuartileTriggered||(this.firstQuartileTriggered=!0,this.fireQuartile(1))},secondQuartileListener:function(t){this.secondQuartileTriggered||(this.secondQuartileTriggered=!0,this.fireQuartile(2))},thirdQuartileListener:function(t){this.thirdQuartileTriggered||(this.thirdQuartileTriggered=!0,this.fireQuartile(3))},endedListener:function(t){this.firstQuartileTriggered=!1,this.secondQuartileTriggered=!1,this.thirdQuartileTriggered=!1,this.fireStop({adPlayhead:this.lastDuration})},skippedListener:function(t){this.fireSkip({adPlayhead:this.getPlayhead()})},clickListener:function(t){var e=this.player.getCurrentAd().g.clickThroughUrl,r=(new Date).getTime();this.lastUrl===e&&r<(this.lastTime||0)+2e3||(this.lastUrl=e,this.lastTime=r,this.fireClick(e))},endedViewListener:function(t){this.getPosition()===n.Constants.AdPosition.Postroll&&this.plugin.fireStop()},readyListener:function(t){this.totalAds=t.getAdData().adPodInfo.totalAds},breakEndListener:function(t){this.fireBreakStop()},getAdPosition:function(){if(!this.isDAI){switch(this.player.getCurrentAd().getAdPodInfo().getTimeOffset()){case 0:return n.Constants.AdPosition.Preroll;case-1:return n.Constants.AdPosition.Postroll}return n.Constants.AdPosition.Mdiroll}if(this.plugin.getAdapter())return!this.plugin.getAdapter().flags.isJoined||this.plugin.getAdapter().getPlayhead()<1?n.Constants.AdPosition.Preroll:n.Constants.AdPosition.Midroll}}),e.exports=n.adapters.Ima},{"../manifest.json":45,youboralib:118}],47:[function(t,e,r){e.exports={name:"videojs",type:"adapter",tech:"js",author:"Jordi Aguilar",version:"6.5.10",built:"2019-11-12",repo:"https://bitbucket.org/npaw/videojs-adapter-js.git",libVersion:"^6.5.19",features:{buffer:"monitor",seek:"native",error:!0,stop:!0,pause:!0,resume:!0,getters:["getPlayhead","getPlayrate","getDuration","getBitrate","getRendition","getTitle","getIsLive","getResource","getPlayerVersion"]},ads:[{buffer:"monitor",seek:"monitor",error:!0,stop:!0,pause:!0,resume:!0,getters:["getPlayhead","getDuration","getTitle","getResource","getPosition","getGivenBreaks","getBreaksTime","getGivenAds","getIsVisible","getAudioEnabled","getIsSkippable","getIsFullscreen","getCreativeId"],filename:"bcove-freewheel.js"},{buffer:"monitor",seek:"monitor",error:!0,stop:!0,pause:!0,resume:!0,getters:["getPlayhead","getDuration","getBitrate","getTitle","getResource","getPlayerVersion","getPosition","getGivenBreaks","getBreaksTime","getGivenAds","getIsVisible","getAudioEnabled","getIsSkippable","getIsFullscreen","getCreativeId"],filename:"bcove-ima.js"},{buffer:"monitor",seek:"monitor",error:!0,stop:!0,pause:!1,resume:!1,getters:[],filename:"generic.js"},{buffer:"monitor",seek:"monitor",error:!0,stop:!0,pause:!0,resume:!0,getters:["getPlayhead","getDuration","getTitle","getResource","getPlayerVersion","getPosition","getGivenBreaks","getBreaksTime","getGivenAds","getIsVisible","getAudioEnabled","getIsSkippable","getIsFullscreen"],filename:"ima.js"},{buffer:"monitor",seek:"monitor",error:!0,stop:!0,pause:!0,resume:!0,getters:["getPlayhead","getDuration","getResource","getPosition"],filename:"onceux.js"}]}},{}],48:[function(t,e,r){var n=t("youboralib"),i=t("../manifest.json"),o=n.Adapter.extend({getVersion:function(){return i.version+"-"+i.name+"-"+i.tech},getTitle:function(){var t=null;return this.player.mediainfo&&(t=this.player.mediainfo.name),t},getPlayhead:function(){var t=this.player.currentTime();return this.plugin._adsAdapter&&this.plugin._adsAdapter.flags.isStarted&&(t=this.lastPlayhead),t},getIsLive:function(){var t=null;return this.player.mediainfo&&(t=!0,"number"==typeof this.player.mediainfo.duration&&(t=this.player.mediainfo.duration<1)),t},getDuration:function(){var t=this.player.duration();return this.player.mediainfo&&void 0!==this.player.mediainfo.duration&&(t=this.player.mediainfo.duration),t},getResource:function(){var t=null,e=this.getUsedTech();return e&&e.getResource&&(t=e.getResource(this)),t},getBitrate:function(){var t=null,e=this.getUsedTech();return e&&e.getBitrate&&(t=e.getBitrate(this)),t},getRendition:function(){var t=null,e=this.getUsedTech();return e&&e.getRendition&&(t=e.getRendition(this)),t},getPlayerName:function(){var t="videojs";return o.ContribHlsTech.isUsed(this)?t+="-hls":o.HlsJsTech.isUsed(this)?t+="-hlsjs":o.ShakaTech.isUsed(this)?t+="-shaka":o.DashShakaTech.isUsed(this)&&(t+="-dash-shaka"),o.ImaAdsAdapter.isUsed(this)?t+="-ima":o.OnceUXAdsAdapter.isUsed(this)?this.pluginName+="-oux":this.player.FreeWheelPlugin&&(t+="-fw"),this.player.mediainfo&&(t+="-bcove"),t},getPlayerVersion:function(){var t=null;return"undefined"!=typeof videojs&&(t=videojs.VERSION),t},getPlayrate:function(){return this.player.playbackRate()},getTech:function(){return this.player.tech({IWillNotUseThisInPlugins:!0})},getUsedTech:function(){var t=null;return o.ContribHlsTech.isUsed(this)?t=o.ContribHlsTech:o.HlsJsTech.isUsed(this)?t=o.HlsJsTech:o.ShakaTech.isUsed(this)?t=o.ShakaTech:o.DashShakaTech.isUsed(this)&&(t=o.DashShakaTech),t},registerListeners:function(){this.monitorPlayhead(!0,!1),this.references={loadstart:this.loadstartListener.bind(this),adsready:this.loadAdsAdapter.bind(this),play:this.playListener.bind(this),timeupdate:this.timeupdateListener.bind(this),pause:this.pauseListener.bind(this),playing:this.playingListener.bind(this),abort:this.conditionalStop.bind(this),ended:this.conditionalStop.bind(this),dispose:this.conditionalStop.bind(this),seeking:this.seekingListener.bind(this),seeked:this.seekedListener.bind(this),error:this.errorListener.bind(this),adserror:this.aderrorListener.bind(this),adsEnded:this.adsEndedListener.bind(this)},this.player&&Object.keys(this.references).forEach(function(t){this.player.on(t,this.references[t])}.bind(this))},unregisterListeners:function(){this.monitor&&this.monitor.stop(),this.player&&this.references&&(Object.keys(this.references).forEach(function(t){this.player.off(t,this.references[t])}.bind(this)),delete this.references)},aderrorListener:function(t){this.loadAdsAdapter(),this.plugin.getAdsAdapter()&&this.plugin.getAdsAdapter().adPlayerErrorListener&&this.plugin.getAdsAdapter().adPlayerErrorListener(t)},loadstartListener:function(t){n.Log.notice("Player detected "+this.getPlayerName())},playListener:function(t){this.flags.isStarted?this.lastSrc&&this.lastSrc!==this.getResource()&&(this.fireStop(),this.lastPlayhead=void 0,this._startEvent(),this.lastSrc=this.getResource()):(this.lastSrc=this.getResource(),this._startEvent())},_startEvent:function(t){this.fireStart(),this.flags.isJoined||(this.joinPolling||(this.joinPolling=new n.Timer(this._jointimePolling.bind(this),500)),this.joinPolling.start()),this.loadAdsAdapter()},_jointimePolling:function(t){this.plugin.getAdsAdapter()&&this.plugin.getAdsAdapter().flags.isStarted||("number"==typeof this.lastPlayhead&&this.lastPlayhead!==this.getPlayhead()&&(this.fireJoin(),this.joinPolling&&this.joinPolling.stop()),this.lastPlayhead=this.getPlayhead())},timeupdateListener:function(t){.1<this.getPlayhead()&&(this.fireJoin(),this.joinPolling&&this.joinPolling.stop(),!this.flags.isPaused&&this.lastSeekPlayhead&&this.lastSeekPlayhead!==this.getPlayhead()&&(this.fireSeekEnd(),this.lastSeekPlayhead=!1)),this.flags.isJoined||(void 0===this.lastPlayhead&&(this.lastPlayhead=this.getPlayhead()),this.lastPlayhead!==this.getPlayhead()&&(this.fireStart(),this.fireJoin(),this.joinPolling&&this.joinPolling.stop(),this.lastPlayhead=void 0)),this.plugin._adsAdapter&&!this.plugin._adsAdapter.flags.isStarted&&(this.lastPlayhead=this.getPlayhead())},pauseListener:function(t){this.firePause()},playingListener:function(t){this._startEvent(),this.fireResume(),this.getPlayhead()<1&&this.fireSeekEnd()},conditionalStop:function(t){this.plugin&&(this.adsEnded=!1,this.fireStop(),this.lastPlayhead=void 0)},adsEndedListener:function(t){this.adsEnded=!0,this.plugin.requestBuilder.lastSent.adPosition===n.Constants.AdPosition.Postroll&&(this.plugin.fireStop(),this.lastPlayhead=void 0)},seekingListener:function(t){this.fireSeekBegin({},!1)},seekedListener:function(t){this.lastSeekPlayhead=this.getPlayhead()},errorListener:function(t){if(this.player.error&&this.player.error()){this.fireError(this.player.error().code,this.player.error().message);var e=Number(this.player.error().code);(2===e||4===e||e<0)&&(this.plugin.fireStop(),this.lastPlayhead=void 0,this.crashed=!0)}},loadAdsAdapter:function(){if(null===this.plugin.getAdsAdapter()){var t=null;t="undefined"!=typeof google&&o.ImaAdsAdapter.isUsed(this)?new o.ImaAdsAdapter(this.player):o.OnceUXAdsAdapter.isUsed(this)?new o.OnceUXAdsAdapter(this.player):this.player.ads&&"undefined"!=typeof google?new o.BcoveImaAdsAdapter(this.player):this.player.ads&&this.player.FreeWheelPlugin?new o.BcoveFreewheelAdsAdapter(this.player):new o.GenericAdsAdapter(this.player),this.plugin.setAdsAdapter(t)}}},{GenericAdsAdapter:t("./ads/generic"),BcoveImaAdsAdapter:t("./ads/bcove-ima"),BcoveFreewheelAdsAdapter:t("./ads/bcove-freewheel"),ImaAdsAdapter:t("./ads/ima"),OnceUXAdsAdapter:t("./ads/onceux"),ContribHlsTech:t("./tech/contrib-hls"),HlsJsTech:t("./tech/hls-js"),ShakaTech:t("./tech/shaka"),DashShakaTech:t("./tech/dash-shaka")});n.adapters.Videojs=o,e.exports=n.adapters.Videojs},{"../manifest.json":47,"./ads/bcove-freewheel":49,"./ads/bcove-ima":50,"./ads/generic":51,"./ads/ima":52,"./ads/onceux":53,"./tech/contrib-hls":54,"./tech/dash-shaka":55,"./tech/hls-js":56,"./tech/shaka":57,youboralib:118}],49:[function(t,e,r){var i=t("youboralib"),n=i.Adapter.extend({getVersion:function(){var t="unknown";return this.player.FreeWheelPlugin.getVersion?t="bcove-fw "+this.player.FreeWheelPlugin.getVersion():this.player.FreeWheelPlugin.VERSION&&(t="bcove-ssai "+this.player.FreeWheelPlugin.VERSION),t},getDuration:function(){var t=null;if(this.player.ads&&this.player.ads.ad&&this.player.ads.ad.duration)t=this.player.ads.ad.duration;else{var e=this.plugin.player;if(this.player.FreeWheelPlugin){var r=this.player.FreeWheelPlugin.tech;this.player.FreeWheelPlugin[r].adPlayer&&(e=this.player.FreeWheelPlugin[r].adPlayer)}e&&e.duration&&(t=e.duration())}return t},getPosition:function(){var t=i.Constants.AdPosition.Midroll;if(this.player.ads&&this.player.ads.ad)switch(this.player.ads.ad.type){case"PREROLL":t=i.Constants.AdPosition.Preroll;break;case"MIDROLL":t=i.Constants.AdPosition.Midroll;break;case"POSTROLL":t=i.Constants.AdPosition.Postroll}else this.plugin._adapter.flags.isJoined?this.plugin._adapter.getPlayhead()>=this.plugin._adapter.getDuration()&&(t=i.Constants.AdPosition.Postroll):t=i.Constants.AdPosition.Preroll;return t},getResource:function(){var t=null;if(this.slot){var e=this.slot.getAdInstances();if(e){var r=(this.plugin.requestBuilder.lastSent.adNumber||1)-1;if(e[r]&&e[r].getActiveCreativeRendition){var n=e[r].getActiveCreativeRendition();if(n&&n.getPrimaryCreativeRenditionAsset){var i=n.getPrimaryCreativeRenditionAsset();i&&i.getUrl&&i.getUrl()&&(t=i.getUrl())}n&&n.getWrapperUrl&&!t&&(t=n.getWrapperUrl())}}}return t||"unknown"},getTitle:function(){var t=null;return this.player.FreeWheelPlugin.adsManager&&this.player.FreeWheelPlugin.adsManager.getCurrentAd()&&this.player.FreeWheelPlugin.adsManager.getCurrentAd().getTitle()?t=this.player.FreeWheelPlugin.adsManager.getCurrentAd().getTitle():this.titles&&(t=this.titles[(this.plugin.requestBuilder.lastSent.adNumber||1)-1]._adId),t},getPlayhead:function(){var t=this.plugin.getAdapter().player;return this.player.FreeWheelPlugin.adPlayer&&(t=this.player.FreeWheelPlugin.adPlayer),t.currentTime()},getGivenBreaks:function(){var t=this.player.FreeWheelPlugin.tech,e=this.player.FreeWheelPlugin[t]._adContext._adResponse.getTemporalSlots(),r=0;for(var n in e){var i=e[n];if(0<i.getAdCount()){var o=i.getAdInstances();for(var s in o)if("video"===o[s]._creativeRenditions[0]._baseUnit){r++;break}}}return r},getBreaksTime:function(){var t=this.player.FreeWheelPlugin[this.player.FreeWheelPlugin.tech]._adContext._adResponse.getTemporalSlots(),e=[];for(var r in t){var n=t[r];if(0<n.getAdCount()){var i=n.getAdInstances();for(var o in i)if("video"===i[o]._creativeRenditions[0]._baseUnit){this.plugin.getDuration()&&n.getTimePosition()>this.plugin.getDuration()?e.push(this.plugin.getDuration()):e.push(n.getTimePosition());break}}}return e.sort()},getGivenAds:function(){var t=this.player.FreeWheelPlugin.tech;return this.player.FreeWheelPlugin[t]._currentSlot.getAdCount()},getAudioEnabled:function(){return!this.player.muted()&&!!this.player.volume()},getIsSkippable:function(){return!1},getIsFullscreen:function(){var t=null;if(this.plugin.deviceDetector.isIphone())t=!this.plugin.deviceDetector.isInBackground;else{var e,r=this.player.FreeWheelPlugin.tech;t=!!(e=this.player.FreeWheelPlugin[r]._video)&&(window.innerHeight<=e.clientHeight+30&&window.innerWidth<=e.clientWidth+30)}return t},getIsVisible:function(){var t=null;if(this.plugin.deviceDetector.isIphone())t=!this.plugin.deviceDetector.isInBackground;else{if(!this.contentPlayer){var e=this.player.FreeWheelPlugin.tech;for(var r in this.player.FreeWheelPlugin[e]){var n=this.player.FreeWheelPlugin[e][r];if(n.videoHeight&&n.clientHeight){this.contentPlayer=n;break}}}t=i.Util.calculateAdViewability(this.contentPlayer)}return t},getCreativeId:function(){var t=null;return this.titles&&(t=this.titles[(this.plugin.requestBuilder.lastSent.adNumber||1)-1]._creativeId),t},registerListeners:function(){if(this.monitorPlayhead(!0,!1),this.references={"ads-ad-started":this.startJoinListener.bind(this),"ads-pause":this.pausedListener.bind(this),"ads-play":this.resumedListener.bind(this),"ads-ad-ended":this.adEndedListener.bind(this),"ads-pod-ended":this.podEndListener.bind(this),"ads-first-quartile":this.firstQuartileListener.bind(this),"ads-midpoint":this.secondQuartileListener.bind(this),"ads-third-quartile":this.thirdQuartileListener.bind(this)},"undefined"!=typeof tv){var e=this.player.FreeWheelPlugin[this.player.FreeWheelPlugin.tech]._adContext;for(var t in this.events=tv.freewheel.SDK,this.fwreferences={},this.fwreferences[this.events.EVENT_AD]=this.logListener.bind(this),this.fwreferences[this.events.EVENT_SLOT_STARTED]=this.slotListener.bind(this),this.fwreferences[this.events.EVENT_ERROR]=this.errorFwListener.bind(this),this.manifestNoResponse=[this.events.ERROR_SECURITY,this.events.ERROR_TIMEOUT],this.manifestNoResponse)this.fwreferences[t]=this.noResponseManifestListener.bind(this);for(var r in this.manifestEmpty=[this.events.ERROR_NO_AD_AVAILABLE,this.events.ERROR_VAST_NO_AD],this.manifestEmpty)this.fwreferences[r]=this.manifestEmptyListener.bind(this);for(var n in this.manifestWrong=[this.events.ERROR_VAST_VERSION_NOT_SUPPORTED,this.events.ERROR_VAST_WRAPPER_LIMIT_REACH,this.events.ERROR_VAST_XML_PARSING,this.events.ERROR_PARSE],this.manifestWrong)this.fwreferences[n]=this.manifestWrongListener.bind(this);this.player&&Object.keys(this.fwreferences).forEach(function(t){e.addEventListener(t,this.fwreferences[t])}.bind(this))}this.player&&Object.keys(this.references).forEach(function(t){this.player.on(t,this.references[t])}.bind(this))},logListener:function(t){if(t.errorCode||t.errorInfo||t.errorModule)this.errorFwListener(t);else switch(t.subType){case this.events.EVENT_AD_SKIPPED:this.skippedListener(t);break;case this.events.EVENT_SLOT_STARTED:this.slotListener(t);break;case this.events.EVENT_AD_CLICK:this.clickFwListener(t)}},skippedListener:function(t){this.fireSkip(),this.plugin._adapter&&this.plugin._adapter.fireResume()},noResponseManifestListener:function(t){this.fireManifest(i.Constants.ManifestError.NO_RESPONSE,"No response")},manifestEmptyListener:function(t){this.fireManifest(i.Constants.ManifestError.EMPTY,"Empty manifest")},manifestWrongListener:function(t){this.fireManifest(i.Constants.ManifestError.WRONG,"Wrong manifest format")},slotListener:function(t){this.slot=t.slot,t&&t.slot&&t.slot.getAdInstances&&(this.titles=t.slot.getAdInstances())},startJoinListener:function(t){this.plugin._adapter&&this.plugin._adapter.firePause(),this.fireStart(),this.fireJoin()},pausedListener:function(t){this.firePause()},resumedListener:function(t){this.fireResume()},adEndedListener:function(t){var e=this.plugin.requestBuilder.lastSent.adPosition===i.Constants.AdPosition.Preroll?0:this.plugin._adapter.lastPlayhead;this.fireStop({playhead:e,adPlayhead:this.getDuration()})},errorFwListener:function(t){this.fireError(t.errorCode||t.subType,t.errorInfo),this.fireStop()},clickFwListener:function(t){var e=t.adInstance.getEventCallbackUrls(this.events.EVENT_AD_CLICK,this.events.EVENT_TYPE_CLICK)[0];this.fireClick(e)},firstQuartileListener:function(t){this.fireQuartile(1)},secondQuartileListener:function(t){this.fireQuartile(2)},thirdQuartileListener:function(t){this.fireQuartile(3)},podEndListener:function(t){this.fireBreakStop()},unregisterListeners:function(){this.monitor&&this.monitor.stop(),this.player&&this.references&&(Object.keys(this.references).forEach(function(t){this.player.off(t,this.references[t])}).bind(this),this.references={})}},{isUsed:function(t){return this.player.ads&&this.player.FreeWheelPlugin}});e.exports=n},{youboralib:118}],50:[function(t,e,r){var n=t("youboralib"),i=n.Adapter.extend({getVersion:function(){var t=null;return"undefined"!=typeof google&&google.ima&&(t="bcove-ima "+google.ima.VERSION),t},getPlayhead:function(){var t=this.plugin.getAdapter().player;return this.player.ima3&&this.player.ima3&&this.player.ima3.adPlayer&&(t=this.player.ima3.adPlayer),t.currentTime()},getDuration:function(){var t=null;if(this.player.ads&&this.player.ads.ad&&this.player.ads.ad.duration)t=this.player.ads.ad.duration;else{var e=this.plugin.player;this.player.ima3&&(e=this.player.ima3.adPlayer),t=e&&e.duration?e.duration():null}return t},getPosition:function(){var t=n.Constants.AdPosition.Midroll;if(this.player.ads&&this.player.ads.ad)switch(this.player.ads.ad.type){case"PREROLL":t=n.Constants.AdPosition.Preroll;break;case"MIDROLL":t=n.Constants.AdPosition.Midroll;break;case"POSTROLL":t=n.Constants.AdPosition.Postroll}else this.plugin._adapter.flags.isJoined?this.plugin._adapter.getPlayhead()>=this.plugin._adapter.getDuration()&&(t=n.Constants.AdPosition.Postroll):t=n.Constants.AdPosition.Preroll;return t},getResource:function(){var t="unknown";return this.player.ima3&&(t=this.player.ima3.currentAd.getMediaUrl()),t},getTitle:function(){var t=null;return this.player.ima3&&this.player.ima3.currentAd&&(t=this.player.ima3.currentAd.getTitle()),t},getPlayerVersion:function(){var t=null;return this.player.ima3&&(t=this.player.ima3.VERSION),t},getGivenBreaks:function(){var t=null;return this.player.ima3&&(t=this.player.ima3.adsManager.getCuePoints().length),t},getBreaksTime:function(){var t=null;if(this.player.ima3){var e=this.player.ima3.adsManager.getCuePoints();for(var r in e)(e[r]||0===e[r])&&-1!==e[r]||(e[r]=this.plugin._adapter.getDuration());t=e}return t},getGivenAds:function(){var t=null;return this.player.ima3&&this.player.ima3.currentAd&&this.player.ima3.currentAd.getAdPodInfo()&&(t=this.player.ima3.currentAd.getAdPodInfo().getTotalAds()),t},getAudioEnabled:function(){return!this.player.muted()&&!!this.player.volume()},getIsSkippable:function(){var t=!1;return this.player.ima3&&(t=this.player.ima3.currentAd&&this.player.ima3.currentAd.isSkippable()),t},getIsFullscreen:function(){var t=null;if(this.plugin.deviceDetector.isIphone())t=!this.plugin.deviceDetector.isInBackground;else{var e=null;this.player.ima3&&(e=this.player.ima3.el),t=!!e&&(window.innerHeight<=e.clientHeight+30&&window.innerWidth<=e.clientWidth+30)}return t},getIsVisible:function(){var t=null;return this.plugin.deviceDetector.isIphone()?t=!this.plugin.deviceDetector.isInBackground:this.player.ima3&&(t=n.Util.calculateAdViewability(this.player.ima3.el)),t},getBitrate:function(){var t=-1;return this.player.ima3&&this.player.ima3.currentAd&&this.player.ima3.currentAd.getVastMediaBitrate()&&(t=this.player.ima3.currentAd.getVastMediaBitrate()),t},getCreativeId:function(){var t=null;return this.player.ima3&&this.player.ima3.currentAd?t=this.player.ima3.currentAd.getCreativeAdId()||this.player.ima3.currentAd.getCreativeId():this.titles&&(t=this.titles[(this.plugin.requestBuilder.lastSent.adNumber||1)-1]._creativeId),t},registerListeners:function(){this.monitorPlayhead(!0,!1),this.references={"ima3-started":this.startJoinListener.bind(this),"ima3-paused":this.pausedListener.bind(this),"ima3-resumed":this.resumedListener.bind(this),"ima3-complete":this.adEndedListener.bind(this),"ima3-skipped":this.skippedListener.bind(this),"ima3-ad-error":this.errorListener.bind(this),"ads-pod-ended":this.podEndListener.bind(this),"ads-click":this.clickListener.bind(this),"ads-first-quartile":this.firstQuartileListener.bind(this),"ads-midpoint":this.secondQuartileListener.bind(this),"ads-third-quartile":this.thirdQuartileListener.bind(this)},this.player&&Object.keys(this.references).forEach(function(t){this.player.on(t,this.references[t])}.bind(this))},startJoinListener:function(t){this.plugin._adapter&&this.plugin._adapter.firePause(),this.fireStart(),this.fireJoin()},pausedListener:function(t){this.firePause()},resumedListener:function(t){this.fireResume()},skippedListener:function(t){this.fireSkip(),this.plugin._adapter&&this.plugin._adapter.fireResume()},adEndedListener:function(t){var e=this.plugin.requestBuilder.lastSent.adPosition===n.Constants.AdPosition.Preroll?0:this.plugin._adapter.lastPlayhead;this.fireStop({playhead:e,adPlayhead:this.getDuration()})},errorListener:function(t){if(this.player.ima3)if(t.getError&&t.getError()){var e=t.getError();this.fireError(e.getCode(),e.getMessage())}else this.fireError()},clickListener:function(t){if(this.player.ima3){var e=null;this.player.ima3.currentAd&&this.player.ima3.currentAd.g&&(e=this.player.ima3.currentAd.g.clickThroughUrl),this.fireClick(e)}},firstQuartileListener:function(t){this.fireQuartile(1)},secondQuartileListener:function(t){this.fireQuartile(2)},thirdQuartileListener:function(t){this.fireQuartile(3)},podEndListener:function(t){this.fireBreakStop()},unregisterListeners:function(){this.monitor&&this.monitor.stop(),this.player&&this.references&&(Object.keys(this.references).forEach(function(t){this.player.off(t,this.references[t])}).bind(this),this.references={})},adPlayerErrorListener:function(t){var e=t.data.AdError;0<=[1012,1005,301,402,302].indexOf(e.getErrorCode())?this.fireManifest(n.Constants.ManifestError.NO_RESPONSE,e.getMessage()):0<=[1007,1009,303].indexOf(e.getErrorCode())?this.fireManifest(n.Constants.ManifestError.EMPTY,e.getMessage()):0<=[403,100,503,101,102].indexOf(e.getErrorCode())?this.fireManifest(n.Constants.ManifestError.WRONG,e.getMessage()):this.fireError(e.getErrorCode(),e.getMessage())}},{isUsed:function(t){return t.player.ads&&"undefined"!=typeof google}});e.exports=i},{youboralib:118}],51:[function(t,e,r){var n=t("youboralib"),i=t("../../manifest.json"),o=n.Adapter.extend({getVersion:function(){return i.version+"-videojs-ads"},registerListeners:function(){this.references={adstart:this.adStartListener.bind(this),adend:this.adEndListener.bind(this),adskip:this.adSkipListener.bind(this),adserror:this.errorListener.bind(this),"ads-click":this.clickListener.bind(this)},this.player&&Object.keys(this.references).forEach(function(t){this.player.on(t,this.references[t])}.bind(this))},unregisterListeners:function(){this.player&&this.references&&(Object.keys(this.references).forEach(function(t){this.player.off(t,this.references[t])}.bind(this)),delete this.references)},adStartListener:function(t){this.fireStart(),this.fireJoin()},adEndListener:function(t){this.fireStop()},adSkipListener:function(t){this.fireSkip()},errorListener:function(t){this.fireError()},clickListener:function(t){this.fireClick()}});e.exports=o},{"../../manifest.json":47,youboralib:118}],52:[function(t,e,r){var n=t("youboralib"),i=t("../../manifest.json"),o=n.Adapter.extend({getVersion:function(){return i.version+"-videojs-ima-ads"},getDuration:function(){return this.player.ima.getAdsManager()&&null!==this.player.ima.getAdsManager().getCurrentAd()&&(this.duration=this.player.ima.getAdsManager().getCurrentAd().getDuration()),this.duration},getResource:function(){var t=null,e=this.player.ima.getAdsManager();return e&&(t=e.getCurrentAd().getMediaUrl()),t},getTitle:function(){var t=null,e=this.player.ima.getAdsManager();return e&&(t=e.getCurrentAd().getTitle()),t},getPlayhead:function(){var t=null,e=this.player.ima.getAdsManager();return e&&(t=this.getDuration()-e.getRemainingTime()),t},getPlayerVersion:function(){return"IMA"+google.ima.VERSION+"; contrib-ads "+this.player.ads.VERSION},getPosition:function(){var t=n.Constants.AdPosition.Preroll;return this.plugin._adapter.getDuration()-1<this.plugin._adapter.getPlayhead()?t=n.Constants.AdPosition.Postroll:this.plugin._adapter.flags.isJoined&&(t=n.Constants.AdPosition.Midroll),t},getGivenBreaks:function(){var t=null;return this.cuepoints&&(t=this.cuepoints.length),t},getBreaksTime:function(){return this.cuepoints},getGivenAds:function(){return this.totalAds},getAudioEnabled:function(){return!this.player.ima.adMuted},getIsSkippable:function(){return this.isSkippable},getIsFullscreen:function(){var t=!1,e=this.player.ima.adDisplayContainer;for(var r in e)e[r]&&e[r].width&&e[r].height&&window.innerHeight&&window.innerWidth&&e[r].width&&e[r].height&&(t=window.innerHeight<=e[r].height+30&&window.innerWidth<=e[r].width+30);return t},getIsVisible:function(){return n.Util.calculateAdViewability(this.player.ima.adContainerDiv)},registerListeners:function(){this.monitorPlayhead(!0,!1);var t=google.ima.AdEvent.Type;this.references={},this.references[t.AD_METADATA]=this.metadataListener.bind(this),this.references[t.LOADED]=this.loadedListener.bind(this),this.references[t.CONTENT_PAUSE_REQUESTED]=this.contentPauseRequestedListener.bind(this),this.references[t.STARTED]=this.startedListener.bind(this),this.references[t.PAUSED]=this.pausedListener.bind(this),this.references[t.RESUMED]=this.resumedListener.bind(this),this.references[t.COMPLETE]=this.completeListener.bind(this),this.references[t.SKIPPED]=this.skippedListener.bind(this),this.references[t.CLICK]=this.clickListener.bind(this),this.references[google.ima.AdErrorEvent.Type.AD_ERROR]=this.errorListener.bind(this),this.references[t.ALL_ADS_COMPLETED]=this.adsEndedListener.bind(this),this.references[t.FIRST_QUARTILE]=this.firstQuartileListener.bind(this),this.references[t.MIDPOINT]=this.secondQuartileListener.bind(this),this.references[t.THIRD_QUARTILE]=this.thirdQuartileListener.bind(this),this.playerReferences={adend:this.adEndedListener.bind(this),adstart:this.startedListener.bind(this),adskip:this.skippedListener.bind(this),adserror:this.errorListener.bind(this),"ads-click":this.clickListener.bind(this)},this.player&&this.player.ima&&(Object.keys(this.references).forEach(function(t){this.player.ima.addEventListener(t,this.references[t])}.bind(this)),Object.keys(this.playerReferences).forEach(function(t){this.player.on(t,this.playerReferences[t])}.bind(this)))},metadataListener:function(t){this.cuepoints=t.getAdCuePoints().h.slice(),this.plugin._adapter&&this.cuepoints.forEach(function(t,e){-1!==this.cuepoints[e]&&null!=this.cuepoints[e]&&void 0!==this.cuepoints[e]||(this.cuepoints[e]=this.plugin._adapter.getDuration())}.bind(this))},loadedListener:function(t){this.isSkippable=t.getAdData().skippable,this.totalAds=t.getAdData().adPodInfo.totalAds,this.fireStart()},contentPauseRequestedListener:function(t){this.fireStart()},startedListener:function(t){this.fireStart(),this.fireJoin()},pausedListener:function(t){this.firePause()},resumedListener:function(t){this.fireResume()},completeListener:function(t){this.fireStop()},skippedListener:function(t){this.fireSkip()},adEndedListener:function(t){this.fireStop()},errorListener:function(t){var e=t.getError();this.fireError(e.getCode(),e.getMessage())},clickListener:function(t){this.fireClick()},adsEndedListener:function(t){this.plugin.getAdapter().adsEnded=!0,this.fireStop(),this.plugin.requestBuilder.lastSent.adPosition===n.Constants.AdPosition.Postroll&&this.plugin.fireStop()},firstQuartileListener:function(t){this.fireQuartile(1)},secondQuartileListener:function(t){this.fireQuartile(2)},thirdQuartileListener:function(t){this.fireQuartile(3)},unregisterListeners:function(){this.monitor&&this.monitor.stop(),this.player&&this.player.ima&&this.references&&this.playerReferences&&(Object.keys(this.references).forEach(function(t){this.player.ima.removeEventListener(t,this.references[t])}.bind(this)),Object.keys(this.playerReferences).forEach(function(t){this.player.off(t,this.playerReferences[t])}.bind(this))),delete this.references,delete this.playerReferences},adPlayerErrorListener:function(t){var e=t.data.AdError;0<=[1012,1005,301,402,302].indexOf(e.getErrorCode())?this.fireManifest(n.Constants.ManifestError.NO_RESPONSE,e.getMessage()):0<=[1007,1009,303].indexOf(e.getErrorCode())?this.fireManifest(n.Constants.ManifestError.EMPTY,e.getMessage()):0<=[403,100,503,101,102].indexOf(e.getErrorCode())?this.fireManifest(n.Constants.ManifestError.WRONG,e.getMessage()):this.fireError(e.getErrorCode(),e.getMessage())}},{isUsed:function(t){return t.player.ima}});e.exports=o},{"../../manifest.json":47,youboralib:118}],53:[function(t,e,r){var n=t("youboralib"),i=t("../../manifest.json"),o=n.Adapter.extend({getVersion:function(){return i.version+"-videojs-onceux-ads"},getResource:function(){return this.player.ads.contentSrc},getPlayhead:function(){return this.player.onceux.currentTime()},getDuration:function(){return this.player.onceux.duration()},getPosition:function(){var t=n.Constants.AdPosition.Preroll;return this.plugin.getAdapter().flags.isJoined&&(t=this.plugin.getAdapter().getPlayhead()<=this.plugin.getAdapter().getDuration()?n.Constants.AdPosition.Midroll:n.Constants.AdPosition.Postroll),t},registerListeners:function(){n.Util.logAllEvents(this.player,[null,"onceux-ads-complete","onceux-adroll-start","onceux-adroll-complete","onceux-linearad-start","onceux-linearad-impression","onceux-linearad-complete","onceux-linearad-skipped","onceux-linearad-pause","onceux-linearad-resume","onceux-companionad-creativeView","adserror","ads-click"]),this.monitorPlayhead(!0,!1),this.references={"onceux-linearad-start":this.startedListener.bind(this),"onceux-linearad-pause":this.pausedListener.bind(this),"onceux-linearad-resume":this.resumedListener.bind(this),"onceux-linearad-complete":this.completeListener.bind(this),"onceux-linearad-skipped":this.skippedListener.bind(this),adserror:this.errorListener.bind(this),"ads-click":this.clickListener.bind(this)},Object.keys(this.references).forEach(function(t){this.player.on(t,this.references[t])}.bind(this))},unregisterListeners:function(){this.monitor&&this.monitor.stop(),this.player&&this.references&&(Object.keys(this.references).forEach(function(t){this.player.off(t,this.references[t])}.bind(this)),delete this.references)},startedListener:function(t){this.fireStart(),this.fireJoin()},pausedListener:function(t){this.firePause()},resumedListener:function(t){this.fireResume()},completeListener:function(t){this.fireStop({adPlayhead:this.getDuration()})},skippedListener:function(t){this.fireSkip()},errorListener:function(t){this.fireError()},clickListener:function(t){this.fireClick()}},{isUsed:function(t){return t.player.onceux}});e.exports=o},{"../../manifest.json":47,youboralib:118}],54:[function(t,e,r){var s=t("youboralib");e.exports={isUsed:function(t){return!!t.getTech().hls},getBitrate:function(t){var e=null,r=t.getTech().hls.playlists.media();if(t.player.qualityLevels){var n=t.player.qualityLevels(),i=n[n.selectedIndex];i&&(e=i.bitrate)}else r&&r.attributes&&(e=r.attributes.BANDWIDTH);return e},getRendition:function(t){var e=null,r=t.getTech().hls.playlists.media();if(t.player.qualityLevels){var n=t.player.qualityLevels(),i=n[n.selectedIndex];i&&(e=s.Util.buildRenditionString(i.width,i.height,i.bitrate))}else if(r&&r.attributes){var o=r.attributes;o.RESOLUTION?e=s.Util.buildRenditionString(o.RESOLUTION.width,o.RESOLUTION.height,o.BANDWIDTH):o.BANDWIDTH?e=s.Util.buildRenditionString(o.BANDWIDTH):o.NAME&&(e=o.NAME)}return e}}},{youboralib:118}],55:[function(t,e,r){var a=t("youboralib");e.exports={isUsed:function(t){return t.player.dash&&t.player.dash.shakaPlayer},getResource:function(t){return t.player.dash.shakaPlayer.getManifestUri()},getBitrate:function(t){return t.player.dash.shakaPlayer.getStats().streamBandwidth},getRendition:function(t){var e=t.player.dash.shakaPlayer,r=e.getStats(),n=a.Util.buildRenditionString(r.width,r.height,r.streamBandwidth),i=e.getVariantTracks();for(var o in i){var s=i[o];s.active&&"video"===s.type&&(n=a.Util.buildRenditionString(s.width,s.height,s.bandwidth))}return n}}},{youboralib:118}],56:[function(t,e,r){var i=t("youboralib");e.exports={isUsed:function(t){return!!t.getTech().hls_},getResource:function(t){var e=null;return t.getTech().hls_&&t.getTech().hls_.url?e=t.getTech().hls_.url:t.getTech().hls&&t.getTech().hls.source_&&(e=t.getTech().hls.source_.src),e},getBitrate:function(t){var e=null,r=t.getTech().hls_.currentLevel;if(void 0!==r&&-1!==r&&t.getTech().hls_.levels){var n=t.getTech().hls_.levels[r];n&&n.bitrate&&(e=n.bitrate)}return e},getRendition:function(t){var e=null,r=t.getTech().hls_.currentLevel;if(void 0!==r&&-1!==r&&t.getTech().hls_.levels){var n=t.getTech().hls_.levels[r];n&&(e=i.Util.buildRenditionString(n.width,n.height,n.bitrate))}return e}}},{youboralib:118}],57:[function(t,e,r){var a=t("youboralib");e.exports={isUsed:function(t){return!!t.getTech().shakaPlayer},getResource:function(t){return t.getTech().shakaPlayer.getManifestUri()},getBitrate:function(t){return t.getTech().shakaPlayer.getStats().streamBandwidth},getRendition:function(t){var e=t.getTech().shakaPlayer,r=e.getStats(),n=a.Util.buildRenditionString(r.width,r.height,r.streamBandwidth),i=e.getVariantTracks();for(var o in i){var s=i[o];if(s.active&&"video"===s.type){n=a.Util.buildRenditionString(s.width,s.height,s.bandwidth);break}}return n}}},{youboralib:118}],58:[function(t,e,r){e.exports={name:"youboralib",type:"lib",tech:"js",author:"Jordi Aguilar",version:"6.5.20",built:"2019-11-20",repo:"https://bitbucket.org/npaw/lib-plugin-js.git"}},{}],59:[function(t,e,r){var n=t("../emitter"),i=t("../log"),o=t("../util"),s=t("../version"),a=t("./playbackchronos"),u=t("./playbackflags"),c=t("./playheadmonitor"),l=t("../chrono"),h=n.extend({constructor:function(t){this.flags=new u,this.chronos=new a,this.monitor=null,this.plugin=null,this.player=null,this.setPlayer(t),this.tag=this.player,i.notice("Adapter "+this.getVersion()+" with Lib "+s+" is ready.")},setPlayer:function(t){this.player&&this.unregisterListeners(),"string"==typeof t&&"undefined"!=typeof document?this.player=document.getElementById(t):this.player=t,this.registerListeners()},registerListeners:function(){},unregisterListeners:function(){},dispose:function(){this.monitor&&this.monitor.stop(),this.fireStop(),this.unregisterListeners(),this.player=null,this.tag=null},monitorPlayhead:function(t,e,r){this.stopMonitor();var n=0;t&&(n|=c.Type.BUFFER),e&&(n|=c.Type.SEEK),this.monitor&&this.monitor._timer.isRunning?this.monitor.skipNextTick():this.monitor=new c(this,n,r)},stopMonitor:function(){this.monitor&&this.monitor.stop()},getPlayhead:function(){return null},getPlayrate:function(){return this.flags.isPaused?0:1},getFramesPerSecond:function(){return null},getDroppedFrames:function(){return null},getDuration:function(){return null},getBitrate:function(){return null},getThroughput:function(){return null},getRendition:function(){return null},getTitle:function(){return null},getTitle2:function(){return null},getIsLive:function(){return null},getResource:function(){return null},getPlayerVersion:function(){return null},getPlayerName:function(){return null},getVersion:function(){return s+"-generic-js"},getCdnTraffic:function(){return null},getP2PTraffic:function(){return null},getUploadTraffic:function(){return null},getIsP2PEnabled:function(){return null},getHouseholdId:function(){return null},getLatency:function(){return null},getPacketLoss:function(){return null},getPacketSent:function(){return null},getMetrics:function(){return null},getPosition:function(){return null},getGivenBreaks:function(){return null},getExpectedBreaks:function(){return null},getExpectedPattern:function(){return null},getBreaksTime:function(){return null},getGivenAds:function(){return null},getExpectedAds:function(){return null},getIsVisible:function(){return!0},getAudioEnabled:function(){return null},getIsSkippable:function(){return null},getIsFullscreen:function(){return null},getCampaign:function(){return null},getCreativeId:function(){return null},getProvider:function(){return null},fireInit:function(t){this.plugin&&this.plugin.fireInit()},fireStart:function(t){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||(this.flags.isStarted=!0,this.chronos.total.start(),this.chronos.join.start(),this.emit(h.Event.START,{params:t}))},fireJoin:function(t){this.flags.isJoined||this.flags.isStarted||this._isAds()||!this.plugin||!this.plugin.isInitiated||this.fireStart(),this.flags.isStarted&&!this.flags.isJoined&&(this.flags.isStarted=!0,this.monitor&&this.monitor.start(),this.flags.isJoined=!0,this.chronos.join.stop(),this.emit(h.Event.JOIN,{params:t}))},firePause:function(t){this.flags.isBuffering&&this.fireBufferEnd(),this.flags.isJoined&&!this.flags.isPaused&&(this.flags.isPaused=!0,this.chronos.pause.start(),this.emit(h.Event.PAUSE,{params:t}))},fireResume:function(t){this.flags.isJoined&&this.flags.isPaused&&(this.flags.isPaused=!1,this.chronos.pause.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(h.Event.RESUME,{params:t}))},fireBufferBegin:function(t,e){if(this.flags.isJoined&&!this.flags.isBuffering){if(this.flags.isSeeking){if(!e)return;i.notice("Converting current buffer to seek"),this.chronos.buffer=this.chronos.seek.clone(),this.chronos.seek.reset(),this.flags.isSeeking=!1}else this.chronos.buffer.start();this.flags.isBuffering=!0,this.emit(h.Event.BUFFER_BEGIN,{params:t})}},fireBufferEnd:function(t){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(h.Event.BUFFER_END,{params:t}))},cancelBuffer:function(t){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick())},fireSeekBegin:function(t,e){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;if(this.flags.isJoined&&!this.flags.isSeeking){if(this.flags.isBuffering){if(!1===e)return;i.notice("Converting current buffer to seek"),this.chronos.seek=this.chronos.buffer.clone(),this.chronos.buffer.reset(),this.flags.isBuffering=!1}else this.chronos.seek.start();this.flags.isSeeking=!0,this.emit(h.Event.SEEK_BEGIN,{params:t})}},fireSeekEnd:function(t){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(h.Event.SEEK_END,{params:t}))},cancelSeek:function(t){this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick())},fireStop:function(t){(this._isAds()||this.plugin&&this.plugin._isStopReady())&&(this._isAds()&&this.flags.isStarted||!this._isAds()&&(this.flags.isStarted||this.plugin&&this.plugin.isInitiated))&&(this.monitor&&this.monitor.stop(),this.flags.reset(),this.chronos.total.stop(),this.chronos.join.reset(),this.chronos.pause.stop(),this.chronos.buffer.stop(),this.chronos.seek.stop(),this.emit(h.Event.STOP,{params:t}),this.chronos.pause.reset(),this.chronos.buffer.reset(),this.chronos.seek.reset(),this.chronos.viewedMax.splice(0,this.chronos.viewedMax.length))},_isAds:function(){return!!this.getPosition()},fireCasted:function(t){(t=t||{}).casted=!0,this.fireStop(t)},fireError:function(t,e,r,n){var i=o.buildErrorParams(t,e,r,n);i.code&&delete i.code,this.emit(h.Event.ERROR,{params:i})},fireFatalError:function(t,e,r,n){this.monitor&&this.monitor.stop(),this.fireError(t,e,r,n),this.fireStop()},fireClick:function(t){"string"==typeof t&&(t={url:t}),this.emit(h.Event.CLICK,{params:t})},fireQuartile:function(t){this.flags.isStarted&&"number"==typeof t&&t>this.flags.lastQuartileSent&&t<4&&(this.flags.lastQuartileSent++,this.emit(h.Event.QUARTILE,{params:{quartile:t}}))},startChronoView:function(){this.getIsVisible()&&!this.plugin.backgroundDetector.isInBackground&&(0!==this.chronos.viewedMax.length&&0===this.chronos.viewedMax[this.chronos.viewedMax.length-1].stopTime||(this.chronos.viewedMax.push(new l),this.chronos.viewedMax[this.chronos.viewedMax.length-1].start()))},stopChronoView:function(){this.chronos.viewedMax[0]&&0<this.chronos.viewedMax.length&&0===this.chronos.viewedMax[this.chronos.viewedMax.length-1].stopTime&&this.chronos.viewedMax[this.chronos.viewedMax.length-1].stop()},fireManifest:function(t,e){"string"==typeof t?this.emit(h.Event.MANIFEST,{params:{errorType:t,errorMessage:e}}):this.emit(h.Event.MANIFEST,{params:t})},fireSkip:function(t){void 0===t&&(t={}),t.skipped=!0,this.fireStop(t)},fireBreakStart:function(t){this.plugin.isBreakStarted||(this.plugin.isBreakStarted=!0,this.emit(h.Event.PODSTART,{params:t}))},fireBreakStop:function(t){this.plugin.isBreakStarted&&(this.emit(h.Event.PODSTOP,{params:t}),this.plugin.isBreakStarted=!1)},fireEvent:function(t,e,r){var n={};n.name=t||"",n.dimensions=e||{},n.values=r||{},this.emit(h.Event.VIDEO_EVENT,{params:n})}},{Event:{START:"start",JOIN:"join",PAUSE:"pause",RESUME:"resume",SEEK_BEGIN:"seek-begin",SEEK_END:"seek-end",BUFFER_BEGIN:"buffer-begin",BUFFER_END:"buffer-end",ERROR:"error",STOP:"stop",CLICK:"click",MANIFEST:"manifest",PODSTART:"break-start",PODSTOP:"break-stop",QUARTILE:"quartile",VIDEO_EVENT:"video-event"}});e.exports=h},{"../chrono":63,"../emitter":91,"../log":93,"../util":116,"../version":117,"./playbackchronos":60,"./playbackflags":61,"./playheadmonitor":62}],60:[function(t,e,r){var n=t("../object"),i=t("../chrono"),o=n.extend({constructor:function(){this.reset()},reset:function(){this.join=new i,this.seek=new i,this.pause=new i,this.buffer=new i,this.total=new i,this.viewedMax=[]}});e.exports=o},{"../chrono":63,"../object":98}],61:[function(t,e,r){var n=t("../object").extend({constructor:function(){this.reset()},reset:function(){this.isStarted=!1,this.isJoined=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isEnded=!1,this.isStopped=!1,this.lastQuartileSent=0}});e.exports=n},{"../object":98}],62:[function(t,e,r){var n=t("../object"),i=t("../timer"),o=t("../chrono"),s=n.extend({constructor:function(t,e,r){this._adapter=t,this._seekEnabled=e&s.Type.SEEK,this._bufferEnabled=e&s.Type.BUFFER,r=r||800,this._chrono=new o,(this._lastPlayhead=0)<r&&(this._timer=new i(this.progress.bind(this),r))},start:function(){this.stop(),this._timer.start()},stop:function(){this._lastPlayhead=0,this._timer&&this._timer.stop()},skipNextTick:function(){this._lastPlayhead=0},progress:function(){var t=this._chrono.stop();this._chrono.start();var e=t*s.kBUFFER_THRESHOLD_RATIO,r=t*s.kSEEK_THRESHOLD_RATIO;this._adapter.getPlayrate&&this._adapter.getPlayrate()&&1!==this._adapter.getPlayrate()&&(e*=this._adapter.getPlayrate(),r*=this._adapter.getPlayrate());var n=this._getPlayhead(),i=1e3*Math.abs(this._lastPlayhead-n);i<e?this._bufferEnabled&&0<this._lastPlayhead&&!this._adapter.flags.isPaused&&!this._adapter.flags.isSeeking&&this._adapter.fireBufferBegin(null,!1):r<i?this._seekEnabled&&0<this._lastPlayhead&&this._adapter.fireSeekBegin(null,!1):(this._seekEnabled&&this._adapter.fireSeekEnd(),this._bufferEnabled&&this._adapter.fireBufferEnd()),this._lastPlayhead=n},_getPlayhead:function(){return this._adapter.getPlayhead()}},{Type:{NONE:0,BUFFER:1,SEEK:2},kBUFFER_THRESHOLD_RATIO:.5,kSEEK_THRESHOLD_RATIO:2});e.exports=s},{"../chrono":63,"../object":98,"../timer":115}],63:[function(t,e,r){var n=t("./object").extend({constructor:function(){this.reset()},reset:function(){this.startTime=0,this.stopTime=0,this.pauseTime=0,this.offset=0},getDeltaTime:function(t){var e=-1,r=(new Date).getTime();if(this.startTime){t&&!this.stopTime&&(this.stopTime=r);var n=this.pausetime?r-this.pausetime:0,i=this.stopTime?this.stopTime:r;e=this.offset-n+(i-this.startTime)}return e},start:function(){this.startTime=(new Date).getTime(),this.stopTime=0,this.offset=0},stop:function(){return this.pausetime&&this.resume(),this.stopTime=(new Date).getTime(),this.startTime?this.offset+(this.stopTime-this.startTime):-1},pause:function(){this.pauseTime=(new Date).getTime()},resume:function(){this.offset-=(new Date).getTime()-this.pauseTime,this.pauseTime=0},clone:function(){var t=new n;return t.startTime=this.startTime,t.stopTime=this.stopTime,t.offset=this.offset,t}});e.exports=n},{"./object":98}],64:[function(t,e,r){var n=t("../object"),i=t("../log"),o=t("./request"),s=t("./transform/transform"),a=n.extend({constructor:function(t){this.transforms=[],this.pluginRef=t,this._requests=[]},sendRequest:function(t,e,r){t&&("function"==typeof e&&t.on(o.Event.SUCCESS,e,r),this._registerRequest(t))},buildRequest:function(t,e,r,n){var i=new o(t,e,r=r||{});"function"==typeof n&&i.on(o.Event.SUCCESS,n),this._registerRequest(i)},addTransform:function(t){t.parse&&t.isBlocking?(this.transforms.push(t),t.on(s.Event.DONE,this._processRequests.bind(this))):i.warn(t+" is not a valid RequestTransform.")},removeTransform:function(t){var e=this.transforms.indexOf(t);-1!==e?this.transforms.splice(e,1):i.warn("Trying to remove unexisting Transform '"+t+"'.")},_registerRequest:function(t){this._requests.push(t),this._processRequests()},_processRequests:function(){var t=this._requests;this._requests=[];for(var e=[];t.length;){var r=t.shift(),n=this._transform(r);n===s.STATE_NO_BLOCKED?(this.pluginRef&&(r.host=this.pluginRef.getHost()),r.send()):n===s.STATE_BLOCKED&&e.push(r)}for(;e.length;)this._requests.push(e.shift())},_transform:function(e){var r=s.STATE_NO_BLOCKED;return this.transforms.forEach(function(t){t.isBlocking(e)?r=s.STATE_BLOCKED:(t.parse(e),t.getState()===s.STATE_OFFLINE&&(r=s.STATE_OFFLINE))}),r}});e.exports=a},{"../log":93,"../object":98,"./request":65,"./transform/transform":80}],65:[function(t,e,r){var n=t("../object"),i=t("../log"),o=t("../util"),s=n.extend({constructor:function(t,e,r,n){this.xhr=this.createXHR(),this.host=t||"",this.service=e||"",this.params=r||{},this.options=o.assign({},s.defaultOptions,n),this.retries=0,this.options.cache||this.setParam("timemark",(new Date).getTime())},createXHR:function(){var t={};try{t=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(t){i.error(t)}return t},getXHR:function(){return this.xhr},getUrl:function(){return this.host+this.service+this.getParamString()},on:function(t,e,r){return this.xhr.addEventListener?this.xhr.addEventListener(t,e.bind(this,this,r)):t===s.Event.SUCCESS&&(this.xhr.onreadystatechange=function(){4===this.xhr.readyState&&e.bind(this,this,r)}.bind(this)),this},off:function(t,e){return this.xhr.removeEventListener(t,e),this},getParamString:function(){try{var t="?";for(var e in this.params){var r=this.params[e];if(null!==r&&"object"==typeof r){var n=JSON.stringify(r);"{}"!==n&&(t+=encodeURIComponent(e)+"="+encodeURIComponent(n)+"&")}else null!=r&&""!==r&&(t+=encodeURIComponent(e)+"="+encodeURIComponent(r)+"&")}return t.slice(0,-1)}catch(t){return i.error(t),""}},getParam:function(t){return this.params[t]},setParam:function(t,e){return this.params[t]=e,this},setBody:function(t){this.body=t},send:function(){try{if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var t in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(t)&&this.xhr.setRequestHeader(t,this.options.requestHeaders[t]);if(0<this.options.retryAfter&&0<this.options.maxRetries){0===this.retries&&this.on(s.Event.ERROR,function(){if(this.retries>=this.options.maxRetries)i.error('Aborting failed request "'+this.service+'". Max retries reached.');else{i.warn('YBRequest "'+this.service+'" failed. Retry '+(this.retries+1)+" of "+this.options.maxRetries+" in "+this.options.retryAfter+"ms.");try{setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter)}catch(t){"undefined"!=typeof atv?atv.setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter):i.error(t)}}}.bind(this))}for(var e in i.logLevel<=i.Level.VERBOSE&&i.verbose("XHR Req: "+this.getUrl()),s._globalListeners)s._globalListeners[e].forEach(function(t){this.on(e,t)}.bind(this));return this.xhr.send(this.body)}catch(t){i.error(t)}}},{Event:{SUCCESS:"load",LOAD:"load",ERROR:"error",ABORT:"abort"},defaultOptions:{method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3,cache:!1},_globalListeners:{},onEvery:function(t,e){s._globalListeners[t]=s._globalListeners[t]||[],s._globalListeners[t].push(e)},offEvery:function(t,e){if(s._globalListeners[t]){var r=s._globalListeners[t].indexOf(e);-1!==r&&s._globalListeners[t].splice(r,1)}}});e.exports=s},{"../log":93,"../object":98,"../util":116}],66:[function(t,e,r){var n=t("./transform"),i=t("../../constants"),o=n.extend({_services:[i.Service.INIT,i.Service.START,i.Service.OFFLINE_EVENTS],isBlocking:function(t){if(this._isBusy&&null!=t)if(-1!==this._services.indexOf(t.service))this.done();else if(t.service===i.Service.ERROR)return!1;return n.prototype.isBlocking.apply(this,arguments)}});e.exports=o},{"../../constants":83,"./transform":80}],67:[function(t,e,r){var n=t("./transform"),i=n.extend({constructor:function(t,e){this._sendRequest=!1,this._isBusy=!1,this.plugin=t,this.session=e,this.transformName="Offline"},parse:function(t){t&&this.plugin.offlineStorage.addEvent(t.service,t.params)},hasToSend:function(t){return!1},getState:function(){return n.STATE_OFFLINE}});e.exports=i},{"./transform":80}],68:[function(t,e,r){var n=t("./transform"),i=t("./resourceparsers/hlsparser"),o=t("./resourceparsers/cdnparser"),s=t("./resourceparsers/dashparser"),a=t("./resourceparsers/locationheaderparser"),u=t("../../log"),c=t("../../constants"),l=n.extend({constructor:function(t){l.__super__.constructor.apply(this,arguments),this.isDone=!1,this._plugin=t,this._realResource=null,this._initResource=null,this._cdnName=null,this._cdnNodeHost=null,this._cdnNodeTypeString=null,this._cdnNodeType=null,this._responses={},this._isBusy=!1,this.transformName="Resource"},getResource:function(){var t=this._realResource;return this._plugin&&this._plugin.options&&this._plugin.options["content.resource"]&&!this._plugin.options["parse.locationHeader"]&&!this._plugin.options["parse.hls"]&&!this._plugin.options["parse.dash"]&&(t=this._plugin.options["content.resource"]),t},getCdnName:function(){return this._cdnName},getNodeHost:function(){return this._cdnNodeHost},getNodeTypeString:function(){return this._cdnNodeTypeString},getNodeType:function(){return this._cdnNodeType},init:function(t){this._isBusy||this.isDone||(this._isBusy=!0,this._initResource=t,this._hlsEnabled=this._plugin.isParseHls(),this._cdnEnabled=this._plugin.isParseCdnNode(),this._locHeaderEnabled=this._plugin.isLocHeader(),this._dashEnabled=this._plugin.isDash(),this._cdnList=this._plugin.getParseCdnNodeList().slice(),this._cdnNameHeader=this._plugin.getParseCdnNodeNameHeader(),o.setBalancerHeaderName(this._cdnNameHeader),this._setTimeout(),this._locHeaderEnabled&&this._parseLocHeader(),this._hlsEnabled?this._parseHLS():this._dashEnabled?this._dashParse():this._cdnEnabled?this._parseCDN():this.done())},done:function(){this.isDone=!1,n.prototype.done.apply(this,arguments)},_setTimeout:function(){try{this._parseTimeout=setTimeout(function(){this._isBusy&&(this.done(),u.warn("ResourceTransform has exceded the maximum execution time (3s) and will be aborted."))}.bind(this),3e3)}catch(t){"undefined"!=typeof atv?this._parseTimeout=atv.setTimeout(function(){this._isBusy&&(this.done(),u.warn("ResourceTransform has exceded the maximum execution time (3s) and will be aborted."))}.bind(this),3e3):u.error(t)}},_parseLocHeader:function(){var t=new a;t.parse(this._initResource),t.on(a.Event.DONE,function(){this._realResource=t.getResource(),this.done()}.bind(this))},_parseHLS:function(){var t=new i;t.on(i.Event.DONE,function(){this._realResource=t.getResource(),this._cdnEnabled?this._parseCDN():this.done()}.bind(this)),t.parse(this._initResource)},_dashParse:function(){var t=new s;t.on(s.Event.DONE,function(){this._realResource=t.getResource(),this._cdnEnabled?this._parseCDN():this.done()}.bind(this)),t.parse(this._initResource)},_parseCDN:function(){if(0<this._cdnList.length){var t=this._cdnList.shift();if(this.getNodeHost())return;var e=o.create(t);e?(e.on(o.Event.DONE,function(){this._responses=e.getResponses(),this._cdnName=e.getParsedCdnName(),this._cdnNodeHost=e.getParsedNodeHost(),this._cdnNodeTypeString=e.getParsedNodeTypeString(),this._cdnNodeType=e.getParsedNodeType(),this.getNodeHost()?this.done():this._parseCDN()}.bind(this)),e.parse(this.getResource(),this._responses)):this._parseCDN()}else this.done()},parse:function(t){if(t.service===c.Service.START){var e=this._plugin.requestBuilder.lastSent;e.parsedResource=t.params.parsedResource=this.getResource(),this._cdnEnabled&&(e.cdn=t.params.cdn=t.params.cdn||this.getCdnName(),e.nodeHost=t.params.nodeHost=this.getNodeHost(),e.nodeType=t.params.nodeType=this.getNodeType(),e.nodeTypeString=t.params.nodeTypeString=this.getNodeTypeString())}}});e.exports=l},{"../../constants":83,"../../log":93,"./resourceparsers/cdnparser":69,"./resourceparsers/dashparser":77,"./resourceparsers/hlsparser":78,"./resourceparsers/locationheaderparser":79,"./transform":80}],69:[function(t,e,r){var n=t("../../../emitter"),i=t("../../../log"),o=t("../../../util"),s=t("../../request"),a=n.extend({constructor:function(t){this._options=o.assign({cdnName:null,parsers:[],requestMethod:"HEAD",requestHeaders:{},parseType:function(){return 0}},t),this._responses={}},done:function(){this.emit(a.Event.DONE)},addParser:function(t){return this._options.parsers.push(t),this},setCdnName:function(t){return this._options.cdnName=t,this},setRequestMethod:function(t){return this._options.requestMethod=t,this},setRequestHeader:function(t,e){return this._options.requestHeaders[t]=e,this},setParseType:function(t){return this._options.parseType=t,this},getParsedCdnName:function(){return this._cdnName},getParsedNodeHost:function(){return this._cdnNodeHost},getParsedNodeTypeString:function(){return this._cdnNodeTypeString},getParsedNodeType:function(){return this._cdnNodeType},getResponses:function(){return this._responses},parse:function(t,e){this._responses=e||{};var r=JSON.stringify(this._options.requestHeaders);this._responses[r]?this._parseResponse(this._responses[r]):this._requestResponse(t)},_requestResponse:function(t){var e=JSON.stringify(this._options.requestHeaders),r=new s(t,null,null,{method:this._options.requestMethod,maxRetries:0,requestHeaders:this._options.requestHeaders});r.on(s.Event.SUCCESS,function(t){this._responses[e]=t.getXHR().getAllResponseHeaders(),this._parseResponse(this._responses[e])}.bind(this)),r.on(s.Event.ERROR,function(t){this.done()}.bind(this)),r.send()},_parseResponse:function(t){this._options.parsers.forEach(function(r){t.split("\n").forEach(function(t){var e=t.indexOf(":");-1!==e&&t.slice(0,e)===r.headerName&&this._executeParser(r,t.slice(e+1))}.bind(this))}.bind(this)),this.done()},_executeParser:function(t,e){try{var r=t.regex.exec(e.trim());if(null!==r)switch(this._options.cdnName&&(this._cdnName=this._options.cdnName),t.element){case a.ElementType.HOST:this._cdnNodeHost=r[1];break;case a.ElementType.TYPE:this._cdnNodeTypeString=r[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case a.ElementType.HOST_AND_TYPE:this._cdnNodeHost=r[1],this._cdnNodeTypeString=r[2],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case a.ElementType.TYPE_AND_HOST:this._cdnNodeTypeString=r[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString),this._cdnNodeHost=r[2];break;case a.ElementType.NAME:this._cdnName=r[1].toUpperCase()}}catch(t){i.warn("CDN parsing for "+this._options.cdnName+" could not parse header value "+e)}}},{Event:{DONE:"done"},ElementType:{HOST:"host",TYPE:"type",HOST_AND_TYPE:"host+type",TYPE_AND_HOST:"type+host",NAME:"name"},_cdnConfigs:{},setBalancerHeaderName:function(t){a._cdnConfigs.Balancer.parsers[0].headerName=t},create:function(t){if(a._cdnConfigs[t])return new a(a._cdnConfigs[t]);i.warn("Tried to create an unexisting CdnParser named "+t)},add:function(t,e){a._cdnConfigs[t]=e}});a.add("Level3",t("./cdnparsers/level3")),a.add("Cloudfront",t("./cdnparsers/cloudfront")),a.add("Akamai",t("./cdnparsers/akamai")),a.add("Highwinds",t("./cdnparsers/highwinds")),a.add("Fastly",t("./cdnparsers/fastly")),a.add("Telefonica",t("./cdnparsers/telefonica")),a.add("Balancer",t("./cdnparsers/balancer")),e.exports=a},{"../../../emitter":91,"../../../log":93,"../../../util":116,"../../request":65,"./cdnparsers/akamai":70,"./cdnparsers/balancer":71,"./cdnparsers/cloudfront":72,"./cdnparsers/fastly":73,"./cdnparsers/highwinds":74,"./cdnparsers/level3":75,"./cdnparsers/telefonica":76}],70:[function(t,e,r){e.exports={cdnName:"AKAMAI",requestMethod:"GET",parsers:[{element:"type+host",headerName:"X-Cache",regex:/(.+)\sfrom.+AkamaiGHost\/(.+)\).+/}],requestHeaders:{Pragma:"akamai-x-cache-on"},parseType:function(t){return-1!==t.indexOf("HIT")?1:-1!==t.indexOf("MISS")?2:0}}},{}],71:[function(t,e,r){e.exports={parsers:[{element:"name",headerName:null,regex:/(.+)/}]}},{}],72:[function(t,e,r){e.exports={cdnName:"CLOUDFRT",parsers:[{element:"host",headerName:"X-Amz-Cf-Id",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(\S+)\s.+/}],parseType:function(t){switch(t){case"Hit":return 1;case"Miss":return 2;default:return 0}}}},{}],73:[function(t,e,r){e.exports={cdnName:"FASTLY",parsers:[{element:"host",headerName:"X-Served-By",regex:/([^,\s]+)$/},{element:"type",headerName:"X-Cache",regex:/([^,\s]+)$/}],parseType:function(t){switch(t){case"HIT":return 1;case"MISS":return 2;default:return 0}}}},{}],74:[function(t,e,r){e.exports={cdnName:"HIGHNEGR",parsers:[{element:"host+type",headerName:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}],parseType:function(t){switch(t){case"c":case"x":return 1;default:return 2}}}},{}],75:[function(t,e,r){e.exports={cdnName:"LEVEL3",parsers:[{element:"host+type",headerName:"X-WR-Diag",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"X-WR-Diag":"host"},parseType:function(t){if(t){if(0===t.indexOf("TCP_HIT")||0===t.indexOf("TCP_MEM_HIT")||0===t.indexOf("TCP_IMS_HIT"))return 1;if(0===t.indexOf("TCP_MISS"))return 2}return 0}}},{}],76:[function(t,e,r){e.exports={cdnName:"TELEFO",parsers:[{element:"host+type",headerName:"x-tcdn",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"x-tcdn":"host"},parseType:function(t){if(t){if(-1!==t.indexOf("p")||-1!==t.indexOf("c"))return 1;if(-1!==t.indexOf("i")||-1!==t.indexOf("m"))return 2}return 0}}},{}],77:[function(t,e,r){var o=t("../../request"),n=t("../../../emitter"),s=t("../../../log"),i=n.extend({constructor:function(){this._realResource=null},done:function(){this.emit(i.Event.DONE)},parse:function(r){var t=new o(r,null,null,{cache:!0}),n=new RegExp(/.*<Location>(.+)<\/Location>.*/),i=null;t.on(o.Event.SUCCESS,function(t){try{var e=t.getXHR().responseText;(i=n.exec(e))&&i[1]?this.parse(i[1]):this.parseFinalResource(e,r)}catch(t){s.warn("Dash parse failed")}}.bind(this)),t.on(o.Event.ERROR,function(t){this.done()}.bind(this)),t.send()},parseFinalResource:function(t,e){var r=new RegExp(/[\s\S]*<BaseURL>(.+)<\/BaseURL>[\s\S]*/),n=new RegExp(/[\s\S]*<SegmentURL[\s\S]*media="(.+)"[\s\S]*/),i=new RegExp(/[\s\S]*<SegmentTemplate[\s\S]*media="(.+)"[\s\S]*/),o=null;try{o=r.exec(t)||i.exec(t)||n.exec(t)}catch(t){s.warn("Dash manifest parse failed")}o&&o[1]&&this._isFullUrl(o[1])?0<o[1].indexOf('"')?this._realResource=o[1].substr(0,o[1].indexOf('"')):this._realResource=o[1]:this._realResource=e,this.done()},_isFullUrl:function(t){return-1!==t.indexOf("http")},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});e.exports=i},{"../../../emitter":91,"../../../log":93,"../../request":65}],78:[function(t,e,r){var a=t("../../request"),n=t("../../../emitter"),u=t("../../../log"),i=n.extend({constructor:function(){this._realResource=null},done:function(){this.emit(i.Event.DONE)},parse:function(t,e){e=e||"";try{var r=/((\S*?)(\.m3u8|\.m3u|\.ts|\.mp4)((\?|;)\S*|\n|\r|$))/i.exec(t)}catch(t){u.warn("Parse HLS Regex failed",t),this.done()}if(null!==r){var n=r[1].trim(),i="",o=e.lastIndexOf("/");if(0!==n.indexOf("http")&&-1!==o&&(n=e.slice(0,o)+"/"+n,i=e.slice(0,o)+"/"),".m3u8"===r[3]||".m3u"===r[3]){var s=new a(n,null,null,{cache:!0});s.on(a.Event.SUCCESS,function(t){this.parse(t.getXHR().responseText,i+r[2])}.bind(this)),s.on(a.Event.ERROR,function(t){this.done()}.bind(this)),s.send()}else this._realResource=n,this.done()}else this.done()},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});e.exports=i},{"../../../emitter":91,"../../../log":93,"../../request":65}],79:[function(t,e,r){var n=t("../../../emitter"),i=t("../../request"),o=n.extend({constructor:function(){this._realResource=null},done:function(){this.emit(o.Event.DONE)},parse:function(t){var e=new i(t,null,null,{method:"HEAD",maxRetries:0,requestHeaders:{},cache:!0});e.on(i.Event.SUCCESS,function(t){this._realResource=t.getXHR().responseURL,this.done()}.bind(this)),e.on(i.Event.ERROR,function(t){this.done()}.bind(this)),e.send()},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});e.exports=o},{"../../../emitter":91,"../../request":65}],80:[function(t,e,r){var n=t("../../emitter").extend({constructor:function(){this._isBusy=!0,this._sendRequest=!0,this.transformName="Transform"},parse:function(t){},isBlocking:function(t){return this._isBusy},done:function(){this._isBusy=!1,this.emit(n.Event.DONE)},hasToSend:function(t){return this._sendRequest},getState:function(){return this._sendRequest?this._isBusy?this.STATE_BLOCKED:this.STATE_NO_BLOCKED:this.STATE_OFFLINE}},{STATE_OFFLINE:2,STATE_BLOCKED:1,STATE_NO_BLOCKED:0,Event:{DONE:"done"}});e.exports=n},{"../../emitter":91}],81:[function(t,e,r){var n=t("../request"),i=t("./transform"),o=t("../../log"),s=t("../../util"),a=t("../../constants"),u=i.extend({constructor:function(t,e){i.prototype.constructor.apply(this,arguments),this.response={},this._viewIndex=(new Date).getTime(),this._session=e,this._httpSecure=t.options["app.https"],this._plugin=t,this.transformName="View"},init:function(){if(this._plugin.options&&this._plugin.options.offline)return this.response.host="OFFLINE",this.response.code="OFFLINE",this.response.pingTime=60,this.response.beatTime=60,this.done(),null;if(this._plugin.storage.isEnabled()&&((new Date).getTime()<this._plugin.sessionExpire+(Number(this._plugin.getDataTime())||0)&&this._plugin.getStoredData()))return this.setData(this._plugin.getStoredData()),null;var t=a.Service.DATA,e={apiVersion:"v7",outputformat:"json"};null!==(e=this._plugin.requestBuilder.buildParams(e,t))&&(o.notice(t+" "+e.system),"nicetest"===e.system&&o.error("No accountCode has been set. Please set your accountCode inside plugin's options."),new n(this._plugin.getHost(),t,e).on(n.Event.SUCCESS,this._receiveData.bind(this)).on(n.Event.ERROR,this._failedData.bind(this)).send())},setData:function(t){try{var e=JSON.parse(t);this._plugin.options["parse.fdsResponseHost"]&&(t=t.replace(e.q.h,this._plugin.options["parse.fdsResponseHost"](e.q.h)),e=JSON.parse(t)),this.response.msg=t,this.response.host=s.addProtocol(e.q.h,this._httpSecure),this.response.code=e.q.c,this.response.pingTime=e.q.pt||5,this.response.beatTime=e.q.i&&e.q.i.bt||30,this.response.sessionExpire=e.q.i&&e.q.i.exp||300,this._plugin.storage.setLocal("sessionExpire",this.response.sessionExpire),this.done()}catch(t){o.error("Fastdata response is invalid.")}},_receiveData:function(t,e){var r=t.getXHR().response;this.setData(r)},_failedData:function(t,e){o.error("Fastdata request has failed.")},nextView:function(){return this._viewIndex=(new Date).getTime(),this.getViewCode()},getViewCode:function(){return this.response.code+"_"+this._viewIndex},getSessionId:function(){return this._session},setSessionId:function(t){this._session=t},getParentIdVideo:function(){return this._session},getSessionRoot:function(){return this._plugin.infinity&&this._plugin.infinity.isActive()?this._session:null},setSessionRoot:function(t){this._session=t},parse:function(t){t.host=t.host||this.response.host,t.params.system=this._plugin.getAccountCode(),t.params.sessionRoot=t.params.sessionRoot||this.getSessionRoot(),-1!==u.EventList.PingTime.indexOf(t.service)&&(t.params.pingTime=t.params.pingTime||this.response.pingTime),a.Service.SESSION_STOP===t.service&&(t.params.sessionRoot=this._session||t.params.sessionRoot),-1===u.EventList.Infinity.indexOf(t.service)?(t.params.code=t.params.code||this.getViewCode(),t.params.sessionRoot||(t.params.sessionRoot=t.params.code)):(t.params.sessionId=t.params.sessionId||this.getSessionId(),t.params.sessionRoot||(t.params.sessionRoot=t.params.sessionId)),-1!==[a.Service.START,a.Service.INIT,a.Service.ERROR].indexOf(t.service)&&(this._plugin.infinity.infinityStarted||this._plugin.storage.isEnabled()&&this._plugin.storage.getLocal("infinityStarted"))&&(t.params.parentId=t.params.parentId||this.getParentIdVideo(),t.params.navContext=t.params.navContext||this._plugin.getContext())}},{EventList:{CreateView:[a.Service.START,a.Service.INIT,a.Service.ERROR],Infinity:[a.Service.NAV,a.Service.SESSION_START,a.Service.SESSION_STOP,a.Service.EVENT,a.Service.BEAT],PingTime:[a.Service.START,a.Service.PING]}});e.exports=u},{"../../constants":83,"../../log":93,"../../util":116,"../request":65,"./transform":80}],82:[function(t,e,r){var n=t("./transform").extend({isBlocking:function(t){return!t.params.sessionId}});e.exports=n},{"./transform":80}],83:[function(t,e,r){e.exports={Service:{DATA:"/data",INIT:"/init",START:"/start",JOIN:"/joinTime",PAUSE:"/pause",RESUME:"/resume",SEEK:"/seek",BUFFER:"/bufferUnderrun",ERROR:"/error",STOP:"/stop",PING:"/ping",VIDEO_EVENT:"/infinity/video/event",AD_INIT:"/adInit",AD_START:"/adStart",AD_JOIN:"/adJoin",AD_PAUSE:"/adPause",AD_RESUME:"/adResume",AD_BUFFER:"/adBufferUnderrun",AD_STOP:"/adStop",AD_CLICK:"/adClick",AD_ERROR:"/adError",AD_MANIFEST:"/adManifest",AD_POD_START:"/adBreakStart",AD_POD_STOP:"/adBreakStop",AD_QUARTILE:"/adQuartile",EVENT:"/infinity/session/event",SESSION_START:"/infinity/session/start",SESSION_STOP:"/infinity/session/stop",NAV:"/infinity/session/nav",BEAT:"/infinity/session/beat",OFFLINE_EVENTS:"/offlineEvents"},WillSendEvent:{WILL_SEND_INIT:"will-send-init",WILL_SEND_START:"will-send-start",WILL_SEND_JOIN:"will-send-join",WILL_SEND_PAUSE:"will-send-pause",WILL_SEND_RESUME:"will-send-resume",WILL_SEND_SEEK:"will-send-seek",WILL_SEND_BUFFER:"will-send-buffer",WILL_SEND_ERROR:"will-send-error",WILL_SEND_FATAL_ERROR:"will-send-fatal-error",WILL_SEND_STOP:"will-send-stop",WILL_SEND_PING:"will-send-ping",WILL_SEND_VIDEO_EVENT:"will-send-video-event",WILL_SEND_AD_START:"will-send-ad-start",WILL_SEND_AD_JOIN:"will-send-ad-join",WILL_SEND_AD_PAUSE:"will-send-ad-pause",WILL_SEND_AD_RESUME:"will-send-ad-resume",WILL_SEND_AD_BUFFER:"will-send-ad-buffer",WILL_SEND_AD_STOP:"will-send-ad-stop",WILL_SEND_AD_CLICK:"will-send-ad-click",WILL_SEND_AD_ERROR:"will-send-ad-error",WILL_SEND_AD_MANIFEST:"will-send-ad-manifest",WILL_SEND_AD_POD_START:"will-send-ad-break-start",WILL_SEND_AD_POD_STOP:"will-send-ad-break-stop",WILL_SEND_AD_QUARTILE:"will-send-ad-quartile",WILL_SEND_SESSION_START:"will-send-session-start",WILL_SEND_SESSION_STOP:"will-send-session-stop",WILL_SEND_NAV:"will-send-nav",WILL_SEND_BEAT:"will-send-beat",WILL_SEND_EVENT:"will-send-event",WILL_SEND_OFFLINE_EVENTS:"will-send-offline-events"},AdPosition:{Preroll:"pre",Midroll:"mid",Postroll:"post"},ManifestError:{NO_RESPONSE:"NO_RESPONSE",EMPTY:"EMPTY_RESPONSE",WRONG:"WRONG_RESPONSE"}}},{}],84:[function(t,e,r){var n=t("../object").extend({constructor:function(t){this.plugin=t,this.isInBackground=!1,this.listenerReference=this._visibilityListener.bind(this),this._reset()},startDetection:function(){this.isBackgroundDetectorStarted||"undefined"==typeof document||(this.isBackgroundDetectorStarted=!0,document.addEventListener("visibilitychange",this.listenerReference))},stopDetection:function(){this.isBackgroundDetectorStarted&&"undefined"!=typeof document&&(document.removeEventListener("visibilitychange",this.listenerReference),this._reset())},_reset:function(){this.isBackgroundDetectorStarted=!1},_visibilityListener:function(t){if("undefined"!=typeof document){var e=this._getSettings();if("hidden"===document.visibilityState){if(this.isInBackground=!0,this.plugin&&this.plugin._adsAdapter&&this.plugin._adsAdapter.stopChronoView(),"string"==typeof e){switch(e){case"stop":this._fireStop();break;case"pause":this._firePause()}if(null!=this.plugin.storage.getLocal("infinityStarted")&&!this.plugin.storage.getLocal("infinityStopped")){this.lastBeatTime=(new Date).getTime();var r=this.plugin._beat.chrono.startTime?this.lastBeatTime-this.plugin._beat.chrono.startTime:0;this.plugin._sendBeat(r),this.plugin._beat.stop()}}}else if("visible"===document.visibilityState&&(this.isInBackground=!1,this.plugin&&this.plugin._adsAdapter&&this.plugin._adsAdapter.startChronoView(),"string"==typeof e&&e&&null!=this.plugin.storage.getLocal("infinityStarted")&&!this.plugin.storage.getLocal("infinityStopped"))){var n=(new Date).getTime();n-this.lastBeatTime<this.plugin.sessionExpire?(this.plugin._sendBeat(n-this.lastBeatTime),this.plugin._beat.start()):(this.plugin.restartViewTransform(),this.plugin.infinity.begin())}}},_getSettings:function(){return"string"==typeof this.plugin.options["background.settings"]&&this.plugin.options["background.settings"]?this.plugin.options["background.settings"]:this.plugin.deviceDetector.isSmartTV()?this.plugin.options["background.settings.tv"]:this.plugin.deviceDetector.isDesktop()?this.plugin.options["background.settings.desktop"]:this.plugin.deviceDetector.isAndroid()?this.plugin.options["background.settings.android"]:this.plugin.deviceDetector.isIphone()?this.plugin.options["background.settings.iOS"]:this.plugin.deviceDetector.isPlayStation()?this.plugin.options["background.settings.playstation"]:void 0},_firePause:function(){this.adsAdapter=this.plugin.getAdsAdapter(),this.contentAdapter=this.plugin.getAdapter(),this.adsAdapter&&this.adsAdapter.flags.isStarted&&!this.adsAdapter.flags.isEnded?this.adsAdapter.firePause():this.contentAdapter&&this.contentAdapter.flags.isStarted&&!this.contentAdapter.flags.isEnded&&this.contentAdapter.firePause()},_fireStop:function(){this.adsAdapter=this.plugin.getAdsAdapter(),this.contentAdapter=this.plugin.getAdapter(),this.adsAdapter&&this.adsAdapter.flags.isStarted&&!this.adsAdapter.flags.isEnded&&this.adsAdapter.fireStop(),this.plugin.fireStop()},canBlockStartCalls:function(){return this.plugin.backgroundDetector.isInBackground&&!0===this.plugin.options["background.enabled"]&&this.plugin.backgroundDetector._getSettings()}});e.exports=n},{"../object":98}],85:[function(t,e,r){var n=t("../object"),i=t("../util"),o=n.extend({constructor:function(t){try{this._plugin=t,this.isBlocked=null,this.xhr=null;try{XMLHttpRequest?this.xhr=new XMLHttpRequest:this.xhr=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){return null}if(this.xhr.addEventListener){var e=i.addProtocol("ww.zxcvwwds.com/ww/wwds/-imwwge-wwd_wwds.html",this._plugin.options["app.https"]);this.xhr.open("GET",e.replace(/ww/g,"a"),!0),this.xhr.addEventListener("load",this.notBlocked.bind(this)),this.xhr.addEventListener("error",this.blocked.bind(this)),this.xhr.send()}else this.isBlocked=!1}catch(t){this.isBlocked=!0}},blocked:function(t){this.isBlocked=!0},notBlocked:function(t){this.isBlocked=!1}});e.exports=o},{"../object":98,"../util":116}],86:[function(t,e,r){var n=t("../object").extend({constructor:function(){"undefined"!=typeof navigator&&navigator.userAgent&&(this._isSmartTVDevice=navigator.userAgent.toLowerCase().match(/smarttv/)||navigator.userAgent.toLowerCase().match(/smart-tv/)||navigator.userAgent.toLowerCase().match(/appletv/)||navigator.userAgent.toLowerCase().match(/apple tv/),this._isPlaystationDevice=null!==navigator.userAgent.match(/PlayStation/),this._isIphoneDevice=null!==navigator.userAgent.match(/iPhone|iPad|iPod/i),this._isAndroidDevice=null!==navigator.userAgent.match(/Android/),this._isSmartphoneDevice=!this._isSmartTVDevice&&!this._isPlaystationDevice&&(this._isIphoneDevice||this._isAndroidDevice),this._isDesktopDevice=!this._isSmartphoneDevice&&!this._isSmartTVDevice&&!this._isPlaystationDevice)},isIphone:function(){return this._isIphoneDevice},isAndroid:function(){return this._isAndroidDevice},isSmartphone:function(){return this._isSmartphoneDevice},isDesktop:function(){return this._isDesktopDevice},isSmartTV:function(){return this._isSmartTVDevice},isPlayStation:function(){return this._isPlaystationDevice}});e.exports=n},{"../object":98}],87:[function(t,e,r){var n=t("../object").extend({constructor:function(t){this.pluginref=t,this.listenerReference=this._changeListener.bind(this),this.isEnabled=!1},startDetection:function(){this.isEnabled||"undefined"==typeof window||(window.addEventListener("scroll",this.listenerReference),window.addEventListener("resize",this.listenerReference),this.isEnabled=!0)},stopDetection:function(){this.isEnabled&&"undefined"!=typeof window&&(window.removeEventListener("scroll",this.listenerReference),window.removeEventListener("resize",this.listenerReference),this.isEnabled=!1)},_changeListener:function(){var t=this.pluginref.getAdsAdapter();t&&t.flags.isStarted&&(t.getIsVisible()?t.startChronoView():t.stopChronoView())}});e.exports=n},{"../object":98}],88:[function(t,e,r){var n=t("../object").extend({constructor:function(t){this.plugin=t},getAllData:function(){var t=this.getNonRandomData();return t.timestamp=this.getTimestamp(),t},getNonRandomData:function(){var t={};return t.userAgent=this.getUserAgent(),t.threads=this.getVirtualCores(),t.language=this.getLanguage(),t.langList=this.getAvailableLanguages(),t.resolution=this.getResolution(),t.colorDepth=this.getColorDepth(),t.deviceMemory=this.getMemory(),t.touchscreen=this.getTouchscreen(),t.localStorage=this.getLocalStorage(),t.sessionStorage=this.getSessionStorage(),t.cookiesAvailable=this.getCookiesAvailable(),t.flashAvailable=this.getHasFlash(),t.timeZone=this.getTimeZone(),t.plugins=this.getPluginList(),t},getUserAgent:function(){try{return this._navigatorCheck()?navigator.userAgent:null}catch(t){return null}},getVirtualCores:function(){try{return this._navigatorCheck()?navigator.hardwareConcurrency:null}catch(t){return null}},getLanguage:function(){try{return this._navigatorCheck()?navigator.language:null}catch(t){return null}},getAvailableLanguages:function(){try{return this._navigatorCheck()?navigator.languages:null}catch(t){return null}},getResolution:function(){try{return this._navigatorCheck()&&navigator.screen?navigator.screen.width.toString()+navigator.screen.height.toString():null}catch(t){return null}},getColorDepth:function(){try{return this._navigatorCheck()&&navigator.screen?navigator.screen.colorDepth:null}catch(t){return null}},getMemory:function(){try{return this._navigatorCheck()?navigator.deviceMemory:null}catch(t){return null}},getTouchscreen:function(){try{return this._navigatorCheck()?navigator.maxTouchPoints:null}catch(t){return!1}},getLocalStorage:function(){try{return"undefined"!=typeof localStorage}catch(t){return!1}},getSessionStorage:function(){try{return"undefined"!=typeof sessionStorage}catch(t){return!1}},getCookiesAvailable:function(){try{return!!this._navigatorCheck()&&navigator.cookieEnabled}catch(t){return!1}},getHasFlash:function(){try{return!!this._navigatorCheck()&&(void 0!==navigator.plugins&&"object"==typeof navigator.plugins["Shockwave Flash"]||"undefined"!=typeof window&&window.ActiveXObject&&!1!==new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(t){return!1}},getPluginList:function(){try{if(!this._navigatorCheck()||!navigator.plugins||0===navigator.plugins.length)return null;for(var t="",e=0;e<navigator.plugins.length;e++)t+=navigator.plugins[e].description+" "+navigator.plugins[e].filename+" "+navigator.plugins[e].name+" ";return t}catch(t){return null}},getTimeZone:function(){try{return(new Date).getTimezoneOffset().toString()}catch(t){return null}},getTimestamp:function(){return(new Date).getTime()},_navigatorCheck:function(){return"undefined"!=typeof navigator}});e.exports=n},{"../object":98}],89:[function(t,e,r){var n=t("./dataextractor"),i=t("../object"),o=t("./md5"),s=i.extend({constructor:function(t){this.plugin=t,this.dataExtractor=new n,this.key=this.getPreviousKey()},generateHashKey:function(){if(!this.key){var t=this.dataExtractor.getAllData();this.key=this._hashFunction(t),this.plugin.storage.setLocal("youboraDeviceUUID",this.key)}},getKey:function(){return this.key||this.generateHashKey(),this.key},_hashFunction:function(t){var e=t;return"string"!=typeof t&&(e=JSON.stringify(t)),o(e)},_reset:function(){this.key=void 0},getPreviousKey:function(){return this.plugin.storage.getLocal("youboraDeviceUUID")}});e.exports=s},{"../object":98,"./dataextractor":88,"./md5":90}],90:[function(t,e,r){e.exports=function(t){function a(t,e){return t<<e|t>>>32-e}function u(t,e){var r,n,i,o,s;return i=2147483648&t,o=2147483648&e,s=(1073741823&t)+(1073741823&e),(r=1073741824&t)&(n=1073741824&e)?2147483648^s^i^o:r|n?1073741824&s?3221225472^s^i^o:1073741824^s^i^o:s^i^o}function e(t,e,r,n,i,o,s){return u(a(t=u(t,u(u(function(t,e,r){return t&e|~t&r}(e,r,n),i),s)),o),e)}function r(t,e,r,n,i,o,s){return u(a(t=u(t,u(u(function(t,e,r){return t&r|e&~r}(e,r,n),i),s)),o),e)}function n(t,e,r,n,i,o,s){return u(a(t=u(t,u(u(function(t,e,r){return t^e^r}(e,r,n),i),s)),o),e)}function i(t,e,r,n,i,o,s){return u(a(t=u(t,u(u(function(t,e,r){return e^(t|~r)}(e,r,n),i),s)),o),e)}function o(t){var e,r="",n="";for(e=0;e<=3;e++)r+=(n="0"+(t>>>8*e&255).toString(16)).substr(n.length-2,2);return r}var s,c,l,h,d,f,p,g,v,y=Array();for(y=function(t){for(var e,r=t.length,n=r+8,i=16*(1+(n-n%64)/64),o=Array(i-1),s=0,a=0;a<r;)s=a%4*8,o[e=(a-a%4)/4]=o[e]|t.charCodeAt(a)<<s,a++;return s=a%4*8,o[e=(a-a%4)/4]=o[e]|128<<s,o[i-2]=r<<3,o[i-1]=r>>>29,o}(t=function(t){t=t.replace(/rn/g,"n");for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e+=String.fromCharCode(n):(127<n&&n<2048?e+=String.fromCharCode(n>>6|192):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128)),e+=String.fromCharCode(63&n|128))}return e}(t)),f=1732584193,p=4023233417,g=2562383102,v=271733878,s=0;s<y.length;s+=16)p=i(p=i(p=i(p=i(p=n(p=n(p=n(p=n(p=r(p=r(p=r(p=r(p=e(p=e(p=e(p=e(l=p,g=e(h=g,v=e(d=v,f=e(c=f,p,g,v,y[s+0],7,3614090360),p,g,y[s+1],12,3905402710),f,p,y[s+2],17,606105819),v,f,y[s+3],22,3250441966),g=e(g,v=e(v,f=e(f,p,g,v,y[s+4],7,4118548399),p,g,y[s+5],12,1200080426),f,p,y[s+6],17,2821735955),v,f,y[s+7],22,4249261313),g=e(g,v=e(v,f=e(f,p,g,v,y[s+8],7,1770035416),p,g,y[s+9],12,2336552879),f,p,y[s+10],17,4294925233),v,f,y[s+11],22,2304563134),g=e(g,v=e(v,f=e(f,p,g,v,y[s+12],7,1804603682),p,g,y[s+13],12,4254626195),f,p,y[s+14],17,2792965006),v,f,y[s+15],22,1236535329),g=r(g,v=r(v,f=r(f,p,g,v,y[s+1],5,4129170786),p,g,y[s+6],9,3225465664),f,p,y[s+11],14,643717713),v,f,y[s+0],20,3921069994),g=r(g,v=r(v,f=r(f,p,g,v,y[s+5],5,3593408605),p,g,y[s+10],9,38016083),f,p,y[s+15],14,3634488961),v,f,y[s+4],20,3889429448),g=r(g,v=r(v,f=r(f,p,g,v,y[s+9],5,568446438),p,g,y[s+14],9,3275163606),f,p,y[s+3],14,4107603335),v,f,y[s+8],20,1163531501),g=r(g,v=r(v,f=r(f,p,g,v,y[s+13],5,2850285829),p,g,y[s+2],9,4243563512),f,p,y[s+7],14,1735328473),v,f,y[s+12],20,2368359562),g=n(g,v=n(v,f=n(f,p,g,v,y[s+5],4,4294588738),p,g,y[s+8],11,2272392833),f,p,y[s+11],16,1839030562),v,f,y[s+14],23,4259657740),g=n(g,v=n(v,f=n(f,p,g,v,y[s+1],4,2763975236),p,g,y[s+4],11,1272893353),f,p,y[s+7],16,4139469664),v,f,y[s+10],23,3200236656),g=n(g,v=n(v,f=n(f,p,g,v,y[s+13],4,681279174),p,g,y[s+0],11,3936430074),f,p,y[s+3],16,3572445317),v,f,y[s+6],23,76029189),g=n(g,v=n(v,f=n(f,p,g,v,y[s+9],4,3654602809),p,g,y[s+12],11,3873151461),f,p,y[s+15],16,530742520),v,f,y[s+2],23,3299628645),g=i(g,v=i(v,f=i(f,p,g,v,y[s+0],6,4096336452),p,g,y[s+7],10,1126891415),f,p,y[s+14],15,2878612391),v,f,y[s+5],21,4237533241),g=i(g,v=i(v,f=i(f,p,g,v,y[s+12],6,1700485571),p,g,y[s+3],10,2399980690),f,p,y[s+10],15,4293915773),v,f,y[s+1],21,2240044497),g=i(g,v=i(v,f=i(f,p,g,v,y[s+8],6,1873313359),p,g,y[s+15],10,4264355552),f,p,y[s+6],15,2734768916),v,f,y[s+13],21,1309151649),g=i(g,v=i(v,f=i(f,p,g,v,y[s+4],6,4149444226),p,g,y[s+11],10,3174756917),f,p,y[s+2],15,718787259),v,f,y[s+9],21,3951481745),f=u(f,c),p=u(p,l),g=u(g,h),v=u(v,d);return(o(f)+o(p)+o(g)+o(v)).toLowerCase()}},{}],91:[function(t,e,r){var n=t("./object"),i=t("./mixins/isarray"),o=n.extend({on:function(t,e){if(this._listeners=this._listeners||{},"function"==typeof e)return this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(e),this},off:function(t,e){if(this._listeners=this._listeners||{},this._listeners[t]){var r=this._listeners[t].indexOf(e);-1!==r&&this._listeners[t].splice(r,1)}return this},emit:function(t,e){return this._listeners=this._listeners||{},e=e||{},i(this._listeners[t])&&this._listeners[t].forEach(this._eachCallback.bind(this,t,e)),i(this._listeners["*"])&&this._listeners["*"].forEach(this._eachCallback.bind(this,t,e)),this},_eachCallback:function(t,e,r){"function"==typeof r&&r({type:t,data:e,target:this})}});e.exports=o},{"./mixins/isarray":96,"./object":98}],92:[function(t,e,r){var n=t("../emitter"),i=t("../comm/communication"),o=t("../comm/transform/wrong"),s=n.extend({constructor:function(t){this._plugin=t},andBeyond:function(){s.prototype.begin.apply(this,arguments)},begin:function(t){this._comm=new i(this._plugin),this._comm.addTransform(this._plugin.viewTransform),this._comm.addTransform(new o(this._plugin)),this._plugin&&this._plugin.storage&&"function"==typeof this._plugin.storage.getLocal&&(this._registeredProperties=this._plugin.storage.getLocal("inifnityRegisteredProperties")),!this._plugin.getIsSessionExpired()&&this._plugin.storage.getLocal("infinityStarted")?(this.fireNav(t),this._sendExtraBeat()):this.fireSessionStart(t)},_generateNewContext:function(){var e=null;try{e=btoa((new Date).getTime())}catch(t){e="Default"}this._plugin.storage.setSession("context",e)},_setLastActive:function(){this._firstActive||(this._firstActive=this.getFirstActive()),this._plugin.storage.setStorages("lastactive",(new Date).getTime())},getFirstActive:function(){return Number(this._plugin.getLastActive())||0},getComm:function(){return this._comm},fireSessionStart:function(t){this._plugin.storage.setLocal("infinityStarted","true"),this._plugin.storage.removeLocal("infinityStopped"),this.infinityStarted=!0,this.infinityStopped=!1,this._generateNewContext(),this.emit(s.Event.SESSION_START,this._getParamsJson(t,null,null,!0,!0)),this._setLastActive()},fireSessionStop:function(t){this.infinityStopped=!0,this.emit(s.Event.SESSION_STOP,t),this._plugin.storage.removeStorages("data"),this._plugin.storage.removeStorages("session"),this._plugin.storage.removeStorages("lastactive")},newSession:function(t,e){this.fireSessionStop(),this._plugin.storage.removeLocal("data"),this._plugin.setOptions(t),this._plugin.restartViewTransform(),this.fireSessionStart(e)},fireNav:function(t){this.isActive()&&(this._plugin.getContext()||this._generateNewContext(),this.emit(s.Event.NAV,this._getParamsJson(t,null,null,!0)))},_sendExtraBeat:function(){var t=(new Date).getTime();if(this._plugin&&this._plugin._beat){var e=this._plugin._beat.chrono.startTime?t-this._plugin._beat.chrono.startTime:0;this._plugin._sendBeat(e),this._plugin._beat.chrono.startTime=t}this._setLastActive()},fireEvent:function(t,e,r){this.emit(s.Event.EVENT,this._getParamsJson(e,r,t)),this._setLastActive()},register:function(t,e){this._registeredProperties={dimensions:t,values:e},this._plugin.storage.setLocal("inifnityRegisteredProperties",JSON.stringify(this._registeredProperties))},registerOnce:function(t,e){this._registeredProperties||this.register(t,e)},unregister:function(){this._registeredProperties=null,this._plugin.storage.removeLocal("inifnityRegisteredProperties")},_getParamsJson:function(t,e,r,n,i){var o={};if(r&&(o.name=r),o.dimensions=t||{},o.values=e||{},this._registeredProperties){for(var s in this._registeredProperties.dimensions)o.dimensions[s]=this._registeredProperties.dimensions[s];for(var a in this._registeredProperties.values)o.values[a]=this._registeredProperties.values[a]}var u={params:o};return n&&(u.params.dimensions.page&&(u.params.page=u.params.dimensions.page,delete u.params.dimensions.page),u.params.dimensions.route&&(u.params.route=u.params.dimensions.route,delete u.params.dimensions.route),i||delete u.params.dimensions,delete u.params.values),u},isActive:function(){var t=(new Date).getTime();return null!=this._plugin.storage.getLocal("infinityStarted")&&!this._plugin.storage.getLocal("infinityStopped")||Number(this._plugin.getLastActive())+this._plugin.sessionExpire>t}},{Event:{NAV:"nav",SESSION_START:"sessionStart",SESSION_STOP:"sessionStop",BEAT:"beat",EVENT:"event"}});e.exports=s},{"../comm/communication":64,"../comm/transform/wrong":82,"../emitter":91}],93:[function(t,e,r){var n=t("./emitter"),s=t("./mixins/isarray"),a={_emitter:new n,on:function(){a._emitter.on.apply(a._emitter,arguments)},off:function(){a._emitter.off.apply(a._emitter,arguments)},emit:function(){a._emitter.emit.apply(a._emitter,arguments)},Level:{SILENT:6,ERROR:5,WARNING:4,NOTICE:3,DEBUG:2,VERBOSE:1},Event:{LOG:"log"},logLevel:5,plainLogs:!1,report:function(t,e,r){if("undefined"!=typeof console&&console.log&&"undefined"!=typeof document){r=r||"darkcyan";var n,i={5:"e",4:"w",3:"n",2:"d",1:"v"}[e=e||a.Level.NOTICE],o="[Youbora]"+a._getCurrentTime()+" "+i+":";if(this.emit("log",{level:e,msg:t,prefix:o}),a.logLevel<=e)if(a.plainLogs||document.documentMode)a._plainReport(t,o);else n=e===a.Level.ERROR&&console.error?console.error:e===a.Level.WARNING&&console.warn?console.warn:e===a.Level.DEBUG&&console.debug?console.debug:console.log,o="%c"+o,s(t)?(t.splice(0,0,o,"color: "+r),n.apply(console,t)):n.call(console,o,"color: "+r,t)}},_getCurrentTime:function(){var t=new Date;return"["+("0"+t.getDate()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+"."+("00"+t.getMilliseconds()).slice(-3)+"]"},_plainReport:function(t,e){if(t instanceof Array)for(var r in t)a._plainReport(t[r],e);else"string"==typeof t?console.log(e+" "+t):(console.log(e+" <next line>"),console.log(t))},error:function(){a.report([].slice.call(arguments),a.Level.ERROR,"darkred")},warn:function(){a.report([].slice.call(arguments),a.Level.WARNING,"darkorange")},notice:function(){a.report([].slice.call(arguments),a.Level.NOTICE,"darkgreen")},debug:function(){a.report([].slice.call(arguments),a.Level.DEBUG,"indigo")},verbose:function(){a.report([].slice.call(arguments),a.Level.VERBOSE,"navy")},loadLevelFromUrl:function(){if("undefined"!=typeof window&&window.location&&window.location.search){var t=/\?.*&*youbora-debug=(.+)/i.exec(window.location.search);null!==t&&(a.logLevel=t[1]),null!==/\?.*&*youbora-debug=plain/i.exec(window.location.search)&&(a.plainLogs=!0)}}};e.exports=a},{"./emitter":91,"./mixins/isarray":96}],94:[function(t,e,r){e.exports=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e}},{}],95:[function(t,e,r){function n(){}e.exports=function(t){if(1<arguments.length)throw Error("Second argument not supported");if(null===t)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof t)throw TypeError("Argument must be an object");return n.prototype=t,new n}},{}],96:[function(t,e,r){e.exports=function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],97:[function(t,e,r){var n=t("../object").extend({getCdnTraffic:function(){var e=0;if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){for(var t in Streamroot.peerAgents)e+=Streamroot.peerAgents[t].stats.cdn;return e}if(Streamroot.instances&&0<Streamroot.instances.length)return Streamroot.instances.forEach(function(t){e+=t.stats.currentContent.cdnDownload}),e}if("undefined"!=typeof peer5&&peer5.getStats)return peer5.getStats().totalHttpDownloaded;if("undefined"!=typeof teltoo&&teltoo.getStats){var r=teltoo.getStats();return r.totalReceivedBytes-r.p2pReceivedBytes}return null},getP2PTraffic:function(){var e=0;if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){for(var t in Streamroot.peerAgents)Streamroot.peerAgents[t].isP2PEnabled&&(e+=Streamroot.peerAgents[t].stats.p2p);return e}if(Streamroot.instances&&0<Streamroot.instances.length)return Streamroot.instances.forEach(function(t){e+=t.stats.currentContent.dnaDownload}),e}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PDownloaded:"undefined"!=typeof teltoo&&teltoo.getStats?teltoo.getStats().p2pReceivedBytes:null},getUploadTraffic:function(){var e=0;if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){for(var t in Streamroot.peerAgents)Streamroot.peerAgents[t].isP2PEnabled&&(e+=Streamroot.peerAgents[t].stats.upload);return e}if(Streamroot.instances&&0<Streamroot.instances.length)return Streamroot.instances.forEach(function(t){e+=t.stats.currentContent.dnaUpload}),e}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PUploaded:null},getIsP2PEnabled:function(){var e=!1;if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){for(var t in Streamroot.peerAgents)e=e||Streamroot.peerAgents[t].isP2PEnabled;return e}if(Streamroot.instances&&0<Streamroot.instances.length)return Streamroot.instances.forEach(function(t){e=e||t.dnaDownloadEnabled||t.dnaUploadEnabled}),e}return"undefined"!=typeof peer5&&peer5.isEnabled?peer5.isEnabled():null}});e.exports=n},{"../object":98}],98:[function(t,e,r){function n(){}var i=t("./mixins/assign"),o=t("./mixins/create");n.prototype={constructor:function(){}},n.extend=function(t,e){var r,n=this;return r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return n.apply(this,arguments)},i(r,n,e),r.prototype=o(n.prototype),t&&i(r.prototype,t),(r.prototype.constructor=r).__super__=n.prototype,r},e.exports=n},{"./mixins/assign":94,"./mixins/create":95}],99:[function(t,e,r){var n=t("../object"),i=t("../log"),o=n.extend({exists:function(t){return o.Dictionary.hasOwnProperty(t)},getNewName:function(t){var e=o.Dictionary[t];return i.warn('The option "'+t+'" is deprecated, use "'+e+'" instead'),e}},{Dictionary:{httpSecure:"app.https",username:"user.name",anonymousUser:"user.anonymousId",obfuscateIp:"user.obfuscateIp",userType:"user.type","content.title2":"content.program","background.settings.iphone":"background.settings.iOS","extraparam.1":"content.customDimension.1","extraparam.2":"content.customDimension.2","extraparam.3":"content.customDimension.3","extraparam.4":"content.customDimension.4","extraparam.5":"content.customDimension.5","extraparam.6":"content.customDimension.6","extraparam.7":"content.customDimension.7","extraparam.8":"content.customDimension.8","extraparam.9":"content.customDimension.9","extraparam.10":"content.customDimension.10","extraparam.11":"content.customDimension.11","extraparam.12":"content.customDimension.12","extraparam.13":"content.customDimension.13","extraparam.14":"content.customDimension.14","extraparam.15":"content.customDimension.15","extraparam.16":"content.customDimension.16","extraparam.17":"content.customDimension.17","extraparam.18":"content.customDimension.18","extraparam.19":"content.customDimension.19","extraparam.20":"content.customDimension.20","ad.extraparam.1":"ad.content.customDimension.1","ad.extraparam.2":"ad.content.customDimension.2","ad.extraparam.3":"ad.content.customDimension.3","ad.extraparam.4":"ad.content.customDimension.4","ad.extraparam.5":"ad.content.customDimension.5","ad.extraparam.6":"ad.content.customDimension.6","ad.extraparam.7":"ad.content.customDimension.7","ad.extraparam.8":"ad.content.customDimension.8","ad.extraparam.9":"ad.content.customDimension.9","ad.extraparam.10":"ad.content.customDimension.10"}});e.exports=o},{"../log":93,"../object":98}],100:[function(t,e,r){var n=t("../object"),i=t("./storage"),o=n.extend({constructor:function(){this.storage=new i("youboraOffline",!0),this.actualView=null,this.viewList=[],this.givenIds=[],this._getOldViewList()},_newView:function(){var t=this._getValidId();this.storage.setLocal(t,""),this.viewList.push(t),this.storage.setLocal("views",this.viewList),this.actualView=t},addEvent:function(t,e){if("/start"===t&&this._newView(),"/init"===t)return null;if(!this.actualView)return null;var r='{"request":"'+t.slice(1)+'",';for(var n in r+='"unixtime":'+Date.now()+",",e){if(void 0===e[n])break;r+='"'+n+'":',"code"===n?r+='"CODE_PLACEHOLDER",':"sessionId"===n?r+='"SESSION_PLACEHOLDER",':"parentId"===n?r+='"PARENT_PLACEHOLDER",':"sessionRoot"===n?r+='"ROOT_PLACEHOLDER",':"string"==typeof e[n]?r+='"'+e[n]+'",':"object"==typeof e[n]?r+='"'+JSON.stringify(e[n]).replace(/"/g,'\\"')+'",':r+=e[n]+","}r=r.slice(0,-1),r+="}";var i=this.storage.getLocal(this.actualView);""!==i&&(i+=","),this.storage.setLocal(this.actualView,i+r)},getView:function(){if(this.viewList.length>this.givenIds.length)for(var t=0;;){var e=this.viewList[t];if(!this.givenIds.includes(e))return this.givenIds.push(e),["["+this.storage.getLocal(e)+"]",e];t++}return[null,null]},removeView:function(t){this.storage.removeLocal(t);var e=this.viewList.indexOf(t);-1!==e&&this.viewList.splice(e,1),-1!==(e=this.givenIds.indexOf(t))&&this.givenIds.splice(e,1),this.storage.setLocal("views",this.viewList.toString()),t===this.actualView&&(this.actualView=null)},_getOldViewList:function(){var t="";this.storage.getLocal("views")?t=this.storage.getLocal("views"):this.storage.setLocal("views",""),""===t?this.viewList=[]:"function"==typeof t.split&&(this.viewList=t.split(","))},_getValidId:function(){var t=Math.floor(1e8*Math.random()).toString();return 0<=this.viewList.indexOf(t)?this._getValidId():t},sent:function(){this.givenIds=[]}});e.exports=o},{"../object":98,"./storage":113}],101:[function(t,e,r){var n=t("../object"),a=t("./deprecatedOptions"),u=t("../log"),i=n.extend({constructor:function(t){this.enabled=!0,this.host="a-fds.youborafds01.com",this.accountCode="nicetest",this.preventZombieViews=!0,this.offline=!1,this.referer=null,this.disableCookies=!0,this["user.email"]=null,this["user.type"]=null,this["user.name"]=null,this["user.obfuscateIp"]=!1,this["user.anonymousId"]=null,this["parse.hls"]=!1,this["parse.cdnNameHeader"]="x-cdn-forward",this["parse.cdnNode"]=!1,this["parse.cdnNode.list"]=["Akamai","Cloudfront","Level3","Fastly","Highwinds","Telefonica"],this["parse.locationHeader"]=!1,this["parse.dash"]=!1,this["parse.fdsResponseHost"]=null,this["network.ip"]=null,this["network.isp"]=null,this["network.connectionType"]=null,this["device.code"]=null,this["device.model"]=null,this["device.brand"]=null,this["device.type"]=null,this["device.name"]=null,this["device.osName"]=null,this["device.osVersion"]=null,this["device.browserName"]=null,this["device.browserVersion"]=null,this["device.browserType"]=null,this["device.browserEngine"]=null,this["device.isAnonymous"]=!1,this["content.transactionCode"]=null,this["content.resource"]=null,this["content.isLive"]=null,this["content.isLive.noSeek"]=!1,this["content.title"]=null,this["content.program"]=null,this["content.duration"]=null,this["content.fps"]=null,this["content.bitrate"]=null,this["content.throughput"]=null,this["content.rendition"]=null,this["content.cdn"]=null,this["content.cdnNode"]=null,this["content.cdnType"]=null,this["content.metadata"]={},this["content.metrics"]={},this["content.streamingProtocol"]=null,this["content.package"]=null,this["content.saga"]=null,this["content.tvShow"]=null,this["content.season"]=null,this["content.episodeTitle"]=null,this["content.channel"]=null,this["content.id"]=null,this["content.imdbId"]=null,this["content.gracenoteId"]=null,this["content.type"]=null,this["content.genre"]=null,this["content.language"]=null,this["content.subtitles"]=null,this["content.contractedResolution"]=null,this["content.cost"]=null,this["content.price"]=null,this["content.playbackType"]=null,this["content.drm"]=null,this["content.encoding.videoCodec"]=null,this["content.encoding.audioCodec"]=null,this["content.encoding.codecSettings"]=null,this["content.encoding.codecProfile"]=null,this["content.encoding.containerFormat"]=null,this["ad.metadata"]={},this["ad.campaign"]=null,this["ad.creativeId"]=null,this["ad.provider"]=null,this["ad.resource"]=null,this["ad.title"]=null,this["ad.expectedPattern"]=null,this["ad.givenAds"]=null,this["ad.breaksTime"]=null,this["ad.expectedBreaks"]=null,this["ad.givenBreaks"]=null,this["ad.ignore"]=!1,this["ad.blockDetection"]=!1,this["app.name"]=null,this["app.releaseVersion"]=null,this["app.https"]=!1,this["background.enabled"]=!0,this["background.settings"]=null,this["background.settings.android"]="stop",this["background.settings.iOS"]="stop",this["background.settings.desktop"]=null,this["background.settings.tv"]="stop",this["background.settings.playstation"]="stop",this["smartswitch.configCode"]=null,this["smartswitch.groupCode"]=null,this["smartswitch.contractCode"]=null,this["content.customDimension.1"]=null,this["content.customDimension.2"]=null,this["content.customDimension.3"]=null,this["content.customDimension.4"]=null,this["content.customDimension.5"]=null,this["content.customDimension.6"]=null,this["content.customDimension.7"]=null,this["content.customDimension.8"]=null,this["content.customDimension.9"]=null,this["content.customDimension.10"]=null,this["content.customDimension.11"]=null,this["content.customDimension.12"]=null,this["content.customDimension.13"]=null,this["content.customDimension.14"]=null,this["content.customDimension.15"]=null,this["content.customDimension.16"]=null,this["content.customDimension.17"]=null,this["content.customDimension.18"]=null,this["content.customDimension.19"]=null,this["content.customDimension.20"]=null,this["ad.customDimension.1"]=null,this["ad.customDimension.2"]=null,this["ad.customDimension.3"]=null,this["ad.customDimension.4"]=null,this["ad.customDimension.5"]=null,this["ad.customDimension.6"]=null,this["ad.customDimension.7"]=null,this["ad.customDimension.8"]=null,this["ad.customDimension.9"]=null,this["ad.customDimension.10"]=null,this.forceInit=!1,this["session.metrics"]={},this["session.context"]=!1,this.waitForMetadata=!1,this.pendingMetadata=[],this.setOptions(t)},setOptions:function(t,e){var r=!1;if(void 0===e){e=this,r=!0;var n=new a}if(void 0!==t)for(var i in t){var o=!1,s=null;r&&(this.hasOwnProperty(i)||(n.exists(i)?(s=n.getNewName(i),o=!0):u.warn('The option "'+i+'" does not exist, so it cannot be set'))),"object"!=typeof e[i]||null===e[i]||Array.isArray(e[i])||"parse.cdnNode.list"!==i?o?e[s]=t[i]:e[i]=t[i]:this.setOptions(t[i],e[i])}},setExtraParams:function(t){if("object"==typeof t&&t.length){for(20<=t.length&&(t=t.slice(0,20));t.length<20;)t.push(null);t.forEach(function(t,e){this["content.customDimension."+(e+1).toString()]=t}.bind(this))}},setCustomDimensions:function(){i.prototype.setExtraParams.apply(this,arguments)},setAdExtraParams:function(t){if("object"==typeof t&&t.length){for(10<=t.length&&(t=t.slice(0,10));t.length<10;)t.push(null);t.forEach(function(t,e){this["ad.customDimension."+(e+1).toString()]=t}.bind(this))}},setAdCustomDimensions:function(){i.prototype.setAdExtraParams.apply(this,arguments)}});e.exports=i},{"../log":93,"../object":98,"./deprecatedOptions":99}],102:[function(t,e,r){var n=t("../log"),i=t("../util"),o=t("../constants"),s={getAdPlayerVersion:function(){var t="";if(this._adsAdapter)try{t=this._adsAdapter.getPlayerVersion()}catch(t){n.warn("An error occured while calling getAdPlayerVersion",t)}return t},getAdPosition:function(){var t=o.AdPosition.Preroll;if(this._adsAdapter)try{var e=this._adsAdapter.getPosition();o.AdPosition.Preroll!==e&&o.AdPosition.Midroll!==e&&o.AdPosition.Postroll!==e||(t=e)}catch(t){n.warn("An error occured while calling getAdPosition",t)}return!t&&this._adapter&&(t=this._adapter.flags.isJoined?o.AdPosition.Midroll:o.AdPosition.Preroll),t},getAdPlayhead:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getPlayhead()}catch(t){n.warn("An error occured while calling getAdPlayhead",t)}return i.parseNumber(t,0)},getAdDuration:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getDuration()}catch(t){n.warn("An error occured while calling getAdDuration",t)}return i.parseNumber(t,0)},getAdBitrate:function(){var t=null;if(this._adsAdapter){try{t=this._adsAdapter.getBitrate()}catch(t){n.warn("An error occured while calling getAdBitrate",t)}t&&-1!==t||(t=this.getWebkitAdBitrate())}return i.parseNumber(t,-1)},getWebkitAdBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var t=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitAdBitrate){var e=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitAdBitrate;t=Math.round(e/this.viewTransform.response.pingTime*8)}return this._lastWebkitAdBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==t?t:-1}},getAdTitle:function(){var t=null;if(this.options["ad.title"])return this.options["ad.title"];if(this._adsAdapter)try{t=this._adsAdapter.getTitle()}catch(t){n.warn("An error occured while calling getAdTitle",t)}return t},getAdResource:function(){var t=null;if(this.options["ad.resource"])return this.options["ad.resource"];if(this._adsAdapter)try{t=this._adsAdapter.getResource()}catch(t){n.warn("An error occured while calling getAdResource",t)}return t},getAdCampaign:function(){var t=null;if(this.options["ad.campaign"])return this.options["ad.campaign"];if(this._adsAdapter)try{t=this._adsAdapter.getCampaign()}catch(t){n.warn("An error occured while calling getCampaign",t)}return t},getAdCreativeId:function(){var t=null;if(this.options["ad.creativeId"])return this.options["ad.creativeId"];if(this._adsAdapter)try{t=this._adsAdapter.getCreativeId()}catch(t){n.warn("An error occured while calling getCreativeId",t)}return t},getAdProvider:function(){var t=null;if(this.options["ad.provider"])return this.options["ad.provider"];if(this._adsAdapter)try{t=this._adsAdapter.getProvider()}catch(t){n.warn("An error occured while calling getProvider",t)}return t},getAdAdapterVersion:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getVersion()}catch(t){n.warn("An error occured while calling getAdsAdapterVersion",t)}return t},getAdMetadata:function(){return this.options["ad.metadata"]},getGivenBreaks:function(){var t=null;if(this.options["ad.givenBreaks"])t=this.options["ad.givenBreaks"];else if(this._adsAdapter)try{t=this._adsAdapter.getGivenBreaks()}catch(t){n.warn("An error occured while calling getGivenBreaks",t)}return t},getExpectedBreaks:function(){var t=null;if(this.options["ad.expectedBreaks"])t=this.options["ad.expectedBreaks"];else if(this.options["ad.expectedPattern"])t=0,t=this.options["ad.expectedPattern"].pre?this.options["ad.expectedPattern"].pre.length:0,t+=this.options["ad.expectedPattern"].mid?this.options["ad.expectedPattern"].mid.length:0,t+=this.options["ad.expectedPattern"].post?this.options["ad.expectedPattern"].post.length:0;else if(this._adsAdapter)try{t=this._adsAdapter.getExpectedBreaks()}catch(t){n.warn("An error occured while calling expectedBreaks",t)}return t},getExpectedPattern:function(){var t=null;if(this.options["ad.expectedPattern"])t=this.options["ad.expectedPattern"];else if(this._adsAdapter)try{t=this._adsAdapter.getExpectedPattern()}catch(t){n.warn("An error occured while calling expectedPattern",t)}return t},getBreaksTime:function(){var t=null;if(this.options["ad.breaksTime"])t=this.options["ad.breaksTime"];else if(this._adsAdapter)try{t=this._adsAdapter.getBreaksTime()}catch(t){n.warn("An error occured while calling breaksTime",t)}return t},getGivenAds:function(){var t=null;if(this.options["ad.givenAds"])t=this.options["ad.givenAds"];else if(this._adsAdapter)try{t=this._adsAdapter.getGivenAds()}catch(t){n.warn("An error occured while calling givenAds",t)}return t},getExpectedAds:function(){var t=null;try{if(this._adsAdapter)if(this.options["ad.expectedPattern"]&&this.getAdPosition()){var e=[];if(this.options["ad.expectedPattern"].pre&&(e=e.concat(this.options["ad.expectedPattern"].pre)),this.options["ad.expectedPattern"].mid&&(e=e.concat(this.options["ad.expectedPattern"].mid)),this.options["ad.expectedPattern"].post&&(e=e.concat(this.options["ad.expectedPattern"].post)),0<e.length){var r=this.requestBuilder.lastSent.breakNumber;r>e.length&&(r=e.length),t=e[r-1]}}else t=this._adsAdapter.getExpectedAds()}catch(t){n.warn("An error occured while calling expectedAds",t)}return t},getAdsExpected:function(){var t=null;try{t=this.getExpectedPattern()||this.getGivenAds()||!1}catch(t){n.warn("An error occured while calling givenAds or expectedPattern",t)}return t},getAdJoinDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.join.getDeltaTime(!1):-1},getAdBufferDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.buffer.getDeltaTime(!1):-1},getAdPauseDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.pause.getDeltaTime(!1):0},getAdTotalDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.total.getDeltaTime(!1):-1},getAdViewedDuration:function(){var e=0;return this._adsAdapter&&0<this._adsAdapter.chronos.viewedMax.length&&this._adsAdapter.chronos.viewedMax.forEach(function(t){e+=t.getDeltaTime(!1)}),e},getAdViewability:function(){var e=0;return this._adsAdapter&&0<this._adsAdapter.chronos.viewedMax.length&&this._adsAdapter.chronos.viewedMax.forEach(function(t){t&&t.getDeltaTime(!1)>e&&(e=t.getDeltaTime(!1))}),e},getAudioEnabled:function(){var t=null;try{this._adsAdapter&&(t=this._adsAdapter.getAudioEnabled())}catch(t){n.warn("An error occured while calling isAudioEnabled",t)}return t},getIsSkippable:function(){var t=null;try{this._adsAdapter&&(t=this._adsAdapter.getIsSkippable())}catch(t){n.warn("An error occured while calling isSkippable",t)}return t},getIsFullscreen:function(){var t=null;try{this._adsAdapter&&(t=this._adsAdapter.getIsFullscreen())}catch(t){n.warn("An error occured while calling isFullcreen",t)}return t}};e.exports=s},{"../constants":83,"../log":93,"../util":116}],103:[function(t,e,r){var n=t("../log"),i=t("../constants"),o=t("../adapter/adapter"),s={getAdsAdapter:function(){return this._adsAdapter},setAdsAdapter:function(t){t.plugin?n.warn("Adapters can only be added to a single plugin"):(this.removeAdsAdapter(),(t.plugin=this)._adsAdapter=t,this._adsAdapter.on(o.Event.START,this._adStartListener.bind(this)),this._adsAdapter.on(o.Event.JOIN,this._adJoinListener.bind(this)),this._adsAdapter.on(o.Event.PAUSE,this._adPauseListener.bind(this)),this._adsAdapter.on(o.Event.RESUME,this._adResumeListener.bind(this)),this._adsAdapter.on(o.Event.BUFFER_BEGIN,this._adBufferBeginListener.bind(this)),this._adsAdapter.on(o.Event.BUFFER_END,this._adBufferEndListener.bind(this)),this._adsAdapter.on(o.Event.STOP,this._adStopListener.bind(this)),this._adsAdapter.on(o.Event.ERROR,this._adErrorListener.bind(this)),this._adsAdapter.on(o.Event.CLICK,this._adClickListener.bind(this)),this._adsAdapter.on(o.Event.MANIFEST,this._adManifestListener.bind(this)),this._adsAdapter.on(o.Event.PODSTART,this._adBreakStartListener.bind(this)),this._adsAdapter.on(o.Event.PODSTOP,this._adBreakStopListener.bind(this)),this._adsAdapter.on(o.Event.QUARTILE,this._adQuartileListener.bind(this)),this.resizeScrollDetector.startDetection())},removeAdsAdapter:function(){this._adsAdapter&&(this._adsAdapter.dispose(),this._adsAdapter.plugin=null,this._adsAdapter.off(o.Event.START,this._adStartListener),this._adsAdapter.off(o.Event.JOIN,this._adJoinListener),this._adsAdapter.off(o.Event.PAUSE,this._adPauseListener),this._adsAdapter.off(o.Event.RESUME,this._adResumeListener),this._adsAdapter.off(o.Event.BUFFER_BEGIN,this._adBufferBeginListener),this._adsAdapter.off(o.Event.BUFFER_END,this._adBufferEndListener),this._adsAdapter.off(o.Event.STOP,this._adStopListener),this._adsAdapter.off(o.Event.ERROR,this._adErrorListener),this._adsAdapter.off(o.Event.CLICK,this._adClickListener),this._adsAdapter.off(o.Event.MANIFEST,this._adManifestListener),this._adsAdapter.off(o.Event.PODSTART,this._adBreakStartListener),this._adsAdapter.off(o.Event.PODSTOP,this._adBreakStopListener),this._adsAdapter.off(o.Event.QUARTILE,this._adQuartileListener),this.resizeScrollDetector.stopDetection(),this._adsAdapter=null)},_adStartListener:function(t){this._adapter?(this._adapter.fireBufferEnd(),this._adapter.fireSeekEnd(),this.isInitiated||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit(),this._adsAdapter&&(this._adsAdapter.fireManifest(),this._adsAdapter.fireBreakStart(),this._adsAdapter.chronos.viewedMax=[]);var e=t.data.params||{};e.adNumber=this.requestBuilder.getNewAdNumber(),e.breakNumber=this.requestBuilder.lastSent.breakNumber,this.options["ad.ignore"]||((this.getAdResource()||this.getAdTitle())&&"number"==typeof this.getAdDuration()?(this.adStartSent=!0,this._send(i.WillSendEvent.WILL_SEND_AD_START,i.Service.AD_START,e)):(this.adInitSent=!0,this._send(i.WillSendEvent.WILL_SEND_AD_INIT,i.Service.AD_INIT,e)),n.notice(i.Service.AD_INIT+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s"))},_adJoinListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.breakNumber=this.requestBuilder.lastSent.breakNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||!this.adInitSent||this.adStartSent||(this._send(i.WillSendEvent.WILL_SEND_AD_START,i.Service.AD_START,e),n.notice(i.Service.AD_START+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")),this._adsAdapter.startChronoView(),this.adConnected&&(this._adsAdapter.chronos.join.startTime=this.adConnectedTime,this._adsAdapter.chronos.total.startTime=this.adConnectedTime,this.adConnectedTime=0,this.adConnected=!1),this.options["ad.ignore"]||this._send(i.WillSendEvent.WILL_SEND_AD_JOIN,i.Service.AD_JOIN,e),n.notice(i.Service.AD_JOIN+" "+e.adJoinDuration+"ms"),this.adInitSent=!1,this.adStartSent=!1},_adPauseListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.breakNumber=this.requestBuilder.lastSent.breakNumber,this._adsAdapter.stopChronoView(),this.options["ad.ignore"]||this._send(i.WillSendEvent.WILL_SEND_AD_PAUSE,i.Service.AD_PAUSE,e),n.notice(i.Service.AD_PAUSE+" at "+e.adPlayhead+"s")},_adResumeListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.breakNumber=this.requestBuilder.lastSent.breakNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this._adsAdapter.startChronoView(),this.options["ad.ignore"]||this._send(i.WillSendEvent.WILL_SEND_AD_RESUME,i.Service.AD_RESUME,e),n.notice(i.Service.AD_RESUME+" "+e.adPauseDuration+"ms")},_adBufferBeginListener:function(t){n.notice("Ad Buffer Begin"),this._adsAdapter.stopChronoView(),this._adsAdapter&&this._adsAdapter.flags.isPaused&&this._adsAdapter.chronos.pause.reset()},_adBufferEndListener:function(t){var e=t.data.params||{};this._adsAdapter.startChronoView(),e.adNumber=this.requestBuilder.lastSent.adNumber,e.breakNumber=this.requestBuilder.lastSent.breakNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(i.WillSendEvent.WILL_SEND_AD_BUFFER,i.Service.AD_BUFFER,e),n.notice(i.Service.AD_BUFFER+" "+e.adBufferDuration+"ms")},_adStopListener:function(t){this._adsAdapter.stopChronoView(),this._adsAdapter.flags.reset(),this._totalPrerollsTime=(this._totalPrerollsTime||0)+this._adsAdapter.chronos.total.getDeltaTime();var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.breakNumber=this.requestBuilder.lastSent.breakNumber,this.requestBuilder.lastSent.adPosition===i.AdPosition.Postroll&&this.playedPostrolls++,this.options["ad.ignore"]||this._send(i.WillSendEvent.WILL_SEND_AD_STOP,i.Service.AD_STOP,e),n.notice(i.Service.AD_STOP+" "+e.adTotalDuration+"ms"),this.options["ad.expectedPattern"]&&this.options["ad.expectedPattern"].post&&this.options["ad.expectedPattern"].post[0]===this.playedPostrolls&&e.adPosition===i.AdPosition.Postroll&&this.fireStop(),this.adConnected=!0,this.adConnectedTime=(new Date).getTime()},_adErrorListener:function(t){var e=t.data.params||{};return!this._adapter||this._adapter.flags.isStarted||this.isInitiated?this._blockAdError(t.data.params)?null:(this._adsAdapter&&(this._adsAdapter.fireManifest(),this._adsAdapter.fireBreakStart()),this._adsAdapter&&this._adsAdapter.flags.isStarted?e.adNumber=this.requestBuilder.lastSent.adNumber:e.adNumber=this.requestBuilder.getNewAdNumber(),e.breakNumber=this.requestBuilder.lastSent.breakNumber,this.options["ad.ignore"]||this._send(i.WillSendEvent.WILL_SEND_AD_ERROR,i.Service.AD_ERROR,e),void n.notice(i.Service.AD_ERROR)):(this._savedAdError=t,null)},_adSavedError:function(){this._savedAdError&&(this._adErrorListener(this._savedAdError),this._savedAdError=null)},_adSavedManifest:function(){this._savedAdManifest&&(this._adManifestListener(this._savedAdManifest),this._savedAdManifest=null)},_blockAdError:function(t){var e=Date.now();return!!this._lastAdErrorParams&&(this._lastAdErrorParams.errorCode===t.errorCode&&this._lastAdErrorParams.msg===t.msg)&&this._lastAdErrorTime+5e3>e?(this._lastAdErrorTime=e,!0):(this._lastAdErrorTime=e,this._lastAdErrorParams=t,!1)},_adClickListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.breakNumber=this.requestBuilder.lastSent.breakNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this._adsAdapter.stopChronoView(),this.options["ad.ignore"]||this._send(i.WillSendEvent.WILL_SEND_AD_CLICK,i.Service.AD_CLICK,e),n.notice(i.Service.AD_CLICK)},_adManifestListener:function(t){if(!this.isAdsManifestSent){if(this._adapter&&!this._adapter.flags.isStarted&&!this.isInitiated)return this._savedAdManifest=t,null;var e=t.data.params||{};this.isAdsManifestSent=!0,this.options["ad.ignore"]||this._send(i.WillSendEvent.WILL_SEND_AD_MANIFEST,i.Service.AD_MANIFEST,e),n.notice(i.Service.AD_MANIFEST)}},_adBreakStartListener:function(t){var e=t.data.params||{};this.requestBuilder.lastSent.breakNumber?this.requestBuilder.lastSent.breakNumber++:this.requestBuilder.lastSent.breakNumber=1,e.breakNumber=this.requestBuilder.lastSent.breakNumber,this.options["ad.ignore"]||this._send(i.WillSendEvent.WILL_SEND_AD_POD_START,i.Service.AD_POD_START,e),n.notice(i.Service.AD_POD_START),this.adConnected=!1},_adBreakStopListener:function(t){var e=t.data.params||{};e.breakNumber=this.requestBuilder.lastSent.breakNumber,e.breakPosition=this.requestBuilder.lastSent.breakPosition,this.options["ad.ignore"]||this._send(i.WillSendEvent.WILL_SEND_AD_POD_STOP,i.Service.AD_POD_STOP,e),n.notice(i.Service.AD_POD_STOP),this.adConnected=!1},_adQuartileListener:function(t){var e=t.data.params||{};e.quartile&&(e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,e.breakNumber=this.requestBuilder.lastSent.breakNumber,e.breakPosition=this.requestBuilder.lastSent.breakPosition,this.options["ad.ignore"]||this._send(i.WillSendEvent.WILL_SEND_AD_QUARTILE,i.Service.AD_QUARTILE,e),n.notice(i.Service.AD_QUARTILE))}};e.exports=s},{"../adapter/adapter":59,"../constants":83,"../log":93}],104:[function(t,e,r){var n=t("../log"),i=t("../util"),o=t("../version"),s={getPlayhead:function(){var t=0;if(this._adapter)try{t=this._adapter.getPlayhead()}catch(t){n.warn("An error occurred while calling getPlayhead",t)}return i.parseNumber(t,0)},getPlayrate:function(){var t=0;if(this._adapter)try{t=this._adapter.getPlayrate(),this._adapter.flags&&this._adapter.flags.isPaused&&(t=0)}catch(t){n.warn("An error occured while calling getPlayrate",t)}return t},getFramesPerSecond:function(){var t=this.options["content.fps"];if(null===t&&this._adapter)try{t=this._adapter.getFramesPerSecond()}catch(t){n.warn("An error occured while calling getFramesPerSecond",t)}return t},getDroppedFrames:function(){var t=null;if(this._adapter)try{t=this._adapter.getDroppedFrames()}catch(t){n.warn("An error occured while calling getDroppedFrames",t)}return t=t||this.getWebkitDroppedFrames(),i.parseNumber(t,0)},getWebkitDroppedFrames:function(){return this._adapter&&this._adapter.tag&&this._adapter.tag.webkitDroppedFrameCount?this._adapter.tag.webkitDroppedFrameCount:null},getDuration:function(){var t=this.options["content.duration"];if(null===t&&this._adapter)try{t=this._adapter.getDuration()}catch(t){n.warn("An error occured while calling getDuration",t)}return 0===t&&(t=null),i.parseNumber(Math.round(t),null)},getBitrate:function(){var t=this.options["content.bitrate"];if(null===t&&this._adapter){try{t=this._adapter.getBitrate()}catch(t){n.warn("An error occured while calling getBitrate",t)}t&&-1!==t||(t=this.getWebkitBitrate())}return i.parseNumber(t,-1)},getWebkitBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var t=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitBitrate){var e=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitBitrate;t=Math.round(e/this.viewTransform.response.pingTime*8)}return this._lastWebkitBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==t?t:-1}},getThroughput:function(){var t=this.options["content.throughput"];if(null===t&&this._adapter)try{t=this._adapter.getThroughput()}catch(t){n.warn("An error occured while calling getThroughput",t)}return i.parseNumber(t,-1)},getRendition:function(){var t=this.options["content.rendition"];if(null===t&&this._adapter)try{t=this._adapter.getRendition()}catch(t){n.warn("An error occured while calling getRendition",t)}return t},getTitle:function(){var t=this.options["content.title"];if(null===t&&this._adapter)try{t=this._adapter.getTitle()}catch(t){n.warn("An error occured while calling getTitle",t)}return t},getTitle2:function(){var t=this.options["content.program"];if(null===t&&this._adapter)try{t=this._adapter.getTitle2()}catch(t){n.warn("An error occured while calling getTitle2",t)}return t},getIsLive:function(){var t=this.options["content.isLive"];if(null===t&&this._adapter)try{t=this._adapter.getIsLive()}catch(t){n.warn("An error occured while calling getIsLive",t)}return t||!1},getResource:function(){var e=null;if(null===(e=this.options["content.resource"])&&this._adapter)try{e=this._adapter.getResource()}catch(t){n.warn("An error occured while calling getResource",t),e=null}return e||null},getParsedResource:function(){var t=null;return!this.resourceTransform.isBlocking()&&this.resourceTransform.isDone&&(t=this.resourceTransform.getResource()),t===this.getResource()?null:t},getTransactionCode:function(){return this.options["content.transactionCode"]},getMetadata:function(){return this.options["content.metadata"]},getPlayerVersion:function(){var t="";if(this._adapter)try{t=this._adapter.getPlayerVersion()}catch(t){n.warn("An error occured while calling getPlayerVersion",t)}return t},getPlayerName:function(){var t="";if(this._adapter)try{t=this._adapter.getPlayerName()}catch(t){n.warn("An error occured while calling getPlayerName",t)}return t},getCdn:function(){var t=null;return this.resourceTransform.isBlocking()||(t=this.resourceTransform.getCdnName()),t||this.options["content.cdn"]},getPluginVersion:function(){var t=this.getAdapterVersion();return t=t||o+"-adapterless"},getLibVersion:function(){return o},getAdapterVersion:function(){var t=null;if(this._adapter)try{t=this._adapter.getVersion()}catch(t){n.warn("An error occured while calling getPluginVersion",t)}return t},getCdnTraffic:function(){var t=this.hybridNetwork.getCdnTraffic();if(this._adapter)try{t=this._adapter.getCdnTraffic()||t}catch(t){n.warn("An error occured while calling getCdnTraffic",t)}return t},getP2PTraffic:function(){var t=this.hybridNetwork.getP2PTraffic();if(this._adapter)try{t=this._adapter.getP2PTraffic()||t}catch(t){n.warn("An error occured while calling getP2PTraffic",t)}return t},getUploadTraffic:function(){var t=this.hybridNetwork.getUploadTraffic();if(this._adapter)try{t=this._adapter.getUploadTraffic()||t}catch(t){n.warn("An error occured while calling getUploadTraffic",t)}return t},getIsP2PEnabled:function(){var t=this.hybridNetwork.getIsP2PEnabled();if(this._adapter)try{t=this._adapter.getIsP2PEnabled()||t}catch(t){n.warn("An error occured while calling getIsP2PEnabled",t)}return t},getStreamingProtocol:function(){var t=this.options["content.streamingProtocol"];return"string"!=typeof t?null:"HDS"!==(t=t.toUpperCase())&&"HLS"!==t&&"MSS"!==t&&"DASH"!==t&&"RTMP"!==t&&"RTP"!==t&&"RTSP"!==t?(n.warn("Streaming protocol "+t+" is not a valid value"),null):t},getHouseholdId:function(){var t=null;if(this._adapter)try{t=this._adapter.getHouseholdId()}catch(t){n.warn("An error occurred while calling getHouseholdId",t)}return t},getLatency:function(){var t=null;if(this._adapter)try{t=this._adapter.getLatency()}catch(t){n.warn("An error occurred while calling getLatency",t)}return t},getPacketLoss:function(){var t=null;if(this._adapter)try{t=this._adapter.getPacketLoss()}catch(t){n.warn("An error occurred while calling getPacketLoss",t)}return t},getPacketSent:function(){var t=null;if(this._adapter)try{t=this._adapter.getPacketSent()}catch(t){n.warn("An error occurred while calling getPacketSent",t)}return t},getVideoMetrics:function(){var t=this._adapter?this._adapter.getMetrics():null;for(var e in t=t||this.options["content.metrics"])if("object"!=typeof t[e]||!t[e].value){var r={};r.value=t[e],t[e]=r}return t},getJoinDuration:function(){return this._adapter?this._adapter.chronos.join.getDeltaTime(!1):-1},getBufferDuration:function(){return this._adapter?this._adapter.chronos.buffer.getDeltaTime(!1):-1},getSeekDuration:function(){return this._adapter?this._adapter.chronos.seek.getDeltaTime(!1):-1},getPauseDuration:function(){return this._adapter?this._adapter.chronos.pause.getDeltaTime(!1):0},getPackage:function(){return this.options["content.package"]},getSaga:function(){return this.options["content.saga"]},getTvShow:function(){return this.options["content.tvShow"]},getSeason:function(){return this.options["content.season"]},getEpisodeTitle:function(){return this.options["content.episodeTitle"]},getChannel:function(){return this.options["content.channel"]},getID:function(){return this.options["content.id"]},getImdbId:function(){return this.options["content.imdbId"]},getGracenoteID:function(){return this.options["content.gracenoteId"]},getType:function(){return this.options["content.type"]},getGenre:function(){return this.options["content.genre"]},getVideoLanguage:function(){return this.options["content.language"]},getSubtitles:function(){return this.options["content.subtitles"]},getContractedResolution:function(){return this.options["content.contractedResolution"]},getCost:function(){return this.options["content.cost"]},getPrice:function(){return this.options["content.price"]},getPlaybackType:function(){return this.options["content.playbackType"]?this.options["content.playbackType"]:this.getIsLive()?"Live":"VoD"},getDRM:function(){return this.options["content.drm"]},getVideoCodec:function(){return this.options["content.encoding.videoCodec"]},getAudioCodec:function(){return this.options["content.encoding.audioCodec"]},getCodecSettings:function(){return this.options["content.encoding.codecSettings"]},getCodecProfile:function(){return this.options["content.encoding.codecProfile"]},getContainerFormat:function(){return this.options["content.encoding.containerFormat"]}};e.exports=s},{"../log":93,"../util":116,"../version":117}],105:[function(t,e,r){var n=t("../log"),i=t("../constants"),o=t("../adapter/adapter"),s={setAdapter:function(t){t.plugin?n.warn("Adapters can only be added to a single plugin"):(this.removeAdapter(),(this._adapter=t).plugin=this,t.on(o.Event.START,this._startListener.bind(this)),t.on(o.Event.JOIN,this._joinListener.bind(this)),t.on(o.Event.PAUSE,this._pauseListener.bind(this)),t.on(o.Event.RESUME,this._resumeListener.bind(this)),t.on(o.Event.SEEK_BEGIN,this._seekBeginListener.bind(this)),t.on(o.Event.SEEK_END,this._seekEndListener.bind(this)),t.on(o.Event.BUFFER_BEGIN,this._bufferBeginListener.bind(this)),t.on(o.Event.BUFFER_END,this._bufferEndListener.bind(this)),t.on(o.Event.ERROR,this._errorListener.bind(this)),t.on(o.Event.STOP,this._stopListener.bind(this)),t.on(o.Event.VIDEO_EVENT,this._videoEventListener.bind(this)))},getAdapter:function(){return this._adapter},removeAdapter:function(){this._adapter&&(this._adapter.dispose(),this._adapter.plugin=null,this._adapter.off(o.Event.START,this._startListener),this._adapter.off(o.Event.JOIN,this._joinListener),this._adapter.off(o.Event.PAUSE,this._pauseListener),this._adapter.off(o.Event.RESUME,this._resumeListener),this._adapter.off(o.Event.SEEK_BEGIN,this._seekBeginListener),this._adapter.off(o.Event.SEEK_END,this._seekEndListener),this._adapter.off(o.Event.BUFFER_BEGIN,this._bufferBeginListener),this._adapter.off(o.Event.BUFFER_END,this._bufferEndListener),this._adapter.off(o.Event.ERROR,this._errorListener),this._adapter.off(o.Event.STOP,this._stopListener),this._adapter.off(o.Event.VIDEO_EVENT,this._videoEventListener),this._adapter=null)},_startListener:function(t){this.isInitiated?0!==this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime):(this.viewTransform.nextView(),this._initComm(),this._startPings());var e=t.data.params||{},r=this.getResource()&&"boolean"==typeof this.getIsLive()&&(this.getIsLive()||"number"==typeof this.getDuration()&&0<this.getDuration())&&this.getTitle();(r=!this.options.forceInit&&(r&&this._isExtraMetadataReady()))&&!this.isInitiated?(this._send(i.WillSendEvent.WILL_SEND_START,i.Service.START,e),this._adSavedError(),this._adSavedManifest(),n.notice(i.Service.START+" "+(e.title||e.mediaResource)),this.isStarted=!0):this.isInitiated||(this.isInitiated=!0,this._adapter.chronos.join.start(),this._send(i.WillSendEvent.WILL_SEND_INIT,i.Service.INIT,e),this._adSavedError(),this._adSavedManifest(),n.notice(i.Service.INIT+" "+(e.title||e.mediaResource)))},_retryStart:function(t){this._isExtraMetadataReady()&&(this._send(i.WillSendEvent.WILL_SEND_START,i.Service.START,{}),this.startDelayed=!1)},_joinListener:function(t){var e=t.data.params||{};this._adsAdapter&&this._adsAdapter.flags.isStarted?(this._adapter.monitor&&this._adapter.monitor.stop(),this._adapter.flags.isJoined=!1,this._adapter.chronos.join.stopTime=0):(this._adsAdapter&&(this._adapter.chronos.join.startTime=Math.min(this._adapter.chronos.join.startTime+(this._totalPrerollsTime||0),(new Date).getTime()),this._totalPrerollsTime=0),this.isInitiated&&!this.isStarted&&(this._isExtraMetadataReady()?this._send(i.WillSendEvent.WILL_SEND_START,i.Service.START,e):this.startDelayed=!0,this._adSavedError(),this._adSavedManifest(),n.notice(i.Service.START+" "+(e.title||e.mediaResource)),this.isStarted=!0),e=t.data.params||{},this._adsAdapter&&this.isBreakStarted&&this._adsAdapter.fireBreakStop(),this._send(i.WillSendEvent.WILL_SEND_JOIN,i.Service.JOIN,e),n.notice(i.Service.JOIN+" "+e.joinDuration+"ms"))},_pauseListener:function(t){this._adapter&&(this._adapter.flags.isBuffering||this._adapter.flags.isSeeking||this._adsAdapter&&this._adsAdapter.flags.isStarted)&&this._adapter.chronos.pause.reset();var e=t.data.params||{};this._send(i.WillSendEvent.WILL_SEND_PAUSE,i.Service.PAUSE,e),n.notice(i.Service.PAUSE+" at "+e.playhead+"s")},_resumeListener:function(t){this._adsAdapter&&this.isBreakStarted&&!this._adsAdapter.flags.isStarted&&this._adsAdapter.fireBreakStop();var e=t.data.params||{};this._send(i.WillSendEvent.WILL_SEND_RESUME,i.Service.RESUME,e),n.notice(i.Service.RESUME+" "+e.pauseDuration+"ms"),this._adapter.chronos.pause.reset()},_seekBeginListener:function(t){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),n.notice("Seek Begin")},_seekEndListener:function(t){var e=t.data.params||{};this._send(i.WillSendEvent.WILL_SEND_SEEK,i.Service.SEEK,e),n.notice(i.Service.SEEK+" to "+e.playhead+" in "+e.seekDuration+"ms")},_bufferBeginListener:function(t){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),n.notice("Buffer Begin")},_bufferEndListener:function(t){var e=t.data.params||{};this._send(i.WillSendEvent.WILL_SEND_BUFFER,i.Service.BUFFER,e),n.notice(i.Service.BUFFER+" to "+e.playhead+" in "+e.bufferDuration+"ms")},_errorListener:function(t){this._blockError(t.data.params)||(this.fireError(t.data.params||{}),this._adSavedError(),this._adSavedManifest())},_blockError:function(t){var e=Date.now();return!!this._lastErrorParams&&(this._lastErrorParams.errorCode===t.errorCode&&this._lastErrorParams.msg===t.msg)&&this._lastErrorTime+5e3>e?(this._lastErrorTime=e,!0):(this._lastErrorTime=e,this._lastErrorParams=t,!1)},_stopListener:function(t){this.fireStop(t.data.params||{})},_isStopReady:function(t){var e=!0;return this.isAdsManifestSent&&this.options["ad.expectedPattern"]&&this.options["ad.expectedPattern"].post&&this.options["ad.expectedPattern"].post[0]>this.playedPostrolls&&(e=!1),e},_videoEventListener:function(t){this._send(i.WillSendEvent.WILL_SEND_VIDEO_EVENT,i.Service.VIDEO_EVENT,t.data.params)},_isExtraMetadataReady:function(t){if(!this.options.waitForMetadata||this.options.pendingMetadata.length<1)return!0;var e=this.requestBuilder.getGetters();return this.options.pendingMetadata.map(function(t){if(e.hasOwnProperty(t))return!!this[e[t]]()}.bind(this)).indexOf(!1)<0}};e.exports=s},{"../adapter/adapter":59,"../constants":83,"../log":93}],106:[function(t,e,r){var o=t("../log"),s=t("../util"),a=t("../constants"),n=t("../comm/transform/transform"),i={fireInit:function(t){this.isInitiated||this.getAdapter()&&(!this.getAdapter()||this.getAdapter().flags.isStarted)||(this.viewTransform.nextView(),this._initComm(),this._startPings(),this.initChrono.start(),this.isInitiated=!0,t=t||{},this._send(a.WillSendEvent.WILL_SEND_INIT,a.Service.INIT,t),this._adSavedError(),this._adSavedManifest(),o.notice(a.Service.INIT+" "+(t.title||t.mediaResource)))},fireError:function(t,e,r,n){this.isInitiated||this.getAdapter()&&this.getAdapter().flags.isStarted||this.viewTransform.nextView(),this._comm||this._initComm();var i=s.buildErrorParams(t,e,r,n);i.code&&delete i.code,this._send(a.WillSendEvent.WILL_SEND_ERROR,a.Service.ERROR,i),this._adSavedError(),this._adSavedManifest(),o.notice(a.Service.ERROR+" "+i.errorLevel+" "+i.errorCode),"fatal"===i.errorLevel&&this.fireStop()},fireFatalError:function(t,e,r,n){this.fireError(t,e,r,n),this.fireStop()},fireStop:function(t){(this.isInitiated||this.isStarted)&&(this._adapter&&(this._adapter.flags.isStopped=!0,this._adapter.monitor&&this._adapter.monitor.stop()),this._adsAdapter&&this.isBreakStarted&&this._adsAdapter.fireBreakStop(),t=t||{},this._send(a.WillSendEvent.WILL_SEND_STOP,a.Service.STOP,t),o.notice(a.Service.STOP+" at "+t.playhead+"s"),this._reset())},fireOfflineEvents:function(t){this.options&&!this.options.offline?this.isInitiated||this._adapter&&this._adapter.flags.isStarted||this._adsAdapter&&this._adsAdapter.flags.isStarted?o.error("Adapters have to be stopped"):(this._offlineParams=t,this.viewTransform.response.code&&this.viewTransform.response.host?this._generateAndSendOffline():(this.offlineReference=this._generateAndSendOffline.bind(this),this.viewTransform.on(n.Event.DONE,this.offlineReference))):o.error("To send offline events, offline option must be disabled")},_generateAndSendOffline:function(){var t=this._offlineParams;for(this._initComm();;){var e=this.requestBuilder.buildBody(a.Service.OFFLINE_EVENTS).viewJson;if(null===e[0])break;var r=this.viewTransform.nextView(),n=e[0].replace(/CODE_PLACEHOLDER/g,r.toString()).replace(/,"sessionId":"SESSION_PLACEHOLDER"/g,"").replace(/,"sessionRoot":"ROOT_PLACEHOLDER"/g,"").replace(/,"parentId":"PARENT_PLACEHOLDER"/g,"");this._send(a.WillSendEvent.WILL_SEND_OFFLINE_EVENTS,a.Service.OFFLINE_EVENTS,t,n,"POST",function(t,e){this.offlineStorage.removeView(e.offlineId)}.bind(this),{offlineId:e[1]})}this.offlineStorage.sent(),this._offlineParams=null}};e.exports=i},{"../comm/transform/transform":80,"../constants":83,"../log":93,"../util":116}],107:[function(t,e,r){var n=t("../util"),i=t("../version"),o={getHost:function(){var t=this.options.host;return this.viewTransform&&this.viewTransform.response&&this.viewTransform.response.host&&(t=this.viewTransform.response.host),n.addProtocol(n.stripProtocol(t),this.options["app.https"])},getUserType:function(){return this.options["user.type"]},isParseHls:function(){return this.options["parse.hls"]},isParseCdnNode:function(){return this.options["parse.cdnNode"]},isLocHeader:function(){return this.options["parse.locationHeader"]},isDash:function(){return this.options["parse.dash"]},getParseCdnNodeList:function(){return this.options["parse.cdnNode.list"]},getParseCdnNodeNameHeader:function(){return this.options["parse.cdnNameHeader"]},getObfuscateIp:function(){return this.options["user.obfuscateIp"]},getExtraparam1:function(){return this.options["content.customDimension.1"]},getExtraparam2:function(){return this.options["content.customDimension.2"]},getExtraparam3:function(){return this.options["content.customDimension.3"]},getExtraparam4:function(){return this.options["content.customDimension.4"]},getExtraparam5:function(){return this.options["content.customDimension.5"]},getExtraparam6:function(){return this.options["content.customDimension.6"]},getExtraparam7:function(){return this.options["content.customDimension.7"]},getExtraparam8:function(){return this.options["content.customDimension.8"]},getExtraparam9:function(){return this.options["content.customDimension.9"]},getExtraparam10:function(){return this.options["content.customDimension.10"]},getExtraparam11:function(){return this.options["content.customDimension.11"]},getExtraparam12:function(){return this.options["content.customDimension.12"]},getExtraparam13:function(){return this.options["content.customDimension.13"]},getExtraparam14:function(){return this.options["content.customDimension.14"]},getExtraparam15:function(){return this.options["content.customDimension.15"]},getExtraparam16:function(){return this.options["content.customDimension.16"]},getExtraparam17:function(){return this.options["content.customDimension.17"]},getExtraparam18:function(){return this.options["content.customDimension.18"]},getExtraparam19:function(){return this.options["content.customDimension.19"]},getExtraparam20:function(){return this.options["content.customDimension.20"]},getAdExtraparam1:function(){return this.options["ad.customDimension.1"]},getAdExtraparam2:function(){return this.options["ad.customDimension.2"]},getAdExtraparam3:function(){return this.options["ad.customDimension.3"]},getAdExtraparam4:function(){return this.options["ad.customDimension.4"]},getAdExtraparam5:function(){return this.options["ad.customDimension.5"]},getAdExtraparam6:function(){return this.options["ad.customDimension.6"]},getAdExtraparam7:function(){return this.options["ad.customDimension.7"]},getAdExtraparam8:function(){return this.options["ad.customDimension.8"]},getAdExtraparam9:function(){return this.options["ad.customDimension.9"]},getAdExtraparam10:function(){return this.options["ad.customDimension.10"]},getPluginInfo:function(){return{lib:i,adapter:this.getAdapterVersion(),adAdapter:this.getAdAdapterVersion()}},getIp:function(){return this.options["network.ip"]},getIsp:function(){return this.options["network.isp"]},getConnectionType:function(){return this.options["network.connectionType"]},getDeviceInfo:function(){var t={};return this.getDeviceCode()&&(t.deviceCode=this.getDeviceCode()),this.getModel()&&(t.model=this.getModel()),this.getBrand()&&(t.brand=this.getBrand()),this.getDeviceType()&&(t.deviceType=this.getDeviceType()),this.getDeviceName()&&(t.deviceName=this.getDeviceName()),this.getOsName()&&(t.osName=this.getOsName()),this.getOsVersion()&&(t.osVersion=this.getOsVersion()),this.getBrowserName()&&(t.browserName=this.getBrowserName()),this.getBrowserVersion()&&(t.browserVersion=this.getBrowserVersion()),this.getBrowserType()&&(t.browserType=this.getBrowserType()),this.getBrowserEngine()&&(t.browserEngine=this.getBrowserEngine()),t!=={}?t:null},getDeviceCode:function(){return this.options["device.code"]},getModel:function(){return this.options["device.model"]},getBrand:function(){return this.options["device.brand"]},getDeviceType:function(){return this.options["device.type"]},getDeviceName:function(){return this.options["device.name"]},getOsName:function(){return this.options["device.osName"]},getOsVersion:function(){return this.options["device.osVersion"]},getBrowserName:function(){return this.options["device.browserName"]},getBrowserVersion:function(){return this.options["device.browserVersion"]},getBrowserType:function(){return this.options["device.browserType"]},getBrowserEngine:function(){return this.options["device.browserEngine"]},getAccountCode:function(){return this.options.accountCode},getUsername:function(){return this.options["user.name"]},getAnonymousUser:function(){return this.options["user.anonymousId"]},getEmail:function(){return this.options["user.email"]},getReferer:function(){if(this.options.referer)return this.options.referer;var t="";return"undefined"!=typeof window&&window.location&&(t=window.location.href),t},getReferral:function(){return"undefined"!=typeof window&&window.document?window.document.referrer:null},getLanguage:function(){return"undefined"!=typeof navigator?navigator.language:null},getNodeHost:function(){return this.options["content.cdnNode"]||this.resourceTransform.getNodeHost()},getNodeType:function(){return this.options["content.cdnType"]||this.resourceTransform.getNodeType()},getNodeTypeString:function(){return this.resourceTransform.getNodeTypeString()},getRequestNumber:function(){return Math.random()},getOfflineView:function(){return this.offlineStorage.getView()},getDeviceUUID:function(){var t=null;return this.options["device.isAnonymous"]||(t=this.uuidGenerator.getKey()),t},getSmartswitchConfigCode:function(){return this.options["smartswitch.configCode"]},getSmartswitchGroupCode:function(){return this.options["smartswitch.groupCode"]},getSmartswitchContractCode:function(){return this.options["smartswitch.contractCode"]},getAppName:function(){return this.options["app.name"]},getAppReleaseVersion:function(){return this.options["app.releaseVersion"]},getIsBlocked:function(){return this.blockDetector?this.blockDetector.isBlocked:null}};e.exports=o},{"../util":116,"../version":117}],108:[function(t,e,r){var n={getContext:function(){return this.options["session.context"]?this.storage.getSession("context"):"Default"},getSessionId:function(){return this.storage.getStorages("session")},getStoredData:function(){return this.storage.getStorages("data")},getDataTime:function(){return this.storage.getStorages("dataTime")},getLastActive:function(){return this.storage.getStorages("lastactive")},setStoredData:function(t){this.storage.setStorages("data",t)},setSessionId:function(t){this.storage.setStorages("session",t)},setDataTime:function(t){this.storage.setStorages("dataTime",t)},setLastActive:function(t){this.storage.setStorages("lastactive",t)},getPageName:function(){if("undefined"!=typeof document&&document.title)return document.title},getIsSessionExpired:function(){var t=(new Date).getTime();return!this.getSessionId()||this.infinity.getFirstActive()<t-this.sessionExpire},getIsDataExpired:function(){var t=(new Date).getTime();return!this.storage.isEnabled()||(!this.getStoredData()||this.infinity.getFirstActive()<t-this.sessionExpire)}};e.exports=n},{}],109:[function(t,e,r){var n=t("../constants"),i=t("../log"),o=t("../comm/request"),s=t("../infinity/infinity"),a={_initInfinity:function(){this.infinity.on(s.Event.NAV,this._navListener.bind(this)),this.infinity.on(s.Event.SESSION_START,this._sessionStartListener.bind(this)),this.infinity.on(s.Event.SESSION_STOP,this._sessionStopListener.bind(this)),this.infinity.on(s.Event.EVENT,this._eventListener.bind(this))},_sendInfinity:function(t,e,r){var n={params:r=this.requestBuilder.buildParams(r,e),plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};this.emit(t,n),this.infinity._comm&&null!==r&&this.options.enabled&&(this.lastServeiceSent=e,this.infinity._comm.sendRequest(new o(null,e,r)))},_navListener:function(t){var e=t.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_NAV,n.Service.NAV,e),this._beat.isRunning||this._beat.start(),i.notice(n.Service.NAV+" "+e.route)},_sessionStartListener:function(t){var e=t.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_SESSION_START,n.Service.SESSION_START,e),this._beat.isRunning||this._beat.start(),i.notice(n.Service.SESSION_START+" "+e.route)},_sessionStopListener:function(t){var e=t.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_SESSION_STOP,n.Service.SESSION_STOP,e),this._beat.isRunning&&this._beat.stop(),i.notice(n.Service.SESSION_STOP+" "+e.route)},_eventListener:function(t){var e=t.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_EVENT,n.Service.EVENT,e),i.notice(n.Service.EVENT+" "+e.name)},_sendBeat:function(t){var e={diffTime:t};this._sendInfinity(n.WillSendEvent.WILL_SEND_BEAT,n.Service.BEAT,e),this.infinity&&this.infinity._setLastActive(),i.verbose(n.Service.BEAT)},getSessionMetrics:function(){var t=this.options["session.metrics"];for(var e in t)if("object"!=typeof t[e]||!t[e].value){var r={};r.value=t[e],t[e]=r}return t}};e.exports=a},{"../comm/request":65,"../constants":83,"../infinity/infinity":92,"../log":93}],110:[function(t,e,r){var n=t("../log"),i=t("../constants"),o={_startPings:function(){this._ping.isRunning||this._ping.start()},_stopPings:function(){this._ping.stop()},_sendPing:function(t){var e={diffTime:t,entities:this.requestBuilder.getChangedEntities()};this._adapter&&(e=this._adapter.flags.isPaused?this.requestBuilder.fetchParams(e,["pauseDuration"]):this.requestBuilder.fetchParams(e,["bitrate","throughput","fps"]),this._adapter.flags.isJoined&&(e=this.requestBuilder.fetchParams(e,["playhead"])),this._adapter.flags.isBuffering&&(e=this.requestBuilder.fetchParams(e,["bufferDuration"])),this._adapter.flags.isSeeking&&(e=this.requestBuilder.fetchParams(e,["seekDuration"])),this._adsAdapter&&!this.options["ad.ignore"]&&(this._adsAdapter.flags.isStarted&&(e=this.requestBuilder.fetchParams(e,["adPlayhead","adViewedDuration","adViewability"]),e=this._adsAdapter.flags.isPaused?this.requestBuilder.fetchParams(e,["adPauseDuration"]):this.requestBuilder.fetchParams(e,["adBitrate"])),this._adsAdapter.flags.isBuffering&&(e=this.requestBuilder.fetchParams(e,["adBufferDuration"])))),this._send(i.WillSendEvent.WILL_SEND_PING,i.Service.PING,e),this.startDelayed&&this._retryStart(),n.verbose(i.Service.PING)}};e.exports=o},{"../constants":83,"../log":93}],111:[function(t,e,r){var n=t("../emitter"),i=t("../timer"),o=t("../chrono"),h=t("../constants"),s=t("../util"),d=t("../comm/request"),a=t("../comm/communication"),u=t("../comm/transform/flow"),c=t("../comm/transform/view"),l=t("../comm/transform/resource"),f=t("../comm/transform/offline"),p=t("./options"),g=t("./storage"),v=t("./offlineStorage"),y=t("./requestbuilder"),m=t("../infinity/infinity"),_=t("../monitors/hybridnetwork"),b=t("../detectors/backgroundDetector"),T=t("../detectors/deviceDetector"),E=t("../detectors/blockDetector"),S=t("../detectors/resizeScrollDetector"),w=t("../deviceUUID/hashgenerator"),A=n.extend({constructor:function(t,e){this.storage=new g,this.uuidGenerator=new w(this),this.infinity=new m(this),this.isInitiated=!1,this.isAdsManifestSent=!1,this.playedPostrolls=0,this.isBreakStarted=!1,this.initChrono=new o,this.options=new p(t),this.storage=new g(null,this.options.disableCookies),this.offlineStorage=new v,this._adapter=null,this._adsAdapter=null,this._ping=new i(this._sendPing.bind(this),5e3),this._beat=new i(this._sendBeat.bind(this),3e4),this._refreshData=new i(this._checkOldData.bind(this),36e5),this._refreshData.start(),this.sessionExpire=1e3*Number(this.storage.getLocal("sessionExpire"))||3e5,this.requestBuilder=new y(this),this.resourceTransform=new l(this),this.lastEventTime=null,e&&this.setAdapter(e),this.restartViewTransform(),this._initInfinity(),this.hybridNetwork=new _,this.deviceDetector=new T,this.backgroundDetector=new b(this),this.resizeScrollDetector=new S(this),this.options["background.enabled"]&&this.backgroundDetector.startDetection(),this.options["ad.blockDetection"]&&(this.blockDetector=new E(this))},_checkOldData:function(){this._adapter&&this._adapter.flags.isStarted||this.infinity.infinityStarted&&!this.infinity.infinityStopped||this.restartViewTransform()},restartViewTransform:function(t){this.viewTransform=new c(this),this.viewTransform.on(c.Event.DONE,this._receiveData.bind(this)),t?this.viewTransform.setData(t):this.getIsDataExpired()||this.storage.getLocal("accCode")!==this.options.accountCode&&this.storage.getSession("accCode")!==this.options.accountCode?(this.storage.removeStorages("data"),this.storage.removeStorages("session"),this.storage.removeLocal("infinityStarted"),this.storage.removeLocal("infinityStopped"),this.viewTransform.init()):this.viewTransform.setData(this.getStoredData())},_receiveData:function(t){this._ping.interval=1e3*t.target.response.pingTime,this._beat.interval=1e3*t.target.response.beatTime,this.sessionExpire=1e3*t.target.response.sessionExpire,this.storage.setStorages("data",t.target.response.msg),this.storage.setStorages("dataTime",(new Date).getTime()),this.storage.setStorages("accCode",this.options.accountCode),this.getIsSessionExpired()?(this.viewTransform.setSessionId(this.viewTransform.response.code),this.storage.setStorages("session",this.viewTransform.response.code)):this.viewTransform.setSessionId(this.getSessionId())},_reset:function(){this._stopPings(),this.resourceTransform=new l(this),this._adapter&&this._adapter.flags.reset(),this.isInitiated=!1,this.isStarted=!1,this.startDelayed=!1,this.isAdsManifestSent=!1,this.initChrono.reset(),this._totalPrerollsTime=0,this.requestBuilder.lastSent.breakNumber=0,this.requestBuilder.lastSent.adNumber=0,this._savedAdManifest=null,this._savedAdError=null,this.playedPostrolls=0,this.isBreakStarted=!1},_send:function(t,e,r,n,i,o,s){var a=(new Date).getTime();this.options.preventZombieViews&&this.lastEventTime&&a>this.lastEventTime+6e5&&this.viewTransform.nextView(),this.lastEventTime=e===h.Service.STOP?null:a,r=this.requestBuilder.buildParams(r,e),this.getIsLive()&&(r.mediaDuration=void 0,r.playhead=void 0);var u={params:r,plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};if(this.emit(t,u),this._comm&&(null!==r||void 0!==i)&&this.options.enabled){this.lastServeiceSent=e;var c={};void 0!==i&&"GET"!==i&&(c.method=i);var l=new d(null,e,r,c);n&&l.setBody(n),this._comm.sendRequest(l,o,s)}},_initComm:function(){this.resourceTransform.init(this.getResource()),this._comm=new a,this._comm.addTransform(new u),this._comm.addTransform(this.viewTransform),this.options&&this.options.offline?this._comm.addTransform(new f(this)):this._comm.addTransform(this.resourceTransform)},getComm:function(){return this._comm},setOptions:function(t){t&&(this.options.setOptions(t),"boolean"==typeof t["background.enabled"]&&(t["background.enabled"]?this.backgroundDetector.startDetection():this.backgroundDetector.stopDetection()))},disable:function(){this.setOptions({enabled:!1})},enable:function(){this.setOptions({enabled:!0})}},{Event:h.WillSendEvent});s.assign(A.prototype,t("./plugin+content")),s.assign(A.prototype,t("./plugin+getters")),s.assign(A.prototype,t("./plugin+content+getters")),s.assign(A.prototype,t("./plugin+ads")),s.assign(A.prototype,t("./plugin+ads+getters")),s.assign(A.prototype,t("./plugin+pings")),s.assign(A.prototype,t("./plugin+fire")),s.assign(A.prototype,t("./plugin+infinity")),s.assign(A.prototype,t("./plugin+infinity+getters")),e.exports=A},{"../chrono":63,"../comm/communication":64,"../comm/request":65,"../comm/transform/flow":66,"../comm/transform/offline":67,"../comm/transform/resource":68,"../comm/transform/view":81,"../constants":83,"../detectors/backgroundDetector":84,"../detectors/blockDetector":85,"../detectors/deviceDetector":86,"../detectors/resizeScrollDetector":87,"../deviceUUID/hashgenerator":89,"../emitter":91,"../infinity/infinity":92,"../monitors/hybridnetwork":97,"../timer":115,"../util":116,"./offlineStorage":100,"./options":101,"./plugin+ads":103,"./plugin+ads+getters":102,"./plugin+content":105,"./plugin+content+getters":104,"./plugin+fire":106,"./plugin+getters":107,"./plugin+infinity":109,"./plugin+infinity+getters":108,"./plugin+pings":110,"./requestbuilder":112,"./storage":113}],112:[function(t,e,r){var n=t("../object"),a=t("../log"),i=["accountCode","username","anonymousUser","rendition","deviceInfo","player","title","title2","live","mediaDuration","mediaResource","parsedResource","transactionCode","properties","cdn","playerVersion","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","obfuscateIp","p2pEnabled","pluginVersion","pluginInfo","isp","connectionType","ip","referer","userType","streamingProtocol","householdId","adsBlocked","adsExpected","deviceUUID","smartswitchConfigCode","smartswitchGroupCode","smartswitchContractCode","libVersion","nodeHost","nodeType","appName","appReleaseVersion","package","saga","tvshow","season","titleEpisode","channel","imdbID","gracenoteID","contentType","genre","contentLanguage","subtitles","cost","price","playbackType","email","drm","videoCodec","audioCodec","codecSettings","codecProfile","containerFormat","contentId","contractedResolution"],o=["playhead","adTitle","adPosition","adDuration","adCampaign","adCreativeId","adProvider","adResource","adPlayerVersion","adProperties","adAdapterVersion","extraparam1","extraparam2","extraparam3","extraparam4","extraparam5","extraparam6","extraparam7","extraparam8","extraparam9","extraparam10","fullscreen","audio","skippable"],u=n.extend({constructor:function(t){this._plugin=t,this._adNumber=0,this.lastSent={}},fetchParams:function(t,e,r){t=t||{},e=e||[];for(var n=0;n<e.length;n++){var i=e[n];if(!t[i]){var o=u.getters[i];if(this._plugin[o]){var s=this._plugin[o]();null===s||r&&this.lastSent[i]===s||(t[i]=s,this.lastSent[i]=s)}else a.warn("Trying to call undefined getter "+i+":"+o)}}return t},getGetters:function(){return u.getters},buildBody:function(t){return this.fetchParams(null,u.bodyParams[t],!1)},buildParams:function(t,e){return t=t||{},this.fetchParams(t,u.params[e],!1),this.fetchParams(t,u.differentParams[e],!0),t},getNewAdNumber:function(){var t=this.lastSent.adNumber;return t&&this.lastSent.adPosition===this._plugin.getAdPosition()?t+=1:t=1,this.lastSent.adNumber=t},getChangedEntities:function(){return this.fetchParams({},u.differentParams.entities,!0)}},{params:{"/data":["system","pluginVersion","requestNumber","username"],"/init":i,"/start":i,"/joinTime":["joinDuration","playhead","mediaDuration"],"/pause":["playhead"],"/resume":["pauseDuration","playhead"],"/seek":["seekDuration","playhead"],"/bufferUnderrun":["bufferDuration","playhead"],"/error":["player"].concat(i),"/stop":["bitrate","playhead","pauseDuration"],"/infinity/video/event":[],"/adInit":o,"/adStart":o,"/adJoin":["playhead","adPosition","adJoinDuration","adPlayhead"],"/adPause":["playhead","adPosition","adPlayhead"],"/adResume":["playhead","adPosition","adPlayhead","adPauseDuration"],"/adBufferUnderrun":["playhead","adPosition","adPlayhead","adBufferDuration"],"/adStop":["playhead","adPosition","adPlayhead","adBitrate","adTotalDuration","pauseDuration","adViewedDuration","adViewability"],"/adClick":["playhead","adPosition","adPlayhead"],"/adError":o,"/adManifest":["givenBreaks","expectedBreaks","expectedPattern","breaksTime"],"/adBreakStart":["breakPosition","givenAds","expectedAds"],"/adBreakStop":[],"/adQuartile":["breakPosition","adPosition","adViewedDuration","adViewability"],"/adBlocked":o,"/ping":["droppedFrames","playrate","cdnDownloadedTraffic","p2pDownloadedTraffic","uploadTraffic","latency","packetLoss","packetSent","metrics"],"/infinity/session/start":["accountCode","username","anonymousUser","navContext","route","page","referer","referral","language","deviceInfo","adsBlocked","deviceUUID","libVersion","appName","appReleaseVersion"],"/infinity/session/stop":[],"/infinity/session/nav":["navContext","route","page"],"/infinity/session/beat":["sessionMetrics"],"/infinity/session/event":["accountCode","navContext"],"/offlineEvents":{}},bodyParams:{"/offlineEvents":["viewJson"]},differentParams:{entities:["rendition","title","title2","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","cdn","nodeHost","nodeType","nodeTypeString","subtitles","contentLanguage"]},getters:{requestNumber:"getRequestNumber",playhead:"getPlayhead",playrate:"getPlayrate",fps:"getFramesPerSecond",droppedFrames:"getDroppedFrames",mediaDuration:"getDuration",bitrate:"getBitrate",throughput:"getThroughput",rendition:"getRendition",title:"getTitle",title2:"getTitle2",live:"getIsLive",mediaResource:"getResource",parsedResource:"getParsedResource",transactionCode:"getTransactionCode",properties:"getMetadata",playerVersion:"getPlayerVersion",player:"getPlayerName",cdn:"getCdn",pluginVersion:"getPluginVersion",libVersion:"getLibVersion",userType:"getUserType",streamingProtocol:"getStreamingProtocol",obfuscateIp:"getObfuscateIp",householdId:"getHouseholdId",latency:"getLatency",packetLoss:"getPacketLoss",packetSent:"getPacketSent",metrics:"getVideoMetrics",param1:"getExtraparam1",param2:"getExtraparam2",param3:"getExtraparam3",param4:"getExtraparam4",param5:"getExtraparam5",param6:"getExtraparam6",param7:"getExtraparam7",param8:"getExtraparam8",param9:"getExtraparam9",param10:"getExtraparam10",param11:"getExtraparam11",param12:"getExtraparam12",param13:"getExtraparam13",param14:"getExtraparam14",param15:"getExtraparam15",param16:"getExtraparam16",param17:"getExtraparam17",param18:"getExtraparam18",param19:"getExtraparam19",param20:"getExtraparam20",extraparam1:"getAdExtraparam1",extraparam2:"getAdExtraparam2",extraparam3:"getAdExtraparam3",extraparam4:"getAdExtraparam4",extraparam5:"getAdExtraparam5",extraparam6:"getAdExtraparam6",extraparam7:"getAdExtraparam7",extraparam8:"getAdExtraparam8",extraparam9:"getAdExtraparam9",extraparam10:"getAdExtraparam10",adPosition:"getAdPosition",adPlayhead:"getAdPlayhead",adDuration:"getAdDuration",adCampaign:"getAdCampaign",adCreativeId:"getAdCreativeId",adBitrate:"getAdBitrate",adTitle:"getAdTitle",adResource:"getAdResource",adPlayerVersion:"getAdPlayerVersion",adProperties:"getAdMetadata",adAdapterVersion:"getAdAdapterVersion",givenBreaks:"getGivenBreaks",expectedBreaks:"getExpectedBreaks",expectedPattern:"getExpectedPattern",breaksTime:"getBreaksTime",breakPosition:"getAdPosition",givenAds:"getGivenAds",expectedAds:"getExpectedAds",adsExpected:"getAdsExpected",adViewedDuration:"getAdViewedDuration",adViewability:"getAdViewability",fullscreen:"getIsFullscreen",audio:"getAudioEnabled",skippable:"getIsSkippable",adProvider:"getAdProvider",pluginInfo:"getPluginInfo",isp:"getIsp",connectionType:"getConnectionType",ip:"getIp",deviceInfo:"getDeviceInfo",system:"getAccountCode",accountCode:"getAccountCode",username:"getUsername",anonymousUser:"getAnonymousUser",joinDuration:"getJoinDuration",bufferDuration:"getBufferDuration",seekDuration:"getSeekDuration",pauseDuration:"getPauseDuration",adJoinDuration:"getAdJoinDuration",adBufferDuration:"getAdBufferDuration",adPauseDuration:"getAdPauseDuration",adTotalDuration:"getAdTotalDuration",referer:"getReferer",referral:"getReferral",language:"getLanguage",nodeHost:"getNodeHost",nodeType:"getNodeType",nodeTypeString:"getNodeTypeString",route:"getReferer",navContext:"getContext",page:"getPageName",cdnDownloadedTraffic:"getCdnTraffic",p2pDownloadedTraffic:"getP2PTraffic",p2pEnabled:"getIsP2PEnabled",uploadTraffic:"getUploadTraffic",viewJson:"getOfflineView",deviceUUID:"getDeviceUUID",sessionMetrics:"getSessionMetrics",adsBlocked:"getIsBlocked",smartswitchConfigCode:"getSmartswitchConfigCode",smartswitchGroupCode:"getSmartswitchGroupCode",smartswitchContractCode:"getSmartswitchContractCode",appName:"getAppName",appReleaseVersion:"getAppReleaseVersion",package:"getPackage",saga:"getSaga",tvshow:"getTvShow",season:"getSeason",titleEpisode:"getEpisodeTitle",channel:"getChannel",drm:"getDRM",videoCodec:"getVideoCodec",audioCodec:"getAudioCodec",codecSettings:"getCodecSettings",codecProfile:"getCodecProfile",containerFormat:"getContainerFormat",contentId:"getID",imdbID:"getImdbId",gracenoteID:"getGracenoteID",contentType:"getType",genre:"getGenre",contentLanguage:"getVideoLanguage",subtitles:"getSubtitles",contractedResolution:"getContractedResolution",cost:"getCost",price:"getPrice",playbackType:"getPlaybackType",email:"getEmail"}});e.exports=u},{"../log":93,"../object":98}],113:[function(t,e,r){var n=t("../object"),i=t("../log"),o=n.extend({constructor:function(t,e){this.prefix=t||"youbora",this.disableCookies=e},setLocal:function(t,e){try{if("undefined"!=typeof localStorage&&localStorage)return localStorage.setItem(this.prefix+"."+t,e);if(!this.disableCookies)return this._setCookie(this.prefix+"."+t,e)}catch(t){i.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},isEnabled:function(){try{if(!this.disableCookies)return!0;localStorage.setItem(this.prefix+".test","true"),localStorage.removeItem(this.prefix+".test")}catch(t){return!1}},getLocal:function(t){try{if("undefined"!=typeof localStorage&&localStorage)return localStorage.getItem(this.prefix+"."+t);if(!this.disableCookies)return this._getCookie(this.prefix+"."+t)}catch(t){i.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},removeLocal:function(t){try{if("undefined"!=typeof localStorage&&localStorage)return localStorage.removeItem(this.prefix+"."+t);if(!this.disableCookies)return this._removeCookie(this.prefix+"."+t)}catch(t){i.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},setSession:function(t,e){try{if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage.setItem(this.prefix+"."+t,e);if(!this.disableCookies)return this._setCookie(this.prefix+".session."+t,e)}catch(t){i.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},getSession:function(t){try{if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage.getItem(this.prefix+"."+t);if(!this.disableCookies)return this._getCookie(this.prefix+".session."+t)}catch(t){i.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},removeSession:function(t){try{if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage.removeItem(this.prefix+"."+t);if(!this.disableCookies)return this._removeCookie(this.prefix+".session."+t)}catch(t){i.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},getStorages:function(t){return this.getSession(t)||this.getLocal(t)},setStorages:function(t,e){this.setSession(t,e),this.setLocal(t,e)},removeStorages:function(t){this.removeSession(t),this.removeLocal(t)},_setCookie:function(t,e){"undefined"!=typeof document&&(document.cookie=t+"="+e+";")},_getCookie:function(t){if("undefined"!=typeof document)for(var e=t+"=",r=decodeURIComponent(document.cookie).split(";"),n=0;n<r.length;n++){for(var i=r[n];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(e))return i.substring(e.length,i.length)}return null},_removeCookie:function(t){"undefined"!=typeof document&&(document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;")}});e.exports=o},{"../log":93,"../object":98}],114:[function(t,e,r){e.exports=function(){Function.prototype.bind=Function.prototype.bind||function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function e(){}function r(){return o.apply(this instanceof e?this:t||window,i.concat(n.call(arguments)))}var n=Array.prototype.slice,i=n.call(arguments,1),o=this;return e.prototype=this.prototype,r.prototype=new e,r},Array.prototype.forEach=Array.prototype.forEach||function(t,e){if("function"!=typeof t)throw new TypeError(t+" is not a function!");for(var r=this.length,n=0;n<r;n++)t.call(e,this[n],n,this)}}},{}],115:[function(t,e,r){var n=t("./object"),i=t("./chrono"),o=n.extend({constructor:function(t,e){this.callback=t,this.interval=e||5e3,this.isRunning=!1,this._timer=null,this.chrono=new i},start:function(){this.isRunning||(this.isRunning=!0,this._setTick())},stop:function(){if(this.isRunning=!1,this._timer)try{clearTimeout(this._timer)}catch(t){"undefined"!=typeof atv&&atv.clearTimeout(this._timer)}},_setTick:function(){this.chrono.start();try{this._timer=setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval)}catch(t){"undefined"!=typeof atv&&(this._timer=atv.setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval))}}});e.exports=o},{"./chrono":63,"./object":98}],116:[function(t,e,r){var o=t("./log"),n={stripProtocol:function(t){var e=t;try{e=t.replace(/^(.*?:\/\/|\/\/)/i,"")}catch(t){o.warn(t)}return e},addProtocol:function(t,e){var r="http://localhost/";try{r="http://"+t,e||"undefined"!=typeof window&&0===window.location.protocol.indexOf("https")?r="https://"+t:"undefined"!=typeof window&&0===window.location.protocol.indexOf("http")&&(r="//"+t)}catch(t){o.warn(t)}return r},parseNumber:function(t,e){return!isNaN(t)&&0<=t&&t!==1/0&&t!==-1/0&&null!=t?t:e},logAllEvents:function(t,e,r){try{if(o.logLevel<=o.Level.DEBUG){r=r||function(t){o.debug("Event: "+t.type)};var n=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart"];e&&(n=null===e[0]?(e.shift(),e):n.concat(e));for(var i=0;i<n.length;i++)"function"==typeof t?t.call(window,n[i],r):t.on?t.on(n[i],r):t.addEventListener&&t.addEventListener(n[i],r)}}catch(t){o.error(t)}},buildRenditionString:function(t,e,r){1===arguments.length&&(r=t,e=t=null);var n="";return t&&e&&(n=t+"x"+e),"number"!=typeof r||isNaN(r)||r<1?n:(n&&(n+="@"),(n+=r<1e3?Math.round(r)+"bps":r<1e6?(r=Math.round(r/1e3))+"Kbps":(r=Math.round(r/1e4)/100)+"Mbps")||null)},buildErrorParams:function(t,e,r,n){var i={};return"object"==typeof t?i=t:(i.errorCode=t||"FAILURE",i.msg=e||i.errorCode,i.errorMetadata=r,i.errorLevel=n),i},calculateAdViewability:function(t,e){var r=!0;if("undefined"!=typeof window&&t){var n=t.getBoundingClientRect();if(n.top>=window.innerHeight||n.bottom<=0||n.right<=0||n.left>=window.innerWidth)r=!1;else{var i=Math.trunc(n.height*n.width),o=0<n.top?n.top:0,s=n.bottom>window.innerHeight?window.innerHeight:n.bottom,a=0<n.left?n.left:0;r=i*(e||50)<100*(((n.right>window.innerWidth?window.innerWidth:n.right)-a)*(s-o))}}return r},assign:t("./mixins/assign"),isArray:t("./mixins/isarray")};e.exports=n},{"./log":93,"./mixins/assign":94,"./mixins/isarray":96}],117:[function(t,e,r){e.exports=t("../manifest.json").version},{"../manifest.json":58}],118:[function(t,e,r){var n=i,i={noConflict:function(){return i=n,this}};i.VERSION=t("./version"),i.polyfills=t("./polyfills"),i.polyfills(),i.Object=t("./object"),i.Emitter=t("./emitter"),i.Log=t("./log"),i.Log.loadLevelFromUrl(),i.Util=t("./util"),i.HybridNetwork=t("./monitors/hybridnetwork"),i.Chrono=t("./chrono"),i.Timer=t("./timer"),i.Constants=t("./constants"),i.Request=t("./comm/request"),i.Communication=t("./comm/communication"),i.Transform=t("./comm/transform/transform"),i.ViewTransform=t("./comm/transform/view"),i.ResourceTransform=t("./comm/transform/resource"),i.CdnParser=t("./comm/transform/resourceparsers/cdnparser"),i.HlsParser=t("./comm/transform/resourceparsers/hlsparser"),i.OfflineParser=t("./comm/transform/offline"),i.LocationheaderParser=t("./comm/transform/resourceparsers/locationheaderparser"),i.Options=t("./plugin/options"),i.Plugin=t("./plugin/plugin"),i.Storage=t("./plugin/storage"),i.RequestBuilder=t("./plugin/requestbuilder"),i.PlayheadMonitor=t("./adapter/playheadmonitor"),i.Adapter=t("./adapter/adapter"),i.adapters={},i.Infinity=t("./infinity/infinity"),i.BackgroundDetector=t("./detectors/backgroundDetector"),i.DeviceDetector=t("./detectors/deviceDetector"),i.UUIDGenerator=t("./deviceUUID/hashgenerator"),i.registerAdapter=function(t,e){this.adapters[t]=e}.bind(i),i.unregisterAdapter=function(t){this.adapters[t]=null}.bind(i),e.exports=i},{"./adapter/adapter":59,"./adapter/playheadmonitor":62,"./chrono":63,"./comm/communication":64,"./comm/request":65,"./comm/transform/offline":67,"./comm/transform/resource":68,"./comm/transform/resourceparsers/cdnparser":69,"./comm/transform/resourceparsers/hlsparser":78,"./comm/transform/resourceparsers/locationheaderparser":79,"./comm/transform/transform":80,"./comm/transform/view":81,"./constants":83,"./detectors/backgroundDetector":84,"./detectors/deviceDetector":86,"./deviceUUID/hashgenerator":89,"./emitter":91,"./infinity/infinity":92,"./log":93,"./monitors/hybridnetwork":97,"./object":98,"./plugin/options":101,"./plugin/plugin":111,"./plugin/requestbuilder":112,"./plugin/storage":113,"./polyfills":114,"./timer":115,"./util":116,"./version":117}],119:[function(t,e,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("resources")),o=n(t("youboralib"));t("event-source-polyfill"),window.videojs=t("video.js").default||t("video.js"),t("@leochen1216/videojs-chromecast"),window.Hls=t("hls.js"),t("youbora-adapter-videojs");var s={accountCode:i.default.YOUBORA_ACCOUNT||"bloombergdev","parse.hls":!0,httpSecure:!0};window.YouboraLib=o.default,window.youboraPlugin=new o.default.Plugin(s),o.default.registerAdapter("Ima",t("youbora-adapter-ima")),window.ns_=t("../vendor/comscore/streamsense.min.js"),window.initMoatTracking=t("../vendor/moat/moat_analytics.js"),window.initDaiMoatTracking=t("../vendor/moatDai/moat_dai_analytics.js"),window.xml=t("../vendor/parser/xml.min.js"),t("../vendor/chromecast/cast_sender.js");var a=t("ms.byzantium-core").ByzantiumCore,u=t("bridge-web");window.__bloomberg__=window.__bloomberg__||{};var c=window.__bloomberg__;c.byzantium=c.byzantium||new a(new u)},{"../vendor/chromecast/cast_sender.js":120,"../vendor/comscore/streamsense.min.js":121,"../vendor/moat/moat_analytics.js":122,"../vendor/moatDai/moat_dai_analytics.js":123,"../vendor/parser/xml.min.js":124,"@babel/runtime/helpers/interopRequireDefault":1,"@leochen1216/videojs-chromecast":3,"bridge-web":6,"event-source-polyfill":8,"hls.js":12,"ms.byzantium-core":15,resources:"resources","video.js":38,"youbora-adapter-ima":46,"youbora-adapter-videojs":48,youboralib:118}],120:[function(t,e,r){!function(){function t(t){return!!document.currentScript&&(-1!=document.currentScript.src.indexOf("?"+t)||-1!=document.currentScript.src.indexOf("&"+t))}function n(){return"function"==typeof window.__onGCastApiAvailable?window.__onGCastApiAvailable:null}function e(){if(i){function t(){0==--e&&r&&r(!0)}var e=2,r=n();window.__onGCastApiAvailable=t,s("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js",a,t)}}var r=t("loadGamesSDK")?"/cast_game_sender.js":"/cast_sender.js",i=t("loadCastFramework")||t("loadCastApplicationFramework"),o=function(t){t.length?s(t.shift(),function(){o(t)}):a()},s=function(t,e,r){var n=document.createElement("script");n.onerror=e,r&&(n.onload=r),n.src=t,(document.head||document.documentElement).appendChild(n)},a=function(){var t=n();t&&t(!1,"No cast extension found")};if(0<=window.navigator.userAgent.indexOf("Android")&&0<=window.navigator.userAgent.indexOf("Chrome/")&&window.navigator.presentation){e();var u=window.navigator.userAgent.match(/Chrome\/([0-9]+)/);o(["//www.gstatic.com/eureka/clank/"+(u?parseInt(u[1],10):0)+r,"//www.gstatic.com/eureka/clank"+r])}else!window.chrome||!window.navigator.presentation||0<=window.navigator.userAgent.indexOf("Edge")?a():(e(),o(["pkedcjkdefgpdelpbcmbmeomcjbeemfm","enhhojjnijigcajfphajepfemndkmdlo"].map(function(t){return"chrome-extension://"+t+r})))}()},{}],121:[function(t,e,r){(function(t){(function(t,e,r,n,i){var it,m,_,b,T,E,o;try{(it=it||{}).PlatformAPIs=it.PlatformAPIs||{Standard:0,Trilithium:1,AppleTV:2,Chromecast:3},it.Utils=it.Utils||{uid:(o=1,function(){return+new Date+"_"+o++}),filter:function(t,e){var r={};for(var n in e)e.hasOwnProperty(n)&&t(e[n])&&(r[n]=e[n]);return r},extend:function(t){var e,r=arguments.length;t=t||{};for(var n=1;n<r;n++)if(e=arguments[n])for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},getString:function(t,e){var r=String(t);return null==t?e||"na":r},getLong:function(t,e){var r=Number(t);return null==t||isNaN(r)?e||0:r},getInteger:function(t,e){var r=Number(t);return null==t||isNaN(r)?e||0:r},getBoolean:function(t,e){var r="true"==String(t).toLowerCase();return null==t?e||!1:r},isNotEmpty:function(t){return void 0!==t&&null!=t&&void 0!==t.length&&0<t.length},indexOf:function(r,t){var n=-1;return this.forEach(t,function(t,e){t==r&&(n=e)}),n},forEach:function(t,e,r){try{if("function"==typeof e)if(r=void 0!==r?r:null,"number"!=typeof t.length||void 0===t[0]){var n=void 0!==t.__proto__;for(var i in t)t.hasOwnProperty(i)&&(!n||n&&void 0===t.__proto__[i])&&"function"!=typeof t[i]&&e.call(r,t[i],i)}else for(var o=0,s=t.length;o<s;o++)e.call(r,t[o],o)}catch(t){}},regionMatches:function(t,e,r,n,i){if(e<0||n<0||e+i>t.length||n+i>r.length)return!1;for(;0<=--i;)if(t.charAt(e++)!=r.charAt(n++))return!1;return!0},size:function(t){var e=0;for(var r in t)t.hasOwnProperty(r)&&e++;return e},log:function(t,e){if(void 0!==e&&e&&"undefined"!=typeof console&&console){var r=new Date,n=r.getHours()+":"+r.getMinutes()+":"+r.getSeconds();console.log(n,t)}},isTrue:function(t){return void 0!==t&&("string"==typeof t?"true"===(t=t.toLowerCase())||"1"===t||"on"===t:!!t)},toString:function(t){if(void 0===t)return"undefined";if("string"==typeof t)return t;if("[object Array]"===Object.prototype.toString.call(t))return t.join(",");if(0<this.size(t)){var e="";for(var r in t)t.hasOwnProperty(r)&&(e+=r+":"+t[r]+";");return e}return t.toString()},exists:function(t){return void 0!==t&&null!=t},firstGreaterThan0:function(){for(var t=0,e=arguments.length;t<e;t++){var r=arguments[t];if(0<r)return r}return 0},cloneObject:function(t){if(null==t||"object"!=typeof t)return t;var i;function e(){}function r(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}function n(){this.copiedObjects=[];var e=this;this.recursiveDeepCopy=function(t){return e.deepCopy(t)},this.depth=0}function o(t,e){var r=new n;return e&&(r.maxDepth=e),r.deepCopy(t)}return(i=[],r.prototype={constructor:r,canCopy:function(){return!1},create:function(t){},populate:function(t,e,r){}},n.prototype={constructor:n,maxDepth:256,cacheResult:function(t,e){this.copiedObjects.push([t,e])},getCachedResult:function(t){for(var e=this.copiedObjects,r=e.length,n=0;n<r;n++)if(e[n][0]===t)return e[n][1]},deepCopy:function(t){if(null===t)return null;if("object"!=typeof t)return t;var e=this.getCachedResult(t);if(e)return e;for(var r=0;r<i.length;r++){var n=i[r];if(n.canCopy(t))return this.applyDeepCopier(n,t)}throw new Error("Unable to clone the following object "+t)},applyDeepCopier:function(t,e){var r=t.create(e);if(this.cacheResult(e,r),this.depth++,this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");return t.populate(this.recursiveDeepCopy,e,r),this.depth--,r}},o.DeepCopier=r,o.deepCopiers=i,o.register=function(t){t instanceof r||(t=new r(t)),i.unshift(t)},o.register({canCopy:function(){return!0},create:function(t){return t instanceof t.constructor?function(t){return"object"==typeof t?(e.prototype=t,new e):t}(t.constructor.prototype):{}},populate:function(t,e,r){for(var n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}}),o.register({canCopy:function(t){return t instanceof Array},create:function(t){return new t.constructor},populate:function(t,e,r){for(var n=0;n<e.length;n++)r.push(t(e[n]));return r}}),o.register({canCopy:function(t){return t instanceof Date},create:function(t){return new Date(t)}}),o.register({canCopy:function(t){return function(t){return"undefined"!=typeof window&&window&&window.Node?t instanceof Node:t===document||"number"==typeof t.nodeType&&t.attributes&&t.childNodes&&t.cloneNode}(t)},create:function(t){return t===document?document:t.cloneNode(!1)},populate:function(t,e,r){if(e===document)return document;if(e.childNodes&&e.childNodes.length)for(var n=0;n<e.childNodes.length;n++){var i=t(e.childNodes[n]);r.appendChild(i)}}}),{deepCopy:o}).deepCopy(t)},safeGet:function(t,e){return e=this.exists(e)?e:"",this.exists(t)?t:e},getBrowserName:function(){if("undefined"==typeof navigator||!navigator.hasOwnProperty("userAgent")||!navigator.hasOwnProperty("appName"))return"";var t,e,r=navigator.userAgent,n=navigator.appName;return-1!=(e=r.indexOf("Opera"))||-1!=(e=r.indexOf("OPR/"))?n="Opera":-1!=(e=r.indexOf("Android"))?n="Android":-1!=(e=r.indexOf("Chrome"))?n="Chrome":-1!=(e=r.indexOf("Safari"))?n="Safari":-1!=(e=r.indexOf("Firefox"))?n="Firefox":-1!=(e=r.indexOf("IEMobile"))?n="Internet Explorer Mobile":"Microsoft Internet Explorer"==n||"Netscape"==n?n="Internet Explorer":(t=r.lastIndexOf(" ")+1)<(e=r.lastIndexOf("/"))&&(n=r.substring(t,e)).toLowerCase()==n.toUpperCase()&&(n=navigator.appName),n},getBrowserFullVersion:function(){if("undefined"==typeof navigator||!navigator.hasOwnProperty("userAgent")||!navigator.hasOwnProperty("appName")||!navigator.hasOwnProperty("appVersion"))return"";var t,e,r,n=navigator.userAgent,i=navigator.appName,o=""+parseFloat(navigator.appVersion);return-1!=(e=n.indexOf("Opera"))?(o=n.substring(e+6),-1!=(e=n.indexOf("Version"))&&(o=n.substring(e+8))):-1!=(e=n.indexOf("OPR/"))?o=n.substring(e+4):-1!=(e=n.indexOf("Android"))?o=n.substring(e+11):-1!=(e=n.indexOf("Chrome"))?o=n.substring(e+7):-1!=(e=n.indexOf("Safari"))?(o=n.substring(e+7),-1!=(e=n.indexOf("Version"))&&(o=n.substring(e+8))):-1!=(e=n.indexOf("Firefox"))?o=n.substring(e+8):"Microsoft Internet Explorer"==i?null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(n)&&(o=parseFloat(RegExp.$1)):"Netscape"==i?null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(n)&&(o=parseFloat(RegExp.$1)):n.lastIndexOf(" ")+1<(e=n.lastIndexOf("/"))&&(o=n.substring(e+1)),-1!=(r=(o=o.toString()).indexOf(";"))&&(o=o.substring(0,r)),-1!=(r=o.indexOf(" "))&&(o=o.substring(0,r)),-1!=(r=o.indexOf(")"))&&(o=o.substring(0,r)),t=parseInt(""+o,10),isNaN(t)&&(o=""+parseFloat(navigator.appVersion)),o},browserAcceptsLargeURLs:function(){return"undefined"!=typeof window&&null===window.ActiveXObject||!0}},it.StreamSense=it.StreamSense||function(){function t(){var r="undefined"!=typeof localStorage?localStorage:{};J.extend(this,{get:function(t){return r["cs_"+t]},set:function(t,e){r["cs_"+t]=e},has:function(t){return"cs_"+t in r},remove:function(t){delete r["cs_"+t]},clear:function(){for(var t in r)r.hasOwnProperty(t)&&delete r[t]}})}function e(t,e){if("undefined"!=typeof Image){var r=new Image;r.onload=function(){e&&e(200),r=null},r.onerror=function(){e&&e(),r=null},r.src=t}}function r(t,e,r){r&&"undefined"!=typeof setTimeout&&setTimeout(r,0)}var n,i,o,s,a,u,c,l,h,d,f,p,J=it.Utils,g=(c="undefined"!=typeof encodeURIComponent?encodeURIComponent:escape,l="undefined"!=typeof decodeURIComponent?decodeURIComponent:unescape,h="cs_dir_",d="cs_file_",f="undefined"!=typeof localStorage?localStorage:{},p={},{dir:function(t){var e=h+t,r=p[e];if(r)return r.slice();var n=f[e];if(n){r=[];for(var i=0,o=(n=n.split("|")).length;i<o;i++)0<n[i].length&&r.push(l(n[i]));return(p[e]=r).slice()}return null},append:function(t,e,r){var n=g.read(t,e);n?n+=r:n=r,g.write(t,e,n)},write:function(t,e,r){var n=g.dir(t);n||(function(t){var e=h+t;f[e]="",p[e]=[]}(t),n=[]),-1==J.indexOf(e,n)&&function(t,e){var r=h+t;f[r]+="|"+c(e),p[r].push(e)}(t,e),function(t,e,r){f[d+t+e]=r}(t,e,r)},deleteFile:function(t,e){var r=g.dir(t);return!!r&&-1!=J.indexOf(e,r)&&(function(t,e){var r=h+t,n=p[r];n.splice(J.indexOf(e,n),1);for(var i=[],o=0,s=n.length;o<s;o++)i.push(c(n[o]));f[r]=i.join("|"),delete f[d+t+e]}(t,e),!0)},read:function(t,e){var r=g.dir(t);return r?-1==J.indexOf(e,r)?null:function(t,e){return f[d+t+e]}(t,e):null}}),v={dir:function(){return null},append:function(t,e,r){},write:function(t,e,r){},deleteFile:function(){return!1},read:function(){return null}},Q={PLATFORM:"generic",httpGet:e,httpPost:r,Storage:t,IO:v,getCrossPublisherId:function(){return null},getAppName:function(){return Constants.UNKNOWN_VALUE},getAppVersion:function(){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return""},getPlatformVersion:function(){return""},getPlatformName:function(){return"js"},getRuntimeName:function(){return""},getRuntimeVersion:function(){return""},getResolution:function(){return""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(t,e,r){return setTimeout(t,e,r)},clearTimeout:function(t){return clearTimeout(t)},getDeviceArchitecture:function(){return Constants.UNKNOWN_VALUE},getConnectionType:function(){return Constants.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return Constants.UNKNOWN_VALUE}},y=(u=a=s=null,{PLATFORM:"trilithium",httpGet:function(t,e){"undefined"!=typeof engine&&e&&"undefined"!=typeof setTimeout&&setTimeout(e,0),engine.createHttpClient().createRequest("GET",t,null).start(),e&&setTimeout(e,0)},httpPost:r,Storage:t,IO:v,getCrossPublisherId:function(){return T(),u},getAppName:function(){return J.isNotEmpty(engine.stats.application.name)?engine.stats.application.name:Constants.UNKNOWN_VALUE},getAppVersion:function(){return J.isNotEmpty(engine.stats.application.version)?engine.stats.application.version:Constants.UNKNOWN_VALUE},getVisitorId:function(){return T(),s},getVisitorIdSuffix:function(){return a},getDeviceName:function(){return J.safeGet(engine.stats.device.platform,"")},getPlatformVersion:function(){return J.safeGet(engine.stats.device.version,"")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"trilithium"},getRuntimeVersion:function(){return""},getResolution:function(){return"undefined"!=typeof screen&&void 0!==screen.height&&void 0!==screen.width?screen.height+"x"+screen.width:""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:function(){return"undefined"!=typeof engine&&void 0!==engine.stats}}),m=(o=i=n=null,{PLATFORM:"atv",httpGet:function(t,e){if("undefined"!=typeof atv&&"function"==typeof atv.setTimeout){"undefined"!=typeof XMLHttpRequest&&e&&atv.setTimeout(e,0);var r=new XMLHttpRequest;r.open("GET",t,!0),r.onreadystatechange=function(){4===r.readyState&&(e&&e(r.status),r=null)},r.send()}},httpPost:function(t,e,r){if("undefined"!=typeof atv&&"function"==typeof atv.setTimeout){"undefined"!=typeof XMLHttpRequest&&r&&atv.setTimeout(r,0);var n=new XMLHttpRequest;n.open("POST",t,!0),n.onreadystatechange=function(){4===n.readyState&&(r&&r(n.status),n=null)},n.send(e)}},Storage:function(){var r="undefined"!=typeof atv&&void 0!==atv.localStorage&&atv.localStorage||null;J.extend(this,{get:function(t){return r&&t&&r.getItem("cs_"+t)||null},set:function(t,e){r&&t&&(r["cs_"+t]=e)},has:function(t){return r&&t&&null!=r.getItem("cs_"+t)||!1},remove:function(t){r&&t&&r.removeItem("cs_"+t)},clear:function(){}})},IO:v,getCrossPublisherId:function(){return b(),o},getAppName:function(){return Constants.UNKNOWN_VALUE},getAppVersion:function(){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return b(),n},getVisitorIdSuffix:function(){return i},getDeviceName:function(){return"Apple TV"},getPlatformVersion:function(){return"undefined"!=typeof atv&&void 0!==atv.device&&J.safeGet(atv.device.softwareVersion,"")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"atv"},getRuntimeVersion:function(){return"undefined"!=typeof atv&&void 0!==atv.device&&J.safeGet(atv.device.softwareVersion,"")},getResolution:function(){return void 0!==atv.device&&void 0!==atv.device.screenFrame&&void 0!==atv.device.screenFrame.height&&void 0!==atv.device.screenFrame.width?atv.device.screenFrame.height+"x"+atv.device.screenFrame.width:""},getLanguage:function(){return"undefined"!=typeof atv&&void 0!==atv.device&&J.safeGet(atv.device.language,"")},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},setTimeout:function(t,e,r){return"undefined"!=typeof atv&&void 0!==atv.setTimeout&&atv.setTimeout(t,e,r)},clearTimeout:function(t){return"undefined"!=typeof atv&&void 0!==atv.clearTimeout&&atv.clearTimeout(t)},isCompatible:function(){return"undefined"==typeof window&&"undefined"!=typeof atv}}),_={PLATFORM:"chromecast",httpGet:e,httpPost:function(t,e,r){"undefined"!=typeof XMLHttpRequest&&r&&"undefined"!=typeof setTimeout&&setTimeout(r,0);var n=new XMLHttpRequest;n.open("POST",t,!0),n.onreadystatechange=function(){4===n.readyState&&(r&&r(n.status),n=null)},n.send(e)},Storage:t,IO:g,getCrossPublisherId:function(){return null},getAppName:function(){return"undefined"!=typeof document&&document.title||Constants.UNKNOWN_VALUE},getAppVersion:function(){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return+new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return"chromecast"},getPlatformVersion:function(){return"5"},getPlatformName:function(){return"js"},getRuntimeName:function(){return"html"},getRuntimeVersion:function(){return J.safeGet(J.getBrowserName()+" "+J.getBrowserFullVersion(),Constants.UNKNOWN_VALUE)},getResolution:function(){var t="undefined"!=typeof window&&J.exists(window.screen)&&J.exists(window.screen.availWidth)?window.screen.availWidth:0,e="undefined"!=typeof window&&J.exists(window.screen)&&J.exists(window.screen.availHeight)?window.screen.availHeight:0;return 0<t&&0<e?t+"x"+e:""},getLanguage:function(){return"undefined"!=typeof window&&J.exists(window.navigator)&&J.safeGet(window.navigator.language,"")||""},getPackageName:function(){return"undefined"!=typeof castReceiverManager&&castReceiverManager.getApplicationData&&"function"==typeof castReceiverManager.getApplicationData&&castReceiverManager.getApplicationData().namespaces&&castReceiverManager.getApplicationData().namespaces[0]||""},isConnectionAvailable:function(){return"undefined"!=typeof window&&J.exists(window.navigator)&&J.safeGet(window.navigator.onLine,!0)||!0},isCompatible:function(){return"undefined"!=typeof window&&"undefined"!=typeof document},getConnectionType:function(){return Constants.UNKNOWN_VALUE}};function b(){null==n&&(i="undefined"!=typeof atv&&void 0!==atv.device&&atv.device.idForVendor?(n=J.safeGet(atv.device.idForVendor,""),"62"):(n=+new Date+~~(1e3*Math.random()),"72"),o=null)}function T(){if(null==s){var t=J.isNotEmpty(engine.stats.device.id)?engine.stats.device.id:J.isNotEmpty(engine.stats.network.mac)?engine.stats.network.mac:null;u=null!=t?(a="31",s=t):(s=+new Date+~~(1e3*Math.random()),a="72",null)}}Q.autoSelect=function(){y.isCompatible()?it.Utils.extend(Q,y):m.isCompatible()&&it.Utils.extend(Q,m)},Q.setPlatformAPI=function(t){var e=!1;switch(t){case it.PlatformAPIs.Trilithium:it.Utils.extend(Q,y),e=!0;break;case it.PlatformAPIs.AppleTV:it.Utils.extend(Q,m),e=!0;break;case it.PlatformAPIs.Chromecast:J.extend(Q,_),e=!0}e&&(Q.autoSelect=function(){})};var $,Z,E="undefined"!=typeof window&&"undefined"!=typeof document;Z=E?($=window,document):($={},{location:{href:""},title:"",URL:"",referrer:"",cookie:""}),(J=J||{}).filterMap=function(t,e){for(var r in t)t.hasOwnProperty(r)&&-1==J.indexOf(r,e)&&delete t[r]},J.getKeys=function(t,e){var r,n=[];for(r in t)e&&!e.test(r)||!t.hasOwnProperty(r)||(n[n.length]=r);return n};var S,w,A,k,C,x,tt=(x=["play","pause","end","buffer","keep-alive","hb","custom","ad_play","ad_pause","ad_end","ad_click"],{PLAY:0,PAUSE:1,END:2,BUFFER:3,KEEP_ALIVE:4,HEART_BEAT:5,CUSTOM:6,AD_PLAY:7,AD_PAUSE:8,AD_END:9,AD_CLICK:10,toString:function(t){return x[t]}}),et=(C=[tt.END,tt.PLAY,tt.PAUSE,tt.BUFFER],{IDLE:0,PLAYING:1,PAUSED:2,BUFFERING:3,toEventType:function(t){return C[t]}}),R={ADPLAY:tt.AD_PLAY,ADPAUSE:tt.AD_PAUSE,ADEND:tt.AD_END,ADCLICK:tt.AD_CLICK},rt={STREAMSENSE_VERSION:"4.1505.18",DEFAULT_PLAYERNAME:"streamsense",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sq","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_pt","ns_st_pa","ns_st_ad","ns_st_li","ns_st_ci","ns_ap_jb","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_bt","ns_st_bp","ns_st_pc","ns_st_pp","ns_st_br","ns_st_ub","ns_st_vo","ns_st_ws","ns_st_pl","ns_st_pr","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er"]},P=function(){function n(t,e){var r=e[t];null!=r&&(i[t]=r)}var e,i,o=this,s=0,a=0,u=0,r=0,c=0,l=0;J.extend(this,{reset:function(t){null!=t&&0<t.length?J.filterMap(i,t):i={},i.hasOwnProperty("ns_st_cl")||(i.ns_st_cl="0"),i.hasOwnProperty("ns_st_pn")||(i.ns_st_pn="1"),i.hasOwnProperty("ns_st_tp")||(i.ns_st_tp="1"),o.setPauses(0),o.setStarts(0),o.setBufferingTime(0),o.setBufferingTimestamp(-1),o.setPlaybackTime(0),o.setPlaybackTimestamp(-1)},setLabels:function(t,e){null!=t&&J.extend(i,t),o.setRegisters(i,e)},getLabels:function(){return i},setLabel:function(t,e){var r={};r[t]=e,o.setLabels(r,null)},getLabel:function(t){return i[t]},getClipId:function(){return void 0!==e&&null!=e||o.setClipId("1"),e},setClipId:function(t){e=t},setRegisters:function(t,e){var r=t.ns_st_cn;null!=r&&(o.setClipId(r),delete t.ns_st_cn),null!=(r=t.ns_st_bt)&&(u=Number(r),delete t.ns_st_bt),n("ns_st_cl",t),n("ns_st_pn",t),n("ns_st_tp",t),n("ns_st_ub",t),n("ns_st_br",t),e!=et.PLAYING&&null!=e||null!=(r=t.ns_st_sq)&&(a=Number(r),delete t.ns_st_sq),e==et.BUFFERING||null!=(r=t.ns_st_pt)&&(c=Number(r),delete t.ns_st_pt),e!=et.PAUSED&&e!=et.IDLE&&null!=e||null!=(r=t.ns_st_pc)&&(s=Number(r),delete t.ns_st_pc)},createLabels:function(t,e){var r=e||{};return r.ns_st_cn=o.getClipId(),r.ns_st_bt=String(o.getBufferingTime()),t!=tt.PLAY&&null!=t||(r.ns_st_sq=String(a)),t!=tt.PAUSE&&t!=tt.END&&t!=tt.KEEP_ALIVE&&t!=tt.HEART_BEAT&&null!=t||(r.ns_st_pt=String(o.getPlaybackTime()),r.ns_st_pc=String(s)),J.extend(r,o.getLabels()),r},incrementPauses:function(){s++},incrementStarts:function(){a++},getBufferingTime:function(){var t=u;return 0<=r&&(t+=+new Date-r),t},setBufferingTime:function(t){u=t},getPlaybackTime:function(){var t=c;return 0<=l&&(t+=+new Date-l),t},setPlaybackTime:function(t){c=t},getPlaybackTimestamp:function(){return l},setPlaybackTimestamp:function(t){l=t},getBufferingTimestamp:function(){return r},setBufferingTimestamp:function(t){r=t},getPauses:function(){return s},setPauses:function(t){s=t},getStarts:function(){return a},setStarts:function(t){a=t}}),i={},o.reset()},nt=function(){var n,r,i=this,o=null,s=0,a=0,u=0,c=0,l=0,e=0,h=!1;J.extend(this,{reset:function(t){null!=t&&0<t.length?J.filterMap(r,t):r={},i.setPlaylistId(+new Date+"_"+e),i.setBufferingTime(0),i.setPlaybackTime(0),i.setPauses(0),i.setStarts(0),i.setRebufferCount(0),h=!1},setLabels:function(t,e){null!=t&&J.extend(r,t),i.setRegisters(r,e)},getLabels:function(){return r},setLabel:function(t,e){var r={};r[t]=e,i.setLabels(r,null)},getLabel:function(t){return r[t]},getClip:function(){return o},getPlaylistId:function(){return n},setPlaylistId:function(t){n=t},setRegisters:function(t,e){var r=t.ns_st_sp;null!=r&&(s=Number(r),delete t.ns_st_sp),null!=(r=t.ns_st_bc)&&(u=Number(r),delete t.ns_st_bc),null!=(r=t.ns_st_bp)&&(c=Number(r),delete t.ns_st_bp),null!=(r=t.ns_st_id)&&(n=r,delete t.ns_st_id),e==et.BUFFERING||null!=(r=t.ns_st_pa)&&(l=Number(r),delete t.ns_st_pa),e!=et.PAUSED&&e!=et.IDLE&&null!=e||null!=(r=t.ns_st_pp)&&(a=Number(r),delete t.ns_st_pp)},createLabels:function(t,e){var r=e||{};return r.ns_st_bp=String(i.getBufferingTime()),r.ns_st_sp=String(s),r.ns_st_id=String(n),0<u&&(r.ns_st_bc=String(u)),t!=tt.PAUSE&&t!=tt.END&&t!=tt.KEEP_ALIVE&&t!=tt.HEART_BEAT&&null!=t||(r.ns_st_pa=String(i.getPlaybackTime()),r.ns_st_pp=String(a)),t!=tt.PLAY&&null!=t||i.didFirstPlayOccurred()||(r.ns_st_pb="1",i.setFirstPlayOccurred(!0)),J.extend(r,i.getLabels()),r},incrementStarts:function(){s++},incrementPauses:function(){a++,o.incrementPauses()},setPlaylistCounter:function(t){e=t},incrementPlaylistCounter:function(){e++},addPlaybackTime:function(t){if(0<=o.getPlaybackTimestamp()){var e=t-o.getPlaybackTimestamp();o.setPlaybackTimestamp(-1),o.setPlaybackTime(o.getPlaybackTime()+e),i.setPlaybackTime(i.getPlaybackTime()+e)}},addBufferingTime:function(t){if(0<=o.getBufferingTimestamp()){var e=t-o.getBufferingTimestamp();o.setBufferingTimestamp(-1),o.setBufferingTime(o.getBufferingTime()+e),i.setBufferingTime(i.getBufferingTime()+e)}},getBufferingTime:function(){var t=c;return 0<=o.getBufferingTimestamp()&&(t+=+new Date-o.getBufferingTimestamp()),t},setBufferingTime:function(t){c=t},getPlaybackTime:function(){var t=l;return 0<=o.getPlaybackTimestamp()&&(t+=+new Date-o.getPlaybackTimestamp()),t},setPlaybackTime:function(t){l=t},getStarts:function(){return s},setStarts:function(t){s=t},getPauses:function(){return a},setPauses:function(t){a=t},getRebufferCount:function(){return u},incrementRebufferCount:function(){u++},setRebufferCount:function(t){u=t},didFirstPlayOccurred:function(){return h},setFirstPlayOccurred:function(t){h=t}}),o=new P,r={},i.reset()},L=(S=I,w={},k=A=-1,J.extend(S,{activeIndex:k,newInstance:N,new:N,destroyInstance:M,destroy:M,newPlaylist:function(t){return t=t||{},O().setPlaylist(t),O().getPlaylist()},newClip:function(t,e,r){return t=t||{},"number"==typeof e&&(t.ns_st_cn=e),O().setClip(t,r),O().getClip()},notify:function(t,e,r){return void 0!==t&&(r=r||null,e=e||{},O().notify(t,e,r))},setLabels:function(t){void 0!==t&&O().setLabels(t)},getLabels:function(){return O().getLabels()},setPlaylistLabels:function(t){void 0!==t&&O().getPlaylist().setLabels(t)},getPlaylistLabels:function(){return O().getPlaylist().getLabels()},setClipLabels:function(t){void 0!==t&&O().getClip().setLabels(t)},getClipLabels:function(){return O().getClip().getLabels()},resetInstance:function(t){return O().reset(t||{})},resetPlaylist:function(t){return O().getPlaylist().reset(t||{})},resetClip:function(t){return O().getClip().reset(t||{})},viewEvent:function(t){return t=t||{},O().viewNotify(null,t)},customEvent:function(t,e){return 2<arguments.length&&(t=e,e=arguments[2]),t=t||{},"number"==typeof e&&(t.ns_st_po=e),O().customNotify(t,e)},exportState:function(){return O().exportState()},importState:function(t){O().importState(t)}}),I);function I(t,e,r){function n(t){var e=0;if(null!=H)for(var r=0;r<H.length;r++){var n=H[r],i=n.playingtime;if(!i||t<i){e=n.interval;break}}return e}function d(){o();var t=n(V.getClip().getPlaybackTime());if(0<t){var e=0<K?K:t;h=Q.setTimeout(i,e)}K=0}function f(){o();var t=n(V.getClip().getPlaybackTime());K=t-V.getClip().getPlaybackTime()%t,null!=h&&o()}function p(){z=K=0}function i(){z++,E(k(tt.HEART_BEAT,null)),K=0,d()}function o(){null!=h&&(Q.clearTimeout(h),h=null)}function g(){v(),l=Q.setTimeout(s,W)}function s(){E(k(tt.KEEP_ALIVE,null)),U++,g()}function v(){null!=l&&(Q.clearTimeout(l),l=null)}function y(){P==et.PLAYING&&(V.incrementRebufferCount(),V.incrementPauses(),E(k(tt.PAUSE,null)),U++,P=et.PAUSED)}function m(){null!=R&&(Q.clearTimeout(R),R=null)}function a(t){return t==et.PLAYING||t==et.PAUSED}function _(){C&&(Q.clearTimeout(C),C=null)}function b(t,e,r){if(_(),r)C=Q.setTimeout((l=t,h=e,function(){b(l,h)}),r);else if(function(t){return null!=t&&A()!=t}(t)){var n=A(),i=B,o=w(e),s=0<=i?o-i:0;(function(t,e){var r=w(e);if(t==et.PLAYING)V.addPlaybackTime(r),f(),v();else if(t==et.BUFFERING)V.addBufferingTime(r),m();else if(t==et.IDLE){var n=J.getKeys(V.getClip().getLabels());V.getClip().reset(n)}})(A(),e),function(t,e){var r=w(e);j=function(t){var e=-1;return t.hasOwnProperty("ns_st_po")&&(e=J.getInteger(t.ns_st_po)),e}(e),t==et.PLAYING?(d(),g(),V.getClip().setPlaybackTimestamp(r),S(t)&&(V.getClip().incrementStarts(),V.getStarts()<1&&V.setStarts(1))):t==et.PAUSED?S(t)&&V.incrementPauses():t==et.BUFFERING?(V.getClip().setBufferingTimestamp(r),G&&(m(),N.isPauseOnBufferingEnabled()&&S(et.PAUSED)&&(R=Q.setTimeout(y,q)))):t==et.IDLE&&p()}(t,e),function(t){t}(A()),function(t){x=t,B=+new Date}(t);for(var a=0,u=D.length;a<u;a++)D[a](n,t,e,s);T(e),V.setRegisters(e,t),V.getClip().setRegisters(e,t);var c=k(et.toEventType(t),e);J.extend(c,e),S(x)&&(E(c),P=x,U++)}var l,h}function T(t){var e=t.ns_st_mp;null!=e&&(L=e,delete t.ns_st_mp),null!=(e=t.ns_st_mv)&&(I=e,delete t.ns_st_mv),null!=(e=t.ns_st_ec)&&(U=Number(e),delete t.ns_st_ec)}function E(t,e){void 0===e&&(e=!0),e&&function(t){O=k(null),J.extend(O,t)}(t);var r=N.getPixelURL();if(c){if(!function(){var t=c.getAppContext(),e=c.getSalt(),r=c.getPixelURL();return null==t||null==e||0==e.length||null==r||0==r.length}()){var n=X.am,i=X.et,o=n.newApplicationMeasurement(c,i.HIDDEN,t,r);c.getQueue().offer(o)}}else r&&Q.httpGet(function(t,e){for(var r,n=$.encodeURIComponent||escape,i=[],o=rt.LABELS_ORDER,s=t.split("?"),a=s[0],u=s[1].split("&"),c=0,l=u.length;c<l;c++){var h=u[c].split("="),d=unescape(h[0]),f=unescape(h[1]);d&&(e[d]=f)}for(var p={},g=0,v=o.length;g<v;g++){var y=o[g];if(e.hasOwnProperty(y)){var m=e[y];void 0!==m&&null!=m&&(p[y]=!0,i.push(n(y)+"="+n(e[y])))}}for(var _ in e)if(e.hasOwnProperty(_)){if(p[_])continue;var b=e[_];void 0!==b&&null!=b&&i.push(n(_)+"="+n(e[_]))}r=(r=a+"?"+i.join("&"))+(r.indexOf("&c8=")<0?"&c8="+n(Z.title):"")+(r.indexOf("&c7=")<0?"&c7="+n(Z.URL):"")+(r.indexOf("&c9=")<0?"&c9="+n(Z.referrer):"");var T=J.browserAcceptsLargeURLs()?rt.URL_LENGTH_LIMIT:rt.RESTRICTED_URL_LENGTH_LIMIT;if(r.length>T&&0<r.indexOf("&")){var E=r.substr(0,T-8).lastIndexOf("&");r=(r.substring(0,E)+"&ns_cut="+n(r.substring(E+1))).substr(0,T)}return r}(r,t))}function S(t){return(t!=et.PAUSED&&t!=et.IDLE||P!=et.IDLE&&null!=P)&&(t!=et.BUFFERING&&P!=t)}function w(t){var e=-1;return t.hasOwnProperty("ns_ts")&&(e=Number(t.ns_ts)),e}function A(){return x}function k(t,e){var r,n;n=1==arguments.length?(r=et.toEventType(x),t):(r=t,e);var i={};if("undefined"!=typeof document){var o=document;i.c7=o.URL,i.c8=o.title,i.c9=o.referrer}return null!=n&&J.extend(i,n),i.hasOwnProperty("ns_ts")||(i.ns_ts=String(+new Date)),null==r||i.hasOwnProperty("ns_st_ev")||(i.ns_st_ev=tt.toString(r)),J.extend(i,N.getLabels()),function(t,e){var r=e||{};if(r.ns_st_ec=String(U),!r.hasOwnProperty("ns_st_po")){var n=j,i=w(r);(t==tt.PLAY||t==tt.KEEP_ALIVE||t==tt.HEART_BEAT||null==t&&x==et.PLAYING)&&(n+=i-V.getClip().getPlaybackTimestamp()),r.ns_st_po=J.getInteger(n)}t==tt.HEART_BEAT&&(r.ns_st_hc=String(z))}(r,i),V.createLabels(r,i),V.getClip().createLabels(r,i),i.hasOwnProperty("ns_st_mp")||(i.ns_st_mp=L),i.hasOwnProperty("ns_st_mv")||(i.ns_st_mv=I),i.hasOwnProperty("ns_st_ub")||(i.ns_st_ub="0"),i.hasOwnProperty("ns_st_br")||(i.ns_st_br="0"),i.hasOwnProperty("ns_st_pn")||(i.ns_st_pn="1"),i.hasOwnProperty("ns_st_tp")||(i.ns_st_tp="1"),i.hasOwnProperty("ns_st_it")||(i.ns_st_it="c"),i.ns_st_sv=rt.STREAMSENSE_VERSION,i.ns_type="hidden",i}var u,C,x,c,R,l,h,P,L,I,O,D,N=this,M=500,F=null,B=0,j=0,U=0,V=null,G=!0,H=rt.DEFAULT_HEARTBEAT_INTERVAL,W=rt.DEFAULT_KEEP_ALIVE_INTERVAL,q=rt.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,K=0,z=0,Y=!1,X={};r?Q.setPlatformAPI(r):Q.autoSelect(),J.extend(this,{reset:function(t){V.reset(t),V.setPlaylistCounter(0),V.setPlaylistId(+new Date+"_1"),V.getClip().reset(t),null==t||t.isEmpty()?u={}:J.filterMap(u,t),U=1,z=0,f(),p(),v(),m(),_(),x=et.IDLE,B=-1,P=null,L=rt.DEFAULT_PLAYERNAME,I=rt.STREAMSENSE_VERSION,O=null},setPauseOnBufferingInterval:function(t){q=t},getPauseOnBufferingInterval:function(){return q},setKeepAliveInterval:function(t){W=t},getKeepAliveInterval:function(){return W},setHeartbeatIntervals:function(t){H=t},notify:function(){var t,e,r,n;if(e=arguments[0],n=3==arguments.length?(r=arguments[1],arguments[2]):(r={},arguments[1]),tt.toString(e)){t=function(t){return t==tt.PLAY?et.PLAYING:t==tt.PAUSE?et.PAUSED:t==tt.BUFFER?et.BUFFERING:t==tt.END?et.IDLE:null}(e);var i=J.extend({},r);if(function(t){w(t)<0&&(t.ns_ts=String(+new Date))}(i),i.hasOwnProperty("ns_st_po")||(i.ns_st_po=J.getInteger(n).toString()),e==tt.PLAY||e==tt.PAUSE||e==tt.BUFFER||e==tt.END)N.isThrottlingEnabled()&&a(x)&&a(t)&&(x!=et.PLAYING||t!=et.PAUSED||C)?b(t,i,M):b(t,i);else{var o=k(e,i);J.extend(o,i),E(o,!1),U++}}},getLabels:function(){return u},getState:function(){return x},setLabels:function(t){for(var e in t)t.hasOwnProperty(e)&&N.setLabel(e,t[e])},getLabel:function(t){return u[t]},setLabel:function(t,e){null==e?delete u[t]:u[t]=e},setPixelURL:function(t){if(null==t||0==t.length)return null;var e=decodeURIComponent||unescape,r=t.indexOf("?");if(0<=r){if(r<t.length-1){for(var n=t.substring(r+1).split("&"),i=0,o=n.length;i<o;i++){var s=n[i].split("=");2==s.length?N.setLabel(s[0],e(s[1])):1==s.length&&N.setLabel(rt.PAGE_NAME_LABEL,e(s[0]))}t=t.substring(0,r+1)}}else t+="?";return F=t},getPixelURL:function(){return F||("undefined"!=typeof ns_p&&"string"==typeof ns_p.src?F=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?F=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null)},isPauseOnBufferingEnabled:function(){return G},setPauseOnBufferingEnabled:function(t){G=t},isThrottlingEnabled:function(){return Y},setThrottlingEnabled:function(t){Y=t},setThrottlingDelay:function(t){t&&0<t&&(M=t)},getThrottlingDelay:function(){return M},setClip:function(t,e){var r=!1;return x==et.IDLE&&(V.getClip().reset(),V.getClip().setLabels(t,null),e&&V.incrementStarts(),r=!0),r},setPlaylist:function(t){var e=!1;return x==et.IDLE&&(V.incrementPlaylistCounter(),V.reset(),V.getClip().reset(),V.setLabels(t,null),e=!0),e},importState:function(t){reset();var e=J.extend({},t);V.setRegisters(e,null),V.getClip().setRegisters(e,null),T(e),U++},exportState:function(){return O},getVersion:function(){return rt.STREAMSENSE_VERSION},addListener:function(t){D.push(t)},removeListener:function(t){D.splice(J.indexOf(t,D),1)},getClip:function(){return V.getClip()},getPlaylist:function(){return V},setHttpGet:function(t){"function"==typeof t&&(Q.httpGet=t)},setHttpPost:function(t){"function"==typeof t&&(Q.httpPost=t)}}),J.extend(this,{adNotify:function(t,e,r){(e=e||{}).ns_st_ad=1,t>=tt.AD_PLAY&&t<=tt.AD_CLICK&&N.notify(t,e,r)},customNotify:function(t,e){N.notify(tt.CUSTOM,t,e)},viewNotify:function(t,e){(t=t||N.getPixelURL())&&function(t,e){var r=t||"",n=$.comScore||$.sitestat||function(t){var e,r,n,i,o,s="comScore=",a=Z.cookie,u="",c=J.browserAcceptsLargeURLs()?rt.URL_LENGTH_LIMIT:rt.RESTRICTED_URL_LENGTH_LIMIT,l=$.encodeURIComponent||escape;if(a.indexOf(s)+1)for(i=0,o=(n=a.split(";")).length;i<o;i++)(r=n[i].indexOf(s))+1&&(u="&"+unescape(n[i].substring(r+s.length)));(t+="&ns__t="+ +new Date+"&ns_c="+(Z.characterSet||Z.defaultCharset||"")+u).length>c&&0<t.indexOf("&")&&(e=t.substr(0,c-8).lastIndexOf("&"),t=(t.substring(0,e)+"&ns_cut="+l(t.substring(e+1))).substr(0,c)),Q.httpGet(t),"undefined"==typeof ns_p&&(ns_p={src:t}),ns_p.lastMeasurement=t};if(void 0!==e){var i=[],o=$.encodeURIComponent||escape;for(var s in e)e.hasOwnProperty(s)&&i.push(o(s)+"="+o(e[s]));/[\?\&]$/.test(r)||(r+="&"),r+=i.join("&")}n(r)}(t,e)}}),it.comScore&&(X=it.comScore.exports,c=X.c()),u={},U=1,x=et.IDLE,V=new nt,G=!(R=null),h=null,z=0,p(),Y=!1,P=C=l=null,j=0,D=[],N.reset(),t&&N.setLabels(t),e&&N.setPixelURL(e)}function O(t,e){return w[k]||N(t,e)}function D(){k=-1;for(var t=0;t<=A;t++)if(w.hasOwnProperty(String(t))){k=t;break}return it.StreamSense.activeIndex=k}function N(t,e){return e=e||null,(t=t||null)&&"object"==typeof t&&(e=t,t=null),w[++A]=new it.StreamSense(e,t),D(),w[A]}function M(){var t=!1,e=k;if("number"==typeof arguments[0]&&isFinite(arguments[0]))e=arguments[0];else if(arguments[0]instanceof it.StreamSense)for(var r in w)if(w.hasOwnProperty(r)&&w[r]===arguments[0]){e=r;break}return w.hasOwnProperty(String(e))&&(t=w[e],delete w[e],t.reset(),D()),t}return L.AdEvents=R,L.PlayerEvents=tt,L.InternalStates=et,L.getPlatformAPI=function(){return Q},L}(),it.StreamingTag=it.StreamingTag||(m=it.Utils,_=it.StreamSense,b=it.StreamSense.PlayerEvents,it.StreamSense.AdEvents,T=it.StreamSense.InternalStates||null,E=null!=it.StreamSense.InternalStates,function(e){function n(t){return m.exists(t)||(t={}),m.exists(t.ns_st_ci)||(t.ns_st_ci="0"),m.exists(t.c3)||(t.c3="*null"),m.exists(t.c4)||(t.c4="*null"),m.exists(t.c6)||(t.c6="*null"),t}function r(t){return 0<l&&l<=t?h+=t-l:h=0,h}function i(t){p.getState()!=T.IDLE&&p.getState()!=T.PAUSED?p.notify(b.END,r(t)):p.getState()==T.PAUSED&&p.notify(b.END,h)}function o(t,e,r){if(m.exists(t)&&m.exists(e)&&m.exists(r)){var n=e[t],i=r[t];return m.exists(n)&&m.exists(i)&&n===i}return!1}function s(t,e){i(t);var r={ns_st_cn:++c,ns_st_pn:"1",ns_st_tp:"0"};m.extend(r,e),p.setClip(r),d=e,l=t,h=0,p.notify(b.PLAY,h)}function a(t){var e=+new Date;i(e),c++,t=n(t);var r={ns_st_cn:c,ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};m.extend(r,t),p.setClip(r),h=0,p.notify(b.PLAY,h),l=e,f=!1}function u(t,e){var r=+new Date;t=n(t),y==v.None&&(y=e),f&&y==e&&function(t){return o("ns_st_ci",d,t)&&o("c3",d,t)&&o("c4",d,t)&&o("c6",d,t)}(t)?(p.getClip().setLabels(t),p.getState()!=T.PLAYING&&(l=r,p.notify(b.PLAY,h))):s(r,t),f=!0,y=e}var c=0,l=0,h=0,d=null,f=!1,p=null,g=!1,v={None:0,AudioContent:1,VideoContent:2},y=v.None;m.extend(this,{playAdvertisement:function(){p&&(g&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead."),a({ns_st_ct:"va"}))},playVideoAdvertisement:function(t){if(p){var e={ns_st_ct:"va"};t&&m.extend(e,t),a(e)}},playAudioAdvertisement:function(t){if(p){var e={ns_st_ct:"aa"};t&&m.extend(e,t),a(e)}},playContentPart:function(t){if(p){g&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var e={ns_st_ct:"vc"};t&&m.extend(e,t),u(e,v.VideoContent)}},playVideoContentPart:function(t){if(p){var e={ns_st_ct:"vc"};t&&m.extend(e,t),u(e,v.VideoContent)}},playAudioContentPart:function(t){if(p){var e={ns_st_ct:"ac"};t&&m.extend(e,t),u(e,v.AudioContent)}},stop:function(){if(p){var t=+new Date;p.notify(b.PAUSE,r(t))}}}),function(){if(E)if(it.comScore)(p=new _).setLabel("ns_st_it","r");else if(m.exists(e))if(g=m.isTrue(e.debug),m.exists(e.customerC2)&&0<e.customerC2.length){var t=e.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");(p=new _).setPixelURL(t+".scorecardresearch.com/p?c1=2"),p.setLabel("c2",e.customerC2),p.setLabel("ns_st_it","r")}else g&&console&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.")}()})}catch(t){}i(void 0!==it?it:window.ns_)}).call(t,void 0,void 0,void 0,void 0,function(t){e.exports=t})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],122:[function(t,e,r){(function(t){(function(t,e,r,n,i){function o(e,t,r){if(!1===t.hasOwnProperty("partnerCode"))return!1;var n=document.createElement("script");r=r||e&&(void 0!==e.O?e.O.parentNode:document.body)||document.body;var i=[],o={adsManager:e,ids:t,imaSDK:!0,events:[],dispatchEvent:function(t){var e=this.sendEvent,r=this.events;e?(r&&(r.push(t),t=r),e(t)):r.push(t)}},s={complete:"AdVideoComplete",firstquartile:"AdVideoFirstQuartile",impression:"AdImpression",loaded:"AdLoaded",midpoint:"AdVideoMidpoint",pause:"AdPaused",skip:"AdSkipped",start:"AdVideoStart",thirdquartile:"AdVideoThirdQuartile",volumeChange:"AdVolumeChange"};if(google&&google.ima&&e){var a,u="_moatApi"+Math.floor(1e8*Math.random());for(a in google.ima.AdEvent.Type){function c(t){if(o.sendEvent){for(t=i.length-1;0<=t;t--)e.removeEventListener(i[t].type,i[t].func);o.sendEvent(o.events)}else o.events.push({type:s[t.type]||t.type,adVolume:e.getVolume()})}e.addEventListener(google.ima.AdEvent.Type[a],c),i.push({type:google.ima.AdEvent.Type[a],func:c})}}var l,h;u=void 0!==u?u:"";try{h=(l=r.ownerDocument).defaultView||l.parentWindow}catch(t){l=document,h=window}return h[u]=o,n.type="text/javascript",r&&r.appendChild(n),n.src="https://z.moatads.com/"+t.partnerCode+"/moatvideo.js#"+u,o}i(o)}).call(t,void 0,void 0,void 0,void 0,function(t){e.exports=t})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],123:[function(t,e,r){(function(t){(function(t,e,r,n,i){function o(t,e,r,n,i){var o,s,a=document.createElement("script"),u=[];e={adData:{ids:e,duration:r,url:i},dispatchEvent:function(t){this.sendEvent?(u&&(u.push(t),t=u,u=!1),this.sendEvent(t)):u.push(t)}},r="_moatApi"+Math.floor(1e8*Math.random());try{s=(o=t.ownerDocument).defaultView||o.parentWindow}catch(t){o=document,s=window}return s[r]=e,a.type="text/javascript",t&&t.insertBefore(a,t.childNodes[0]||null),a.src="https://z.moatads.com/"+n+"/moatvideo.js#"+r,e}i(o)}).call(t,void 0,void 0,void 0,void 0,function(t){e.exports=t})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],124:[function(t,e,r){(function(t){(function(t,e,r,n,i){var o,s,a;o=window,"".trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")}),s={isUnsafe:!1,isXML:function(t){return"object"==typeof t&&void 0!==t.nodeType},getRoot:function(t){return 9===t.nodeType?t.documentElement:11===t.nodeType?t.firstChild:t},convert:function(t){var e={};if("string"==typeof t){var r=null,n=null,i=!0;try{(r="DOMParser"in o?new DOMParser:new ActiveXObject("MSXML2.DOMDocument")).async=!1}catch(t){throw Error("XML Parser could not be instantiated")}if("parseFromString"in r?i="parsererror"!==(n=r.parseFromString(t,"text/xml")).documentElement.tagName:n=!!(i=r.loadXML(t))&&r,!i)throw Error("Error parsing XML string");t=n}else t=this.isXML(t)?t:void 0;if(!t)throw Error("Unable to parse XML");return 3===t.nodeType||4===t.nodeType?t.nodeValue:(e[(t=this.getRoot(t)).nodeName]={},this.process(t,e[t.nodeName]),e)},process:function(t,e){var r,n,i,o,s;if(t.hasChildNodes())for(o=t.childNodes.length,i=0;i<o;i++)switch(r=t.childNodes[i],r.nodeType){case 3:e.Text=e.Text?e.Text+r.nodeValue.trim():r.nodeValue.trim();break;case 4:r=r[r.text?"text":"nodeValue"],e.Text=e.Text?e.Text+r:r;break;case 1:s={},(n=r.nodeName)in e?e[n].length?(this.process(r,s),e[n].push(s)):(this.process(r,s),e[n]=[e[n],s]):(this.process(r,s),e[n]=s)}if(t.attributes.length)for(o=t.attributes.length-1;0<=o;o--)i=(r=t.attributes[o]).name.trim(),r=r.value,e[(this.isUnsafe?"":"@")+i]=r}},a={xmlToJSON:function(t,e){return s.isUnsafe=void 0!==e&&e,s.convert(t)}},o.xml=o.xml||a,i("undefined"!=typeof xml?xml:window.xml)}).call(t,void 0,void 0,void 0,void 0,function(t){e.exports=t})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[119]);